"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[6144],{27986:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(5163),r=n(2784),o=n(98569),a=n(62143),l=function(e){return r.createElement(o.Z,(0,i.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M3 10.5v3h18v-3H3z",fill:"currentColor"}))},s=function(e){return r.createElement(o.Z,(0,i.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.035 16.812l-.001.002 2.121 2.121.002-.002 2.121-2.12 9.19-9.192-2.12-2.121-9.191 9.19-3.536-3.534-2.121 2.12 3.535 3.536z",fill:"currentColor"}))},c=function(e){return e["data-indeterminate"]?r.createElement(l,(0,i.__assign)({},e)):r.createElement(s,(0,i.__assign)({},e))},u=(0,r.forwardRef)((function(e,t){var n=e.className,o=e.sx,l=e.defaultChecked,s=void 0!==l&&l,u=e.checked,d=e.indeterminate,p=void 0!==d&&d,h=e.size,f=void 0===h?16:h,x=e.onChange,m=e.children,g=(0,i.__rest)(e,["className","sx","defaultChecked","checked","indeterminate","size","onChange","children"]),b=r.useRef(null!=u).current,v=r.useState(s),y=v[0],w=v[1];return b&&u!==y&&w(void 0!==u&&u),r.createElement(r.Fragment,null,r.createElement(a.Z,{className:n,sx:o,__css:{mr:"xs",flexShrink:0,width:f,height:f,lineHeight:"number"==typeof f?f+"px":f,"> svg":{boxSizing:"border-box",cursor:"pointer",border:"1px solid",borderColor:"t.disabled",borderRadius:"small",maxWidth:"100%",maxHeight:"100%",bg:"transparent",fill:"transparent"},"> svg path":{fill:"inherit"},":hover":{"input:not(:disabled) ~ svg":{borderColor:"primary"}},"input:checked ~ svg":{border:"none",bg:"primary",fill:p?"checkbox.indeterminateFill":"bg1"},"input:disabled ~ svg":{cursor:"not-allowed",bg:"line",fill:"line",border:"none"},"input:checked:disabled ~ svg":{fill:"t.disabled"}}},r.createElement(a.Z,(0,i.__assign)({ref:t,as:"input",type:"checkbox","data-bn-type":"checkbox",hidden:!0},g,{checked:y,"data-indeterminate":y&&p,onChange:function(e){var t=!y;b||w(t),e.target.checked=t,e.currentTarget.checked=t,x&&x(e)},sx:{position:"absolute",opacity:0,zIndex:-1,width:1,height:1,overflow:"hidden"}})),r.createElement(c,{"aria-hidden":"true","data-indeterminate":p})),m)}));u.displayName="Checkbox";const d=u},37407:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(5163),r=n(2784),o=n(98569);const a=function(e){return r.createElement(o.Z,(0,i.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M16.5 8.49v2.25L12 15.51l-4.5-4.77V8.49h9z",fill:"currentColor"}))}},8335:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(5163),r=n(2784),o=n(98569);const a=function(e){return r.createElement(o.Z,(0,i.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.035 16.812l-.001.002 2.121 2.121.002-.002 2.121-2.12 9.19-9.192-2.12-2.121-9.191 9.19-3.536-3.534-2.121 2.12 3.535 3.536z",fill:"currentColor"}))}},16831:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(5163),r=n(2784),o=n(62143),a=n(92036),l=n(48658),s=n(72779),c=n.n(s),u="32px",d="24px",p=(0,r.forwardRef)((function(e,t){var n=e.children,a=e.labelMarginLeft,l=e.moveUp,s=e.isLargeOutline,p=e.required;return n?r.createElement(o.Z,(0,i.__assign)({ref:t,as:"label",className:c()({"bn-input-label-required":p},"bn-input-label"),tx:"forms",variant:"label"},e,{__css:{position:"absolute",pointerEvents:l?"":"none",top:l?s?"-24px":"-32px":0,left:a,lineHeight:s?d:u,transitionProperty:"top,font-size",transitionDuration:".3s",transitionTimingFunction:"ease",zIndex:"1",cursor:"text","&.bn-input-label-required::before":{display:"inline-block",marginRight:"minor",color:"error",content:'"*"'}}})):null}));p.displayName="TextFieldLabel";var h=(0,r.forwardRef)((function(e,t){var n=e.onFocus,a=e.onBlur,l=e.onChange,s=e.type,c=(0,i.__rest)(e,["onFocus","onBlur","onChange","type"]),u="number"===s?{lang:"en"}:{};return r.createElement(o.Z,(0,i.__assign)({ref:t,as:"input","data-bn-type":"input"},u,c,{type:s,onFocus:n,onBlur:a,onChange:l,__css:{width:"100%",height:"100%",padding:"0",outline:"none",border:"none",bg:"inherit",opacity:1,"&::placeholder":{color:"t.placeholder",fontSize:"14px"}}}))}));h.displayName="TextFieldInput";var f=(0,r.forwardRef)((function(e,t){var n=e.variant,s=void 0===n?"default":n,c=e.id,f=e.value,x=e.defaultValue,m=e.label,g=e.labelFixed,b=void 0!==g&&g,v=e.placeholder,y=e.error,w=e.disabled,C=e.prefix,j=e.suffix,_=e.infoText,Z=void 0===_?"":_,k=e.errorText,E=void 0===k?"":k,S=e.onFocus,O=e.onBlur,R=e.onChange,N=e.boxProps,T=e.required,F=e.sx,I=void 0===F?{}:F,M=(0,i.__rest)(e,["variant","id","value","defaultValue","label","labelFixed","placeholder","error","disabled","prefix","suffix","infoText","errorText","onFocus","onBlur","onChange","boxProps","required","sx"]),P=r.useState(""),z=P[0],B=P[1],L=r.useRef(null!=f).current,D=r.useState(x),q=D[0],H=D[1];L&&f!==q&&H(f);var $=!m||b?v:"",W="outline"!==s&&"outlineLarge"!==s||b?"0px":"xs",A=y?"error":"info",K="inline"===s?"":y?E:Z,Q="inline"!==s?"":y?E:"focus"===z?Z:"",V="outlineLarge"===s,G=w?"disabled":y?"error":z;""!==G&&(G="bn-input-status-"+G);var Y="string"==typeof m?m:M["area-label"];return r.createElement(a.Z,(0,i.__assign)({tx:"textField",className:G,variant:s},N,{__css:{display:"inline-flex",position:"relative",height:V?"40px":u,mt:m?V?d:u:"minor",mb:K.length>0?"16px":"0px",alignItems:"center",lineHeight:1.6,"&.bn-input-status-focus .bn-input-label":{top:V?"-24px":"-32px"}}}),C&&r.createElement(o.Z,{className:"bn-input-prefix"},C),r.createElement(h,(0,i.__assign)({id:c,onFocus:function(e){B("focus"),S&&S(e)},onBlur:function(e){B(""),O&&O(e)},onChange:function(e){L||H(e.target.value),R&&R(e)},ref:t,value:q,"aria-label":Y,disabled:w,placeholder:$,sx:I,required:T},M)),j&&r.createElement(o.Z,{className:"bn-input-suffix"},j),r.createElement(p,{htmlFor:c,labelMarginLeft:W,moveUp:b||!!q&&""!==q,isLargeOutline:V,required:T},m),K.length>0&&r.createElement(l.Z,{className:"bn-input-helper-text",variant:"textField.helperText."+A,__css:{position:"absolute",bottom:"-20px",lineHeight:"16px"}},K),Q.length>0&&r.createElement(o.Z,{className:"bn-input-tooltip"},r.createElement(o.Z,{className:"bn-input-tooltip-arrow"}),r.createElement(o.Z,{className:"bn-input-tooltip-content"},Q)))}));f.displayName="TextField";const x=f},66306:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(5163),r=n(2784),o=n(62143),a=n(92036),l=n(48658),s=n(72779),c=n.n(s),u="32px",d=(0,r.forwardRef)((function(e,t){var n=e.children,a=e.required;return n?r.createElement(o.Z,(0,i.__assign)({ref:t,as:"label",className:c()({"bn-input-label-required":a},"bn-input-label"),tx:"forms",variant:"label"},e,{__css:{position:"absolute",top:"-32px",left:"0px",lineHeight:u,zIndex:"1",cursor:"text","&.bn-input-label-required::before":{display:"inline-block",marginRight:"minor",color:"error",content:'"*"'}}})):null})),p=(0,r.forwardRef)((function(e,t){return e.children?r.createElement(o.Z,(0,i.__assign)({ref:t,as:"label",className:"bn-input-label",tx:"forms",variant:"label"},e,{__css:{position:"absolute",top:"-32px",right:0,lineHeight:u,zIndex:"1",cursor:"text"}})):null}));d.displayName="TextFieldLabel";var h=(0,r.forwardRef)((function(e,t){var n=e.onFocus,a=e.onBlur,l=e.onChange,s=(0,i.__rest)(e,["onFocus","onBlur","onChange"]);return r.createElement(o.Z,(0,i.__assign)({ref:t,as:"input","data-bn-type":"input"},s,{onFocus:n,onBlur:a,onChange:l,__css:{width:"100%",height:"100%",padding:"0",outline:"none",border:"none",bg:"inherit",opacity:1,"&::placeholder":{color:"t.placeholder",fontSize:"14px"}}}))}));h.displayName="TextFieldInput";var f=(0,r.forwardRef)((function(e,t){var n=e.variant,s=void 0===n?"default":n,f=e.id,x=e.value,m=e.defaultValue,g=e.label,b=e.placeholder,v=e.error,y=e.disabled,w=e.prefix,C=e.suffix,j=e.infoText,_=void 0===j?"":j,Z=e.errorText,k=void 0===Z?"":Z,E=e.onFocus,S=e.onBlur,O=e.onChange,R=e.boxProps,N=e.required,T=e.extraInfo,F=e.size,I=void 0===F?"lg":F,M=(0,i.__rest)(e,["variant","id","value","defaultValue","label","placeholder","error","disabled","prefix","suffix","infoText","errorText","onFocus","onBlur","onChange","boxProps","required","extraInfo","size"]),P=r.useState(""),z=P[0],B=P[1],L=r.useRef(null!=x).current,D=r.useState(m),q=D[0],H=D[1];L&&x!==q&&H(x);var $=v?k:_,W=r.useState(16),A=W[0],K=W[1],Q=v?"error":"info",V="string"==typeof g?g:M["area-label"],G=y?"disabled":v?"error":z;return""!==G&&(G="bn-input-status-"+G),r.createElement(a.Z,(0,i.__assign)({tx:"textFieldV2",className:c()([G]),variant:s},R,{__css:(0,i.__assign)((0,i.__assign)((0,i.__assign)((0,i.__assign)({display:"inline-flex",position:"relative",mt:g?u:"0px",mb:$.length>0?A+"px":"0px",alignItems:"center",lineHeight:1.6,height:"48px"},"lg"===I&&{height:"48px"}),"md"===I&&{height:"40px"}),"sm"===I&&{height:"32px"}),{"&.bn-input-status-focus .bn-input-label":{top:"-32px"}})}),w&&r.createElement(o.Z,{className:"bn-input-prefix"},w),r.createElement(h,(0,i.__assign)({id:f,onFocus:function(e){B("focus"),E&&E(e)},onBlur:function(e){B(""),S&&S(e)},onChange:function(e){L||H(e.target.value),O&&O(e)},ref:t,value:q,"aria-label":V,disabled:y,placeholder:b,required:N},M)),C&&r.createElement(o.Z,{className:"bn-input-suffix"},C),r.createElement(d,{htmlFor:f,required:N},g),T&&r.createElement(p,null,T),$.length>0&&r.createElement(l.Z,{ref:function(e){if(e){var t=e.getBoundingClientRect().height;K(t)}},className:"bn-input-helper-text",variant:"textField.helperText."+Q,__css:{position:"absolute",bottom:-1*A-4+"px",lineHeight:A+"px"}},$))}));f.displayName="TextFieldV2";const x=f},29559:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(39601),r=n.n(i),o=n(82609),a=n.n(o)()(r());a.push([e.id,".alb-text-align {\n  text-align: right !important;\n}\n\n.alb-direction-rtl {\n  direction: initial !important;\n  align-items: flex-end !important;\n}\n\n.alb-transform-rotate {\n  display: inline-block;\n  transform: rotate(180deg);\n}\n\n.alb-justify-content {\n  justify-content: flex-start;\n}\n\n.alb-date-range {\n  left: -9999px !important;\n}\n",""]);const l=a},30485:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(46062),r=n.n(i),o=n(44036),a=n.n(o),l=n(96793),s=n.n(l),c=n(17892),u=n.n(c),d=n(11173),p=n.n(d),h=n(42464),f=n.n(h),x=n(29559),m={};m.styleTagTransform=f(),m.setAttributes=u(),m.insert=s().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=p(),r()(x.Z,m);const g=x.Z&&x.Z.locals?x.Z.locals:void 0},43993:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var i=n(52322),r=n(2784),o=n(27866),a=n(92036),l=n(38896),s=n(5271),c=n(60520),u=n(53421),d=n(36628),p=n(11001),h=n(71615),f=n(59545);const x={userSelect:"none",fontSize:"12px",height:"40px",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,minWidth:"100px",borderTop:"2px solid",cursor:"pointer",lineHeight:"16px","&.buy-button":{":hover":{bg:e=>(0,f.DZ)(e.colors.buy,.7)},bg:e=>(0,f.DZ)(e.colors.buy,.15),borderColor:"buy"},"&.sell-button":{":hover":{bg:e=>(0,f.DZ)(e.colors.sell,.7)},bg:e=>(0,f.DZ)(e.colors.sell,.15),borderColor:"sell"},padding:"2px 0 3px",".title":{color:"t.secondary"},".text":{color:"t.primary"}},m={bg:"bg1",pt:"xs",".container":{width:"25px",mx:"2px",flexDirection:"column",alignItems:"center",cursor:"pointer",color:"t.third","&.active":{"& > div:first-of-type":{bg:"t.secondary"},color:"t.secondary"}},".stepper":{height:"10px",mb:"2px",width:"23px",bg:"bg3"},".value":{fontSize:"12px",transform:"scale(calc(10/12))",color:"t.third"},".position-value":{flex:1,fontSize:"12px",color:"t.secondary"}},g={minWidth:"312px",width:"auto",position:"absolute",zIndex:"flashOrder",color:"white",minHeight:"40px",alignItems:"center",justifyContent:"space-between",bg:"popupBg","&.drag-hide":{display:"none"}},b={minWidth:"16px",width:"16px",justifyContent:"center",display:"flex",height:"40px",alignItems:"center",cursor:"grab",color:"icons.close",userSelect:"none",bg:"popupBg"},v={fontSize:"12px",flexDirection:"column",justifyContent:"center",minWidth:"100px",padding:"3px 4px 4px 4px",maxWidth:"150px",textAlign:"center",".amount":{"div.bn-input-tooltip":{bottom:"47px",width:"fit-content",left:"50%",transform:"translateX(-50%)","& .bn-input-tooltip-arrow":{left:"50%"},"& .bn-input-tooltip-content":{p:"7px 12px",width:"fit-content",whiteSpace:"nowrap"}},"div:not(.bn-input-tooltip):not(.bn-input-tooltip-arrow):not(.bn-input-tooltip-content)":{border:"none",margin:"0",height:"20px",input:{fontSize:"12px",textAlign:"center"}},".bn-input-prefix":{display:"none"}},"div:first-of-type":{color:"t.secondary"},input:{minWidth:"80px",maxWidth:"100px",width:"auto",bg:"popupBg",color:"t.primary"}},y={userSelect:"none",minWidth:"16px",width:"16px",height:"40px",justifyContent:"center",display:"flex",alignItems:"center",bg:"popupBg",".icon":{cursor:"pointer",flexShrink:0,color:"icons.close","&:hover":{color:"primary"}}},w=({positionDirection:e,type:t="bid",handleClick:n=(()=>{}),dispatch:o=(()=>{})})=>{const{BuyText:c,SellText:u}=(0,l.x_)(e);let d,p,f,m,g=s.PR.BOTH;const{bidPrice:b,askPrice:v}=(0,l.he)(),{positionMode:y}=(0,l.F7)();"bid"===t?(p=c,f=String(v),d="buy-button",m=1,y&&(e===s.RS.OPEN?g=s.PR.LONG:e===s.RS.CLOSE&&(g=s.PR.SHORT))):(p=u,f=String(b),d="sell-button",m=-1,y&&(e===s.RS.OPEN?g=s.PR.SHORT:e===s.RS.CLOSE&&(g=s.PR.LONG)));const w=(0,r.useCallback)((e=>{e.preventDefault(),o({type:h.z,payload:{side:m,positionSide:g}}),n(!0)}),[g,o,m,n]);return(0,r.useMemo)((()=>(0,i.jsxs)(a.Z,Object.assign({onClick:w,sx:x,className:d},{children:[(0,i.jsx)("div",Object.assign({className:"title"},{children:p}),void 0),(0,i.jsx)("div",Object.assign({className:"text"},{children:f}),void 0)]}),void 0)),[w,d,p,f])};var C=n(84755),j=n(72779),_=n.n(j),Z=n(16831),k=n(30485),E=n(59464);const S=/^\d+\.?\d*|%$/,O=/^0+(?=\d)/,R=r.memo((e=>{var{name:t,value:n,error:o,disabled:a=!1,precision:s,errorText:c,infoText:u,placeholder:d,onChange:p,maxLength:h,autoZero:f=!1,inputRef:x,onFocus:m,onBlur:g}=e,b=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["name","value","error","disabled","precision","errorText","infoText","placeholder","onChange","maxLength","autoZero","inputRef","onFocus","onBlur"]);const v="rtl"===(0,l.gm)()?_()(k.Z["alb-text-align"]):"",y=(0,r.useCallback)((e=>{let t=e.target.value;!0===f&&"string"==typeof t&&0===t.indexOf(".")&&(t=`0${t}`),!S.test(t)&&""!==t||isNaN(t)?e.stopPropagation():(t=t.replace(O,""),(0,E.N3)(t)>s&&(t=t.replace(new RegExp(`^(\\d*\\.\\d{${s}})\\d*`),"$1")),h&&t.split(".")[0].length>h&&(t=n),0===s&&(t=t.replace(".","")),p&&(t=p(t)),e.target.value=t)}),[p,h,s,n,f]),w=(0,r.useCallback)((e=>{const t=e.target.value;S.test(t)||(e.target.value=""),null==g||g(e)}),[g]),C=(0,r.useCallback)((e=>{e.target.value||(e.target.value="")}),[]);return(0,i.jsx)(Z.Z,Object.assign({name:t,ref:x,variant:"inline",className:v,type:"text",value:n,placeholder:d,disabled:a,onClick:C,onChange:y,onBlur:w,onFocus:m,error:o,infoText:u,errorText:c},b),void 0)}));var N=n(97060),T=n(26786);const F=({inputRef:e,submitError:t,quantity:n="",setQuantity:o,dispatch:s,onFocus:c})=>{const{getI18n:u}=(0,N.yk)(),[d]=(0,l.eY)(),{cUnit:p,precision:f,helperText:x,minContQty:m,placeholder:g,buyCont:b,buyQty:y,sellCont:w,sellQty:j}=(0,l.ql)({quantity:n}),_=`${u("quantity")} (${p})`,Z=!Number.isNaN(Number(n));return(0,r.useEffect)((()=>{s({type:h.z,payload:{minContQty:m,buyQty:y,sellQty:j,buyCont:b,sellCont:w}})}),[n,m,d]),(0,i.jsxs)(a.Z,Object.assign({sx:v},{children:[(0,i.jsx)("div",{children:_},void 0),(0,i.jsx)("div",Object.assign({className:"amount"},{children:(0,i.jsx)(R,{id:"flashOrderQuantity",inputRef:e,type:Z?"number":"text",step:(0,T.nH)(f),precision:f,value:n,placeholder:g,maxLength:C.ze,error:Boolean(t),errorText:t,infoText:x,autoZero:!0,onChange:o,onFocus:c},void 0)}),void 0)]}),void 0)};var I=n(76940),M=n(16003),P=n(30998),z=n(87294);const B={l:15,t:65,b:window.innerHeight-55,r:window.innerWidth-340},L=(window.innerHeight,window.innerWidth,{l:15,t:250}),D=({draggableRef:e})=>(0,r.useMemo)((()=>(0,i.jsx)(a.Z,Object.assign({ref:e,sx:b},{children:(0,i.jsxs)("svg",Object.assign({width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,i.jsx)("rect",{width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{y:"5",width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{y:"10",width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{x:"4",width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{x:"4",y:"5",width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{x:"4",y:"10",width:"2",height:"2",fill:"currentColor"},void 0)]}),void 0)}),void 0)),[e]),q=r.memo((({children:e,visible:t,draggableRef:n})=>{const{isIPad:o}=(0,N.Fs)(),[l,s]=(0,I.Z)("flash-order-position",L),c=B,u=(0,M.Z)(l),d=(0,r.useRef)(!0),p=(0,r.useRef)(!1),h=(0,P.xG)((e=>e.setDisableMouse)),f=(0,r.useRef)({x:0,y:0}),x=(0,r.useCallback)((e=>{p.current=!0,h(!0),f.current={x:e.screenX,y:e.screenY}}),[h]);(0,r.useEffect)((()=>{var e,t;return null===(e=n.current)||void 0===e||e.addEventListener("mousedown",x),null===(t=n.current)||void 0===t||t.addEventListener("touchstart",x),()=>{const{current:e}=n;null==e||e.removeEventListener("mousedown",x),null==e||e.removeEventListener("touchstart",x)}}),[n,x]);const m=(0,r.useCallback)((e=>{e.preventDefault(),p.current=!1,h(!1)}),[h]),b=(0,r.useCallback)((e=>{setTimeout((()=>{if(e.preventDefault(),!p.current)return;const t=f.current,n=e.screenX-t.x,i=e.screenY-t.y;if(o){const t=window.innerWidth-e.changedTouches[0].clientX,n=window.innerWidth-e.changedTouches[0].clientY;return s({l:Math.min(B.r,Math.max(t,B.l)),t:Math.min(B.b,Math.max(n,B.t))})}const r=u.current;if(!r)return;const{l:a,t:l}=r,d=a+n,h=l+i;s({l:Math.min(c.r,Math.max(d,c.l)),t:Math.min(c.b,Math.max(h,c.t))}),f.current={x:e.screenX,y:e.screenY}}),15)}),[s,o,u]);return(0,r.useEffect)((()=>{if(d.current)return window.addEventListener(o?"touchmove":"mousemove",b),window.addEventListener(o?"touchend":"mouseup",m),d.current=!1,()=>{window.removeEventListener(o?"touchmove":"mousemove",b),window.removeEventListener(o?"touchend":"mouseup",m)}}),[m,b,o]),(0,i.jsx)(a.Z,Object.assign({sx:Object.assign(Object.assign({},g),{transform:`translate(${l?Math.max(l.l,B.l):L.l}px, ${l?Math.max(l.t,B.t):L.t}px)`,zIndex:p.current?z.Z.zIndices.flashOrder:9}),className:t?"":"drag-hide"},{children:e}),void 0)}));var H=n(77711);const $=({onRemove:e})=>(0,i.jsx)(a.Z,Object.assign({sx:y},{children:(0,i.jsx)(H.Z,{className:"icon",size:8,onClick:e},void 0)}),void 0);var W=n(48658),A=n(33470);const K=[25,50,75,100],Q=r.memo((({onClose:e,onChange:t,percent:n,setPercent:o,precision:s})=>{const{curMaxBuyAmount:c,curMaxSellAmount:u,cUnit:d,unitAmountPrecision:p}=(0,l._k)(),h=(0,r.useMemo)((()=>(0,A.Jp)((0,A.Jp)(n/100,c).toFixed(p,1),1).toFixed(s,1)),[p,n,s]),f=(0,r.useMemo)((()=>(0,A.Jp)((0,A.Jp)(n/100,u).toFixed(p,1),1).toFixed(s,1)),[p,n,s]),x=(0,r.useCallback)((i=>{var r;const a=+(null===(r=i.currentTarget.dataset)||void 0===r?void 0:r.stepper);a!==n?(o(a),null==t||t(a)):null==e||e()}),[t,e,n,o]);return(0,i.jsxs)(a.Z,Object.assign({sx:m},{children:[(0,i.jsx)(a.Z,Object.assign({className:"position-value",justifyContent:"flex-end"},{children:n?(0,i.jsxs)(W.Z,{children:[h," ",d]},void 0):null}),void 0),(0,i.jsx)(a.Z,Object.assign({mx:"6px"},{children:K.map((e=>(0,i.jsxs)(a.Z,Object.assign({"data-stepper":e,onClick:x,className:n>=e?"container active":"container"},{children:[(0,i.jsx)(a.Z,{className:"stepper"},void 0),(0,i.jsxs)(W.Z,Object.assign({className:"value"},{children:[e,"%"]}),void 0)]}),e)))}),void 0),(0,i.jsx)(a.Z,Object.assign({className:"position-value",justifyContent:"flex-start"},{children:n?(0,i.jsxs)(W.Z,{children:[f," ",d]},void 0):null}),void 0)]}),void 0)})),V=r.memo((()=>{const[e,t]=(0,r.useState)(""),[n]=(0,l.hN)(),[f,x]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),y=(0,r.useRef)(null),C=(0,r.useRef)(null),j=(0,r.useRef)(null),_=(0,r.useRef)(null),[Z,k]=(0,r.useState)(0),{placeOrderReducer:E}=(0,l.b9)(),[S,[O,R]]=(0,l.z4)(),N=(0,l.j2)(),{marginAsset:T}=N,[I,M]=(0,r.useReducer)(E,{isFetching:!1,tradeCont:0,buyCont:0,buyQty:0,sellCont:0,sellQty:0,side:1,positionSide:s.PR.LONG}),{precision:P}=(0,l.ql)({quantity:e}),z=(0,r.useCallback)((()=>{t(""),k(0),v(!1),g("")}),[]),{side:B,tradeCont:L}=I,H=n?s.RS.OPEN:s.RS.BOTH,W=1===B?s.hp.BUY:s.hp.SELL,[,A]=(0,l.e5)(),K=(0,r.useCallback)((()=>{A(!1)}),[A]),V=(0,r.useCallback)((()=>{var e;null===(e=null==_?void 0:_.current)||void 0===e||e.focus()}),[]),G=(0,r.useCallback)((()=>{v(!1),k(0),t("")}),[]),Y=(0,r.useCallback)((()=>{e||G()}),[e,G]),{setMessageInfo:J}=(0,l.YT)(),U=(0,l.h5)(),X=(0,d.F)({afterSubmit:z,overrides:{positionDirection:H,timeInForce:p.rb.GTC,orderType:s.Jm.MARKET,reduceOnly:!1}});return(0,r.useEffect)((()=>{if(f){const{valid:t,message:n}=U(+L);if(!t)return g(n),J({message:n,variant:"error"}),void x(!1);X(Object.assign(Object.assign({},c.U),{buyOrderAmount:+L,sellOrderAmount:+L,side:W,unitAmount:e})),x(!1)}}),[X,W,Z,L,f,U,J,e]),(0,r.useEffect)((function(){z()}),[S,z]),(0,r.useEffect)((function(){g("")}),[e]),(0,o.Z)(j,Y,["click"]),(0,i.jsxs)(q,Object.assign({visible:!0,draggableRef:y},{children:[(0,i.jsxs)(a.Z,Object.assign({ref:j,sx:{flexDirection:"column"}},{children:[(0,i.jsxs)(a.Z,Object.assign({justifyContent:"center"},{children:[(0,i.jsx)(D,{draggableRef:y},void 0),(0,i.jsxs)(a.Z,Object.assign({height:"40px",justifyContent:"stretch",bg:"popupBg",sx:{position:"relative"}},{children:[(0,i.jsx)(w,{positionDirection:H,handleClick:()=>{M({type:h.z,payload:{tradeCont:(null==I?void 0:I.buyCont)||(null==I?void 0:I.buyQty)}}),x(!0),V()},type:"bid",dispatch:M},void 0),(0,i.jsx)(F,{inputRef:_,quantity:e,setQuantity:e=>{b&&!(e=>e.indexOf("%")>=0)(e)&&k(0),t(e)},dispatch:M,onFocus:()=>v(!0),submitError:m},void 0),(0,i.jsx)(w,{positionDirection:H,handleClick:()=>{M({type:h.z,payload:{tradeCont:(null==I?void 0:I.sellCont)||(null==I?void 0:I.sellQty)}}),x(!0),V()},type:"ask",dispatch:M},void 0)]}),void 0),(0,i.jsx)($,{onRemove:K},void 0)]}),void 0),b&&(0,i.jsx)(Q,{percent:Z,setPercent:k,precision:P,onChange:e=>{t(`${e}%`)},onClose:G},void 0)]}),void 0),(0,i.jsx)(u.Z,{symbol:S,base:O,quote:R,ticker:N,ref:C,marginAsset:T},void 0)]}),void 0)}))},30998:(e,t,n)=>{n.d(t,{Nu:()=>m,Qy:()=>x,zz:()=>h,PH:()=>d,Lb:()=>p,kH:()=>f,Gt:()=>b,xG:()=>u});var i=n(74388),r=n(73002),o=n(44174);const a={keys:new Set,setItem(e,t,n){if("function"!=typeof n)return new Promise((n=>{this.keys.add(e),this[e]=t,n()}));this.keys.add(e),this[e]=t,n(null)},getItem(e,t){if("function"!=typeof t)return new Promise((t=>{t(this[e])}));t(this[e])},removeItem(e,t){if("function"!=typeof t)return new Promise((t=>{this[e]=void 0,this.keys.delete(e),t()}));this[e]=void 0,this.keys.delete(e),t(null)},clear(e){if("function"!=typeof e)return new Promise((e=>{this.keys.forEach((e=>{this[e]=void 0})),this.keys.clear(),e()}));this.keys.forEach((e=>{this[e]=void 0})),this.keys.clear(),e(null)},create(){return Object.create(this)}},l={setItem(e,t,n){const i="object"==typeof t?JSON.stringify(t):t;if("function"!=typeof n)return new Promise(((t,n)=>{try{window.localStorage.setItem(e,i),t()}catch(e){n(e)}}));try{window.localStorage.setItem(e,i),n(null)}catch(e){n(e)}},getItem(e,t){if("function"!=typeof t)return new Promise((t=>{t((0,o.As)(window.localStorage.getItem(e)))}));t(null,(0,o.As)(window.localStorage.getItem(e)))},removeItem(e,t){if("function"!=typeof t)return new Promise((t=>{window.localStorage.removeItem(e),t()}));window.localStorage.removeItem(e),t(null)},clear(e){if("function"!=typeof e)return new Promise((e=>{window.localStorage.clear(),e()}));window.localStorage.clear(),e(null)},create(){return Object.create(this)}};function s(e){const t=new Map;return function(n,...i){if(t.has(n))return t.get(n);const r=e(n,...i);return t.set(n,r),r}}function c({stateKey:e,storageKey:t=e,defaultValue:n,validator:r,storage:s}){const c=void 0!==(u=s)?u:"undefined"!=typeof window?l.create():a.create();var u,d;return(0,i.Z)((d=(t,i)=>({[e]:n,[`set${(0,o.kC)(e)}`]:n=>t({[e]:n}),[`toggle${(0,o.kC)(e)}`]:()=>t({[e]:!i()[e]})}),(i,a,l)=>{const s=d((n=>{i(n);const r=a()[e];c.setItem(t,r)}),a);let u={};return"undefined"!=typeof window&&c.getItem(t,((t,i)=>{let o;o="function"==typeof r?r(i)?i:n:null!=i?i:n,u={[e]:o}})),Object.assign(Object.assign(Object.assign({},s),u),{[`clear${(0,o.kC)(e)}`](){c.removeItem(t),i(s)}})}))}const u=(0,i.Z)((e=>({disableMouse:!1,setDisableMouse:t=>e({disableMouse:t})}))),d=s((function(e){return c({stateKey:"miniMultiChartType",storageKey:`${e}-chart-miniMultiChartType`,defaultValue:r.k.Store.ChartMode.Single})})),p=s((function(e){return c({stateKey:"miniMultiChartWindows",storageKey:`${e}-chart-miniMultiChartWindows`,defaultValue:["","","",""]})})),h=s((function(e){return c({stateKey:"lastSelectedMiniMultiChartWindow",storageKey:`${e}-chart-lastSelectedMiniMultiChartWindow`,defaultValue:0})})),f=s((function(e){return c({stateKey:"priceType",storageKey:`${e}-chart-priceType`,defaultValue:r.k.Store.PriceType.Last})})),x=s((function(e){return c({stateKey:"interval",storageKey:`${e}-chart-interval`,defaultValue:r.k.Store.DisplayIntervals["1d"]})})),m=s((function(e){return c({stateKey:"chartType",storageKey:`${e}-chart-type`,defaultValue:r.k.Store.OriginalChartStyle.CandleBar})}));var g=n(15729);const b=(0,i.Z)((e=>({posCalcData:{},setPosCalcData:(t,n,i)=>e((0,g.ZP)((e=>{e.posCalcData[t]||(e.posCalcData[t]={}),t&&n&&e.posCalcData[t][n]!==i&&(e.posCalcData[t][n]=i)})))})))}}]);