"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[3349],{5894:(e,t,o)=>{o.d(t,{F:()=>i});var n=o(5163),r=o(51336),i=function(e){return(0,n.__awaiter)(void 0,void 0,void 0,(function(){return(0,n.__generator)(this,(function(t){return[2,(0,r.v_)("/bapi/futures/v2/private/future/order/clear-position",e)]}))}))}},71787:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(5163),r=o(2784),i=o(50464),s=o(87938),a=o(53858),l=o(53021),c=o(68106),u=o(35395),d=o(28776),f=function(){return"undefined"!=typeof window?document.body.offsetHeight:0};const m=r.forwardRef((function(e,t){var o=this,m=e.arrow,p=void 0!==m&&m,y=e.boundary,g=e.delay,b=void 0===g?0:g,v=e.container,h=e.tip,P=e.placement,S=e.pos,w=e.children,M=e.open,O=e.trigger,k=void 0===O?"hover":O,x=e.scroll,A=void 0===x||x,j=e.resize,K=void 0===j||j,C=e.enablePortal,Z=void 0!==C&&C,E=e.leaveDelay,_=void 0===E?0:E,z=e.boxOffset,N=void 0===z?0:z,L=e.arrowPadding,V=void 0===L?0:L,I=e.onlyShowOnHover,W=void 0!==I&&I,T=e.bg;P=P||S||"top",P="rtl"===(0,a.Z)()?d.O9[P]:P;var $=r.useRef(null!=M).current,B=(0,r.useState)(null),q=B[0],F=B[1],R=(0,r.useState)(null),H=R[0],G=R[1],D=(0,r.useState)(null),Q=D[0],U=D[1],J=r.useRef(0),Y=r.useRef(0),X=(0,l.D)(q,H,{placement:P,modifiers:[{name:"eventListeners",options:{scroll:A,resize:K}},{name:"arrow",options:{element:Q,padding:V}},{name:"offset",options:{offset:[N||0,d.SG]}},{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},{name:"flip",options:{boundary:y}}]}),ee=X.styles,te=X.attributes,oe=X.update,ne=X.state,re=r.useMemo((function(){return(0,d.BP)(null==ne?void 0:ne.placement)}),[null==ne?void 0:ne.placement]),ie=(0,r.useState)(M),se=ie[0],ae=ie[1];r.useEffect((function(){return function(){Y.current&&window.clearTimeout(Y.current),Y.current=0}}),[se]),$&&(k=void 0,M!==se&&ae(M));var le=(0,i.Z)(F,t),ce="click"===k?function(e){Y.current&&window.clearTimeout(Y.current),J.current=0,Y.current=0,ae(!se),oe&&oe(),w.props.onClick&&w.props.onClick(e)}:w.props.onClick,ue="hover"===k?function(e){!se&&window.performance.now()-J.current>500&&(Y.current=b?Y.current||window.setTimeout((function(){return ae(!0)}),b):(ae(!0),0),oe&&oe(),J.current=window.performance.now()),w.props.onMouseMove&&w.props.onMouseMove(e)}:w.props.onMouseMove,de="hover"===k?function(e){return(0,n.__awaiter)(o,void 0,void 0,(function(){return(0,n.__generator)(this,(function(t){return _?setTimeout((function(){Y.current&&window.clearTimeout(Y.current),J.current=0,Y.current=0,ae(!1),oe&&oe(),w.props.onMouseLeave&&w.props.onMouseLeave(e)}),_):(Y.current&&window.clearTimeout(Y.current),J.current=0,Y.current=0,ae(!1),oe&&oe(),w.props.onMouseLeave&&w.props.onMouseLeave(e)),[2]}))}))}:w.props.onMouseLeave,fe=(0,n.__assign)((0,n.__assign)({},w.props),{onClick:ce,onMouseMove:ue,onMouseLeave:de,ref:le}),me=W?{appear:!0,mountOnEnter:!0,unmountOnExit:!0,onEnter:f}:{};return r.createElement(r.Fragment,null,r.cloneElement(w,fe),r.createElement(c.ZP,(0,n.__assign)({in:se,timeout:d.x9},me),(function(e){return v||Z?r.createElement(s.ZP,{container:v},r.createElement(u.Z,(0,n.__assign)({open:!0,arrow:p,arrowStyle:ee.arrow,style:(0,n.__assign)((0,n.__assign)((0,n.__assign)({},ee.popper),d.hy),re[e]),bg:T,arrowRef:U,ref:G},te.popper),h)):r.createElement(u.Z,(0,n.__assign)({open:!0,arrow:p,arrowStyle:ee.arrow,style:(0,n.__assign)((0,n.__assign)((0,n.__assign)({},ee.popper),d.hy),re[e]),bg:T,arrowRef:U,ref:G},te.popper),h)})))}))},27657:(e,t,o)=>{o.d(t,{Q:()=>a});var n=o(11001),r=o(73121);const{coin:i,cont:s}=n.SW;function a(){const{unit:e}=(0,r.F7)();return{isCoinUnit:e===i,isContUnit:e===s}}},56271:(e,t,o)=>{o.d(t,{Z:()=>v});var n=o(52322),r=o(2784),i=o(98537),s=o.n(i),a=o(5163),l=o(98569);const c=function(e){return r.createElement(l.Z,(0,a.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M9 14.5A6.5 6.5 0 0115.5 8h1.672l-2.586 2.586L16 12l5-5-5-5-1.414 1.414L17.172 6H15.5A8.5 8.5 0 007 14.5V17h2v-2.5z",fill:"currentColor"}),r.createElement("path",{d:"M19 15h2v6H3v-6h2v4h14v-4z",fill:"currentColor"}))};var u=o(62143),d=o(21030),f=o(97060),m=o(53096);const p=(0,r.lazy)((()=>Promise.all([o.e(8063),o.e(1040)]).then(o.bind(o,91040)))),y={display:"flex",alignItems:"center",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},g={display:"flex",alignItems:"center"},b=({text:e,onClick:t,sx:o,showTip:i=!1,showIcon:a=!0})=>{const{t:l}=(0,f.yk)(),m=(0,r.useMemo)((()=>s()({},y,o)),[o]),p=(0,n.jsxs)(u.Z,Object.assign({sx:m,onClick:t},{children:[a&&(0,n.jsx)(c,{className:"share-icon",ml:"4px",mr:e?"4px":"0px",size:16},void 0),e]}),void 0);return i?(0,n.jsx)(d.Z,Object.assign({sx:g,arrow:!0,tip:l("share",{defaultValue:"Share"})},{children:p}),void 0):p},v=(0,r.memo)((({btnText:e,btnSx:t,sideKey:o,showIcon:i,onClickIcon:s})=>{const[a,l]=(0,r.useState)(!1),c=(0,r.useCallback)((()=>{s&&s(),l(!0)}),[s]),u=(0,r.useCallback)((()=>{l(!1)}),[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,{sx:t,text:e,showIcon:i,onClick:c},void 0),(0,n.jsx)(r.Suspense,Object.assign({fallback:(0,n.jsx)(m.Z,{},void 0)},{children:a&&(0,n.jsx)(p,{visible:a,onClose:u,sideKey:o},void 0)}),void 0)]},void 0)}))},51991:(e,t,o)=>{o.d(t,{ME:()=>r,ZP:()=>s,hZ:()=>i});var n=o(30998);const r=e=>e.posCalcData,i=e=>e.setPosCalcData,s=n.Gt},72019:(e,t,o)=>{o.d(t,{z1:()=>V,A4:()=>L,Mx:()=>D,Yq:()=>U,jK:()=>G,qU:()=>J,ek:()=>Q,v_:()=>H,iA:()=>N,Mn:()=>I});var n=o(23131),r=o(2784),i=o(39727),s=o(37227),a=o(33470),l=o(97060),c=o(38896),u=o(85656),d=o(23716);const{calculation:{abacus:{future:{model:f,calculateUmLiquidationPriceForSingleAssetMode:m},model:p,base:y}}}=u.com,{KotlinArrayList:g}=y,b=f.FutureBalance,v=f.FutureBracket,h=f.RiskBracket,P=p.FuturePosition;var S=o(7523),w=o(41260);const M=(0,S._)((e=>Object.values(e).map((e=>{const{asset:t,marginAvailable:o,initialMargin:n,maintenanceMargin:r,marginBalance:i,unrealizedProfit:s,walletBalance:a,crossWalletBalance:l}=e;return new b(t,Boolean(o),String(n),String(r),String(i),String(s),String(a),String(l))}))));var O=o(29261);const k=(0,S._)((e=>{const t=[];return Object.entries(e).forEach((([e,o])=>{if("boolean"==typeof o)return;const n=o.map((e=>new h(e.bracketMaintenanceMarginRate,e.bracketNotionalCap,e.bracketNotionalFloor,e.bracketSeq,e.cumFastMaintenanceAmount,e.maxOpenPosLeverage,e.minOpenPosLeverage))),r=new v(e,n);t.push(r)})),t}));var x=o(31953);function A(e,t){const{askNotional:o,bidNotional:n,collateral:r=(null==t?void 0:t.marginAsset)||"",cumRealized:i,entryPrice:s,id:a,leverage:l,notionalValue:c,positionSize:u,symbol:d,markPrice:f,unrealizedProfit:m,isolated:p,isolatedWallet:y,adl:g,positionSide:b}=e;return new P(String(o),String(n),r,String(i),String(s),a,l,String(c),String(u),d,String(f),String(m),p,String(y),g,b)}const j=(0,S._)(((e,t)=>(0,x.J9)(e).map((e=>A(e,t[e.symbol])))));var K=o(51991),C=o(13644),Z=o(42871),E=o(92521);const{leverageInfo:_}=n.Fy,z={long:"buy",short:"sell"},N=({sideKey:e})=>{const t=(0,c.t2)(e,"symbol"),o=(0,c.t2)(e,"isolated"),n=(0,c.t2)(e,"isolatedWallet"),r=(0,c.t2)(e,"positionSize"),i=0===Number(r)&&o&&Number(n)<0,a=Number(r)>0?"long":"short",u=i?"liq":z[a],{leverageList:d={}}=(0,c.rf)()||{},f=d[t]||_.defaultVal,m=(0,c.AM)()[t],{getI18n:p}=(0,l.yk)();let y,g=t;return m&&(y=(0,s.H)(m,p),g=y.fullName),{color:u,symbolText:g,symbolName:y,leverage:f}},L=({sideKey:e})=>{const t=(0,c.t2)(e,"symbol"),o=(0,c.t2)(e,"entryPrice"),n=(0,c.AM)()[t]||{},{pricePrecision:r}=n;return{formatedEntryPrice:(0,a.uf)(o,r)}},V=({sideKey:e})=>{const t=(0,c.t2)(e,"symbol"),o=(0,c.t2)(e,"markPrice"),{lastPrice:n}=(0,c.zZ)({symbol:t}),r=(0,c.AM)()[t]||{},{pricePrecision:i}=r;return{formatedMarkPrice:(0,a.uf)(o,i),formatedLastPrice:(0,a.uf)(n,i)}},I=({sideKey:e})=>{var t,o;const n=(0,c.t2)(e,"symbol"),r=(0,c.t2)(e,"positionSize"),i=(0,c.t2)(e,"positionSide"),s=(0,c.AM)()[n]||{},{pricePrecision:l}=s,{preOrders:u}=(0,c.E)(),d=Number(r),f={};u.forEach((e=>{const t=!0===e.closePosition,o=n===e.symbol,r=i===e.positionSide,s=d<0&&"BUY"===e.side||d>0&&"SELL"===e.side;t&&o&&r&&s&&("TAKE_PROFIT_MARKET"===e.type&&(f.tp=e),"STOP_MARKET"===e.type&&(f.sl=e))}));const m=(null===(t=null==f?void 0:f.tp)||void 0===t?void 0:t.stopPrice)?(0,a.uf)(f.tp.stopPrice,l):"--",p=(null===(o=null==f?void 0:f.sl)||void 0===o?void 0:o.stopPrice)?(0,a.uf)(f.sl.stopPrice,l):"--";return{strategyOrders:f,formatedTPPrice:m,formatedSLPrice:p}};var W=o(27657),T=o(48752),$=o(45385);const{leverageInfo:B}=n.Fy,q={long:"buy",short:"sell"},F=()=>{const e=(0,c.F)(),t=(0,c.AM)()||{};return e.map((e=>{var o;return Object.assign(Object.assign({},e),{contractVal:null===(o=t[e.symbol])||void 0===o?void 0:o.contractVal})}))},R=(0,n.nM)(),H=e=>R?(({sideKey:e,columnKey:t=""})=>{const{getI18n:o}=(0,l.yk)(),n=(0,c.t2)(e,"symbol"),i=(0,c.t2)(e,"isolated"),s=(0,c.t2)(e,"isolatedWallet"),u=(0,c.t2)(e,"positionSize"),d=(0,c.cO)(e)||{},{lastPrice:f}=(0,c.zZ)({symbol:null==d?void 0:d.symbol}),m=(0,K.ZP)(K.hZ),p=Number(u),y=p>0?"long":"short",g=0===p&&i&&Number(s)<0?"liq":q[y],b=(0,c.AM)()[n]||{},{quantityPrecision:v,marginAsset:h="",equalQtyPrecision:P,contractVal:S=100}=b,{isCoinUnit:w}=(0,W.Q)(),M=p>0?"":"-",O=w?(0,T.unitChangeCoinQty)({quantity:Math.abs(p),contractVal:S,price:f,precision:P,format:!1}):p.toFixed(v),k=w?`${M}${O}`:(0,a.uf)(p,v),x=w?h:o("Cont",{defaultValue:"Cont"});return(0,r.useEffect)((()=>{t&&m(e,t,Math.abs(w?Number(O):p))}),[]),{color:g,quantityAmount:O,formatedQuantityAmount:k,unit:x}})(e):(({sideKey:e,columnKey:t=""})=>{const o=(0,c.t2)(e,"symbol"),n=(0,c.t2)(e,"isolated"),i=(0,c.t2)(e,"isolatedWallet"),s=(0,c.t2)(e,"positionSize"),l=(0,c.cO)(e)||{},{lastPrice:u}=(0,c.zZ)({symbol:null==l?void 0:l.symbol}),d=(0,K.ZP)(K.hZ),f=Number(s),m=f>0?"long":"short",p=0===f&&n&&Number(i)<0?"liq":z[m],y=(0,c.AM)()[o]||{},{baseAsset:g="",pricePrecision:b=2,quantityPrecision:v=8,marginAsset:h=""}=y,{isCoinUnit:P}=(0,C.Q)(),S=f>0?"":"-",w=P?f.toFixed(v):(0,Z.WA)({quantity:Math.abs(f),price:u,precision:b,format:!1}),M=P?(0,a.uf)(f,v):`${S}${w}`,O=P?g:h;return(0,r.useEffect)((()=>{t&&d(e,t,Math.abs(P?f:Number(w)))}),[]),{color:p,quantityAmount:w,formatedQuantityAmount:M,unit:O}})(e),G=e=>R?(({sideKey:e,columnKey:t=""})=>{const o=(0,c.t2)(e,"symbol"),n=(0,c.t2)(e,"positionSize"),i=(0,K.ZP)(K.hZ),s=(0,c.AM)()[o]||{},{contractVal:l}=s,u=Math.abs(n)*Number(l),d=l?(0,a.uf)(u,2):"-";return(0,r.useEffect)((()=>{t&&i(e,t,u)}),[]),{notionalSize:u,formattedNotionalSize:d,unit:"USD"}})(e):(({sideKey:e,columnKey:t=""})=>{const o=(0,c.t2)(e,"symbol"),n=(0,c.t2)(e,"positionSize"),i=(0,c.t2)(e,"markPrice"),s=(0,K.ZP)(K.hZ),l=(0,c.AM)()[o]||{},{quoteAsset:u=""}=l,d=Math.abs(n)*i,f=(0,a.uf)(d,2);return(0,r.useEffect)((()=>{t&&s(e,t,d)}),[]),{notionalSize:d,formattedNotionalSize:f,unit:u}})(e),D=e=>R?(({sideKey:e,columnKey:t=""})=>{const o=(0,c.KQ)(),n=(0,c.Gf)(),i=F(),s=(0,c.cO)(e)||{},l=(0,K.ZP)(K.hZ),{symbol:u,isolated:d,isolatedWallet:f=0,positionSide:m}=s,p=(0,c.AM)()[u]||{},{marginAsset:y,pricePrecision:g,contractVal:b}=p,v=Object.assign(Object.assign({},s),{contractVal:b}),h=o[y]||{},{crossWalletBalance:P=0}=h,S=(null==n?void 0:n[u])||[],w=!d&&m&&"BOTH"!==m,M=d?f:P;let O=0;if(!d){const e=i.filter((e=>e.marginAsset===y)).filter((e=>!(null==e?void 0:e.isolated))).filter((e=>(null==e?void 0:e.symbol)!==u));O=(0,$.zW)(e,n)-(0,$.ot)(e)}let k,x,A=0;if(w){const e=i.filter((e=>{const{symbol:t,positionSide:o}=e||{};return t===u&&"BOTH"!==o&&o!==m}))[0]||{positionSize:0,entryPrice:0};k="LONG"===m?v:e,x="SHORT"===m?v:e}A=w&&k.positionSize&&x.positionSize?(0,$.ST)(S,M,O,k,x,v):(0,$.W8)(S,M,O,v),A=A<0?0:A;const j=A>0?(0,a.uf)(A,g):"-";return(0,r.useEffect)((()=>{t&&l(e,t,A)}),[]),{liquidationPrice:A,formatedLiqPrice:j}})(e):(({sideKey:e,columnKey:t=""})=>{const o=function(){const e=(0,w.KQ)();return M(e)}(),n=function(){const e=(0,O.Gf)();return k(e)}(),s=(()=>{const e=(0,i.v9)((e=>e.position.positionMap)),t=(0,O.Vh)();return j(e,t)})(),l=(e=>{const t=(0,i.v9)((e=>e.position.positionMap))[e],o=(0,O.Vh)();return t?A(t,o[t.symbol]):null})(e),u=(0,c.t2)(e,"symbol"),f=(0,K.ZP)(K.hZ),p=(0,c.AM)()[u]||{},{pricePrecision:y}=p;let g=0;const b=(0,i.v9)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),v=(0,i.v9)((e=>e.loading.effects.preference.getAssetMode));b||v||!l||(g=((...e)=>{let t=0;try{t=m(...e)}catch(e){d.log(e)}return t})(l,s,o,n));const h=g>0?(0,a.uf)(g,y):"-";return(0,r.useEffect)((()=>{t&&f(e,t,g)}),[]),{liquidationPrice:g,formatedLiqPrice:h}})(e),Q=e=>R?(({sideKey:e,columnKey:t=""})=>{const o=(0,c.KQ)(),n=(0,c.Gf)(),i=F(),s=(0,c.cO)(e)||{},{symbol:a,isolated:l}=s,u=(0,c.AM)()[a]||{},d=(0,K.ZP)(K.hZ),{marginAsset:f,contractVal:m}=u;let p;if(l){const{isolatedWallet:e=0,symbol:t}=s,o=(null==n?void 0:n[t])||[],r=(0,$.SH)(o,Object.assign(Object.assign({},s),{contractVal:m})),i=(0,$.nn)(Object.assign(Object.assign({},s),{contractVal:m}));p=(0,$.Vo)(r,e,i)}else{const e=o[f]||{},{crossWalletBalance:t=0}=e,r=i.filter((e=>e.marginAsset===f)).filter((e=>!(null==e?void 0:e.isolated))),s=(0,$.zW)(r,n),a=(0,$.ot)(r);p=(0,$.Vo)(s,t,a)}const y=Number(p)>80?"negative":"";return(0,r.useEffect)((()=>{t&&d(e,t,Number(p))}),[]),{ratioColor:y,riskRatio:p}})(e):(({sideKey:e,columnKey:t=""})=>{const o=(0,c.KQ)(),n=(0,c.Gf)(),s=(0,c.F)(),a=(0,c.cO)(e)||{},{symbol:l,isolated:u}=a,d=(0,c.AM)()[l]||{},f=(0,K.ZP)(K.hZ),{marginAsset:m}=d;let p;if(u){const{isolatedWallet:e=0,symbol:t}=a,o=(null==n?void 0:n[t])||[],r=(0,E.SH)(o,a),i=(0,E.nn)(a);p=(0,E.Vo)(r,e,i)}else{const e=o[m]||{},{crossWalletBalance:t=0}=e,r=s.filter((e=>e.marginAsset===m)).filter((e=>!(null==e?void 0:e.isolated))),i=(0,E.zW)(r,n),a=(0,E.ot)(r);p=(0,E.Vo)(i,t,a)}const y=(0,i.v9)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),g=(0,i.v9)((e=>e.loading.effects.preference.getAssetMode));(y||g)&&(p="0.00");const b=Number(p)>80?"negative":"";return(0,r.useEffect)((()=>{t&&f(e,t,Number(p))}),[]),{ratioColor:b,riskRatio:p}})(e),U=e=>R?(({sideKey:e,columnKey:t=""})=>{const o=(0,c.ce)(),n=(0,c.cO)(e)||{},i=(0,K.ZP)(K.hZ),{symbol:s,isolated:l,isolatedWallet:u=0,positionSize:d,markPrice:f}=n,{leverageList:m={}}=(0,c.rf)()||{},p=m[s]||B.defaultVal,y=(0,c.AM)()[s]||{},{marginAsset:g="",contractVal:b=100}=y,v=(0,$.fS)({positionSize:d,markPrice:f,contractVal:b})*(0,$.yh)(p),h=l?u:v,P=`${(0,a.GW)(h,o,!0)} ${g}`;return(0,r.useEffect)((()=>{t&&i(e,t,h)}),[]),{margin:h,formatedMargin:P}})(e):(({sideKey:e,columnKey:t=""})=>{const o=(0,c.ce)(),n=(0,c.cO)(e)||{},i=(0,K.ZP)(K.hZ),{symbol:s,isolated:l,isolatedWallet:u=0}=n,{leverageList:d={}}=(0,c.rf)()||{},f=d[s]||_.defaultVal,m=(0,c.AM)()[s]||{},{marginAsset:p=""}=m,y=(0,E.fS)(n)*(0,E.yh)(f),g=l?u:y,b=`${(0,a.uf)(g,o)} ${p}`;return(0,r.useEffect)((()=>{t&&i(e,t,g)}),[]),{margin:g,formatedMargin:b}})(e),J=e=>R?(({sideKey:e,columnKey:t=""})=>{const{useLastPrice:o}=(0,c.F7)(),n=(0,c.ce)(),i=(0,c.cO)(e)||{},s=(0,K.ZP)(K.hZ),{symbol:l,positionSize:u,markPrice:d}=i,{leverageList:f={}}=(0,c.rf)()||{},m=f[l]||B.defaultVal,{lastPrice:p}=(0,c.zZ)({symbol:l}),y=(0,c.AM)()[l]||{},{marginAsset:g="",contractVal:b=100}=y,v=(0,$.fS)({positionSize:u,markPrice:d,contractVal:b})*(0,$.yh)(m),h=(0,$.nn)(Object.assign(Object.assign({},i),{contractVal:b,lastPrice:p}),o),P=0===Number(h)?"":Number(h)>0?"buy":"sell",S=0===Number(h)?"":Number(h)>0?"+":"",w=`${S}${(0,a.GW)(h,n,!0)} ${g} `,M=100*(h/v||0),O=`${S}${M.toFixed(2)}%`;return(0,r.useEffect)((()=>{t&&s(e,t,M)}),[]),{unrealizedPnl:h,formatedPnl:w,pnlColor:P,ROEVal:O}})(e):(({sideKey:e,columnKey:t=""})=>{const{useLastPrice:o}=(0,c.F7)(),n=(0,c.ce)(),i=(0,c.cO)(e)||{},s=(0,K.ZP)(K.hZ),{leverageList:l={}}=(0,c.rf)()||{},u=l[null==i?void 0:i.symbol]||_.defaultVal,{lastPrice:d}=(0,c.zZ)({symbol:null==i?void 0:i.symbol}),f=(0,c.AM)()[null==i?void 0:i.symbol]||{},{marginAsset:m=""}=f,p=(0,E.fS)(i)*(0,E.yh)(u),y=(0,E.nn)(Object.assign(Object.assign({},i),{lastPrice:d}),o),g=0===Number(y)?"":Number(y)>0?"buy":"sell",b=Number(y)>0?"+":"",v=`${b}${(0,a.GW)(y,n,!0)} ${m}`,h=100*(y/p||0),P=`${b}${h.toFixed(2)}%`;return(0,r.useEffect)((()=>{t&&s(e,t,h)}),[]),{unrealizedPnl:y,formatedPnl:v,pnlColor:g,ROEVal:P}})(e)},71994:(e,t,o)=>{o.d(t,{U:()=>d,e:()=>u});var n=o(2784),r=o(33470),i=o(31953),s=o(38896),a=o(51991),l=o(92521),c=o(62684);const u=({sideKey:e,columnKey:t=""})=>{const o=(0,s.KQ)(),u=(0,s.Gf)(),d=(0,s.F)(),f=(0,s.cO)(e)||{},m=(0,a.ZP)(a.hZ),{symbol:p,positionSide:y}=f,g=(0,s.AM)()[p]||{},{marginAsset:b,pricePrecision:v}=g,h=o[b]||{},{crossWalletBalance:P=0}=h,S=(null==u?void 0:u[p])||[],{assetsRateEquity:w,assetsMM:M}=(0,s.Nx)(),O=(0,s.G8)(),k=O[b]||{},x=((0,i.L6)(d)[b]||[]).filter((e=>(null==e?void 0:e.symbol)!==p)),A=(0,l.zW)(x,u),j=(0,l.ot)(x);let K=0;Object.entries(w).forEach((([e,t])=>{e!==b&&(K+=t)})),Object.entries(M).forEach((([e,t])=>{const o=O[e]||{},{askRate:n=0}=o;K-=e!==b?t*n:A*n}));let C=0;if(y&&"BOTH"!==y){const e=d.filter((e=>{const{symbol:t,positionSide:o}=e||{};return t===p&&"BOTH"!==o&&o!==y}))[0]||{positionSize:0,entryPrice:0},t="LONG"===y?f:e,o="SHORT"===y?f:e;C=(0,c._O)({accEquityAndMMs:K,assetIndex:k,bracket:S,crossWalletBalance:P,smdsUPNL:j,longPosition:t,shortPosition:o,curPosition:f})}else C=(0,c.Dj)({accEquityAndMMs:K,assetIndex:k,bracket:S,crossWalletBalance:P,smdsUPNL:j,curPosition:f});const Z=C>0?(0,r.uf)(C,v):"-";return(0,n.useEffect)((()=>{t&&m(e,t,C)}),[]),{liquidationPrice:C,formatedLiqPrice:Z}},d=({sideKey:e,columnKey:t=""})=>{const o=(0,a.ZP)(a.hZ),{riskRatio:r}=(0,s.Nx)(),i=Number(r)>80?"negative":"";return(0,n.useEffect)((()=>{t&&o(e,t,Number(r))}),[]),{ratioColor:i,riskRatio:r}}},30998:(e,t,o)=>{o.d(t,{Nu:()=>g,Qy:()=>y,zz:()=>m,PH:()=>d,Lb:()=>f,kH:()=>p,Gt:()=>v,xG:()=>u});var n=o(74388),r=o(69099),i=o(44174);const s={keys:new Set,setItem(e,t,o){if("function"!=typeof o)return new Promise((o=>{this.keys.add(e),this[e]=t,o()}));this.keys.add(e),this[e]=t,o(null)},getItem(e,t){if("function"!=typeof t)return new Promise((t=>{t(this[e])}));t(this[e])},removeItem(e,t){if("function"!=typeof t)return new Promise((t=>{this[e]=void 0,this.keys.delete(e),t()}));this[e]=void 0,this.keys.delete(e),t(null)},clear(e){if("function"!=typeof e)return new Promise((e=>{this.keys.forEach((e=>{this[e]=void 0})),this.keys.clear(),e()}));this.keys.forEach((e=>{this[e]=void 0})),this.keys.clear(),e(null)},create(){return Object.create(this)}},a={setItem(e,t,o){const n="object"==typeof t?JSON.stringify(t):t;if("function"!=typeof o)return new Promise(((t,o)=>{try{window.localStorage.setItem(e,n),t()}catch(e){o(e)}}));try{window.localStorage.setItem(e,n),o(null)}catch(e){o(e)}},getItem(e,t){if("function"!=typeof t)return new Promise((t=>{t((0,i.As)(window.localStorage.getItem(e)))}));t(null,(0,i.As)(window.localStorage.getItem(e)))},removeItem(e,t){if("function"!=typeof t)return new Promise((t=>{window.localStorage.removeItem(e),t()}));window.localStorage.removeItem(e),t(null)},clear(e){if("function"!=typeof e)return new Promise((e=>{window.localStorage.clear(),e()}));window.localStorage.clear(),e(null)},create(){return Object.create(this)}};function l(e){const t=new Map;return function(o,...n){if(t.has(o))return t.get(o);const r=e(o,...n);return t.set(o,r),r}}function c({stateKey:e,storageKey:t=e,defaultValue:o,validator:r,storage:l}){const c=void 0!==(u=l)?u:"undefined"!=typeof window?a.create():s.create();var u,d;return(0,n.Z)((d=(t,n)=>({[e]:o,[`set${(0,i.kC)(e)}`]:o=>t({[e]:o}),[`toggle${(0,i.kC)(e)}`]:()=>t({[e]:!n()[e]})}),(n,s,a)=>{const l=d((o=>{n(o);const r=s()[e];c.setItem(t,r)}),s);let u={};return"undefined"!=typeof window&&c.getItem(t,((t,n)=>{let i;i="function"==typeof r?r(n)?n:o:null!=n?n:o,u={[e]:i}})),Object.assign(Object.assign(Object.assign({},l),u),{[`clear${(0,i.kC)(e)}`](){c.removeItem(t),n(l)}})}))}const u=(0,n.Z)((e=>({disableMouse:!1,setDisableMouse:t=>e({disableMouse:t})}))),d=l((function(e){return c({stateKey:"miniMultiChartType",storageKey:`${e}-chart-miniMultiChartType`,defaultValue:r.k.Store.ChartMode.Single})})),f=l((function(e){return c({stateKey:"miniMultiChartWindows",storageKey:`${e}-chart-miniMultiChartWindows`,defaultValue:["","","",""]})})),m=l((function(e){return c({stateKey:"lastSelectedMiniMultiChartWindow",storageKey:`${e}-chart-lastSelectedMiniMultiChartWindow`,defaultValue:0})})),p=l((function(e){return c({stateKey:"priceType",storageKey:`${e}-chart-priceType`,defaultValue:r.k.Store.PriceType.Last})})),y=l((function(e){return c({stateKey:"interval",storageKey:`${e}-chart-interval`,defaultValue:r.k.Store.DisplayIntervals["1d"]})})),g=l((function(e){return c({stateKey:"chartType",storageKey:`${e}-chart-type`,defaultValue:r.k.Store.OriginalChartStyle.CandleBar})}));var b=o(15729);const v=(0,n.Z)((e=>({posCalcData:{},setPosCalcData:(t,o,n)=>e((0,b.ZP)((e=>{e.posCalcData[t]||(e.posCalcData[t]={}),t&&o&&e.posCalcData[t][o]!==n&&(e.posCalcData[t][o]=n)})))})))},56851:(e,t,o)=>{o.d(t,{m:()=>m});var n=o(52322),r=o(2784),i=o(62143),s=o(48658),a=o(21030),l=o(33656);const c={display:"flex",alignItems:"center",cursor:"help",color:"t.third",borderBottom:["1px dotted","1px dotted","none"],borderBottomColor:"t.third","&:hover":{color:"t.primary",borderBottomColor:"t.primary"}},u={maxWidth:"296px",margin:"-4px 0",lineHeight:"16px",color:"t.white",whiteSpace:"pre-line"};var d=o(97060);const f=e=>{var{link:t}=e,o=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}(e,["link"]);const{getI18n:r}=(0,d.yk)();return(0,n.jsx)(s.Z,Object.assign({as:"a",variant:"addressLink",href:t,target:"_blank",color:"t.yellow",fontSize:12},o,{children:r("learnMore",{defaultValue:"Learn More"})}),void 0)};const m=r.memo((e=>{var{children:t,tip:o,learnMoreLink:r,placement:d,hideUnderLine:m,sx:p,tipSx:y,labelSx:g,onTipClick:b}=e,v=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}(e,["children","tip","learnMoreLink","placement","hideUnderLine","sx","tipSx","labelSx","onTipClick"]);const{isIPad:h}=(0,l.F)(),P=(0,n.jsxs)(i.Z,Object.assign({sx:Object.assign(Object.assign({},u),y)},b&&{onClick:b},{children:[o,r&&(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(f,{link:r},void 0)]},void 0)]}),void 0);return(0,n.jsx)(a.Z,Object.assign({tip:P,delay:500,sx:p,bg:"bg4",placement:d,arrow:!0,enablePortal:!h},v,{children:(0,n.jsx)(s.Z,Object.assign({sx:Object.assign(Object.assign(Object.assign({},c),g),m?{borderBottom:"none"}:{})},{children:t}),void 0)}),void 0)}))}}]);