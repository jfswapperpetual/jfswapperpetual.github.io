"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[4360],{34952:(e,t,i)=>{i.d(t,{Z:()=>c});var o,n=i(97060);e=i.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var r,s,a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},l="trd-calculator",c=function(e){return(0,n.ZK)(l,e)};a(c,"useBaseLanguage{}",(function(){return[n.ZK]})),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(l,"prefix","/Users/user/projects/mono/web/apps/cloud-trade-sdk/src/futures/components/Calculator/hooks/useLanguage.js"),r.register(c,"useLanguage","/Users/user/projects/mono/web/apps/cloud-trade-sdk/src/futures/components/Calculator/hooks/useLanguage.js")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},16505:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(5163),n=i(2784),r=i(98569);const s=function(e){return n.createElement(r.Z,(0,o.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),n.createElement("path",{d:"M8 17.586A1 1 0 109.414 19L16 12.414A1 1 0 0016 11L9.414 4.414A1 1 0 108 5.828l5.879 5.879L8 17.586z"}))}},59687:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(5163),n=i(2784),r=i(98569);const s=function(e){return n.createElement(r.Z,(0,o.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),n.createElement("path",{d:"M12 9a1 1 0 100-2 1 1 0 000 2zm0 8a1 1 0 001-1v-5a1 1 0 10-2 0v5a1 1 0 001 1z"}),n.createElement("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-2 0a8 8 0 10-16 0 8 8 0 0016 0z",clipRule:"evenodd"}))}},977:(e,t,i)=>{function o(e,t,i){void 0===t&&(t="yyyy-MM-dd hh:mm"),void 0===i&&(i=!1);var o=i?{"M+":e.getUTCMonth()+1,"d+":e.getUTCDate(),"h+":e.getUTCHours(),"m+":e.getUTCMinutes(),"s+":e.getUTCSeconds(),"q+":Math.floor((e.getUTCMonth()+3)/3),S:e.getUTCMilliseconds()}:{"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},n=t;return/(y+)/.test(t)&&(n=t.replace(RegExp.$1,(""+e.getFullYear()).substr(4-RegExp.$1.length))),Object.keys(o).forEach((function(e){new RegExp("("+e+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?o[e]:("00"+o[e]).substr((""+o[e]).length)))})),n}i.d(t,{v:()=>o})},74360:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Pt});var o=i(52322),n=i(62143),r=i(2784),s=i(22604),a=i(92036),l=i(48658),c=i(5163),d=i(98569);const u=function(e){return r.createElement(d.Z,(0,c.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M11.793 14.207a1 1 0 001.414 0L21.5 5.914A1 1 0 0020.086 4.5L12.5 12.086 8.707 8.293a1 1 0 00-1.414 0L4 11.586V5a1 1 0 00-2 0v14a1 1 0 001 1h18a1 1 0 100-2H4v-3.586l4-4 3.793 3.793z"}))};var m=i(72779),p=i.n(m),g=i(97060);const v={color:"t.third",fontSize:"32px",cursor:"pointer",width:"32px",height:"32px",p:"6px",borderRadius:"8px","&.active":{color:"t.primary",bg:"bg3"}},b=(0,r.memo)((({children:e,x:t})=>(0,o.jsx)(a.Z,Object.assign({sx:{"> :not(:last-child)":{mr:t}}},{children:e}),void 0))),x=function(e){return r.createElement(d.Z,(0,c.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{fillRule:"evenodd",d:"M12 9a3 3 0 100 6 3 3 0 000-6zm-1 3a1 1 0 112 0 1 1 0 01-2 0z",clipRule:"evenodd"}),r.createElement("path",{fillRule:"evenodd",d:"M13.232 22a2 2 0 001.898-1.367l.395-1.187a1.012 1.012 0 011.162-.67l1.228.25a2 2 0 002.132-.96l1.232-2.132a2 2 0 00-.236-2.327l-.821-.926a1.027 1.027 0 010-1.362l.82-.926a2 2 0 00.237-2.327l-1.232-2.133a2 2 0 00-2.132-.96l-1.228.252a1.011 1.011 0 01-1.162-.671l-.396-1.187A2 2 0 0013.232 2h-2.464A2 2 0 008.87 3.367l-.396 1.187a1.012 1.012 0 01-1.162.67l-1.228-.25a2 2 0 00-2.132.96L2.72 8.065a2 2 0 00.236 2.327l.821.926a1.027 1.027 0 010 1.362l-.82.926a2 2 0 00-.237 2.327l1.232 2.133a2 2 0 002.132.96l1.228-.252a1.011 1.011 0 011.162.671l.396 1.187A2 2 0 0010.768 22h2.464zm.396-3.186L13.232 20h-2.464l-.396-1.187a3.012 3.012 0 00-3.46-1.997l-1.227.25-1.232-2.132.821-.925a3.026 3.026 0 000-4.018l-.82-.925 1.23-2.133 1.229.251a3.012 3.012 0 003.46-1.997L10.767 4h2.464l.396 1.187a3.011 3.011 0 003.46 1.997l1.227-.25 1.232 2.132-.821.925a3.026 3.026 0 000 4.018l.82.925-1.23 2.133-1.229-.251a3.012 3.012 0 00-3.459 1.998z",clipRule:"evenodd"}))};var h=i(21030),f=i(51072),j=i(59687),y=i(1253),O=i(66306),T=i(59464);const M=/^\d+\.?\d*|%$/,S=/^0+(?=\d)/,P=e=>{var{precision:t,maxLength:i,autoZero:n,value:r,onChange:s}=e,a=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}(e,["precision","maxLength","autoZero","value","onChange"]);return(0,o.jsx)(O.Z,Object.assign({},a,{value:r,onChange:e=>{let o=e.target.value;n&&"string"==typeof o&&0===o.indexOf(".")&&(o=`0${o}`),!M.test(o)&&""!==o||Number.isNaN(Number(o))?e.stopPropagation():(o=o.replace(S,""),(0,T.N3)(o)>t&&(o=o.replace(new RegExp(`^(\\d*\\.\\d{${t}})\\d*`),"$1")),i&&o.split(".")[0].length>i&&(o=r),0===t&&(o=o.replace(".","")),"function"==typeof s&&s(o))}}),void 0)};var I=i(56897);const C=()=>{const{data:e,setData:t,hasInitialized:i}=(0,I.S)("slippage",.5);return{slippage:e,setSlippage:t,hasInitialized:i}},A={height:"32px",px:"16px",borderRadius:"16px",border:"none",bg:"line",color:"t.secondary","&.active":{bg:"primary",color:"t.white"}},N=({value:e,onClick:t,isActive:i})=>(0,o.jsx)(a.Z,Object.assign({sx:A,as:"button",alignItems:"center",justifyContent:"center",onClick:t,className:p()({active:i})},{children:(0,o.jsx)(l.Z,Object.assign({variant:"body2"},{children:`${e}%`}),void 0)}),void 0),k={sx:{height:"32px !important",mr:"4px",borderRadius:"16px",input:{textAlign:"right",borderRadius:"16px","&::placeholder":{textAlign:"left"}}}},_=[.1,.5,1],L={".bn-tooltip-box":{width:"258px",px:"12px",py:"8px"}},Z={pageName:"liteMode",$element_id:"settingPopups"},E=({slippage:e,setSlippage:t})=>{(0,g.Tb)(Z);const{getI18n:i}=(0,g.yk)(),[s,c]=(0,r.useState)((()=>_.some((t=>t===e))?"":String(e)));return(0,o.jsxs)(n.Z,Object.assign({mb:"80px"},{children:[(0,o.jsxs)(a.Z,Object.assign({alignItems:"center",mb:"12px",sx:L},{children:[(0,o.jsx)(l.Z,Object.assign({variant:"body1",color:"t.primary"},{children:i("slippageTolerance",{defaultValue:"Slippage Tolerance"})}),void 0),(0,o.jsx)(h.Z,Object.assign({ml:"5px",arrow:!0,tip:(0,o.jsx)(l.Z,Object.assign({color:"t.white",variant:"caption"},{children:i("slippageToleranceTooltip",{defaultValue:"Setting a high slippage tolerance can help transactions successed, but you may not get such a good price. Use with caution."})}),void 0)},{children:(0,o.jsx)(j.Z,{color:"t.third",size:14,height:"14px"},void 0)}),void 0)]}),void 0),(0,o.jsxs)(b,Object.assign({x:"4px"},{children:[_.map((i=>(0,o.jsx)(N,{value:i,isActive:e===i,onClick:()=>{t(i),c("")}},i))),(0,o.jsxs)(a.Z,Object.assign({alignItems:"center"},{children:[(0,o.jsx)(P,{boxProps:k,precision:1,value:s,onChange:e=>{c(e),t(""!==e?Number(e):.5)},variant:"filled",size:"md",max:100,placeholder:i("customizeSlippage",{defaultValue:"0.5 or customize"}),type:"number",inputMode:"decimal"},void 0),(0,o.jsx)(l.Z,Object.assign({variant:"body2",color:"t.secondary"},{children:"%"}),void 0)]}),void 0)]}),void 0)]}),void 0)},w=(0,r.memo)((({isOpen:e,setIsOpen:t})=>{const{getI18n:i}=(0,g.yk)(),{slippage:n,setSlippage:r,hasInitialized:s}=C(),a=e&&s;return(0,o.jsxs)(f.ZP.Modal,Object.assign({visible:a},{children:[(0,o.jsx)(f.ZP.ModalTitle,{title:(0,o.jsx)(l.Z,Object.assign({color:"t.primary"},{children:i("settings",{defaultValue:"Settings"})}),void 0),variant:"center",onClose:()=>t(!1)},void 0),(0,o.jsx)(y.V,Object.assign({isDrawerVisible:a},{children:(0,o.jsx)(E,Object.assign({},{slippage:n,setSlippage:r}),void 0)}),void 0)]}),void 0)})),R=()=>{const[e,t]=(0,r.useState)(!1),{trackWebClickWithWalletAddress:i}=(0,g.fM)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x,{sx:v,onClick:()=>{i({pageName:"liteMode",$element_id:"setting"}),t(!0)}},void 0),(0,o.jsx)(w,Object.assign({},{isOpen:e,setIsOpen:t}),void 0)]},void 0)},V=function(e){return r.createElement(d.Z,(0,c.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M4 12a8 8 0 1113.657 5.657 1 1 0 001.414 1.414A9.972 9.972 0 0022 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 2.706.947 5.361 2.793 7.207l.793.793H3a1 1 0 100 2h5a1 1 0 001-1v-5a1 1 0 10-2 0v2.586l-.793-.793C4.796 16.38 4 14.265 4 12z"}),r.createElement("path",{d:"M11.293 12.707A1 1 0 0111 12V7a1 1 0 112 0v4.586l2.5 2.5a1 1 0 01-1.414 1.414l-2.793-2.793z"}))};var z=i(2896),$=i(92790),D=i(14485),W=i(51099);const F=function(e){return r.createElement(d.Z,(0,c.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{fillRule:"evenodd",d:"M6.628 8.775l.159-1.988 1.988-.159a3 3 0 001.707-.707L12 4.628l1.518 1.293a3 3 0 001.707.707l1.988.159.159 1.988a3 3 0 00.707 1.707L19.372 12l-1.293 1.518a3 3 0 00-.707 1.707l-.159 1.988-1.988.159a3 3 0 00-1.707.707L12 19.372l-1.518-1.293a3 3 0 00-1.707-.707l-1.988-.159-.159-1.988a3 3 0 00-.707-1.707L4.628 12l1.293-1.518a3 3 0 00.707-1.707zM4.861 5.778a1 1 0 01.917-.917l2.838-.226a1 1 0 00.569-.236l2.166-1.846a1 1 0 011.298 0l2.166 1.846a1 1 0 00.57.236l2.837.226a1 1 0 01.917.917l.226 2.838a1 1 0 00.236.569l1.846 2.166a1 1 0 010 1.298l-1.846 2.166a1 1 0 00-.236.57l-.226 2.837a1 1 0 01-.917.917l-2.838.226a1 1 0 00-.569.236l-2.166 1.846a1 1 0 01-1.298 0l-2.166-1.846a1 1 0 00-.57-.236l-2.837-.226a1 1 0 01-.917-.917l-.226-2.838a1 1 0 00-.236-.569L2.553 12.65a1 1 0 010-1.298l1.846-2.166a1 1 0 00.236-.57l.226-2.837zM13 9a1 1 0 10-2 0v3a1 1 0 102 0V9zm0 6a1 1 0 10-2 0 1 1 0 002 0z",clipRule:"evenodd"}))};var U=i(59545),B=i(33470),H=i(37227),Y=i(977),K=i(23131),G=i(38896),q=i(9205),Q=i(11001),J=i(42871);var X=i(55354),ee=i(12374);const te=e=>{const{side:t,positionSide:i}=e,{getI18n:r}=(0,g.yk)(),{getI18n:s}=(0,X.ZK)(),c=(0,ee.k)(t),{symbolName:d,formattedAvgPrice:u,formattedEntryPrice:m,cancelOrExpire:p,percentage:v,formattedFilled:b,formattedAmount:x,marginAsset:h,isToday:f,date:j,time:y}=(({insertTime:e,price:t,origQty:i,avgPrice:o,executedQty:n,symbol:r="",type:s,origType:a,status:l})=>{const c=a||s,{getI18n:d}=(0,q.ZK)("trd-openOrder",void 0),{getI18n:u}=(0,g.yk)(),m=((0,G.Vh)()||{})[r]||{},{pricePrecision:p,marginAsset:v}=m,b=Number(o),x=b&&(0,B.uf)(0,p)!==(0,B.uf)(b,p),h=(0,H.H)(m,u),f=(Number(n)/Number(i)*100).toFixed()+"%",j="CANCELED"===l||"EXPIRED"===l,y=(0,Y.v)(new Date(e),"yyyy-MM-dd"),O=(0,Y.v)(new Date(e),"hh:mm:ss"),T=(0,Y.v)(new Date,"yyyy-MM-dd")===y;return{symbolName:h,nextType:d(`type-${c}`,{defaultValue:c}),formattedAvgPrice:x?(0,B.uf)(b,p):K.GR,formattedEntryPrice:Q.Y1.includes(c)?K.GR:(0,B.uf)(t,p),formattedAmount:(0,J.WA)({quantity:Number(i),price:j?t:o,precision:p,format:!0}),formattedFilled:(0,J.WA)({quantity:Number(n)||0,price:j?t:o,precision:p,format:!0}),orderType:c,percentage:f,marginAsset:v,cancelOrExpire:j,date:y,time:O,isToday:T}})(e);return(0,o.jsxs)(a.Z,Object.assign({color:"t.third",justifyContent:"space-between",alignItems:"center",height:"64px"},{children:[p&&(0,o.jsxs)(a.Z,Object.assign({sx:{flexDirection:"column",justifyContent:"center",alignItems:"center",color:"t.sell",width:"48px",height:"48px",mr:"10px",bg:e=>(0,U.DZ)(e.colors.bg3,.45),borderRadius:"4px"}},{children:[(0,o.jsx)(F,{size:20},void 0),(0,o.jsxs)(n.Z,Object.assign({sx:{fontSize:"12px",lineHeight:"16px"}},{children:[r("Failed",{defaultValue:"Failed"})," "]}),void 0)]}),void 0),(0,o.jsxs)(a.Z,Object.assign({sx:{flexDirection:"column",marginRight:"auto",color:p?"t.sell":"t.third",fontSize:"14px",lineHeight:"20px"}},{children:[(0,o.jsx)(n.Z,{children:r("lite-order-history-row",{defaultValue:"{{operation}} {{symbol}} at {{price}}",operation:s(`side${c}${i}`,{defaultValue:c}),symbol:d.symbol,price:p?m:u})},void 0),(0,o.jsxs)(n.Z,{children:["(",v," ",r("filled",{defaultValue:"filled"})," ","  ","100%"!==v?`${b} /`:""," ",x," ",h,")"]},void 0)]}),void 0),(0,o.jsx)(l.Z,Object.assign({sx:{fontSize:"12px",mt:"12px",alignSelf:"flex-start"}},{children:f?y:j}),void 0)]}),void 0)},ie=(0,D.OQ)("3m"),oe={pageName:"liteMode",$element_id:"historyPopups"},ne={height:"384px",overflowY:"auto"},re=(0,r.memo)((()=>{const{getI18n:e}=(0,g.yk)();return(0,o.jsx)(a.Z,Object.assign({sx:ne,justifyContent:"center"},{children:(0,o.jsx)(l.Z,Object.assign({mt:"150px",color:"t.third",ml:"-8px",fontSize:"16px"},{children:e("no-history-data",{defaultValue:"No History Data"})}),void 0)}),void 0)})),se=(0,r.memo)((()=>{(0,g.Tb)(oe);const{getI18n:e}=(0,g.yk)(),{preHistory:t,loading:i,hasMore:n,loadMore:s}=(0,W.aM)(100,ie.startTime,ie.endTime,"FUTURES"),a=(0,r.useCallback)((e=>(0,r.createElement)(te,Object.assign({},e,{key:e.orderId}))),[]),c=(0,o.jsx)(l.Z,Object.assign({mt:"150px",color:"t.third",ml:"-8px",fontSize:"16px"},{children:e("no-history-data",{defaultValue:"No History Data"})}),void 0);return(0,o.jsx)($.i,{sx:ne,data:t,loading:i,renderItem:a,emptyText:c,hasMore:n,loadMore:s},void 0)})),ae=()=>{const[e,t]=(0,r.useState)(!1),{getI18n:i}=(0,g.yk)(),n=(0,G._n)();return(0,r.useEffect)((()=>z.ee.on("SHOW_HISTORY_DRAWER",(()=>{t(!0)}))),[]),(0,o.jsxs)(f.ZP.Modal,Object.assign({minWidth:"375px",px:16,visible:e},{children:[(0,o.jsx)(f.ZP.ModalTitle,{title:(0,o.jsx)(l.Z,Object.assign({color:"t.primary"},{children:i("History",{defaultValue:"History"})}),void 0),variant:"center",onClose:()=>t(!1)},void 0),(0,o.jsx)(y.V,Object.assign({isDrawerVisible:e},{children:n?(0,o.jsx)(se,{},void 0):(0,o.jsx)(re,{},void 0)}),void 0)]}),void 0)},le=()=>{const{trackWebClickWithWalletAddress:e}=(0,g.fM)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(V,{sx:v,onClick:()=>{e({pageName:"liteMode",$element_id:"history"}),z.ee.emit("SHOW_HISTORY_DRAWER",void 0)}},void 0),(0,o.jsx)(ae,{},void 0)]},void 0)};var ce=i(48300);const de=(0,r.memo)((()=>{const{getI18n:e}=(0,g.Ec)(),{visible:t,setVisible:i}=(0,ce.r)(),{trackWebClickWithWalletAddress:n}=(0,g.fM)();return(0,o.jsxs)(a.Z,Object.assign({alignItems:"center",justifyContent:"space-between"},{children:[(0,o.jsx)(l.Z,Object.assign({variant:"headline6"},{children:e("Perpetuals",{defaultValue:"Perpetuals"})}),void 0),(0,o.jsxs)(b,Object.assign({x:"12px"},{children:[(0,o.jsx)(u,{sx:v,className:p()({active:t}),onClick:()=>{n({pageName:"liteMode",$element_id:"chart",$element_content:t?"off":"on"}),i(!t)}},void 0),(0,o.jsx)(le,{},void 0),(0,o.jsx)(R,{},void 0)]}),void 0)]}),void 0)}));var ue=i(45362),me=i(34952),pe=i(22055);const ge={bg:"bg3",borderRadius:"16px",button:{height:"40px",borderRadius:"16px",flex:1,bg:"bg3",color:"t.white","&:hover:not(:disabled):not(:active):not(.inactive)":{color:"t.white"},"&.long.active":{bg:"buy"},"&.short.active":{bg:"sell"},"&.deposit.active":{bg:"primary"},"& > div":{fontWeight:600}}},ve=(0,r.memo)((({activeTab:e="long",setActiveTab:t})=>{const{getI18n:i}=(0,me.Z)(),{getI18n:n}=(0,g.HK)(),{trackWebClickWithWalletAddress:r}=(0,pe.fM)();return(0,o.jsxs)(a.Z,Object.assign({sx:ge},{children:[(0,o.jsx)(ue.Z,Object.assign({onClick:()=>{t("long"),r({pageName:"liteMode",$element_id:"switchTabTradeModule",$element_content:"Long"})},type:"button",variant:"quiet",className:p()({long:!0,active:"long"===e})},{children:(0,o.jsx)(l.Z,Object.assign({variant:"subtitle2",color:"t.primary"},{children:i("Long",{defaultValue:"Long"})}),void 0)}),void 0),(0,o.jsx)(ue.Z,Object.assign({onClick:()=>{t("short"),r({pageName:"liteMode",$element_id:"switchTabTradeModule",$element_content:"Short"})},type:"button",variant:"quiet",className:p()({short:!0,active:"short"===e})},{children:(0,o.jsx)(l.Z,Object.assign({variant:"subtitle2",color:"t.primary"},{children:i("Short",{defaultValue:"Short"})}),void 0)}),void 0),(0,o.jsx)(ue.Z,Object.assign({onClick:()=>{t("deposit"),r({pageName:"liteMode",$element_id:"switchTabTradeModule",$element_content:"Deposit"})},type:"button",variant:"quiet",className:p()({deposit:!0,active:"deposit"===e})},{children:(0,o.jsx)(l.Z,Object.assign({variant:"subtitle2",color:"t.primary"},{children:n("Deposit",{defaultValue:"Deposit"})}),void 0)}),void 0)]}),void 0)}));var be=i(4724),xe=i(2364),he=i(94106),fe=i(59111),je=i(60520),ye=i(39591),Oe=i(41825),Te=i(84755),Me=i(92392),Se=i(70420);const Pe={sx:{"&:not(.bn-input-status-disabled):hover, .bn-input-status-focus":{border:"none",borderBottom:"1px solid",borderColor:"primary"},borderRadius:0,border:"none",width:"100%",height:"40px",margin:"0",borderBottom:"1px solid",borderColor:e=>(0,U.DZ)(e.colors.t.third,.3),boxShadow:"unset",input:{boxShadow:"unset",textAlign:"left",fontSize:"16px","&::placeholder":{color:e=>(0,U.DZ)(e.colors.t.third,.5),fontSize:"16px"}}}},Ie=(0,r.memo)((({fieldName:e,disabled:t})=>{const i=(0,G.XY)(Te.AO.usdt),{getI18n:n}=(0,g.yk)(),{marginAsset:r,minQty:s}=(0,G.j2)(),[,[a,c]]=(0,G.z4)(),d=(0,he.qo)({name:e}),u=(0,ye.Z)({lastPriceType:"trade"}),m=(0,Oe.u)({side:"buy"}),p=Boolean(d),{message:v,valid:b}=(0,Me.QE)({orderAmount:m,price:u,unitAmountPrecision:i,base:a,margin:r,getFutI18n:n,minQty:+s}),{isSubmitted:x}=(0,he.cl)(),h=x&&!b&&p;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Se.L,{boxProps:Pe,fieldName:e,suffix:!t&&(0,o.jsx)(l.Z,Object.assign({variant:"body1",color:"t.primary"},{children:c}),void 0),placeholder:n("amount",{defaultValue:"Amount"}),precision:i,maxLength:Te.ze,required:!0,error:h,errorText:h?v:"",infoText:p?v:"",disabled:t,inputMode:"decimal"},void 0)},void 0)}));var Ce=i(16505);const Ae=()=>{const{getI18n:e}=(0,g.HK)(),{trackWebClickWithWalletAddress:t}=(0,g.fM)();return(0,o.jsxs)(ue.Z,Object.assign({type:"button",sz:"dwarf",variant:"text",p:0,minWidth:0,minHeight:0,lineHeight:"12px",onClick:()=>{z.ee.emit("OPEN_LITE_ORDER_FORM_DEPOSIT_TAB",void 0),t({pageName:"liteMode",$element_id:"goToDeposit"})}},{children:[(0,o.jsx)(l.Z,Object.assign({variant:"captionSub",mr:"2px",color:"t.yellow"},{children:e("Deposit",{defaultValue:"Deposit"})}),void 0),(0,o.jsx)(Ce.Z,{fontSize:"16px",color:"t.third"},void 0)]}),void 0)},Ne=(0,r.memo)((({maxAvailableBalance:e,isInsufficient:t})=>{const i=(0,G._n)(),{getI18n:n}=(0,g.yk)(),[,[,r]]=(0,G.z4)(),s=`${e}${Number(e)>0?` ${r}`:""}`;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.Z,Object.assign({justifyContent:"space-between",mb:"4px"},{children:[(0,o.jsx)(l.Z,Object.assign({variant:"caption",color:"t.secondary"},{children:n("maxAvailableBalance",{defaultValue:"Max available balance: {{balance}}",balance:s})}),void 0),i&&t&&(0,o.jsx)(Ae,{},void 0)]}),void 0),i&&t&&(0,o.jsx)(l.Z,Object.assign({variant:"caption",color:"t.sell"},{children:n("insufficientBalance",{defaultValue:"Insufficient balance",balance:s})}),void 0)]},void 0)})),ke=(0,r.memo)((({amount:e,setAmount:t})=>{const{getI18n:i}=(0,g.HK)(),n="MAX"===e?i("MAX",{defaultValue:"Max"}):`+${e}`;return(0,o.jsx)(a.Z,Object.assign({onClick:()=>t("MAX"===e?void 0:e),sx:{borderRadius:"14px",flex:1,height:"28px",bg:"line",alignItems:"center",justifyContent:"center","&:not(:last-child)":{mr:"4px"}}},{children:(0,o.jsx)(l.Z,Object.assign({variant:"caption",color:"t.secondary"},{children:n}),void 0)}),void 0)})),_e=[10,100,500,1e3],Le=(0,r.memo)((({maxAvailableBalance:e})=>{const{setValue:t,getValues:i}=(0,he.Gc)(),n=(0,r.useCallback)((e=>{const o=Number(i(je.T.UNIT_AMOUNT)||0),n=String(o+e);t(je.T.UNIT_AMOUNT,n)}),[t,i]),s=(0,r.useCallback)((()=>{t(je.T.UNIT_AMOUNT,e)}),[e,t]);return(0,o.jsxs)(a.Z,Object.assign({alignItems:"center",justifyContent:"space-between"},{children:[_e.map((e=>(0,o.jsx)(ke,{amount:e,setAmount:n},e))),(0,o.jsx)(ke,{amount:"MAX",setAmount:s},void 0)]}),void 0)}));var Ze=i(7247);const Ee={width:"24px",height:"24px",marginRight:"8px",borderRadius:"50%"},we=(0,r.memo)((({pic:e,label:t,onClick:i})=>(0,o.jsxs)(a.Z,Object.assign({color:"t.primary",alignItems:"center",sx:{cursor:"pointer"},onClick:i},{children:[e&&(0,o.jsx)("img",{src:e,style:Ee},void 0),(0,o.jsx)(l.Z,Object.assign({variant:"subtitle2",mr:"4px"},{children:t}),void 0),(0,o.jsx)(Ze.Z,{size:16},void 0)]}),void 0))),Re=(0,r.memo)((()=>{const{getI18n:e}=(0,g.yk)(),[t]=(0,G.z4)(),i=(0,G.iB)()[t],n=i?(0,H.H)(i,e).fullName:"",r=(0,G.sH)(t),{trackWebClickWithWalletAddress:s}=(0,g.fM)();return(0,o.jsx)(we,{pic:r,label:n,onClick:()=>{z.ee.emit("SHOW_MARKET_DRAWER",void 0),s({pageName:"liteMode",$element_id:"switchTradePair",$element_name:"tradeModule"})}},void 0)}));var Ve=i(51259),ze=i(54073),$e=i.n(ze),De=i(3317);var We;!function(e){e.LONG="LONG",e.SHORT="SHORT",e.BOTH="BOTH"}(We||(We={}));const Fe=(e,t)=>((e,t)=>{let i=0;for(;i<e.length;){const o=e[i];if(t<o.bracketNotionalCap)return o;i+=1}return i&&e[i-1]})(e,t),Ue=({symbol:e,lng:t,brackets:i,leverage:o,positions:n,isCM:r})=>{var s,a,l,c;const d=(null==i?void 0:i[e])||[],u=Math.abs((null===(s=null==n?void 0:n[e])||void 0===s?void 0:s.notionalValue)||0)+Math.abs((null===(a=null==n?void 0:n[`${e}_${We.LONG}`])||void 0===a?void 0:a.notionalValue)||0)+Math.abs((null===(l=null==n?void 0:n[`${e}_${We.SHORT}`])||void 0===l?void 0:l.notionalValue)||0),m={curLeverage:o||20,minVal:0,maxVal:(null===(c=null==d?void 0:d[0])||void 0===c?void 0:c.maxOpenPosLeverage)||125,userNotionalValue:u,userCurLeverage:Fe(d,u)},p=r?De.dk:De.Z;return{leverageData:m,updateUserLeverage:(i,o=!0)=>p({symbol:e,leverage:i},{lang:t,enableErrorMsgIntercept:o}),findLeverageByLevel:e=>((e,t)=>{let i=0;const o=[...e].reverse();for(;i<o.length;){const e=o[i],n=e.maxOpenPosLeverage;if(t===n)return e;if(t<n)return o[Math.max(i,0)];i+=1}return i&&o[i-1]})(d,e)}};var Be=i(27498),He=i(685);const Ye=(0,r.memo)((e=>{const{lng:t,brackets:i,leverage:n,positions:s,symbol:a,isCM:l=!1,onChangeLeverage:c,label:d=null,selectLeverage:u,setSelectLeverage:m}=e,{leverageData:p,updateUserLeverage:g}=Ue({symbol:a,lng:t,brackets:i,leverage:n,positions:s,isCM:l}),v=(0,G._n)(),{curLeverage:b,userCurLeverage:x,minVal:h,maxVal:f}=p,{maxOpenPosLeverage:j=125}=x,y=h+1,O=(0,r.useMemo)((()=>{const e=Math.max(f,b);let t=[];if(e<10){t=[];for(let i=1;i<=e;i++)t.push(i)}else{t=[y];for(let i=1;i<=5;i++)t.push(Math.floor(i/5*e))}return t}),[b,f,y]),T=(0,r.useMemo)((()=>$e()((e=>{return t=void 0,i=void 0,r=function*(){const{success:t,message:i}=yield g(e,!1);t?c(e):((0,He.triggerNotificationLite)(!1,i),m(n))},new((o=void 0)||(o=Promise))((function(e,n){function s(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(s,a)}l((r=r.apply(t,i||[])).next())}));var t,i,o,r}),400,{leading:!1})),[a,c,m,n]),M=(0,r.useMemo)((()=>({min:y,max:Math.max(f,b)})),[b,f,y]),S=(0,r.useCallback)((e=>{m(e),v&&T(e)}),[m,T,v]);return(0,o.jsxs)(o.Fragment,{children:[d,(0,o.jsx)(Ve.Z,{max:j,color:"t.third",progress:u||y,onChange:S,steppers:O,unit:"x",range:M,showScales:!0},void 0)]},void 0)})),Ke=(0,r.memo)((()=>{const{getI18n:e}=(0,g.yk)(),[t]=(0,G.z4)(),i=(0,Be.O)(),[n,s]=(0,r.useState)(i.leverage);return(0,r.useEffect)((()=>{s(i.leverage)}),[i.leverage,t]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.Z,Object.assign({mb:"8px",justifyContent:"space-between"},{children:[(0,o.jsx)(l.Z,Object.assign({variant:"body2",color:"t.third"},{children:e("LeverageLabel",{defaultValue:"Leverage"})}),void 0),(0,o.jsx)(l.Z,Object.assign({variant:"body2",color:"t.primary"},{children:`${n}x`}),void 0)]}),void 0),(0,o.jsx)(Ye,Object.assign({},Object.assign(Object.assign({},i),{selectLeverage:n,setSelectLeverage:s})),void 0)]},void 0)}));var Ge=i(33073);const qe=()=>{const e=(0,G._n)(),t=(()=>{const e=(0,G.F$)(),t=(0,G.cn)();return(0,r.useMemo)((()=>!!t&&e.some((e=>e.isolated))),[e,t])})(),i=(()=>{const e=(0,G.E)(),t=(0,G.$J)();return(0,r.useMemo)((()=>!e.loading&&0!==e.preOrders.length&&e.preOrders.some((e=>{const{symbol:i}=e,o=t[i];return o.isolated&&"BOTH"===o.positionSide}))),[e.loading,e.preOrders,t])})(),o=(()=>{const[e]=(0,G.hN)(),t=(0,G.F$)(),i=(0,G.E)(),o=(0,r.useMemo)((()=>t.length>0),[t]),n=(0,r.useMemo)((()=>!i.loading&&0!==i.preOrders.length),[i]);return e&&(o||n)})();return e&&(t||i||o)};var Qe=i(39727);const Je=()=>{const e=(0,G._n)(),[t]=(0,G.zu)(),[i]=(0,G.hN)();return e&&(!t||i)},Xe=()=>{const e=(0,G.E)().loading,t=(0,G.cn)(),i=(0,G.vK)(),o=(0,G.Rp)(),n=(0,G.In)(),r=(0,G._n)();return void 0!==r&&(!1===r||!e&&t&&!i&&o&&!n)},et=()=>{const e=qe(),t=Je();return!Xe()||!(t||e)},{liteConfig:{walletName:tt}}=fe.ll,it={borderRadius:"16px",bg:"inputBg",p:"12px",mb:"12px"},ot=(0,r.memo)((()=>{const e=(0,G._n)(),{getI18n:t}=(0,g.yk)(),{maxAvailableBalance:i,isInsufficient:r,isZeroBalance:s}=(0,Ge.k)(),a=et(),c=Xe();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.Z,Object.assign({mb:"20px"},{children:[(0,o.jsxs)(n.Z,Object.assign({sx:it},{children:[(0,o.jsx)(n.Z,Object.assign({mb:"12px"},{children:(0,o.jsx)(Re,{},void 0)}),void 0),(0,o.jsxs)(n.Z,Object.assign({mb:"12px"},{children:[e&&a&&c&&s&&(0,o.jsx)(l.Z,Object.assign({variant:"caption",color:"alertYellowBg"},{children:t("liteOrderFormDepositNotice",{defaultValue:"0 balance. Before trading, deposit tokens from your DeFi wallet to your {{brokerName}} perpetual wallet.",brokerName:tt})}),void 0),(0,o.jsx)(Ie,{fieldName:je.T.UNIT_AMOUNT,disabled:!a},void 0)]}),void 0),(0,o.jsx)(Ne,Object.assign({},{maxAvailableBalance:i,isInsufficient:r}),void 0)]}),void 0),a&&(0,o.jsx)(Le,{maxAvailableBalance:i},void 0)]}),void 0),a&&(0,o.jsx)(n.Z,Object.assign({mb:"40px"},{children:(0,o.jsx)(Ke,{},void 0)}),void 0)]},void 0)}));var nt=i(5271);var rt=i(61438);const st=(0,r.memo)((({label:e,value:t,valueColor:i})=>(0,o.jsxs)(a.Z,Object.assign({mb:"8px",justifyContent:"space-between"},{children:[(0,o.jsx)(l.Z,Object.assign({variant:"body2",color:"t.third"},{children:e}),void 0),(0,o.jsx)(l.Z,Object.assign({variant:"body2",color:i||"t.primary"},{children:t}),void 0)]}),void 0))),at={mb:"24px","> :not(:last-child)":{mb:"8px"}},lt=(0,r.memo)((()=>{const{getI18n:e}=(0,g.yk)(),[,[t,i]]=(0,G.z4)(),s=(0,he.qo)({name:je.T.UNIT_AMOUNT}),{slippage:a,hasInitialized:l}=C(),{estPrice:c,estAmount:d,limitPrice:u}=(()=>{const e=(0,G.ih)(),t=(0,G.c7)(),i=(()=>{const[e]=(0,G.z4)(),t=(0,K.BN)();return(0,G.U6)(e,t,!1).getState()})(),o=(0,G.XY)(Te.AO.coin),{slippage:n,hasInitialized:s}=C(),[a=0,l]=(0,he.qo)({name:[je.T.UNIT_AMOUNT,je.T.SIDE]}),[c]=(0,G.z4)(),d=(0,Qe.v9)((e=>e.exchangeInfo.infos))[c],{levels:u=[]}=d||{},m=u.length>0?u[u.length-1]:1,p=(0,r.useMemo)((()=>l===nt.hp.BUY?(0,Me.jM)(i.ask,{num:400,level:m,desc:!1}).reverse():(0,Me.jM)(i.bid,{num:400,level:m,desc:!0})),[i,l,m]),g=(0,r.useMemo)((()=>{if(0===p.length)return"0";let e=0,t=0;for(;e<p.length-1&&(t+=p[e].total,Number(a)>t);)e+=1;return p[e].price}),[a,p]),v=(0,r.useMemo)((()=>{if(0===p.length)return 0;let e=0,t=Number(a),i=0,n=0;for(;i<p.length-1;){const{total:o,amount:r}=p[i];if(n+=o,!(Number(t)>n)){e+=t/n*r;break}e+=r,t-=n,i+=1}return(0,B.Jp)(e).toFixed(o,1)}),[a,o,p]),b=(0,r.useMemo)((()=>s?((Number(g)||Number(t()))*(l===nt.hp.BUY?1+n/100:1-n/100)).toFixed(e):Number(g).toFixed(e)),[s,l,g,n,e,t]);return{estPrice:g,estAmount:v,limitPrice:b}})(),m=`${c} ${i}`,p=`${d} ${t}`;return(e=>{const{setValue:t}=(0,he.Gc)();(0,r.useEffect)((()=>{t(je.T.LIMIT_PRICE,e)}),[e,t])})(u),et()?(0,o.jsxs)(n.Z,Object.assign({sx:at},{children:[(0,o.jsx)(st,{label:e("estAmount",{defaultValue:"Est. Amount"}),value:s?p:"-"},void 0),(0,o.jsx)(st,{label:e("estPrice",{defaultValue:"Est. price"}),value:s?`${m} per ${t}`:"-"},void 0),(0,o.jsx)(st,{label:e("slippageTolerance",{defaultValue:"Slippage Tolerance"}),value:l?`${null==a?void 0:a.toFixed(1)}%`:"-%",valueColor:"t.yellow"},void 0),(0,o.jsx)(rt.w,{fieldName:je.T.BUY_ORDER_AMOUNT,unitAmountFieldName:je.T.UNIT_AMOUNT,side:"buy"},void 0),(0,o.jsx)(rt.w,{fieldName:je.T.SELL_ORDER_AMOUNT,unitAmountFieldName:je.T.UNIT_AMOUNT,side:"sell"},void 0)]}),void 0):null}));var ct=i(93603);const dt=(0,r.memo)((()=>{const{getI18n:e}=(0,g.HK)(),{showWalletConnectDialog:t}=(0,ct.dc)();return(0,o.jsx)(ue.Z,Object.assign({type:"button",sz:"normal",width:"100%",onClick:t},{children:e("dex-header-ConnectWallet",{defaultValue:"Connect Wallet"})}),void 0)})),ut=(0,r.memo)((({disabled:e=!1})=>{const{getI18n:t}=(0,g.yk)(),i=(()=>{const{getValues:e}=(0,he.Gc)(),{trackWebClickWithWalletAddress:t}=(0,g.fM)(),[i]=(0,G.z4)();return()=>{const[o,n]=e([je.T.UNIT_AMOUNT,je.T.SIDE]);t({pageName:"liteMode",$element_id:"openPosition",$element_type:"BUY"===n?"Long":"Short",$element_content:o,title:i})}})();return(0,o.jsx)(ue.Z,Object.assign({type:"submit",sz:"normal",width:"100%",disabled:e,onClick:i},{children:t("openPosition",{defaultValue:"Open Position"})}),void 0)}));var mt=i(98735);const pt=()=>{const{getI18n:e}=(0,g.yk)();return(0,o.jsx)(l.Z,Object.assign({variant:"subtitle2",color:"t.sell"},{children:e("goToCloseMessage",{defaultValue:"You are currently holding positions in Isolated Mode or Hedge Mode in Advanced mode, you need to close these positions before you use Lite Mode"})}),void 0)},gt=(0,r.memo)((()=>{const{getI18n:e}=(0,g.yk)(),{setLayout:t}=(0,mt.vT)(),{trackWebClickWithWalletAddress:i}=(0,g.fM)();return(0,o.jsxs)(ue.Z,Object.assign({type:"button",sz:"dwarf",variant:"text",p:0,minWidth:0,minHeight:0,color:"t.yellow",onClick:()=>{t(mt.UO),i({pageName:"liteMode",$element_id:"goToClose"})}},{children:[(0,o.jsx)(l.Z,Object.assign({variant:"subtitle1",mr:"2px"},{children:e("goToClose",{defaultValue:"Go to Close"})}),void 0),(0,o.jsx)(Ce.Z,{fontSize:"16px"},void 0)]}),void 0)})),vt=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(pt,{},void 0),(0,o.jsx)(a.Z,Object.assign({justifyContent:"center",mt:"20px"},{children:(0,o.jsx)(gt,{},void 0)}),void 0)]},void 0);var bt=i(82755);const xt={animation:"rotation 2s infinite linear","@keyframes rotation":{"0%":{transform:"rotate(0)"},"50%":{transform:"rotate(-180deg)"},"100%":{transform:"rotate(-359deg)"}}},ht=()=>(0,o.jsx)(ue.Z,Object.assign({type:"button",sz:"normal",width:"100%"},{children:(0,o.jsx)(bt.Z,{fontSize:"20px",sx:xt},void 0)}),void 0),ft=()=>{const{getI18n:e}=(0,g.yk)();return(0,o.jsx)(l.Z,Object.assign({variant:"subtitle2",color:"t.sell"},{children:e("switchModeMessage",{defaultValue:"You are currently set to Single-Asset or Hedge Mode, you need to change to Multi-Assets Mode + One-way Mode before you use Lite Mode"})}),void 0)},jt=(0,r.memo)((()=>{const{getI18n:e}=(0,g.yk)(),{switchMode:t,isLoading:i}=(()=>{const e=(0,Qe.I0)(),[t,i]=(0,G.zu)(),[o,n]=(0,G.hN)(),[s,a]=(0,r.useState)(!1),l=(0,G.$J)();return{switchMode:()=>{return r=void 0,s=void 0,d=function*(){a(!0);try{const r=Object.values(l).filter((e=>e.isolated&&"BOTH"===e.positionSide));if(yield Promise.all(r.map((t=>e.marginType.changeMarginType({symbol:t.symbol,marginType:K.Yl.CROSSED})))).catch((e=>{throw e})),o){const{success:e}=yield n(!1);if(!e)return(0,He.triggerNotificationLite)(!1)}if(!t){const{success:e}=yield i({joinMargin:!0});if(!e)return(0,He.triggerNotificationLite)(!1)}(0,He.triggerNotificationLite)(!0)}catch(e){(0,He.triggerNotificationLite)(!1)}finally{a(!1)}},new((c=void 0)||(c=Promise))((function(e,t){function i(e){try{n(d.next(e))}catch(e){t(e)}}function o(e){try{n(d.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof c?n:new c((function(e){e(n)}))).then(i,o)}n((d=d.apply(r,s||[])).next())}));var r,s,c,d},isLoading:s}})(),{trackWebClickWithWalletAddress:n}=(0,g.fM)();return(0,o.jsx)(ue.Z,Object.assign({type:"button",sz:"normal",width:"100%",onClick:()=>{i||(t(),n({pageName:"liteMode",$element_id:"switchMode"}))}},{children:i?(0,o.jsx)(bt.Z,{fontSize:"20px",sx:xt},void 0):e("switchMode",{defaultValue:"Switch Mode"})}),void 0)})),yt=(0,r.memo)((()=>{const e=(0,G._n)(),{isZeroBalance:t,isInsufficient:i,isOrderBookEmpty:r}=(0,Ge.k)(),s=e&&(t||i),a=qe(),l=Je();return Xe()?e?a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Z,Object.assign({mb:"12px"},{children:(0,o.jsx)(vt,{},void 0)}),void 0),(0,o.jsx)(ut,{disabled:!0},void 0)]},void 0):l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Z,Object.assign({mb:"28px"},{children:(0,o.jsx)(ft,{},void 0)}),void 0),(0,o.jsx)(jt,{},void 0)]},void 0):s?(0,o.jsx)(ut,{disabled:!0},void 0):(0,o.jsx)(ut,{disabled:r},void 0):(0,o.jsx)(dt,{},void 0):(0,o.jsx)(ht,{},void 0)}));var Ot=i(76539),Tt=i(36628);const Mt=({side:e})=>{const{onSubmit:t,methods:i}=(({side:e})=>{const t=(0,G._n)(),[,i]=(0,G.K5)(),[,o]=(0,G.LY)(),[,n]=(0,G.KK)(),[,s]=(0,G.eY)();(0,r.useEffect)((function(){i(nt.Jm.LIMIT),n(!1),o(Te.rb.TIF.FOK),t&&s(Te.AO.usdt)}),[t,i,n,o,s]);const a=(0,G.c7)(),l=(0,he.cI)({defaultValues:Object.assign(Object.assign({},je.U),{[je.T.SIDE]:e,[je.T.LIMIT_PRICE]:a()})}),{reset:c,handleSubmit:d,getValues:u,setValue:m}=l,p=(0,r.useCallback)((()=>{c(Object.assign(Object.assign({},je.U),{[je.T.SIDE]:e,[je.T.LIMIT_PRICE]:u(je.T.LIMIT_PRICE)||a()}))}),[u,c,e,a]),g=(0,Tt.F)({afterSubmit:p,isLiteMode:!0}),[v]=(0,G.z4)(),b=(0,Ot.Z)(v);return(0,r.useEffect)((function(){b&&b!==v&&p()}),[p,v,b]),(0,r.useEffect)((function(){m(je.T.SIDE,e),m(je.T.UNIT_AMOUNT,"")}),[e,m]),{onSubmit:d(g),methods:l}})({side:e});return(0,o.jsx)(he.RV,Object.assign({},i,{children:(0,o.jsxs)("form",Object.assign({autoComplete:"off",onSubmit:t},{children:[(0,o.jsx)(ot,{},void 0),(0,o.jsx)(lt,{},void 0),(0,o.jsx)(yt,{},void 0)]}),void 0)}),void 0)},St={long:nt.hp.BUY,short:nt.hp.SELL},Pt=(0,r.memo)((()=>{const[e,t]=(0,r.useState)("long");return(0,r.useEffect)((()=>{z.ee.on("OPEN_LITE_ORDER_FORM_DEPOSIT_TAB",(()=>{t("deposit")}))}),[]),(0,o.jsx)(s.Z,Object.assign({sx:{mt:"8px",width:"100%",bg:"moduleBg",color:"t.primary",p:"16px",overflow:"unset"},name:"orderForm",id:"orderForm"},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Z,Object.assign({mb:"16px"},{children:(0,o.jsx)(de,{},void 0)}),void 0),(0,o.jsx)(n.Z,Object.assign({mb:"16px"},{children:(0,o.jsx)(ve,{activeTab:e,setActiveTab:t},void 0)}),void 0),"deposit"===e?(0,o.jsx)(be.I,{onWithdrawButtonClick:xe.openWithdrawModal},void 0):(0,o.jsx)(Mt,{side:St[e]},void 0)]},void 0)}),void 0)}))},48300:(e,t,i)=>{i.d(t,{r:()=>r});var o=i(2784),n=i(47316);const r=()=>{const[e,t]=(0,n.g)("LITE_CHARTS_VISIBLE",!1);return(0,o.useMemo)((()=>({visible:e,setVisible:t})),[e,t])}},36628:(e,t,i)=>{i.d(t,{F:()=>x});var o=i(33470),n=i(39727),r=i(84755),s=i(38896),a=i(2896),l=i(92392),c=i(10117),d=i(23131),u=i(11001),m=i(54163),p=i(27831),g=i(99e3),v=i(97060),b=i(685);function x({afterSubmit:e,overrides:t={},isLiteMode:i=!1}){const{trackWebClickWithWalletAddress:x}=(0,v.fM)(),h=(0,n.I0)(),{setMessageInfo:f}=(0,s.YT)(),{getI18n:j}=(0,v.yk)(),y=(0,s.G3)(),O=(0,s.c7)(),[T]=(0,s.eY)(),{marginType:M}=(0,s.uO)(),S=(0,s.Gf)(),P=(n,v)=>{var P,I,C,A,N,k;const{preference:{orderConfirmation:_,positionMode:L,assetMode:Z,enableAdvancedTPSL:E,priceProtection:w},futuresOrderForm:R,userCenter:{loginStatus:{isLoggedIn:V}},products:{currentProduct:{filters:z=[],equalQtyPrecision:$=2,minQty:D,marginAsset:W,contractVal:F=1,pricePrecision:U},allProducts:B},pageStore:{symbol:[H,[Y,K]]},markPrice:G,position:q,leverage:{curLeverage:Q},exchangeInfo:{infos:J},balance:X,assetIndex:ee}=v;if(!V)return;const te=t.orderType||R.orderType,ie=t.positionDirection||R.positionDirection,oe=t.timeInForce||R.timeInForce,ne="boolean"==typeof t.reduceOnly?t.reduceOnly:R.reduceOnly,re="boolean"==typeof t.isTPSLEnabled?t.isTPSLEnabled:R.isTPSLEnabled,se=(null===(P=d.vQ[K])||void 0===P?void 0:P.pricePrecision)||d.vQ.delivery.pricePrecision,ae=(null===(I=z.find(g.$H))||void 0===I?void 0:I.tickSize)||"",le=(0,m.OR)(ae),ce=(0,m.OR)(null===(C=z.find(g.W4))||void 0===C?void 0:C.stepSize),de=(0,m.OR)(null===(A=z.find(g.vr))||void 0===A?void 0:A.stepSize),ue=null===(N=z.find(g.Jv))||void 0===N?void 0:N.notional,{levels:me}=J[H]||{levels:c.zq.map((e=>(0,c.Wv)(e)))},{askPrice:pe,bidPrice:ge}=(0,l.OA)({tickSize:ae,symbol:H,levels:me,isDelivery:y}),ve=Number(O()),be=(0,l._V)({orderType:te,equalQtyPrecision:$,unit:T,filters:z}),xe=(0,l._V)({orderType:te,equalQtyPrecision:$,unit:y?r.SW.cont:r.AO.coin,filters:z}),he=Number(null===(k=G[H])||void 0===k?void 0:k.markPrice),{side:fe,buyOrderAmount:je,sellOrderAmount:ye,unitAmount:Oe,activatePriceWorkingType:Te}=n,Me="BUY"===fe,Se=Number(n.limitPrice),Pe=Me?je:ye,Ie=Number(n.triggerPrice),Ce=Number(n.activatePrice),Ae=Number(n.priceRate),Ne=(0,l.JN)({orderType:te,activatePrice:Ce,stopPrice:Ie,limitPrice:Se,lastTradePrice:ve,activatePriceWorkingType:Te,markPrice:he}),ke=Oe&&!~Oe.indexOf("%")?Number(Oe):Number((0,l.ee)({unit:T,contractVal:F,price:Ne,orderAmount:Pe,stepSizePrecision:(0,u.Br)(te)?de:ce,tickSizePrecision:le,equalQtyPrecision:$})),_e=e=>(0,p.w_)({askPrice:pe,bidPrice:ge,orderPrice:Se,formType:te,markPrice:he,pricePrecision:U,isDelivery:y,type:e}),{buyCost:Le,sellCost:Ze,buyOpenLost:Ee,sellOpenLost:we}=(0,l.l3)({positionMode:L,positions:q,symbol:H,leverage:Q,buyOrderAmount:je,sellOrderAmount:ye,orderType:te,askPrice:pe,bidPrice:ge,price:Se,markPrice:he,pricePrecision:U,isDelivery:y,contractVal:F}),Re=(0,l.vY)({symbol:H,isDelivery:y,leverage:Q,marginAsset:W,contractVal:F,positions:(0,s.xm)(q,B),balance:X.balance,assetIndexes:ee,assetMode:Z,marginType:M,brackets:S}),{BuyText:Ve,SellText:ze}=(0,l.ad)({positionMode:L,positionDirection:ie,getFutI18n:j}),$e="BUY"===fe?Ve:ze,{valid:De,message:We}=(0,l.mv)({unit:T,orderAmount:Pe,price:Ne,contractVal:F,unitAmountPrecision:be,orderAmountPrecision:xe,base:Y,margin:W,minQty:+D,minNotional:ue,getFutI18n:j,isDelivery:y,messageType:"order-form-toast",reduceOnly:ne,positionDirection:ie});if(!De)return void f({message:We,variant:"error"});const Fe=()=>{let t="POST_ONLY"===te?"LIMIT":te;const r=n.triggerPriceWorkingType;Me?("CONTRACT_PRICE"===r&&Ie<ve||"MARK_PRICE"===r&&Ie<he)&&(t="STOP"===t?"TAKE_PROFIT":t,t="STOP_MARKET"===t?"TAKE_PROFIT_MARKET":t):("CONTRACT_PRICE"===r&&Ie>ve||"MARK_PRICE"===r&&Ie>he)&&(t="STOP"===t?"TAKE_PROFIT":t,t="STOP_MARKET"===t?"TAKE_PROFIT_MARKET":t);const s=(0,l.M6)({formData:Object.assign(Object.assign({},n),{buyOrderAmount:Number((0,o.Jp)(n.buyOrderAmount).toFixed(xe,1)),sellOrderAmount:Number((0,o.Jp)(n.sellOrderAmount).toFixed(xe,1))}),orderType:t,positionDirection:ie,timeInForce:"POST_ONLY"===te?u.rb.POST_ONLY:oe,reduceOnly:ne,enableAdvancedTPSL:E,isTPSLEnabled:re,priceProtection:w,symbol:H,positionMode:L});return"subOrderList"in s?h.futuresOrderForm.placeStrategy(s).then((t=>{t.success&&(e&&e(),f({message:j("order-submitted",{defaultValue:""}),variant:"success"}))})):(!i&&x({pageName:"advancedMode",$element_id:"openPosition",$element_type:"BUY"===s.side?"Long":"Short",$element_content:(s.quantity*Number(s.price||ve||0)).toFixed(2),title:s.symbol}),h.futuresOrderForm.placeOrder(Object.assign(Object.assign({},s),{placeType:"order-form",options:i?{enableErrorMsgIntercept:!1}:void 0})).then((t=>{if(t.success)e&&e(),!i&&f({message:j("order-submitted",{defaultValue:""}),variant:"success"});else if(i){(0,b.triggerNotificationLite)(!1,t.message);const{price:e,quantity:i,side:n,symbol:r}=t.params||{};x({pageName:"liteMode",$element_id:"openPositionResponse",$element_type:"BUY"===n?"Long":"Short",$element_content:(0,o.Jp)(i,e).toFixed(2,1),title:r,status:"fail",error:t.message})}return t})))};(0,l.i)({orderType:te,orderAmount:Pe,price:Se,priceRate:Ae,stopPrice:Ie,hideMask:()=>a.ee.emit("HIDE_MOBILE_MASK",void 0),orderConfirmation:_,showConfirm:()=>a.ee.emit("SHOW_ORDER_CONFIRM_PANEL",{orderType:te,placeOrder:Fe,orderForm:{triggerPrice:Ie,price:Se,buyQty:ke,sellQty:ke,side:fe,callbackRate:Ae,activationPrice:Ce,positionSide:(0,l.JO)({side:fe,positionDirection:ie,positionMode:L}),buyCost:(0,o.GW)(Le,se,!0),sellCost:(0,o.GW)(Ze,se,!0),tickSize:le,limitStepSize:ce,marketStepSize:de,availableBalance:Re,takeProfitStopPrice:n.takeProfitStopPrice,takeProfitStopPriceWorkingType:n.takeProfitStopPriceWorkingType,stopLossStopPrice:n.stopLossStopPrice,stopLossStopPriceWorkingType:n.stopLossStopPriceWorkingType,strategySide:n.strategySide,oLastPrice:ve},bCost:Le,sCost:Ze,buyOpenLost:Ee,sellOpenLost:we,positionDirection:ie,title:$e,isDelivery:y,Cont:j("Cont"),contractVal:F,getAssumePrice:_e}),placeOrder:Fe,disableOrderConfirmation:i})};return e=>{h.futuresOrderForm.handleSubmit({formData:e,submitHandler:P})}}},59464:(e,t,i)=>{i.d(t,{JX:()=>s,N3:()=>r});var o=i(33470);const n=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function r(e){const t=`${e}`.match(n);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function s(e,t){return isNaN(+e)?"":(0,o.PD)(e).toFixed(t,1)}}}]);