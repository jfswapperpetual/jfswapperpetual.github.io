"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[3002,2068],{26565:(e,t,i)=>{i.d(t,{AD:()=>f,Cf:()=>u,Du:()=>B,F4:()=>c,G6:()=>g,HO:()=>Z,Je:()=>X,Ld:()=>I,ML:()=>A,Ms:()=>h,OW:()=>y,P1:()=>n,PE:()=>W,Pl:()=>D,Q$:()=>r,QB:()=>H,Qq:()=>b,T3:()=>o,Tw:()=>E,UC:()=>d,VL:()=>m,Vn:()=>P,Y4:()=>N,Z4:()=>U,_f:()=>M,_q:()=>L,aE:()=>z,bM:()=>S,cW:()=>V,cY:()=>k,d0:()=>F,dS:()=>O,gg:()=>C,hD:()=>R,k0:()=>l,ln:()=>x,mB:()=>T,nj:()=>s,pJ:()=>_,qY:()=>w,qg:()=>p,rk:()=>K,uO:()=>v,zM:()=>a});var n='<svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M5.34981 3V1H3.6501V3H1.94995V13H3.65015V15H5.34981V13H7.05V3H5.34981ZM5.34981 11.3H3.6501V4.7H5.34981V11.3Z" fill="currentColor"/>\n<path d="M12.3499 3V1H10.6502V3H8.95001V13H10.6502V15H12.3499V13H14.0501V3H12.3499ZM12.3499 11.3H10.6502V4.7H12.3499V11.3Z" fill="currentColor"/>\n</svg>',r='<svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M13 2.7H8.94998L12.04 5.8L10.84 7L8.83998 5V10.98L10.82 9L12.03 10.2L8.92998 13.3H13V15H2.97998V13.3H7.02998L3.93998 10.2L5.13998 9L7.13998 11V5.02L5.15998 7L3.94998 5.8L7.04998 2.7H2.97998V1H13V2.7Z" fill="currentColor"/>\n</svg>',o='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.5 9C20.433 9 22 7.433 22 5.5C22 3.567 20.433 2 18.5 2C16.567 2 15 3.567 15 5.5C15 6.1028 15.1524 6.67 15.4207 7.1652L7.1652 15.4207C6.67 15.1524 6.1028 15 5.5 15C3.567 15 2 16.567 2 18.5C2 20.433 3.567 22 5.5 22C7.433 22 9 20.433 9 18.5C9 17.8973 8.84765 17.3301 8.57936 16.835L16.835 8.57936C17.3301 8.84765 17.8973 9 18.5 9ZM18.5 7C19.3284 7 20 6.32843 20 5.5C20 4.67157 19.3284 4 18.5 4C17.6716 4 17 4.67157 17 5.5C17 6.32843 17.6716 7 18.5 7ZM5.5 20C6.32843 20 7 19.3284 7 18.5C7 17.6716 6.32843 17 5.5 17C4.67157 17 4 17.6716 4 18.5C4 19.3284 4.67157 20 5.5 20Z" fill="currentColor"/>\n</svg>\n',a='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.5794 5.835L22.2072 3.20718L20.793 1.79297L18.1652 4.42074C17.67 4.15239 17.1028 4 16.5 4C14.567 4 13 5.567 13 7.5C13 8.1028 13.1524 8.67 13.4207 9.1652L9.1652 13.4207C8.67 13.1524 8.1028 13 7.5 13C5.567 13 4 14.567 4 16.5C4 17.1028 4.15239 17.67 4.42074 18.1652L1.79297 20.793L3.20718 22.2072L5.835 19.5794C6.33015 19.8477 6.89728 20 7.5 20C9.433 20 11 18.433 11 16.5C11 15.8973 10.8477 15.3301 10.5794 14.835L14.835 10.5794C15.3301 10.8477 15.8973 11 16.5 11C18.433 11 20 9.433 20 7.5C20 6.89728 19.8477 6.33015 19.5794 5.835ZM16.5 9C17.3284 9 18 8.32843 18 7.5C18 6.67157 17.3284 6 16.5 6C15.6716 6 15 6.67157 15 7.5C15 8.32843 15.6716 9 16.5 9ZM7.5 18C8.32843 18 9 17.3284 9 16.5C9 15.6716 8.32843 15 7.5 15C6.67157 15 6 15.6716 6 16.5C6 17.3284 6.67157 18 7.5 18Z" fill="currentColor"/>\n</svg>\n',l='<svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 4.25H16.1449C16.5752 2.80425 17.9145 1.75 19.5 1.75C21.433 1.75 23 3.317 23 5.25C23 7.183 21.433 8.75 19.5 8.75C17.9145 8.75 16.5752 7.69574 16.1449 6.25H7.5V4.25ZM18 5.25C18 4.42157 18.6716 3.75 19.5 3.75C20.3284 3.75 21 4.42157 21 5.25C21 6.07843 20.3284 6.75 19.5 6.75C18.6716 6.75 18 6.07843 18 5.25Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 19.75H7.85506C7.42479 21.1957 6.08551 22.25 4.5 22.25C2.567 22.25 1 20.683 1 18.75C1 16.817 2.567 15.25 4.5 15.25C6.08551 15.25 7.42479 16.3043 7.85506 17.75H16.5V19.75ZM6 18.75C6 19.5784 5.32843 20.25 4.5 20.25C3.67157 20.25 3 19.5784 3 18.75C3 17.9216 3.67157 17.25 4.5 17.25C5.32843 17.25 6 17.9216 6 18.75Z" fill="currentColor"/>\n<path d="M16.5 10.75H7.5V8.75H16.5V10.75Z" fill="currentColor"/>\n<path d="M16.5 15.25H7.5V13.25H16.5V15.25Z" fill="currentColor"/>\n</svg>\n',s='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2V13H13V2H2ZM11 4H4V6.5H11V4ZM11 8.5H4V11H11V8.5Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.5 14C21.433 14 23 12.433 23 10.5C23 8.567 21.433 7 19.5 7C17.567 7 16 8.567 16 10.5C16 11.1028 16.1524 11.67 16.4207 12.1652L12.1652 16.4207C11.67 16.1524 11.1028 16 10.5 16C8.567 16 7 17.567 7 19.5C7 21.433 8.567 23 10.5 23C12.433 23 14 21.433 14 19.5C14 18.8973 13.8477 18.3301 13.5794 17.835L17.835 13.5794C18.3301 13.8477 18.8973 14 19.5 14ZM19.5 12C20.3284 12 21 11.3284 21 10.5C21 9.67157 20.3284 9 19.5 9C18.6716 9 18 9.67157 18 10.5C18 11.3284 18.6716 12 19.5 12ZM10.5 21C11.3284 21 12 20.3284 12 19.5C12 18.6716 11.3284 18 10.5 18C9.67157 18 9 18.6716 9 19.5C9 20.3284 9.67157 21 10.5 21Z" fill="currentColor"/>\n</svg>\n',c='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.874 11C15.4299 9.27477 13.8638 8 12 8C10.1362 8 8.57006 9.27477 8.12602 11L2 11V13L8.12602 13C8.57006 14.7252 10.1362 16 12 16C13.8638 16 15.4299 14.7252 15.874 13L22 13V11L15.874 11ZM14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12Z" fill="currentColor"/>\n</svg>\n',u='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 8.12602C9.27477 8.57006 8 10.1362 8 12C8 13.8638 9.27477 15.4299 11 15.874L11 22L13 22L13 15.874C14.7252 15.4299 16 13.8638 16 12C16 10.1362 14.7252 8.57006 13 8.12602L13 2L11 2L11 8.12602ZM12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10Z" fill="currentColor"/>\n</svg>\n',d='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18 5.5C18 7.433 16.433 9 14.5 9C13.8973 9 13.3301 8.84765 12.835 8.57936L8.57936 12.835C8.84765 13.3301 9 13.8973 9 14.5C9 16.433 7.433 18 5.5 18C3.567 18 2 16.433 2 14.5C2 12.567 3.567 11 5.5 11C6.1028 11 6.67 11.1524 7.1652 11.4207L11.4207 7.1652C11.1524 6.67 11 6.1028 11 5.5C11 3.567 12.567 2 14.5 2C16.433 2 18 3.567 18 5.5ZM16 5.5C16 6.32843 15.3284 7 14.5 7C13.6716 7 13 6.32843 13 5.5C13 4.67157 13.6716 4 14.5 4C15.3284 4 16 4.67157 16 5.5ZM7 14.5C7 15.3284 6.32843 16 5.5 16C4.67157 16 4 15.3284 4 14.5C4 13.6716 4.67157 13 5.5 13C6.32843 13 7 13.6716 7 14.5Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.5 19C17.433 19 19 17.433 19 15.5C19 14.8973 18.8477 14.3301 18.5794 13.835L22.7072 9.70718L21.293 8.29297L17.1652 12.4207C16.67 12.1524 16.1028 12 15.5 12C13.567 12 12 13.567 12 15.5C12 16.1027 12.1523 16.6699 12.4206 17.165L8.29282 21.2928L9.70703 22.707L13.8348 18.5793C14.33 18.8476 14.8972 19 15.5 19ZM15.5 17C16.3284 17 17 16.3284 17 15.5C17 14.6716 16.3284 14 15.5 14C14.6716 14 14 14.6716 14 15.5C14 16.3284 14.6716 17 15.5 17Z" fill="currentColor"/>\n</svg>\n',h='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.5859 11.4142L19.0001 10L12.0001 3L5 10.0001L6.41421 11.4143L11.0002 6.82835L11.0002 21.9997H13.0002L13.0002 6.8285L17.5859 11.4142Z" fill="currentColor"/>\n</svg>\n',g='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.5859 12.5858L19.0001 14L12.0001 21L5 13.9999L6.41421 12.5857L11.0002 17.1716L11.0002 2.00026H13.0002L13.0002 17.1715L17.5859 12.5858Z" fill="currentColor"/>\n</svg>\n',p='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.4142 17.5859L10 19.0001L3 12.0001L10.0001 5L11.4143 6.41421L6.82835 11.0002L21.9997 11.0002L21.9997 13.0002L6.8285 13.0002L11.4142 17.5859Z" fill="currentColor"/>\n</svg>\n',f='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.5858 17.5859L14 19.0001L21 12.0001L13.9999 5L12.5857 6.41421L17.1716 11.0002L2.00026 11.0002L2.00026 13.0002L17.1715 13.0002L12.5858 17.5859Z" fill="currentColor"/>\n</svg>\n',v='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 2H13V8.12602C14.4056 8.4878 15.5122 9.59439 15.874 11H22V13H15.874C15.5122 14.4056 14.4056 15.5122 13 15.874V22H11V15.874C9.59439 15.5122 8.4878 14.4056 8.12602 13H2V11H8.12602C8.4878 9.59439 9.59439 8.4878 11 8.12602V2ZM14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z" fill="currentColor"/>\n</svg>\n',m='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 5V7H10V21H8V7H3V5H15Z" fill="currentColor"/>\n<rect width="2" height="20" transform="matrix(1 0 0 -1 18 22)" fill="currentColor"/>\n</svg>\n',y='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.85506 4.5C8.42479 3.05426 7.08551 2 5.5 2C3.567 2 2 3.567 2 5.5C2 7.08551 3.05426 8.42479 4.5 8.85506V15.1449C3.05426 15.5752 2 16.9145 2 18.5C2 20.433 3.567 22 5.5 22C7.08551 22 8.42479 20.9457 8.85506 19.5H15.1449C15.5752 20.9457 16.9145 22 18.5 22C20.433 22 22 20.433 22 18.5C22 16.9145 20.9457 15.5752 19.5 15.1449V8.85506C20.9457 8.42479 22 7.08551 22 5.5C22 3.567 20.433 2 18.5 2C16.9145 2 15.5752 3.05426 15.1449 4.5L8.85506 4.5ZM5.5 4C6.32843 4 7 4.67157 7 5.5C7 6.32843 6.32843 7 5.5 7C4.67157 7 4 6.32843 4 5.5C4 4.67157 4.67157 4 5.5 4ZM15.1449 6.5L8.85506 6.5C8.51909 7.62889 7.62889 8.51909 6.5 8.85506V15.1449C7.62889 15.4809 8.51909 16.3711 8.85506 17.5H15.1449C15.4809 16.3711 16.3711 15.4809 17.5 15.1449V8.85506C16.3711 8.51909 15.4809 7.62889 15.1449 6.5ZM5.5 17C6.32843 17 7 17.6716 7 18.5C7 19.3284 6.32843 20 5.5 20C4.67157 20 4 19.3284 4 18.5C4 17.6716 4.67157 17 5.5 17ZM20 5.5C20 4.67157 19.3284 4 18.5 4C17.6716 4 17 4.67157 17 5.5C17 6.32843 17.6716 7 18.5 7C19.3284 7 20 6.32843 20 5.5ZM18.5 17C19.3284 17 20 17.6716 20 18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5C17 17.6716 17.6716 17 18.5 17Z" fill="currentColor"/>\n</svg>\n',x='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.5794 7.835C17.8477 8.33014 18 8.89728 18 9.5C18 11.433 16.433 13 14.5 13C13.8973 13 13.3301 12.8477 12.835 12.5794L8.57936 16.835C8.84765 17.3301 9 17.8973 9 18.5C9 20.433 7.433 22 5.5 22C3.567 22 2 20.433 2 18.5C2 16.567 3.567 15 5.5 15C6.1028 15 6.67 15.1524 7.1652 15.4207L11.4207 11.1652C11.1524 10.67 11 10.1028 11 9.5C11 7.567 12.567 6 14.5 6C15.1028 6 15.67 6.15239 16.1652 6.42074L20.793 1.79297L22.2072 3.20718L17.5794 7.835ZM16 9.5C16 10.3284 15.3284 11 14.5 11C13.6716 11 13 10.3284 13 9.5C13 8.67157 13.6716 8 14.5 8C15.3284 8 16 8.67157 16 9.5ZM7 18.5C7 19.3284 6.32843 20 5.5 20C4.67157 20 4 19.3284 4 18.5C4 17.6716 4.67157 17 5.5 17C6.32843 17 7 17.6716 7 18.5Z" fill="currentColor"/>\n</svg>\n',b='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.4817 12.5007C12.4254 12.5007 12.3878 12.4631 12.3878 12.4067V11.1479C12.3878 11.0916 12.3972 11.0634 12.4348 11.0164L14.6799 8.6773C14.9148 8.43306 14.9993 8.23578 14.9993 7.99154C14.9993 7.68153 14.8396 7.50305 14.5672 7.50305C14.2948 7.50305 14.0975 7.66275 14.0599 8.17002C14.0599 8.22639 14.0224 8.26397 13.9566 8.25457L12.4817 8.0573C12.4254 8.0479 12.3972 8.01033 12.3972 7.95396C12.4442 6.77031 13.4023 6 14.6611 6C15.9199 6 16.8218 6.79849 16.8218 7.90699C16.8218 8.62094 16.5306 9.11882 16.0609 9.59792L14.7457 10.9413V10.9601H16.7278C16.7842 10.9601 16.8218 10.9976 16.8218 11.054V12.4067C16.8218 12.4631 16.7842 12.5007 16.7278 12.5007H12.4817Z" fill="currentColor"/>\n<path d="M9.18598 12.5007C9.12962 12.5007 9.09204 12.4631 9.09204 12.4067V8.08548H9.07326L7.93658 8.82761C7.88021 8.86518 7.81445 8.8464 7.81445 8.77124V7.14607C7.81445 7.08971 7.83324 7.05213 7.88021 7.01456L9.10144 6.16909C9.1578 6.13152 9.21417 6.11273 9.27992 6.11273H10.8769C10.9333 6.11273 10.9709 6.1503 10.9709 6.20667V12.4067C10.9709 12.4631 10.9333 12.5007 10.8769 12.5007H9.18598Z" fill="currentColor"/>\n<path d="M17.7171 10.9131C17.8487 11.937 18.7035 12.6134 20.0093 12.6134C21.3714 12.6134 22.2733 11.7867 22.2733 10.6219C22.2733 9.76701 21.8881 9.33489 21.4466 9.09064V9.07185C21.8881 8.78064 22.1699 8.33912 22.1699 7.76608C22.1699 6.77971 21.3808 6 19.9999 6C18.6753 6 17.9144 6.70455 17.7453 7.70972C17.7359 7.76608 17.7641 7.80366 17.8205 7.81305L19.3141 8.01033C19.3705 8.01972 19.4081 7.98214 19.4175 7.93517C19.4738 7.67214 19.6241 7.50305 19.8872 7.50305C20.1596 7.50305 20.3475 7.68153 20.3475 7.99154C20.3475 8.31094 20.1596 8.49882 19.8402 8.49882H19.6054C19.549 8.49882 19.5114 8.53639 19.5114 8.59276V9.87974C19.5114 9.93611 19.549 9.97368 19.6054 9.97368H19.859C20.2254 9.97368 20.4508 10.171 20.4508 10.5467C20.4508 10.9131 20.2535 11.1104 19.9435 11.1104C19.6523 11.1104 19.4644 10.9413 19.3987 10.6782C19.3893 10.6219 19.3517 10.5843 19.286 10.5937L17.7923 10.8004C17.7359 10.8098 17.7078 10.8567 17.7171 10.9131Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 15.5C1.5 13.567 3.067 12 5 12C6.58551 12 7.92479 13.0543 8.35506 14.5H22V16.5H8.35506C7.92479 17.9457 6.58551 19 5 19C3.067 19 1.5 17.433 1.5 15.5ZM5 14C4.17157 14 3.5 14.6716 3.5 15.5C3.5 16.3284 4.17157 17 5 17C5.82843 17 6.5 16.3284 6.5 15.5C6.5 14.6716 5.82843 14 5 14Z" fill="currentColor"/>\n</svg>\n',C='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.5 9C20.433 9 22 7.433 22 5.5C22 3.567 20.433 2 18.5 2C16.567 2 15 3.567 15 5.5C15 6.0368 15.1208 6.54537 15.3368 7H8V9H13.5859L7.1652 15.4207C6.67 15.1524 6.1028 15 5.5 15C3.567 15 2 16.567 2 18.5C2 20.433 3.567 22 5.5 22C7.433 22 9 20.433 9 18.5C9 17.8973 8.84765 17.3301 8.57936 16.835L15 10.4144V16H17V8.66318C17.4546 8.87915 17.9632 9 18.5 9ZM18.5 7C19.3284 7 20 6.32843 20 5.5C20 4.67157 19.3284 4 18.5 4C17.6716 4 17 4.67157 17 5.5C17 6.32843 17.6716 7 18.5 7ZM5.5 20C6.32843 20 7 19.3284 7 18.5C7 17.6716 6.32843 17 5.5 17C4.67157 17 4 17.6716 4 18.5C4 19.3284 4.67157 20 5.5 20Z" fill="currentColor"/>\n</svg>\n',_='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V7H15V18H13Z" fill="currentColor"/>\n<path d="M9 7V18H11V7H9Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 3V1H13V3H22V5H20V22H4V5H2V3H11ZM6 5V20H18V5H6Z" fill="currentColor"/>\n</svg>\n',w='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM6.22447 7.38053L5.89752 8.36106H4.10089L3.77388 7.38053L3.55068 7.25134L2.53733 7.45842L1.639 5.90259L2.32344 5.13094V4.86895L1.639 4.0973L2.53733 2.54148L3.55071 2.74855L3.77391 2.61936L4.10086 1.63883H5.89752L6.22447 2.61936L6.44768 2.74855L7.46102 2.54148L8.35936 4.0973L7.67491 4.86895V5.13094L8.35936 5.90259L7.46102 7.45842L6.44768 7.25134L6.22447 7.38053ZM7.12387 6.70908L6.33297 6.54746L5.67192 6.93005L5.41707 7.69439H4.58132L4.32641 6.93004L3.66539 6.54746L2.87448 6.70908L2.45665 5.98543L2.99011 5.384V4.61589L2.45665 4.01446L2.87448 3.29081L3.66542 3.45244L4.32646 3.06984L4.58132 2.3055H5.41707L5.67192 3.06984L6.33297 3.45244L7.12387 3.29082L7.54171 4.01446L7.00824 4.61589V5.384L7.54171 5.98543L7.12387 6.70908ZM4.99998 6.33333C4.2636 6.33333 3.66665 5.73638 3.66665 5C3.66665 4.26362 4.2636 3.66667 4.99998 3.66667C5.73636 3.66667 6.33331 4.26362 6.33331 5C6.33331 5.73638 5.73636 6.33333 4.99998 6.33333ZM4.99998 5.66667C4.63179 5.66667 4.33331 5.36819 4.33331 5C4.33331 4.63181 4.63179 4.33333 4.99998 4.33333C5.36817 4.33333 5.66665 4.63181 5.66665 5C5.66665 5.36819 5.36817 5.66667 4.99998 5.66667Z" fill="red"/>\n</svg>\n',S='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM9 5.00002L7.00006 3.00008C5.89547 1.8955 4.10456 1.89547 2.99996 3.00007L1 5.00002L2.99996 7.0001C4.10456 8.1047 5.89547 8.10466 7.00006 7.00008L9 5.00002ZM3.47134 3.47147C4.31559 2.62723 5.68439 2.62725 6.52864 3.47149L8.05717 5.00002L6.52864 6.52867C5.68439 7.37291 4.31559 7.37293 3.47134 6.52869L1.94279 5.00002L3.47134 3.47147ZM5.83331 5.00008C5.83331 5.46032 5.46022 5.83341 4.99998 5.83341C4.53974 5.83341 4.16665 5.46032 4.16665 5.00008C4.16665 4.53984 4.53974 4.16675 4.99998 4.16675C5.46022 4.16675 5.83331 4.53984 5.83331 5.00008ZM4.99998 6.50008C5.82841 6.50008 6.49998 5.82851 6.49998 5.00008C6.49998 4.17165 5.82841 3.50008 4.99998 3.50008C4.17155 3.50008 3.49998 4.17165 3.49998 5.00008C3.49998 5.82851 4.17155 6.50008 4.99998 6.50008Z" fill="currentColor"/>\n</svg>\n',L='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM7.66663 8.13789L1.86194 2.3332L2.33334 1.86179L3.2494 2.77785C4.35955 1.90096 5.97521 1.97497 7.00006 2.99982L9 4.99976L7.2357 6.76415L8.13803 7.66648L7.66663 8.13789ZM6.76429 6.29274L3.72511 3.25356C4.57079 2.63457 5.76455 2.70714 6.52864 3.47122L8.05717 4.99976L6.76429 6.29274ZM5.64849 7.0625L6.16433 7.57834C5.12306 8.0483 3.8556 7.85548 2.99996 6.99983L1 4.99976L2.29287 3.70688L2.76427 4.17828L1.94279 4.99976L3.47134 6.52843C4.06046 7.11754 4.905 7.29556 5.64849 7.0625Z" fill="currentColor"/>\n</svg>\n',E='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM2.43066 2.90258L4.5283 5.00019L2.43064 7.09782L2.66634 7.33352L2.90204 7.56923L4.9997 5.47159L7.09727 7.56916L7.56867 7.09776L5.47111 5.00019L7.56869 2.90256L7.33299 2.66685L7.09728 2.43115L4.9997 4.52879L2.90207 2.43118L2.66637 2.66688L2.43066 2.90258Z" fill="currentColor"/>\n</svg>\n',k='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17 13.9999L18.7107 13.2964L32.7107 27.4382L32 29.1417H24.2162L18.7107 34.7034L17 33.9999V13.9999ZM19 16.4314V31.5683L23.3819 27.1417H29.6029L19 16.4314Z" fill="currentColor"/>\n</svg>\n',V='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 2H11V9H13V2Z" fill="currentColor"/>\n<path d="M15 11V13H22V11H15Z" fill="currentColor"/>\n<path d="M13 15H11V22H13V15Z" fill="currentColor"/>\n<path d="M9 13V11H2V13H9Z" fill="currentColor"/>\n</svg>\n',A='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C10.3431 3 9 4.34315 9 6V9H20V22H4V9H7V6C7 3.23858 9.23858 1 12 1C14.7614 1 17 3.23858 17 6H15C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="currentColor"/>\n</svg>\n',T='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7 6V9H4V22H20V9H17V6C17 3.23858 14.7614 1 12 1C9.23858 1 7 3.23858 7 6ZM12 3C10.3431 3 9 4.34315 9 6V9H15V6C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="currentColor"/>\n</svg>\n',M='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.9999 14.5002C13.3807 14.5002 14.4999 13.381 14.4999 12.0002C14.4999 10.6195 13.3807 9.50024 11.9999 9.50024C10.6192 9.50024 9.49995 10.6195 9.49995 12.0002C9.49995 13.381 10.6192 14.5002 11.9999 14.5002ZM16.4999 12.0002C16.4999 14.4855 14.4852 16.5002 11.9999 16.5002C9.51466 16.5002 7.49995 14.4855 7.49995 12.0002C7.49995 9.51496 9.51466 7.50024 11.9999 7.50024C14.4852 7.50024 16.4999 9.51496 16.4999 12.0002Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.0002 6.00025L24 12.0001L18.0002 18.0002C14.6864 21.314 9.31368 21.3141 5.99988 18.0003L0 12.0001L5.99988 6.0002C9.31368 2.6864 14.6864 2.6865 18.0002 6.00025ZM16.5859 7.41447C14.0532 4.88174 9.94676 4.88168 7.41403 7.41441L2.82837 12.0001L7.41403 16.5861C9.94676 19.1188 14.0532 19.1187 16.5859 16.586L21.1715 12.0001L16.5859 7.41447Z" fill="currentColor"/>\n</svg>\n',D='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2.58582 3.99966L19.9999 21.4137L21.4141 19.9995L18.7071 17.2925L24 11.9993L18.0002 5.99952C14.9256 2.92499 10.0787 2.70295 6.74819 5.33361L4.00003 2.58545L2.58582 3.99966ZM8.17533 6.76075L17.2929 15.8783L21.1715 11.9993L16.5859 7.41373C14.2937 5.12148 10.7124 4.90379 8.17533 6.76075Z" fill="currentColor"/>\n<path d="M15.493 19.7351L13.9455 18.1876C11.715 18.8867 9.18138 18.3527 7.41403 16.5853L2.82837 11.9993L5.29281 9.5349L3.87862 8.12072L0 11.9993L5.99988 17.9996C8.56681 20.5665 12.3692 21.145 15.493 19.7351Z" fill="currentColor"/>\n</svg>\n',I='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3 16.3997L17.4001 2L22.0001 6.6L7.6 20.9997H3V16.3997ZM5 18.9997H6.8L16.0676 9.79587L14.2859 8.01421L5 17.2997V18.9997ZM15.7001 6.6L17.4902 8.39005L19.3001 6.6L17.5001 4.8L15.7001 6.6Z" fill="currentColor"/>\n<path d="M10 3L3 3V10H5V5L10 5V3Z" fill="currentColor"/>\n<path d="M14 21V19H19V14H21V21H14Z" fill="currentColor"/>\n</svg>\n',P='<svg width="6" height="12" viewBox="0 0 6 12" fill="none">\n<rect width="2" height="2" fill="currentColor" />\n<rect y="5" width="2" height="2" fill="currentColor" />\n<rect y="10" width="2" height="2" fill="currentColor" />\n<rect x="4" width="2" height="2" fill="currentColor" />\n<rect x="4" y="5" width="2" height="2" fill="currentColor" />\n<rect x="4" y="10" width="2" height="2" fill="currentColor" />\n</svg>',B='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.07114 6.34315C8.59945 4.81484 9.88191 4 12 4C16.4182 4 20 7.58172 20 12H22C22 6.47715 17.5228 2 12 2C9.14747 2 7.38599 3.19988 5.65693 4.92893L4 6.58586V3H2V10H9V8L5.41429 8L7.07114 6.34315Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.9289 17.6569C15.4006 19.1852 14.1181 20 12 20C7.58175 20 4.00003 16.4183 4.00003 12H2.00003C2.00003 17.5228 6.47718 22 12 22C14.8525 22 16.614 20.8001 18.3431 19.0711L20 17.4141V21H22V14H15V16H18.5857L16.9289 17.6569Z" fill="currentColor"/>\n</svg>\n',W='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3 16.3997L17.4001 2L22.0001 6.6L7.60004 20.9997L3 20.9997V16.3997ZM5 18.9997H6.8L16.0676 9.79587L14.2859 8.01421L5 17.2997V18.9997ZM15.7001 6.6L17.4902 8.39005L19.3001 6.6L17.5001 4.8L15.7001 6.6Z" fill="currentColor"/>\n</svg>\n',R='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14 14V9H21V21H9V14H14Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M13 5H5V13H13V5ZM3 3V15H15V3H3Z" fill="currentColor"/>\n</svg>\n',H='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C10.3431 3 9 4.34315 9 6V9H20V22H4V9H7V6C7 3.23858 9.23858 1 12 1C14.7614 1 17 3.23858 17 6H15C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="currentColor"/>\n</svg>',Z='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7 6V9H4V22H20V9H17V6C17 3.23858 14.7614 1 12 1C9.23858 1 7 3.23858 7 6ZM12 3C10.3431 3 9 4.34315 9 6V9H15V6C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="currentColor"/>\n</svg>\n',O='<svg width="24" height="24" viewBox="0 0 24 24" fill="none">\n<path d="M15.4 3L5.40002 13V17.6H10L20 7.6L15.4 3ZM9.20002 15.6H7.40002V13.9L15.5 5.8L17.3 7.6L9.20002 15.6Z" fill="currentColor"/>\n<path d="M16.9 4.4L15.4 3L16.9 4.4Z" fill="currentColor"/>\n<path d="M21 18.8999H3V20.8999H21V18.8999Z" fill="currentColor"/>\n</svg>\n',N='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11 6.63184V8.03184L8.20002 10.9998L5.40002 8.03184V6.63184H11Z" fill="currentColor"/>\n</svg>\n',F='<svg width="300" height="60" viewBox="0 0 300 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13.6096 30L6.83425 36.7383L0 30L6.83425 23.2031L13.6096 30ZM30.165 13.5352L41.8303 25.1367L48.6646 18.3398L30.165 0L11.6654 18.3984L18.4996 25.1953L30.165 13.5352ZM53.4957 23.2031L46.7203 30L53.5546 36.7969L60.3888 30L53.4957 23.2031ZM30.165 46.4648L18.4996 34.8047L11.6654 41.6016L30.165 60L48.6646 41.6016L41.8303 34.8047L30.165 46.4648ZM30.165 36.7383L36.9992 29.9414L30.165 23.2031L23.3307 30L30.165 36.7383ZM102.042 37.4414V37.3242C102.042 32.9297 99.6858 30.7031 95.8562 29.2383C98.2129 27.9492 100.216 25.8398 100.216 22.1484V22.0312C100.216 16.875 96.033 13.5352 89.3166 13.5352H73.9395V46.4062H89.6701C97.1524 46.4648 102.042 43.418 102.042 37.4414ZM92.9694 23.3789C92.9694 25.8398 90.9662 26.8359 87.7258 26.8359H81.0094V19.8633H88.1972C91.2608 19.8633 92.9694 21.0938 92.9694 23.2617V23.3789ZM94.7957 36.5039C94.7957 38.9648 92.8515 40.0781 89.6701 40.0781H81.0094V32.8711H89.4344C93.1461 32.8711 94.7957 34.2188 94.7957 36.4453V36.5039ZM117.302 46.4648V13.5352H109.996V46.4062H117.302V46.4648ZM156.422 46.4648V13.5352H149.234V33.8086L133.739 13.5352H127.023V46.4062H134.211V25.5469L150.236 46.4648H156.422ZM196.72 46.4648L182.522 13.3594H175.805L161.606 46.4648H169.089L172.093 39.082H186.057L189.061 46.4648H196.72ZM183.464 32.6953H174.686L179.104 22.0312L183.464 32.6953ZM231.422 46.4648V13.5352H224.234V33.8086L208.739 13.5352H202.023V46.4062H209.211V25.5469L225.236 46.4648H231.422ZM268.951 41.1328L264.297 36.5039C261.705 38.8477 259.407 40.3711 255.577 40.3711C249.921 40.3711 245.974 35.6836 245.974 30.0586V29.8828C245.974 24.2578 249.98 19.6289 255.577 19.6289C258.877 19.6289 261.469 21.0352 264.061 23.3203L268.716 17.9883C265.652 15 261.94 12.8906 255.695 12.8906C245.562 12.8906 238.433 20.5664 238.433 29.8828V30C238.433 39.4336 245.679 46.9336 255.401 46.9336C261.764 46.9922 265.534 44.7656 268.951 41.1328ZM300 46.4648V40.0195H282.031V33.1055H297.643V26.6602H282.031V19.9805H299.764V13.5352H274.843V46.4062H300V46.4648Z" fill="#EAECEF"/>\n</svg>\n',K='<svg width="300" height="60" viewBox="0 0 300 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13.6096 30L6.83425 36.7383L0 30L6.83425 23.2031L13.6096 30ZM30.165 13.5352L41.8303 25.1367L48.6646 18.3398L30.165 0L11.6654 18.3984L18.4996 25.1953L30.165 13.5352ZM53.4957 23.2031L46.7203 30L53.5546 36.7969L60.3888 30L53.4957 23.2031ZM30.165 46.4648L18.4996 34.8047L11.6654 41.6016L30.165 60L48.6646 41.6016L41.8303 34.8047L30.165 46.4648ZM30.165 36.7383L36.9992 29.9414L30.165 23.2031L23.3307 30L30.165 36.7383ZM102.042 37.4414V37.3242C102.042 32.9297 99.6858 30.7031 95.8562 29.2383C98.2129 27.9492 100.216 25.8398 100.216 22.1484V22.0312C100.216 16.875 96.033 13.5352 89.3166 13.5352H73.9395V46.4062H89.6701C97.1524 46.4648 102.042 43.418 102.042 37.4414ZM92.9694 23.3789C92.9694 25.8398 90.9662 26.8359 87.7258 26.8359H81.0094V19.8633H88.1972C91.2608 19.8633 92.9694 21.0938 92.9694 23.2617V23.3789ZM94.7957 36.5039C94.7957 38.9648 92.8515 40.0781 89.6701 40.0781H81.0094V32.8711H89.4344C93.1461 32.8711 94.7957 34.2188 94.7957 36.4453V36.5039ZM117.302 46.4648V13.5352H109.996V46.4062H117.302V46.4648ZM156.422 46.4648V13.5352H149.234V33.8086L133.739 13.5352H127.023V46.4062H134.211V25.5469L150.236 46.4648H156.422ZM196.72 46.4648L182.522 13.3594H175.805L161.606 46.4648H169.089L172.093 39.082H186.057L189.061 46.4648H196.72ZM183.464 32.6953H174.686L179.104 22.0312L183.464 32.6953ZM231.422 46.4648V13.5352H224.234V33.8086L208.739 13.5352H202.023V46.4062H209.211V25.5469L225.236 46.4648H231.422ZM268.951 41.1328L264.297 36.5039C261.705 38.8477 259.407 40.3711 255.577 40.3711C249.921 40.3711 245.974 35.6836 245.974 30.0586V29.8828C245.974 24.2578 249.98 19.6289 255.577 19.6289C258.877 19.6289 261.469 21.0352 264.061 23.3203L268.716 17.9883C265.652 15 261.94 12.8906 255.695 12.8906C245.562 12.8906 238.433 20.5664 238.433 29.8828V30C238.433 39.4336 245.679 46.9336 255.401 46.9336C261.764 46.9922 265.534 44.7656 268.951 41.1328ZM300 46.4648V40.0195H282.031V33.1055H297.643V26.6602H282.031V19.9805H299.764V13.5352H274.843V46.4062H300V46.4648Z" fill="#1E2329"/>\n</svg>\n',U="M0 .5h2v2H0zM0 5.5h2v2H0zM0 10.5h2v2H0zM4 .5h2v2H4zM4 5.5h2v2H4zM4 10.5h2v2H4z",z="M6.7 6.5L10 9.8L9.3 10.5L6 7.2L2.7 10.5L2 9.8L5.3 6.5L2 3.2L2.7 2.5L6 5.8L9.3 2.5L10 3.2L6.7 6.5Z",X='<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="30" height="30" rx="4" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0 0H6V6H0V0ZM12 6H6V12H0V18H6V24H0V30H6V24H12V30H18V24H24V30H30V24H24V18H30V12H24V6H30V0H24V6H18V0H12V6ZM12 12V6H18V12H12ZM12 18V24H18V18H24V12H18V18H12ZM12 18H6V12H12V18Z" fill="currentColor"/>\n</svg>\n'},56308:(e,t,i)=>{i.d(t,{Z:()=>A});var n=i(5163),r=i(2784),o=i(92036),a=i(55742),l=i(62143),s=i(48658),c=i(21030),u=i(98569);const d=function(e){return r.createElement(u.Z,(0,n.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M14.5 10.29a1 1 0 011 1v.353a1 1 0 01-.273.686l-2.5 2.65a1 1 0 01-1.454 0l-2.5-2.65a1 1 0 01-.273-.686v-.353a1 1 0 011-1h5z"}))};var h=i(6927),g=i(63270),p=i(26565),f=i(18991),v=i(8042),m=i(79847),y=i(95260),x=i(57207),b={height:"40px",alignItems:"center",cursor:"pointer",justifyContent:"center",textAlign:"center",color:"t.third","&:hover":{bg:"line",color:"t.primary"},"&:hover path, &:hover rect":{fill:"t.primary"},"&:not(:first-of-type)":{width:"40px",borderLeftWidth:"1px",borderLeftStyle:"solid",borderLeftColor:"line"},".active path":{fill:"primary"}},C=[10,11,12,14,16,18,20,24,28,36],_=function(e){var t=(0,x.P7)(e);return"rgb("+t.r+", "+t.g+", "+t.b+")"},w=function(e){var t=e.isLock,i=void 0!==t&&t,n=e.setLock,a=e.getI18n,l=void 0===a?function(){return""}:a;return(0,r.useMemo)((function(){return r.createElement(c.ZP,{tip:i?l(y.Wi.ANNOTATION_UNLOCK,"Unlock"):l(y.Wi.ANNOTATION_LOCK,"Lock"),placement:"top",arrow:!0,sx:b},r.createElement(o.Z,{height:"100%",justifyContent:"center",alignItems:"center",dangerouslySetInnerHTML:{__html:i?p.HO:p.QB},sx:{"&:hover path, &:hover rect":{fill:i?"primary":"t.primary"}},onClick:function(){return n({isLock:!i})}}))}),[i,n])},S=r.memo((function(e){var t=e.tip,i=void 0===t?"":t,n=e.children,o=void 0===n?[]:n,l=e.overlay,s=void 0===l?[]:l;return r.createElement(a.ZP,{trigger:"click",placement:"bottom",height:"100%",overlay:s,overlayProps:{mt:"minor"},enablePortal:!0,sx:b},r.createElement(c.ZP,{tip:i,placement:"top",arrow:!0,height:"100%"},o))})),L=function(e){var t=e.isActive,i=e.clickHandle;return(0,r.useMemo)((function(){return r.createElement(o.Z,{width:1,onClick:function(){return i()},height:28,alignItems:"center",px:"sm",py:"minor",sx:{cursor:"pointer",fontSize:"14px",color:t?"t.primary":"t.third","&:hover":{bg:"line"}}},e.children)}),[t,i])},E=function(e){var t=e.isActive,i=e.clickHandle,a=e.boxStyle,s=void 0===a?{}:a;return r.createElement(o.Z,{width:1,onClick:function(){return i()},height:32,alignItems:"center",px:"xs",sx:{cursor:"pointer",bg:t?"line":"","&:hover":{bg:"line"},"&:hover .annotation-dropdown-item":{borderBottomColor:"t.primary"}}},r.createElement(l.Z,{className:"annotation-dropdown-item",sx:(0,n.__assign)({width:"100%",height:"0"},s)}))},k=function(e){var t=e.width,i=void 0===t?1:t,n=e.onWidthChange,a=(0,r.useCallback)((function(e){e!==i&&n({lineWidth:e})}),[i,n]);return(0,r.useMemo)((function(){return r.createElement(o.Z,{width:80,flexDirection:"column",bg:"modalBg",sx:{boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"}},[1,2,3,4].map((function(e){return r.createElement(E,{key:e,clickHandle:function(){return a(e)},isActive:e===i,boxStyle:{borderBottomStyle:v.TD.SOLID,borderBottomWidth:e+"px",borderBottomColor:e===i?"t.primary":"t.third"}})})))}),[a])},V=function(e){var t=e.lineStyle,i=void 0===t?v.TD.SOLID:t,n=e.onStyleChange,a=(0,r.useCallback)((function(e){e!==i&&n({lineStyle:e})}),[i,n]);return(0,r.useMemo)((function(){return r.createElement(o.Z,{width:80,flexDirection:"column",bg:"modalBg",sx:{boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"}},[v.TD.SOLID,v.TD.DOTTED,v.TD.DASHED].map((function(e){return r.createElement(E,{key:e,clickHandle:function(){return a(e)},isActive:e===i,boxStyle:{borderBottomStyle:e,borderBottomWidth:"1px",borderBottomColor:e===i?"t.primary":"t.third"}})})))}),[a])};const A=function(e){var t=e.candlestickInstance,i=e.wrapRef,a=(0,n.__read)((0,f.O)({showColor:!0,color:"",showWidth:!0,lineWidth:1,showStyle:!0,lineStyle:v.TD.SOLID,showBg:!1,background:"",showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:10,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,isLock:!1,showLock:!1,showDelete:!1}),2),u=a[0],E=u.showColor,A=u.color,T=u.showWidth,M=u.lineWidth,D=u.showStyle,I=u.lineStyle,P=u.showTextColor,B=u.textColor,W=u.showFontSize,R=u.textFontSize,H=u.showTextBold,Z=u.isTextBold,O=u.showTextEdit,N=u.isTextEdit,F=u.showBg,K=u.background,U=u.isLock,z=u.showLock,X=u.showDelete,G=a[1].updateValue,Y=(0,r.useRef)({tx:0,ty:0}),j=(0,r.useRef)(),q=(0,n.__read)((0,f.O)({visible:!1,annotation:void 0,cacheKey:""}),2),Q=q[0],J=Q.visible,$=Q.annotation,ee=Q.cacheKey,te=q[1].updateValue,ie=(0,r.useCallback)((function(){if($){var e=$.getDefaultStyle();$.applyAttributes(e),G($.getEditAttribute());var t=$.getCacheStyleKey();h.Z.updateCacheStyle(t,e)}else ee&&(e=g.Z[ee]||{},G((0,n.__assign)((0,n.__assign)({},e),{showTextEdit:!1})),h.Z.updateCacheStyle(ee,e))}),[ee,$]),ne=(0,r.useCallback)((function(e){if(G(e),$){$.applyAttributes(e);var t=$.getCacheStyleKey();h.Z.updateCacheStyle(t,e)}else ee&&h.Z.updateCacheStyle(ee,e)}),[ee,$]),re=(0,r.useCallback)((function(e,i){return(null==t?void 0:t.getI18n(e,i))||i}),[t]),oe=(0,r.useCallback)((function(){$&&$.remove()}),[$]),ae=(0,r.useCallback)((function(e){var t=i.current;if(t){var r=t.getBoundingClientRect(),o=r.left,a=r.top,l=r.width,s=r.height,c=e.clientX,u=e.clientY,d=function(e){var t=e.clientX,i=e.clientY,r=t-c,d=i-u;if(j.current){var h=j.current.getBoundingClientRect(),g=h.left,p=h.top,f=h.width,v=h.height,m=(0,n.__read)([g-o,p-a],2),y=m[0],b=m[1];(y+r<=0&&r<=0||y+f+r>=l&&r>=0)&&(r=0),(b+d<=0&&d<=0||b+v+d>=s&&d>=0)&&(d=0),Y.current.tx+=r,Y.current.ty+=d,(0,x.AS)(j.current,{transform:"translate("+Y.current.tx+"px, "+Y.current.ty+"px)"})}c=t,u=i},h=function(e){g(),e.stopPropagation()},g=function(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",h)};return document.addEventListener("mousemove",d),document.addEventListener("mouseup",h),e.stopPropagation(),function(){g()}}}),[i]);return(0,r.useEffect)((function(){$?G($.getEditAttribute()):ee&&G(h.Z.getPreEditAttributes(ee))}),[ee,$]),(0,r.useEffect)((function(){var e="AnnotationTool";if(t){var i=t.editor.getSelectAnnotation();te(i?{annotation:i,visible:!0,cacheKey:i.getAttr("type")}:{annotation:void 0,visible:!1}),t.on("selectAnnotation",e,(function(e){var t=e.data,i=e.action;te({annotation:t,visible:!0,cacheKey:i})})),t.on("unSelectAnnotation",e,(function(){te({annotation:void 0,visible:!1})}))}return function(){null==t||t.editor.clearSelectAnnotation(),null==t||t.off("selectAnnotation",e),null==t||t.off("unSelectAnnotation",e)}}),[t]),(0,r.useMemo)((function(){return r.createElement(l.Z,{ref:j,display:J?"flex":"none",bg:"modalBg",sx:{position:"absolute",height:"40px",right:0,top:0,zIndex:9999,alignItems:"center",borderColor:"line",borderWidth:"1px",borderStyle:"solid",userSelect:"none"}},r.createElement(o.Z,{dangerouslySetInnerHTML:{__html:p.Vn},px:"minor",onMouseDown:ae,sx:(0,n.__assign)((0,n.__assign)({},b),{cursor:"grab"})}),r.createElement(c.ZP,{tip:re(y.Wi.ANNOTATION_DEFAULT,"Back to Default"),placement:"top",arrow:!0,sx:b},r.createElement(o.Z,{height:"100%",justifyContent:"center",alignItems:"center",dangerouslySetInnerHTML:{__html:p.Du},px:"xs",onClick:function(){return ie()}})),P&&r.createElement(S,{tip:re(y.Wi.ANNOTATION_COLOR,"Color"),overlay:r.createElement(m.Z,{color:B,onChange:function(e){return ne({textColor:e})},getI18n:re})},r.createElement(o.Z,{height:"100%",px:"xs",flexDirection:"column",justifyContent:"center"},r.createElement(o.Z,{dangerouslySetInnerHTML:{__html:p.VL}}),r.createElement(o.Z,{bg:_(B),height:"3px",width:18}))),E&&r.createElement(S,{tip:re(y.Wi.ANNOTATION_COLOR,"Color"),overlay:r.createElement(m.Z,{color:A,onChange:function(e){return ne({color:e})},getI18n:re})},r.createElement(o.Z,{height:"100%",px:"xs",flexDirection:"column",justifyContent:"center"},r.createElement(o.Z,{dangerouslySetInnerHTML:{__html:p.PE}}),r.createElement(o.Z,{bg:_(A),height:"3px",width:1}))),T&&r.createElement(S,{tip:re(y.Wi.ANNOTATION_LINE_WIDTH,"Width"),overlay:r.createElement(k,{width:M,onWidthChange:ne})},r.createElement(o.Z,{height:"100%",pl:"minor",justifyContent:"center",alignItems:"center"},r.createElement(o.Z,{height:M,sx:{width:"18px",background:"#76808F",borderRadius:"4px",bg:"t.third"}}),r.createElement(d,{size:17,color:"t.third"}))),D&&r.createElement(S,{tip:re(y.Wi.ANNOTATION_LINE_STYLE,"Style"),overlay:r.createElement(V,{lineStyle:I,onStyleChange:ne})},r.createElement(o.Z,{height:"100%",width:1,pl:"minor",justifyContent:"center",alignItems:"center",sx:{".annotation-tools-line-style":{height:"1px",borderBottomColor:"t.third",borderBottomWidth:"1px",borderBottomStyle:I},"&:hover .annotation-tools-line-style":{borderBottomColor:"t.primary"}}},r.createElement(o.Z,{className:"annotation-tools-line-style",width:"18px"}),r.createElement(d,{size:17,color:"t.third"}))),F&&r.createElement(S,{tip:re(y.Wi.ANNOTATION_BACKGROUND,"Background Color"),overlay:r.createElement(m.Z,{color:K,onChange:function(e){return ne({background:e})},getI18n:re})},r.createElement(o.Z,{height:"100%",px:"xs",flexDirection:"column",justifyContent:"center"},r.createElement(o.Z,{dangerouslySetInnerHTML:{__html:p.hD}}),r.createElement(o.Z,{bg:_(K),height:"3px",width:1,mt:"minor"}))),W&&r.createElement(S,{tip:re(y.Wi.ANNOTATION_FONT_SIZE,"Font Size"),overlay:r.createElement(o.Z,{flexDirection:"column",bg:"modalBg"},C.map((function(e){return r.createElement(L,{key:e,isActive:R===e,clickHandle:function(){ne({textFontSize:e})}},r.createElement(s.Z,null,e))})))},r.createElement(o.Z,{height:"100%",width:1,pl:"minor",justifyContent:"center",alignItems:"center"},r.createElement(s.Z,{fontSize:16},R),r.createElement(d,{size:17,color:"t.third"}))),H&&r.createElement(c.ZP,{tip:re(y.Wi.ANNOTATION_FONT_BOLD,"Bold"),placement:"top",arrow:!0,sx:b},r.createElement(o.Z,{height:"100%",justifyContent:"center",alignItems:"center",px:"xs",onClick:function(){return ne({isTextBold:!Z})}},r.createElement(s.Z,{fontSize:16,fontWeight:"bold",color:Z?"primary":""},"B"))),O&&r.createElement(c.ZP,{tip:re(y.Wi.ANNOTATION_EDIT_TEXT,"Edit Text"),placement:"top",arrow:!0,sx:b},r.createElement(o.Z,{className:N?"active":"",height:"100%",justifyContent:"center",alignItems:"center",px:"xs",dangerouslySetInnerHTML:{__html:p.dS},onClick:function(){return ne({isTextEdit:!N})}})),z&&r.createElement(w,{isLock:U,setLock:ne,getI18n:re}),X&&r.createElement(c.ZP,{tip:re(y.Wi.ANNOTATION_DELETE,"Delete"),placement:"top",arrow:!0,sx:b},r.createElement(o.Z,{height:"100%",justifyContent:"center",alignItems:"center",dangerouslySetInnerHTML:{__html:p.pJ},px:"xs",onClick:function(){return oe()}})))}),[J,A,M,I,B,K,R,Z,N,U,E,T,D,P,F,W,H,O,z,X,ne,oe,ie,re])}},79847:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(5163),r=i(2784),o=i(92036),a=i(99126),l=i(62143),s=i(45362),c=i(57207),u={"&::after":{content:'""',display:"inline-block",borderWidth:"1px",borderStyle:"solid",borderTopWidth:0,borderRightWidth:0,width:"10px",height:"4px",WebkitTransform:"rotate(-50deg)",position:"absolute",top:"5px",left:"3px"}},d=[["rgb(0,0,0)","rgb(66, 66, 66)","rgb(101, 101, 101)","rgb(152, 152, 152)","rgb(182, 182, 182)","rgb(203, 203, 203)","rgb(216, 216, 216)","rgb(238, 238, 238)","rgb(242, 242, 242)","rgb(255, 255, 255)"],["rgb(138, 26, 16)","rgb(246, 70, 93)","rgb(241, 156, 56)","rgb(255, 254, 85)","rgb(14, 203, 129)","rgb(116, 252, 253)","rgb(87, 134, 224)","rgb(0, 32, 245)","rgb(139, 43, 246)","rgb(234, 61, 247)"],["rgb(255, 120, 116)","rgb(255, 156, 110)","rgb(255, 192, 105)","rgb(255, 245, 102)","rgb(149, 222, 100)","rgb(93, 219, 211)","rgb(105, 192, 255)","rgb(133, 165, 255)","rgb(179, 127, 234)","rgb(255, 133, 192)","rgb(255, 77, 79)","rgb(255, 122, 68)","rgb(255, 169, 64)","rgb(255, 236, 60)","rgb(116, 209, 60)","rgb(54, 207, 201)","rgb(63, 169, 255)","rgb(89, 126, 247)","rgb(146, 84, 222)","rgb(247, 89, 170)","rgb(245, 33, 45)","rgb(249, 84, 28)","rgb(250, 140, 21)","rgb(250, 219, 21)","rgb(82, 196, 27)","rgb(18, 194, 193)","rgb(25, 144, 255)","rgb(28, 57, 195)","rgb(114, 46, 209)","rgb(235, 46, 149)","rgb(207, 20, 35)","rgb(212, 56, 13)","rgb(212, 107, 8)","rgb(212, 177, 7)","rgb(55, 158, 15)","rgb(10, 151, 155)","rgb(7, 109, 217)","rgb(23, 50, 177)","rgb(83, 29, 171)","rgb(196, 29, 127)","rgb(168, 7, 25)","rgb(173, 33, 1)","rgb(173, 78, 1)","rgb(173, 139, 1)","rgb(35, 120, 5)","rgb(0, 109, 116)","rgb(0, 80, 179)","rgb(16, 35, 158)","rgb(57, 16, 133)","rgb(158, 17, 104)"]],h=200,g=120,p=function(e){var t=e.r,i=e.g,a=e.b,l=e.a,s=e.color,d=e.onChange;return r.createElement(o.Z,{key:s,width:16,height:16,bg:s,m:"2px",sx:(0,n.__assign)({position:"relative",borderRadius:"2px",cursor:"pointer","&:hover":{transform:"scale(1.1)"},"&::after":{borderColor:(0,c.U2)((0,c.BG)(s))}},"rgb("+t+", "+i+", "+a+")"===s?u:{}),onClick:function(){return d((0,n.__assign)((0,n.__assign)({},(0,c.P7)(s)),{a:l}))}})},f=function(e){var t=e.r,i=void 0===t?0:t,n=e.g,l=void 0===n?0:n,s=e.b,c=void 0===s?0:s,u=e.a,g=void 0===u?1:u,f=e.onChange;return(0,r.useMemo)((function(){return r.createElement(r.Fragment,null,r.createElement(o.Z,{sx:{width:h,flexDirection:"column","& > *:not(:last-child)":{mb:"xs"}}},d.map((function(e,t){return r.createElement(o.Z,{key:t,sx:{flexWrap:"wrap"}},e.map((function(e){return r.createElement(p,{key:e,r:i,g:l,b:c,a:g,color:e,onChange:f})})))}))),r.createElement(a.Z,{max:100,value:100*g,height:10,onChange:function(e){return f({r:i,g:l,b:c,a:+(.01*Math.round(e.target.value)).toFixed(2)})},sx:{background:"linear-gradient(to right, rgba("+i+", "+l+", "+c+", 0) 0%, rgb("+i+", "+l+", "+c+") 100%)"}}))}),[i,l,c,g,f])},v=function(e){var t=e.r,i=void 0===t?0:t,s=e.g,u=void 0===s?0:s,d=e.b,p=void 0===d?0:d,f=e.a,v=void 0===f?1:f,m=e.onChange,y=(0,r.useRef)(),x=(0,r.useRef)(),b=(0,n.__read)((0,r.useState)({h:0,s:0,v:0}),2),C=b[0],_=C.h,w=C.s,S=C.v,L=b[1];(0,r.useEffect)((function(){var e=(0,c.h8)(i,u,p);L(e)}),[i,u,p,v]);var E=(0,r.useCallback)((function(e,t){var i=t.h,r=t.a,o=e.clientX,a=e.clientY,l=y.current.getBoundingClientRect(),s=o-l.x,u=a-l.y;m((0,n.__assign)((0,n.__assign)({},(0,c.rs)(i,Math.round(s/h*100),Math.round(100*(1-u/g)))),{a:r}))}),[m]),k=(0,r.useCallback)((function(e,t){var i=t.h,r=t.a,o=y.current,a=x.current,l=o.getBoundingClientRect(),s=l.x,u=l.y,d=a.getBoundingClientRect(),p=d.x,f=d.y,v=e.clientX,b=e.clientY,C=function(e){var t=e.clientX,o=e.clientY,a=Math.max(0,Math.round(p-s+t-v)),l=Math.max(0,Math.round(f-u+o-b));a=Math.min(a,h),l=Math.min(l,g),m((0,n.__assign)((0,n.__assign)({},(0,c.rs)(i,Math.round(a/h*100),Math.round(100*(1-l/g)))),{a:r}))},_=function(){document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",_)};return document.addEventListener("mousemove",C),document.addEventListener("mouseup",_),function(){document.removeEventListener("mousemove",C),document.removeEventListener("mousemove",_)}}),[m]);return(0,r.useMemo)((function(){return r.createElement(r.Fragment,null,r.createElement(o.Z,{width:h,flexWrap:"wrap",sx:{bg:"hsl("+_+", 100%, 50%)"}},r.createElement(o.Z,{width:1,height:120,sx:{background:"linear-gradient(to right, #fff, rgba(255,255,255,0))"},onClick:function(e){return E(e,{h:_,a:v})}},r.createElement(l.Z,{ref:y,width:1,height:g,sx:{background:"linear-gradient(to top, #000, rgba(0,0,0,0))"}},r.createElement(l.Z,{ref:x,width:4,height:4,sx:{position:"absolute",borderRadius:"50%",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 1.5px,\n                    rgba(0, 0, 0, 0.3) 0px 0px 1px 1px inset,\n                    rgba(0, 0, 0, 0.4) 0px 0px 1px 2px",transform:"translate("+Math.min(w/100*h,199)+"px, "+Math.min((1-S/100)*g,119)+"px)"},onMouseDown:function(e){return k(e,{h:_,a:v})}})))),r.createElement(a.Z,{max:360,value:_,height:10,onChange:function(e){return m((0,n.__assign)((0,n.__assign)({},(0,c.rs)(Math.round(e.target.value),w,S)),{a:v}))},sx:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)",borderRadius:0,"&::-webkit-slider-thumb":{width:"4px",height:"8px",borderRadius:"1px",boxShdow:"rgba(0, 0, 0, 0.6) 0px 0px 2px",color:"#ffffff"},"&:focus":{color:"#ffffff"}}}),r.createElement(a.Z,{max:100,value:100*v,height:10,onChange:function(e){return m((0,n.__assign)((0,n.__assign)({},(0,c.rs)(_,w,S)),{a:+(.01*Math.round(e.target.value)).toFixed(2)}))},sx:{mt:0,background:"linear-gradient(to right, "+(0,c.h7)(_,w,S,0)+" 0%, "+(0,c.h7)(_,w,S,1)+" 100%)",borderRadius:0,"&::-webkit-slider-thumb":{width:"4px",height:"8px",borderRadius:"1px",boxShdow:"rgba(0, 0, 0, 0.6) 0px 0px 2px",color:"#ffffff"},"&:focus":{color:"#ffffff"}}}))}),[_,w,S,v,m])};const m=function(e){var t=e.color,i=void 0===t?"":t,a=e.onChange,l=void 0===a?function(e){return!1}:a,u=e.getI18n,d=(0,n.__read)((0,r.useState)(),2),h=d[0],g=d[1],p=(0,n.__read)((0,r.useState)(!1),2),m=p[0],y=p[1];(0,r.useEffect)((function(){var e=(0,c.P7)(i),t=e.r,n=e.g,r=e.b,o=e.a;g({r:t,g:n,b:r,a:o})}),[i]);var x=(0,r.useCallback)((function(e){var t=e.r,i=e.g,n=e.b,r=e.a;l("rgba("+t+", "+i+", "+n+", "+r+")")}),[l]),b=(0,r.useMemo)((function(){return u("color-picker-custom","Custom")}),[u]),C=(0,r.useMemo)((function(){return u("color-picker-default","Default")}),[u]);return(0,r.useMemo)((function(){return r.createElement(o.Z,{onClick:function(e){return e.stopPropagation()},sx:{p:"minor",bg:"modalBg",flexDirection:"column",boxShadow:"rgba(0, 0, 0, 0.2) 0px 0px 4px"}},r.createElement(o.Z,{flexWrap:"wrap",flexDirection:"column"},m?r.createElement(v,(0,n.__assign)({},h,{onChange:x})):r.createElement(f,(0,n.__assign)({},h,{onChange:x}))),r.createElement(s.Z,{px:"xs",variant:"default",onClick:function(){return y(!m)}},m?b:C))}),[h,m,x])}},27472:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(5163),r=i(2784),o=i(92036),a=i(62143),l=i(55742),s=i(21030),c=i(98569);const u=function(e){return r.createElement(c.Z,(0,n.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M8 17.586A1 1 0 009.414 19L16 12.414A1 1 0 0016 11L9.414 4.414A1 1 0 108 5.828l5.879 5.879L8 17.586z"}))};var d,h=i(8042),g=i(95260),p=i(26565),f=i(18991);!function(e){e[e.MENU_CURSOR=0]="MENU_CURSOR",e[e.MENU_TOOLS=1]="MENU_TOOLS",e[e.MENU_CONTROL=2]="MENU_CONTROL",e[e.MENU_HANDLER=3]="MENU_HANDLER",e[e.MENU_TOOLS_LINE=4]="MENU_TOOLS_LINE",e[e.MENU_TOOLS_TRACK=5]="MENU_TOOLS_TRACK",e[e.MENU_TOOLS_ARROW=6]="MENU_TOOLS_ARROW",e[e.MENU_TOOLS_TEXT=7]="MENU_TOOLS_TEXT"}(d||(d={}));var v=[{key:d.MENU_CURSOR,children:[{key:h.Us.DefaultCursor,icon:p.cY,i18nKey:g.Wi.DRAW_DEFAULT_CURSOR,i18n:"Cursor"},{key:h.Us.CrossHairCursor,icon:p.cW,i18nKey:g.Wi.DRAW_CROSS_CURSOR,i18n:"Cross Cursor"}]},{key:d.MENU_TOOLS,children:[{key:d.MENU_TOOLS_LINE,activeKey:h.Us.TrendLine,children:[{key:h.Us.TrendLine,icon:p.T3,i18nKey:g.Wi.DRAW_TREND_LINE,i18n:"Trend Line"},{key:h.Us.ExtendTrendLine,icon:p.zM,i18nKey:g.Wi.DRAW_EX_TREND_LINE,i18n:"Extended Trend Line"},{key:h.Us.HorizontalLine,icon:p.F4,i18nKey:g.Wi.DRAW_HORIZONTAL_LINE,i18n:"Horizontal Line"},{key:h.Us.VerticalLine,icon:p.Cf,i18nKey:g.Wi.DRAW_VERTICAL_LINE,i18n:"Vertical Line"},{key:h.Us.CrossLine,icon:p.uO,i18nKey:g.Wi.DRAW_CROSS_LINE,i18n:"Crose Line"},{key:h.Us.ParallelLine,icon:p.UC,i18nKey:g.Wi.DRAW_PARRLLEL_LINE,i18n:"Parallel Line"},{key:h.Us.RayLine,icon:p.ln,i18nKey:g.Wi.DRAW_RAY_LINE,i18n:"Ray"},{key:h.Us.PriceLine,icon:p.Qq,i18nKey:g.Wi.DRAW_PRICE_LINE,i18n:"Price Line"},{key:h.Us.ArrowLine,icon:p.gg,i18nKey:g.Wi.DRAW_ARROW_LINE,i18n:"Arrow Line"},{key:h.Us.InfoLine,icon:p.nj,i18nKey:g.Wi.DRAW_INFO_LINE,i18n:"Info Line"}]},{key:d.MENU_TOOLS_ARROW,activeKey:h.Us.RightArrow,children:[{key:h.Us.UpArrow,icon:p.Ms,i18nKey:g.Wi.DRAW_UP_ARROW,i18n:"Up Arrow"},{key:h.Us.DownArrow,icon:p.G6,i18nKey:g.Wi.DRAW_DOWN_ARROW,i18n:"Down Arrow"},{key:h.Us.LeftArrow,icon:p.qg,i18nKey:g.Wi.DRAW_LEFT_ARROW,i18n:"Left Arrow"},{key:h.Us.RightArrow,icon:p.AD,i18nKey:g.Wi.DRAW_RIGHT_ARROW,i18n:"Right Arrow"}]},{key:h.Us.FibonacciLine,icon:p.k0,i18nKey:g.Wi.DRAW_FIB_LINE,i18n:"Fibonacci Retracement"},{key:h.Us.Rectangle,icon:p.OW,i18nKey:g.Wi.DRAW_RECTANGLE,i18n:"Rectangle"},{key:h.Us.Text,icon:p.VL,i18nKey:g.Wi.DRAW_TEXT,i18n:"Text"}]},{key:d.MENU_CONTROL,children:[{key:h.Us.KeepDrawing,icon:p.Ld,i18nKey:g.Wi.DRAW_CONTINUE,i18n:"Keep Drawing",multiSelect:!0},{key:h.Us.LockDraw,icon:function(e){return e?p.mB:p.ML},i18nKey:g.Wi.DRAW_LOCK,i18n:"Lock Drawing Tools",multiSelect:!0},{key:h.Us.ToggleVisible,icon:function(e){return e?p.Pl:p._f},i18nKey:g.Wi.DRAW_TOGGLE,i18n:"Hide All Drawings",multiSelect:!0}]},{key:d.MENU_HANDLER,children:[{key:h.Us.Delete,icon:p.pJ,i18nKey:g.Wi.DRAW_DELETE_ALL,i18n:"Delete All"}]}],m=function(e,t){return void 0===t&&(t=!0),"string"==typeof e?e:e(t)},y={position:"relative",height:"100%",width:"48px",zIndex:1,transition:"width 0.2s","&.hidden":{width:"2px","& .kline-draw-menu-container, & .kline-draw-panel_down":{visibility:"hidden"},"& .kline-draw-panel_hidden::after":{transform:"rotate(135deg) translateY(100%)",transition:"transform .11666667s cubic-bezier(.215,.61,.355,1)"}},"& .kline-draw-panel_hidden:hover":{bg:"t.yellow",color:"#1E2026"}},x={bg:"inputBg",position:"absolute",left:0,bottom:0,width:"100%",height:"16px",zIndex:1,cursor:"pointer",visibility:"visible",transition:"transform .11666667s cubic-bezier(.215,.61,.355,1)","&::after":{content:'""',position:"absolute",left:"50%",top:"50%",width:"4px",height:"4px",borderWidth:"0 2px 2px 0",borderStyle:"solid",transformOrigin:"center",transform:"rotate(45deg) translateX(-100%)",borderColor:"t.third"},"&:hover::after":{borderColor:"#F0B90B"},"&.up":{top:0,transform:"rotate(180deg)"},"&.up.hidden":{transform:"rotate(180deg) translateY(100%)"},"&.hidden":{transform:"translateY(100%)",visibility:"hidden",display:"none"}},b={position:"absolute",bottom:"65px",left:"100%",width:"12px",height:"32px",borderRadius:"4px",bg:"bg1",borderColor:"line",borderWidth:"1px",borderStyle:"solid",color:"t.third","&::after":{content:'""',position:"absolute",left:"50%",top:"50%",width:"3px",height:"3px",borderWidth:"1px 0 0 1px",borderStyle:"solid",transformOrigin:"center",transform:"rotate(-45deg) translateY(-50%)"}},C=r.memo((function(e){var t=e.icon,i=e.i18n,a=e.isActive,l=e.wrapRef,c=e.handleClick,u=e.action,d=e.groupKey,h=(0,n.__rest)(e,["icon","i18n","isActive","wrapRef","handleClick","action","groupKey"]),g=(0,r.useCallback)((function(e){c(u,d),e.nativeEvent.stopImmediatePropagation()}),[u,d,c]);return r.createElement(s.ZP,(0,n.__assign)({container:l,tip:i,placement:"right",arrow:!0,width:1,sx:{"&":{display:"flex",justifyContent:"center"}}},h),r.createElement(o.Z,{height:40,onClick:function(e){return g(e)},flexDirection:"column",justifyContent:"center",sx:{cursor:"pointer","& > svg > *":{fill:a?"primary":"t.third"}},dangerouslySetInnerHTML:{__html:t}}))}));const _=function(e){var t,i,s=e.candlestickInstance,c=e.wrapRef,g=(0,n.__read)((0,r.useState)(!0),2),p=g[0],_=g[1],w=(0,n.__read)((0,r.useState)(!1),2),S=w[0],L=w[1],E=(0,n.__read)((0,r.useState)(!1),2),k=E[0],V=E[1],A=(0,n.__read)((0,r.useState)(""),2),T=A[0],M=A[1],D=(0,r.useRef)(),I=(0,r.useCallback)((function(){return s?s.getSettingManager().getValue("@drawTool.currentAction"):h.Us.CrossHairCursor}),[s]),P=(0,n.__read)((0,f.O)({onlyKey:I()}),2),B=P[0],W=P[1],R=W.updateValue,H=W.toggleValue,Z=W.getValue,O=(0,r.useCallback)((function(e){void 0===e&&(e=!0);var t=D.current;if(t){var i=t.scrollTop,n=t.scrollHeight,r=e?Math.min(i+60,n):Math.max(i-60,0);t.scrollTop=r}}),[]),N=(t=function(){var e=D.current,t=(e||{}).lastElementChild;if(e&&t){var i=e.scrollTop,n=e.offsetHeight,r=t,o=r.offsetHeight,a=r.offsetTop;L(i>0),V(i<a-n+o)}},10,i=(0,r.useRef)(0),(0,r.useCallback)((function(){var e=Date.now();e-i.current>10&&(t(),i.current=e)}),[])),F=(0,r.useCallback)((function(e,t){var i,n,r;if(t===d.MENU_CURSOR&&(null===(r=null==s?void 0:s.getSettingManager())||void 0===r||r.setValue("@drawTool.currentAction",e)),s){s.fire("clickDrawingTool",{data:e});var o=s.getEditor(),a=I();switch(t){case d.MENU_CURSOR:!!Z(h.Us.ToggleVisible)&&s.toggleAnnotationsVisible(),R(((i={onlyKey:e})[h.Us.ToggleVisible]=!1,i)),s.fire("unSelectAnnotation"),o.reset();break;case d.MENU_TOOLS:!!Z(h.Us.ToggleVisible)&&s.toggleAnnotationsVisible(),!!Z(h.Us.LockDraw)&&s.setAnnotationLockStatus(!1),R(((n={onlyKey:e})[h.Us.ToggleVisible]=!1,n[h.Us.LockDraw]=!1,n)),o.setCompleteDrawCallback((function(){Z(h.Us.KeepDrawing)||(R({onlyKey:a}),s.executeActionByType(a))})),s.selectAnnotation(void 0,e);break;case d.MENU_CONTROL:H(e),e===h.Us.ToggleVisible&&(R({onlyKey:a}),s.executeActionByType(a));break;case d.MENU_HANDLER:o.setCompleteDrawCallback((function(){Z(h.Us.KeepDrawing)||(R({onlyKey:a}),s.executeActionByType(a))}))}s.executeActionByType(e)}}),[s,I]),K=(0,r.useCallback)((function(e,t,i,n){t.activeKey=i,F(i,n),e.nativeEvent.stopImmediatePropagation()}),[F]),U=(0,r.useCallback)((function(e,t){return(null==s?void 0:s.getI18n(e,t))||t}),[s]);(0,r.useEffect)((function(){N()}),[N]),(0,r.useEffect)((function(){var e=null==s?void 0:s.getEditor();null==e||e.clearEvents()}),[s]);var z=I();return(0,r.useEffect)((function(){R({onlyKey:z}),null==s||s.executeActionByType(z)}),[z]),r.createElement(o.Z,{className:"kline-draw-panel "+(p?"hidden":"visible"),justifyContent:"center",sx:y},r.createElement(o.Z,{className:"kline-draw-panel_down up "+(S?"":"hidden"),onClick:function(){return O(!1)},sx:x}),r.createElement(a.Z,{ref:D,sx:{bg:"modalBg"},className:"kline-draw-menu-container",flexDirection:"column",onScroll:function(){return N()}},v.map((function(e,t){var i=e.key,n=e.children;return r.createElement(r.Fragment,{key:i},t>0&&r.createElement(o.Z,{my:"minor",height:1,bg:"line"}),r.createElement(o.Z,{flexDirection:"column"},n.map((function(e){var t=e,n=t.children,s=t.activeKey,d=t.key;if(n){var h=n,g=h.find((function(e){return e.key===s}));return r.createElement(o.Z,{alignItems:"center",key:d,justifyContent:"center"},g&&r.createElement(C,{wrapRef:c,icon:m(g.icon,g.key===B.onlyKey),action:g.key,i18n:U(g.i18nKey,g.i18n),isActive:g.key===B.onlyKey,groupKey:i,handleClick:F}),r.createElement(l.ZP,{trigger:"click",placement:"right-start",enablePortal:!0,sx:{position:"absolute",right:0},overlayProps:{className:"kline-draw-menu-dropdown",bg:"popupBg",ml:"minor",maxHeight:"384px",overflowY:"scroll",sx:{boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"}},onVisibleChange:function(e){M(e?d:"")},overlay:h.map((function(t){var n=t.key,a=t.icon,l=t.i18n,s=t.i18nKey;return r.createElement(o.Z,{className:"draw-tool-item "+(B.onlyKey===n?"active":""),height:48,fontSize:1,pl:"xs",pr:"plus",onClick:function(t){return K(t,e,n,i)},justifyContent:"start",alignItems:"center",key:n,sx:{color:"t.third","&.draw-tool-item.active, &:hover":{bg:"line",color:"t.primary"},"&.draw-tool-item.active svg>path, &:hover svg>path":{fill:"t.primary"}}},r.createElement(o.Z,{dangerouslySetInnerHTML:{__html:m(a)}}),r.createElement(o.Z,{ml:"xs"},U(s,l)))}))},r.createElement(a.Z,{sx:{lineHeight:"30px",borderRadius:"2px 0 0 2px","&:hover":{bg:"line"},cursor:"pointer"}},r.createElement(u,{size:12,color:"t.third",sx:{transform:T===d?"rotate(180deg)":"rotate(0)",transition:"transform 0.3s ease 0s"}}))))}var p=e,f=p.key,v=p.i18nKey,y=p.i18n,x=p.icon,b=p.multiSelect?!!B[f]:f===B.onlyKey;return r.createElement(C,{wrapRef:c,icon:m(x,b),action:f,i18n:U(v,y),isActive:b,handleClick:F,key:f,groupKey:i})}))))}))),r.createElement(o.Z,{className:"kline-draw-panel_down "+(k?"":"hidden"),onClick:function(){return O()},sx:x}),r.createElement(o.Z,{className:"kline-draw-panel_hidden pointer",onClick:function(){return _(!p)},sx:b}))}},6927:(e,t,i)=>{i.d(t,{e:()=>b,Z:()=>C});var n=i(5163),r=i(18149),o=i.n(r),a=i(9850),l=i.n(a),s=i(13318),c=i(8042),u=i(32803),d=i(80427),h=i(57207),g=i(78734);const p=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,n.__assign)((0,n.__assign)({},u.Z.defaultConfig),{width:0,height:0,radius:0,stroke:!0,fill:!1,useCache:!0}),i.setAttrs(t),i.watch(["lineWidth","strokeStyle","fillStyle","radius","fill","stroke","useCache"],i.onDataChange.bind(i)),i}return(0,n.__extends)(t,e),t.prototype.onDataChange=function(){this.isBatchUpdate=!0},t.prototype.getTransformOrigin=function(){var e=this.getConfig(),t=e.data,i=t.x,n=t.y,r=e.radius,o=e.lineWidth;return{x:i-r-o,y:n-r-o}},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,fillStyle:e.fillStyle,stroke:e.stroke,fill:e.fill}},t.prototype.setRadius=function(e){return this.setAttr("radius",e),this},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.radius,i=e.stroke,n=e.fill,r=e.lineWidth;if(!(t<=0)){var a=this.getContext(),l={width:2*t+2*r,height:2*t+2*r},s=this.overrideSize(l);s&&this.setAttrs(l);var c=this.getContextStyles(),u=!o()(c,this.preContextStyles);u&&(this.preContextStyles=c),(u||s)&&(a.beginPath(),d.Z.clearRect(a),(0,h.ui)(a,c),d.Z.drawCircle(a,t+r,t+r,t),n&&a.fill(),i&&a.stroke()),this.isBatchUpdate=!1}}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.data,n=i.x,r=i.y,o=t.radius,a=t.stroke,l=t.fill;o<=0||((0,h.ui)(e,this.getContextStyles()),e.beginPath(),d.Z.drawCircle(e,n,r,o),l&&e.fill(),a&&e.stroke())},t.prototype.isHover=function(e,t){if(void 0===t&&(t=5),!this.preDetect())return!1;var i=this.getAttr("data"),n=this.getAttr("radius");return g.Z.Algorith.getSquareDistance(e,i)<=Math.pow(n+t,2)},t}(u.Z);var f=i(78191),v=i(13283),m=i(51194),y=i(95260),x=i(63270),b={radius:6,hover_border_width:1,border_width:2,highlight_border_width:4,border_color:c.E.Blue3,fill_color:"#ffffff",hover_border_color:"#EA3CF7",text_color:"#ffffff",default_line_color:c.E.Blue3,default_border_color:"#9013FE"};const C=function(e){function t(){var t=e.call(this)||this;return t.id=(0,h.M8)(),t.shapeWeakMap=new WeakMap,t._lastTick=0,t._currentTick=1,t._isWating=!1,t.syncStorage=(0,h.Ds)((function(){var e=t.getParent();e&&e.save()}),100),t.initEvents(),t}return(0,n.__extends)(t,e),t.getCacheStyle=function(e,t){return(this.cacheStyle[e]||{})[t]},t.updateCacheStyle=function(e,t){var i=this.cacheStyle[e]||{};this.cacheStyle[e]=(0,n.__assign)((0,n.__assign)({},i),t)},t.getPreEditAttributes=function(e){var t=this.cacheStyle[e]||{};return(0,n.__assign)((0,n.__assign)({},t),{showTextEdit:!1,showLock:!1,showDelete:!1})},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),t.prototype.isLock=function(){return this.getAttr("isLock")},t.prototype.getParent=function(){return this._parent},t.prototype.setParent=function(e){return this._parent=e,this},t.prototype.setData=function(e){return this.setAttr("data",e),this},t.prototype.getData=function(){return this.getAttr("data")},t.prototype.isIndependent=function(){return!1},t.prototype.initWeakMap=function(){var e=this;this.getShapes().forEach((function(t){e.shapeWeakMap.set(t,null)}))},t.prototype.initEvents=function(){var e=this;this.watch(["isHover","isEdit"],(function(){e.getAttr("isComplete")&&(e.setVisibleShapes(),e.update())})),this.watch("isComplete",(function(t){t.newVal&&e.update()})),this.watch(["data","color","lineWidth","lineStyle","background","isLock"],(function(t){var i=t.oldVal,n=t.newVal;!o()(i,n)&&e.isValid()&&e.syncStorage()})),this.on("mousedown",y.HD.MOUSE_DOWN,this.delectShapeEdit.bind(this)),this.on("mousemove",y.HD.MOUSE_MOVE,this.delectShapeMousemove.bind(this)),this.watch("color",this.watchStyleHook.bind(this,"color")),this.watch("lineWidth",this.watchStyleHook.bind(this,"lineWidth")),this.watch("lineStyle",this.watchStyleHook.bind(this,"lineStyle")),this.watch("background",this.watchStyleHook.bind(this,"background")),this.watch("textColor",this.watchStyleHook.bind(this,"textColor")),this.watch("textFontSize",this.watchStyleHook.bind(this,"textFontSize")),this.watch("isTextBold",this.watchStyleHook.bind(this,"isTextBold")),this.initCustomEvents()},t.prototype.addWidgetShapes=function(e,t){var i=this._addWidgetShape.bind(this,e);t.forEach(i)},t.prototype.setAnnotationToWidgets=function(e){var t=this;e.forEach((function(e){e.addAnnotation(t)}))},t.prototype.startDraw=function(){this.setAttr("isComplete",!1)},t.prototype.compeleDraw=function(){var e=this;setTimeout((function(){e.setAttr("isComplete",!0)}))},t.prototype.isValid=function(){return!!this.getData()},t.prototype.transformYPoint=function(e){return{x:e.x,y:-e.y}},t.prototype.remove=function(e){void 0===e&&(e=!0),this.destroy(),this.syncStorage(),e&&this._parent&&(this.update(),this._parent.getParent().unSelectAnnotation())},t.prototype.destroy=function(){for(var e=this.getShapes(),t=0;t<e.length;++t){var i=e[t],n=this.shapeWeakMap.get(i);n&&(n.removeShape(i),n.removeAnnotation(this),this.shapeWeakMap.delete(i))}this.afterDestroy()},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane,e.axisPane,e.timeAxisPane]:[]},t.prototype.render=function(){this.getRenderPanes().forEach((function(e){e.update(c.mB.Marks)}))},t.prototype.update=function(){var e=this,t=this.getParent();!this._isWating&&t&&(this._isWating=!0,requestAnimationFrame((function(){e.render(),e._isWating=!1})))},t.prototype.updateData=function(){this.updateTick(this.updateImmediate)},t.prototype.updateTick=function(e){var t=this;if(this._lastTick!==this._currentTick){var i=this._currentTick;this._currentTick=this._lastTick,"function"==typeof e&&e.call(this),Promise.resolve().then((function(){t._lastTick=i}))}},t.prototype.delectShapeEdit=function(e){if(this._parent){var t=this._parent.getParent(),i=this._parent.mainPane,n=this.getAttr("isComplete"),r=this.getAttr("isNeedStore");if(n&&r){var o=i.transformPointToView(e.point),a=o.x,l=o.y;this.isHover({x:a,y:-l})&&!e.isDealed?(this.setAttr("isEdit",!0),t.selectAnnotation(this,this.getAttr("type"))):(t.unSelectAnnotation(),this.setAttr("isEdit",!1))}}},t.prototype.delectShapeMousemove=function(e){if(this._parent){var t=this._parent.mainPane.transformPointToView(e.point),i=t.x,n=t.y;this.isHover({x:i,y:-n})?(this._parent.updateCursorStyle(!0),!e.isDealed&&this.setAttr("isHover",!0),e.isDealed=!0):(this._parent.updateCursorStyle(!1),this.setAttr("isHover",!1))}},t.prototype.contain=function(){return!!this.getParent()},t.prototype.updateVertexBorderAndVisible=function(e,t){var i={isVisible:!t,strokeStyle:t?b.hover_border_color:b.border_color};this.updateVertex(e,i)},t.prototype.updateVertex=function(e,t){Array.isArray(e)?e.forEach((function(e){e.setAttrs(t)})):e.setAttrs(t)},t.prototype.recoverDragVertexts=function(){var e={isVisible:!0,strokeStyle:b.border_color,radius:b.radius};this.updateVertex(this.getVertexs(),e)},t.prototype.getNoDragVertexs=function(e){var t=this.getVertexs(),i=t.indexOf(e);return t.splice(i,1),t},t.prototype.updateHighlightVertexBorderWidth=function(e,t){var i=e.getAttr("lineWidth"),n=this.getAttr("isEdit"),r=t?b.highlight_border_width:n?b.border_width:b.hover_border_width;return e.setAttr("lineWidth",r),i!==r},t.prototype.initCustomEvents=function(){},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!0,lineWidth:e.lineWidth,showStyle:!0,lineStyle:e.lineStyle,showBg:!1,background:e.background,isLock:e.isLock,showTextColor:!1,textColor:e.textColor,showFontSize:!1,textFontSize:e.textFontSize,showTextBold:!1,isTextBold:e.isTextBold,showTextEdit:!1,isTextEdit:e.isTextEdit,showLock:!0,showDelete:!0}},t.prototype.applyAttributes=function(e){this.setAttrs(e)},t.prototype.getDescription=function(){var e=this.getConfig();return{data:e.data,type:e.type,color:e.color,background:e.background,lineWidth:e.lineWidth,lineStyle:e.lineStyle,isLock:e.isLock}},t.prototype.getCacheStyleKey=function(){return this.getAttr("type")},t.prototype.isDisableDrag=function(){var e=this.getParent(),t=null==e?void 0:e.getParent();return!this.getAttr("isComplete")||t.getAttr("annotationLock")||this.isLock()},t.prototype.getDefaultStyle=function(){var e=this.getCacheStyleKey();return x.Z[e]},t.prototype.refreshDefaultStyle=function(){var e=this.getDefaultStyle();this.applyAttributes(e)},t.prototype.watchStyleHook=function(e){var t;switch(e){case"color":var i=this.getAttr("color");this.updateColor(i);break;case"lineWidth":var n=this.getAttr("lineWidth");this.updateLineWidth(n);break;case"lineStyle":var r=this.getAttr("lineStyle"),o=((t={})[c.TD.SOLID]=[],t[c.TD.DOTTED]=[2,2],t[c.TD.DASHED]=[4,3],t);this.updateLineStyle(o[r]);break;case"background":var a=this.getAttr("background");this.updateBackground(a);break;case"textColor":var l=this.getAttr("textColor");this.updateTextColor(l);break;case"textFontSize":var s=this.getAttr("textFontSize");this.updateTextSize(s);break;case"isTextBold":var u=this.getAttr("isTextBold");this.updateTextBold(u?c.HS.BOLD:c.HS.NORMAL)}this.update()},t.prototype.updateColor=function(e){},t.prototype.updateLineWidth=function(e){},t.prototype.updateLineStyle=function(e){},t.prototype.updateBackground=function(e){},t.prototype.updateTextColor=function(e){},t.prototype.updateTextSize=function(e){},t.prototype.updateTextBold=function(e){},t.prototype.afterDestroy=function(){},t.prototype._addWidgetShape=function(e,t){this.shapeWeakMap.get(t)!==e&&(this.shapeWeakMap.set(t,e),e.addShape(t))},t.dragVertex=new p({data:{x:0,y:0},radius:b.radius,strokeStyle:b.border_color,fillStyle:b.fill_color,fill:!0,lineWidth:b.border_width}),t.dragRect=new f.Z({data:{x:0,y:0},width:12,height:12,borderRadius:2,strokeStyle:b.border_color,fillStyle:b.fill_color,lineWidth:b.border_width,useCache:!0}),t.line=new v.Z({strokeStyle:b.default_line_color,lineWidth:1}),t.text=new m.Z({content:"",fillStyle:b.default_line_color,fontSize:12}),t.defaultConfig=(0,n.__assign)((0,n.__assign)({},s.Z.defaultConfig),{type:c.Us.Arrow,data:null,isHover:!1,isEdit:!0,isComplete:!1,isLock:!1,color:"",lineWidth:1,lineStyle:c.TD.SOLID,background:"",textColor:"#848E9C",textFontSize:16,isTextBold:!1,isTextEdit:!1,isNeedStore:!0}),t.cacheStyle=l()(x.Z),t}(s.Z)},63270:(e,t,i)=>{i.d(t,{Z:()=>a,e:()=>o});var n,r=i(8042),o={radius:6,hover_border_width:1,border_width:2,highlight_border_width:4,border_color:r.E.Blue3,fill_color:"#ffffff",hover_border_color:"#EA3CF7",text_color:"#ffffff",default_line_color:r.E.Blue3,default_area_color:"rgba(50, 141, 253, 0.2)",default_border_color:"#9013FE",default_text_color:"#848E9C"};const a=((n={})[r.Us.TrendLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.ExtendTrendLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.ArrowLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.InfoLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.RayLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.LeftArrow]={color:o.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.RightArrow]={color:o.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.UpArrow]={color:o.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.DownArrow]={color:o.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.FibonacciLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,background:"",isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.ParallelLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,background:o.default_area_color,isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.PriceLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.Rectangle]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,background:o.default_area_color,isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.StraightLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.HorizontalLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.VerticalLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.CrossLine]={color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},n[r.Us.Text]={textColor:o.default_text_color,background:"rgba(0, 0, 0, 0)",textFontSize:16,isTextBold:!1,isTextEdit:!1,isLock:!1,showColor:!1,showBg:!0,showWidth:!1,showStyle:!1,showFontSize:!0,showTextColor:!0,showTextBold:!0,showTextEdit:!0,showLock:!1,showDelete:!1},n)},13318:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(57207);const r=function(){function e(){this.eventListeners={},this.attrListeners={},this.watchMap=new Map}return Object.defineProperty(e.prototype,"devicePixelRatio",{get:function(){return(0,n.x_)()},enumerable:!1,configurable:!0}),e.prototype.getConfig=function(){return this.config},e.prototype.setAttrs=function(e){var t=this;return Object.keys(e||{}).forEach((function(i){t.setAttr(i,e[i])})),this},e.prototype.getAttr=function(e){return this.config[e]},e.prototype.setAttr=function(e,t){var i=this.config[e];return i===t||(void 0===t?delete this.config[e]:this.config[e]=t,this._fireChangeEvent(e,i,t)),this},e.prototype.on=function(e,t,i,n){var r="string"==typeof t?t:"",o="function"==typeof i?i:t,a="boolean"==typeof n?n:i;if("function"!=typeof o)throw new Error("Must provide event handler");var l=this.eventListeners[e];return l||(this.eventListeners[e]=l=[]),l.some((function(e){return e.name===r&&e.handler===o}))||(a?l.unshift({name:r,handler:o}):l.push({name:r,handler:o})),this},e.prototype.once=function(e,t,i){var n=this,r="string"==typeof t?t:"",o="function"==typeof i?i:t;if("function"!=typeof o)throw new Error("Must provide event handler");var a=function(t){o.call(n,t),n.off(e,r,a)};this.on(e,r,a)},e.prototype.off=function(e,t,i){var n=this;e||Object.keys(this.eventListeners||{}).forEach((function(e){n._off(e)}));var r=e,o="string"==typeof t?t:"";"function"==typeof t&&(i=t),this.eventListeners[r]?this._off(r,o,i):Object.keys(this.eventListeners||{}).forEach((function(e){n._off(e,r,i)}))},e.prototype.fire=function(e,t){void 0===t&&(t={}),t.target=t.target||this,this._fire(e,t)},e.prototype.watch=function(e,t,i){var n=this;void 0===i&&(i=!1),Array.isArray(e)?e.forEach((function(e){return n._registerListener(e,t,i)})):this._registerListener(e,t,i)},e.prototype.unwatch=function(e,t){var i=this;Array.isArray(e)?e.forEach((function(e){return i._unwatch(e,t)})):this._unwatch(e,t)},e.prototype.hasWathedProperty=function(e){return this.watchMap.has(e)},e.prototype.watchProperty=function(e,t){if(this.watchMap.has(e)){var i=this.watchMap.get(e);i.includes(t)||i.push(t)}else this.watchMap.set(e,[t])},e.prototype.setWatchProperty=function(e,t,i,r){void 0===r&&(r={});var o=e[t]!==i;o&&(e[t]=i);var a=this.watchMap.get(t);a&&a.forEach((function(e){o&&(e.textContent=i),(0,n.AS)(e,r)}))},e.prototype._off=function(e,t,i){var n=this.eventListeners[e];if(n){for(var r=n.slice(0),o=r.length-1;o>=0;o--){var a=r[o],l=a.name,s=a.handler;t&&l!==t||i&&i!==s||r.splice(o,1)}r.length>0?this.eventListeners[e]=r:delete this.eventListeners[e]}},e.prototype._fireChangeEvent=function(e,t,i){var n=this.attrListeners[e];n&&n.forEach((function(e){e.handler({oldVal:t,newVal:i})}))},e.prototype._fire=function(e,t){var i=this;void 0===t&&(t={});var n=this.eventListeners[e];n&&(t.currentTarget=this,t.type=e,n.forEach((function(e){e.handler.call(i,t)})))},e.prototype._registerListener=function(e,t,i){void 0===i&&(i=!1);var n=this.attrListeners[e];n||(this.attrListeners[e]=n=[]),n.some((function(e){return t&&e.handler===t}))||n.push({handler:t}),i&&t.call(this,{oldVal:this.getAttr(e),newVal:this.getAttr(e)})},e.prototype._unwatch=function(e,t){var i=this.attrListeners[e];if(i){var n=i.filter((function(e){return t&&e.handler!==t}));n.length>0?this.attrListeners[e]=n:delete this.attrListeners[e]}},e.defaultConfig={devicePixelRatio:(0,n.x_)(),isMobile:(0,n.tq)(),isMouseover:!1,isMousedown:!1},e}()},13283:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(5163),r=i(18149),o=i.n(r),a=i(32803),l=i(80427),s=i(57207),c=i(78734);const u=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,n.__assign)((0,n.__assign)({},a.Z.defaultConfig),{width:0,height:0}),i.setAttrs(t),i.watch(["lineWidth","strokeStyle"],i.onCacheChange.bind(i)),i}return(0,n.__extends)(t,e),t.prototype.beforeDrawHook=function(){if(this.isDataUpdate){var e=this.getAttr("data"),t=e.p1,i=e.p2;this.setAttrs({width:Math.abs(t.x-i.x),height:Math.abs(t.y-i.y)}),this.isDataUpdate=!1}},t.prototype.getTransformOrigin=function(){var e=this.getAttr("data"),t=e.p1,i=e.p2;return{x:Math.min(t.x,i.x),y:Math.min(t.y,i.y)}},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,lineDash:e.lineDash}},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.lineDash,i=e.data,n=i.p1,r=i.p2,a=this.getContext(),c=Math.max(Math.abs(n.x-r.x),1),u=Math.max(Math.abs(n.y-r.y),1),d=this.overrideSize({width:c,height:u});d&&this.setAttrs({width:c,height:u});var h=this.getContextStyles(),g=!o()(h,this.preContextStyles);if(g&&(this.preContextStyles=h,(0,s.ui)(a,h)),t&&a.setLineDash(t),g||d){l.Z.clearRect(a);var p=this.getTransformOrigin(),f=p.x,v=p.y;l.Z.drawLine(a,n.x-f,n.y-v,r.x-f,r.y-v),a.stroke()}this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.lineDash,n=t.data;(0,s.ui)(e,this.getContextStyles()),i&&e.setLineDash(i);var r=n.p1,o=n.p2;e.beginPath(),l.Z.drawLine(e,r.x,r.y,o.x,o.y),e.stroke()},t.prototype.isHover=function(e,t){if(void 0===t&&(t=5),!this.preDetect())return!1;var i=this.getAttr("data"),n=i.p1,r=i.p2;return c.Z.Line.isPointAtSegment(e,n,r,t)},t}(a.Z)},78191:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(5163),r=i(32803),o=i(80427),a=i(57207),l=i(78734);const s=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,n.__assign)((0,n.__assign)({},r.Z.defaultConfig),{width:0,height:0,borderRadius:0,stroke:!0,fill:!0,globalAlpha:1,useCache:!1}),i.setAttrs(t),i.watch(["width","height","lineWidth","strokeStyle","fillStyle","fill","stroke","useCache","borderRadius"],i.onCacheChange.bind(i)),i.watch(["width","height","lineWidth"],i._onSizeChange.bind(i)),i}return(0,n.__extends)(t,e),t.prototype.onDataChange=function(){this.isDataUpdate=!0},t.prototype.getTransformOrigin=function(){var e=this.getAttr("data");return{x:e.x,y:e.y}},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,fillStyle:e.fillStyle,stroke:e.stroke,fill:e.fill,globalAlpha:e.globalAlpha,borderRadius:e.borderRadius}},t.prototype.getWidth=function(){return this.getConfig().width},t.prototype.getHeight=function(){return this.getConfig().height},t.prototype.setAnnotherVertex=function(e){var t=this.getAttr("data"),i=t.x,n=t.y,r=Math.min(i,e.x),o=Math.min(n,e.y),a=Math.abs(i-e.x),l=Math.abs(n-e.y);return this.setAttrs({data:{x:r,y:o},width:a,height:l}),this},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.stroke,i=e.fill,n=e.width,r=e.height,l=e.borderRadius,s=e.lineWidth,c=e.lineDash;if(!(n<=0||r<=0)){var u=this.getContext(),d=this.getContextStyles();this.preContextStyles=d,(0,a.ui)(u,d),c&&u.setLineDash(c),o.Z.clearRect(u),this._hasBorderRadius(l)?(this._drawRoundRect(u,s,s,n,r,l),i&&u.fill(),t&&((0,a.ui)(u,{globalAlpha:1}),u.stroke())):(i&&o.Z.fillRect(u,0,0,n,r),t&&((0,a.ui)(u,{globalAlpha:1}),o.Z.strokeRect(u,.5*s,.5*s,n-s,r-s))),this.isDataUpdate=!1,this.isBatchUpdate=!1}}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.data,n=i.x,r=i.y,l=t.width,s=t.height,c=t.stroke,u=t.fill,d=t.borderRadius,h=t.lineDash,g=t.lineWidth;l<=0||s<=0||((0,a.ui)(e,this.getContextStyles()),h&&e.setLineDash(h),this._hasBorderRadius(d)?(this._drawRoundRect(e,n,r,l,s,d),u&&e.fill(),c&&((0,a.ui)(e,{globalAlpha:1}),e.stroke())):(u&&o.Z.fillRect(e,n,r,l,s),c&&((0,a.ui)(e,{globalAlpha:1,lineWidth:g}),o.Z.strokeRect(e,n+.5*g,r+.5*g,l-g,s-g))))},t.prototype.isHover=function(e){if(!this.preDetect())return!1;var t=this.getTransformOrigin(),i=t.x,n=t.y,r=this.getHeight();return new l.Z.Bound(i,n,this.getWidth(),r).contain([e.x,e.y])},t.prototype._drawRoundRect=function(e,t,i,r,o,a){var l=(0,n.__read)("number"==typeof a?[a,a,a,a]:a,4),s=l[0],c=l[1],u=l[2],d=l[3];e.beginPath(),e.moveTo(t,i+s),e.arc(t+s,i+s,s,Math.PI,1.5*Math.PI),e.lineTo(t+r-c,i),e.arc(t+r-c,i+c,c,1.5*Math.PI,2*Math.PI),e.lineTo(t+r,i+o-u),e.arc(t+r-u,i+o-u,u,0,.5*Math.PI),e.lineTo(t+d,i+o),e.arc(t+d,i+o-d,d,.5*Math.PI,Math.PI),e.closePath()},t.prototype._hasBorderRadius=function(e){return"number"==typeof e&&e>0||Array.isArray(e)&&e.some((function(e){return e>0}))},t.prototype._onSizeChange=function(){var e={width:this.getWidth(),height:this.getHeight()};this.overrideSize(e)},t}(r.Z)},32803:(e,t,i)=>{i.d(t,{$:()=>n,Z:()=>g});var n,r=i(5163),o=i(9907),a=i.n(o),l=i(13318),s=i(8042),c=i(57207),u=i(46772),d=i(80427),h=i(78734);!function(e){e.AUTO="auto"}(n||(n={}));const g=function(e){function t(){var t=this.constructor,i=e.call(this)||this;return i.id=(0,c.M8)(),i.isBatchUpdate=!0,i.isDataUpdate=!0,i.preContextStyles={},i.initEvents(),i._constructor=t,i}return(0,r.__extends)(t,e),t.prototype.initEvents=function(){this.watch("data",this.onDataChange.bind(this))},Object.defineProperty(t.prototype,"sceneCanvas",{get:function(){return this._sceneCanvas||(this._sceneCanvas=(0,c.az)("canvas",{})),this._sceneCanvas},enumerable:!1,configurable:!0}),t.prototype.setData=function(e){return this.setAttr("data",e),this},t.prototype.setParent=function(e){return this._parent=e,this},t.prototype.getParent=function(){return this._parent},t.prototype.overrideSize=function(e){var t=e.width,i=e.height,n=this.getAttr("devicePixelRatio"),o=this.sceneCanvas,a=t*n,l=i*n,s=(0,r.__read)([this.getAttr("width"),this.getAttr("height")],2),d=s[0],h=void 0===d?0:d,g=s[1],p=void 0===g?0:g;if((0,u.hj)(h)&&(0,c.Fr)(h-t)&&(0,c.Fr)(p-i)&&o.width===a&&o.height===l)return!1;(0,c.AS)(o,{width:t+"px",height:i+"px"}),o.width=a,o.height=l;var f=this.getContext();return f.resetTransform?f.resetTransform():f.setTransform(1,0,0,1,0,0),f.scale(n,n),!0},t.prototype.getContext=function(){return this.sceneCanvas.getContext("2d")},t.prototype.getBound=function(){var e=this.getTransformOrigin();return{x:e.x,y:e.y,width:this.getWidth(),height:this.getHeight()}},t.prototype.getConvertBound=function(){var e=this.getBound(),t=e.x,i=e.y,n=e.width,r=e.height;return{x:t,y:-(i+r),width:n,height:r}},t.prototype.isVisible=function(e){var t=e.x,i=e.y,n=e.width,r=e.height,o=this.getAttr("isVisible"),a=this.getAttr("data");if(!o||null===a)return!1;var l=new h.Z.Bound(t,i,n,r),s=this.getConvertBound(),c=s.x,u=s.y,d=s.width,g=s.height,p=new h.Z.Bound(c,u,d,g);return l.isOverlaped(p)},t.prototype.applyTransform=function(e){var t=this.getTransformOrigin(),i=t.x,n=void 0===i?0:i,r=t.y,o=void 0===r?0:r,a=e||this.getContext(),l=a.getTransform(),s=l.m11,c=l.m12,u=l.m21,d=l.m22;a.setTransform(s,c,u,d,n,o)},t.prototype.drawFromCache=function(e){var t=this.getTransformOrigin(),i=t.x,n=void 0===i?0:i,r=t.y,o=void 0===r?0:r;d.Z.drawImage(e,this.sceneCanvas,n,o,this.getWidth(),this.getHeight())},t.prototype.getWidth=function(){var e=this.getAttr("width");return(0,u.hj)(e)?Math.max(e,1):1},t.prototype.getHeight=function(){var e=this.getAttr("height");return(0,u.hj)(e)?Math.max(e,1):1},t.prototype.onDataChange=function(){this.isDataUpdate=!0},t.prototype.onCacheChange=function(){this.isBatchUpdate=!0},t.prototype.draw=function(e,t){e.save(),this.beforeDrawHook();var i=this.getAttr("useCache");(void 0===t?i:t)?(this.drawCacheScene(),this.drawFromCache(e)):this.drawScene(e),e.restore()},t.prototype.clone=function(e){var t=a()(this.getConfig()),i=new(0,this._constructor)(t);return e&&this._bindAsyncAttrs(e,i),i},t.prototype.preDetect=function(){return this.getAttr("isContain")&&!!this.getAttr("data")},t.prototype._bindAsyncAttrs=function(e,t){var i=this;e.forEach((function(e){i.watch(e,(function(i){var n=i.newVal;t.setAttr(e,n)}))}))},t.prototype.beforeDrawHook=function(){},t.prototype.getContextStyles=function(){return{}},t.defaultConfig=(0,r.__assign)((0,r.__assign)({},l.Z.defaultConfig),{lineCap:"butt",lineDashOffset:0,lineJoin:"miter",lineWidth:1,miterLimit:10,fillStyle:s.E.Black,strokeStyle:s.E.Black,globalAlpha:1,globalCompositeOperation:"source-over",shadowBlur:0,shadowColor:s.E.Black,shadowOffsetX:0,shadowOffsetY:0,font:"10px sans-serif",textAlign:"left",textBaseline:"top",direction:"ltr",stroke:!1,fill:!1,useCache:!1,isVisible:!0,isHover:!1,isContain:!0,data:null}),t}(l.Z)},51194:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(5163),r=i(18149),o=i.n(r),a=i(32803),l=i(8042),s=i(46772),c=i(80427),u=i(57207),d=i(78734);const h=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,n.__assign)((0,n.__assign)({},a.Z.defaultConfig),{content:"",contents:[],fontSize:10,fontFamily:"sans-serif",fontStyle:"",fontVariant:"",lineHeight:1,letterSpacing:0,textWidth:0,padding:0,background:l.E.White,isCustomized:!1,useCache:!0}),i.setAttrs(t),i.watch(["content","fillStyle","background","width","fontSize","letterSpacing","fontFamily","fontStyle","fontVariant","useCache"],i.onCacheChange.bind(i)),i}return(0,n.__extends)(t,e),t.prototype.onCacheChange=function(){this.isBatchUpdate=!0,this.isDataUpdate=!0,this.getAttr("isCustomized")?this._typesetText():this._setTextData()},t.prototype.onDataChange=function(){},t.prototype.setText=function(e){var t=(0,s.HD)(e)||Array.isArray(e)?e:null==e?"":""+e;return this.setAttr("content",t),this},t.prototype.getWidth=function(){var e=this.getConfig(),t=e.width,i=e.textWidth,n=e.padding;return t===a.$.AUTO||void 0===t?i+2*n:t+2*n},t.prototype.getHeight=function(){var e=this.getConfig(),t=e.fontSize,i=e.contents,n=e.lineHeight,r=e.padding;return t*i.length*n+2*r},t.prototype.getTransformOrigin=function(){var e=this.getConfig(),t=e.data,i=e.textAlign,n=e.textBaseline,r=t.x,o=t.y,a=this.getWidth(),l=this.getHeight();return"center"===i?r-=.5*a:"right"===i&&(r-=a),"middle"===n?o-=.5*l:"bottom"===n&&(o-=l),{x:r,y:o}},t.prototype.getContextStyles=function(){var e=this.getConfig(),t=e.fillStyle,i=e.textAlign,n=e.textBaseline;return{font:this._getTextFont(),fillStyle:t,textAlign:i,textBaseline:n}},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.contents,i=e.fillStyle,r=e.padding,a=e.textWidth,l=e.fill,s=e.background;if(0!==t.length){var d=this.getContext();c.Z.clearRect(d);var h=this.overrideSize({width:this.getWidth(),height:this.getHeight()}),g={font:this._getTextFont(),fillStyle:i},p=!o()(g,this.preContextStyles);if(this.isDataUpdate&&(this.preContextStyles=g),h||p||this.isDataUpdate){l&&c.Z.drawBackground(d,s),(0,u.ui)(d,(0,n.__assign)((0,n.__assign)({},g),{textAlign:"left",textBaseline:"top"}));for(var f=.5*(this.getWidth()-a),v=0,m=t.length;v<m;++v){var y=t[v].y;c.Z.drawText(d,t[v].text,f,y+r)}}this.isBatchUpdate=!1}}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.data,n=t.contents,r=t.fill,o=t.background;r&&c.Z.drawBackground(e,o),(0,u.ui)(e,this.getContextStyles());for(var a=0,l=n.length;a<l;++a){var s=i.y+n[a].y;c.Z.drawText(e,n[a].text,i.x,s)}},t.prototype.isHover=function(e){if(!this.preDetect())return!1;var t=this.getTransformOrigin(),i=t.x,n=t.y,r=this.getHeight();return new d.Z.Bound(i,n,this.getWidth(),r).contain([e.x,e.y])},t.prototype._addLineText=function(e){this.getAttr("contents").push(e)},t.prototype._getTextWidth=function(e){var t=this.getAttr("letterSpacing"),i=Math.max(e.length-1,0);return c.Z.measureTextWidth(e)+t*i},t.prototype._getTextFont=function(){var e=this.getConfig();return e.fontStyle+" "+e.fontVariant+" "+e.fontSize+"px "+e.fontFamily},t.prototype._setTextData=function(){var e=this.getConfig(),t=e.content,i=e.contents,n=e.fontSize,r=e.lineHeight,o=e.width;if(!Array.isArray(t)){i.length=0;var a=t.split("\n"),l=r*n,d=0,h=0,g=(0,s.hj)(o)?o:void 0,p=c.Z.getContext();p.save(),(0,u.ui)(p,{font:this._getTextFont()});for(var f=0,v=a.length;f<v;f++){var m=a[f],y=this._getTextWidth(m);if(g&&y>g)for(;m;){for(var x=0,b=m.length,C="",_=0;x<b;){var w=x+b>>>1,S=m.slice(0,w+1),L=this._getTextWidth(S);L<=g?(x=w+1,C=S,_=L):b=w}if(C&&(this._addLineText({text:C,width:_,y:d}),h=Math.max(h,_),d+=l,(m=m.slice(x))&&(_=this._getTextWidth(m))<=g)){this._addLineText({text:m,width:_,y:d}),h=Math.max(h,_),d+=l;break}}else this._addLineText({text:m,width:y,y:d}),h=Math.max(h,y)}p.restore(),this.setAttr("textWidth",h)}},t.prototype._typesetText=function(){var e=this.getConfig(),t=e.content,i=e.contents,n=e.fontSize,r=e.lineHeight;if(Array.isArray(t)){i.length=0;var o=r*n,a=0,l=0,s=c.Z.getContext();s.save(),(0,u.ui)(s,{font:this._getTextFont()});for(var d=0;d<t.length;d++){var h=t[d],g=this._getTextWidth(h);this._addLineText({text:h,width:g,y:l}),l+=o,a=Math.max(a,g)}s.restore(),this.setAttr("textWidth",a)}},t}(a.Z)},18991:(e,t,i)=>{i.d(t,{O:()=>l});var n=i(5163),r=i(2784),o=i(18149),a=i.n(o);function l(e){var t=(0,n.__read)((0,r.useState)(e),2),i=t[0],o=t[1],l=(0,r.useRef)(e);return[i,{updateValue:(0,r.useCallback)((function(e){var t=(0,n.__assign)((0,n.__assign)({},l.current),e);a()(t,l.current)||(l.current=t,o(t))}),[]),toggleValue:(0,r.useCallback)((function(e){var t=(0,n.__assign)({},l.current);t[e]=!t[e],l.current=t,o(t)}),[]),getValue:(0,r.useCallback)((function(e){return l.current[e]}),[])}]}},59061:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163);Math.PI,Math.PI;var r=i(96639),o=i(82317);const a=function(){function e(){}return e.isZero=function(e,t){return void 0===t&&(t=1e-5),Math.abs(e)<=Math.abs(t)},e.isSamePoint=function(e,t){var i=Array.isArray(e)?e:[e.x,e.y],n=Array.isArray(t)?t:[t.x,t.y];return this.isZero(i[0]-n[0])&&this.isZero(i[1]-n[1])},e.getSquareDistance=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},e.getDotMultiply=function(e,t){return e.x*t.x+e.y*t.y},e.getCrossMultiply=function(e,t){return e.x*t.y-e.y*t.x},e.degreeToRadius=function(e){return Math.PI*e/180},e.transformPointToArray=function(e){return[e.x,e.y]},e.transformPointToXY=function(e){return Array.isArray(e)?{x:e[0],y:e[1]}:e},e.transformPointsToArray=function(e){var t=this;return e.map((function(e){return t.transformPointToArray(e)}))},e.transformPointsToXY=function(e){var t=this;return e.map((function(e){return t.transformPointToXY(e)}))},e.getBoundOfPoints=function(e){var t=e.map((function(e){return e[0]})),i=e.map((function(e){return e[1]})),r=Math.min.apply(Math,(0,n.__spreadArray)([],(0,n.__read)(t))),a=Math.max.apply(Math,(0,n.__spreadArray)([],(0,n.__read)(t))),l=Math.min.apply(Math,(0,n.__spreadArray)([],(0,n.__read)(i))),s=Math.max.apply(Math,(0,n.__spreadArray)([],(0,n.__read)(i)));return new o.Z(r,l,Math.abs(a-r),Math.abs(s-l))},e.getDirectionVec=function(e,t){return new r.Z(t[0]-e[0],t[1]-e[1])},e.isLeftOfLine=function(e,t,i){var o,a=(0,n.__read)([new r.Z(t[0],t[1]),new r.Z(i[0],i[1])],2),l=a[0],s=a[1];l.y>s.y&&(l=(o=(0,n.__read)([s,l],2))[0],s=o[1]);var c=new r.Z(s.x-l.x,s.y-l.y),u=new r.Z(e[0]-l.x,e[1]-l.y);return this.getCrossMultiply(c,u)>0},e.isBothSide=function(e,t,i,n){return void 0===n&&(n=0),this.getCrossMultiply(e,t)*this.getCrossMultiply(e,i)<=n},e}()},82317:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(59061);const r=function(){function e(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.x=e,this.y=t,this.width=i,this.height=n}return e.isOverlaped=function(e,t){return e.isOverlaped(t)},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.getBound=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.getCenter=function(){return[this.x+this.width/2,this.y+this.height/2]},e.prototype.getNorthEast=function(){return[this.x+this.width,this.y+this.height]},e.prototype.getSouthWest=function(){return[this.x,this.y]},e.prototype.getVetexs=function(){return[[this.x,this.y],[this.x,this.y+this.height],[this.x+this.width,this.y+this.height],[this.x+this.width,this.y]]},e.prototype.isOverlaped=function(e){var t=this.getCenter(),i=e.getCenter();return Math.abs(i[0]-t[0])<=(this.width+e.width)/2&&Math.abs(i[1]-t[1])<=(this.height+e.height)/2},e.prototype.contain=function(t){if(t instanceof e){for(var i=t.getVetexs(),n=0;n<i.length;n++)if(!this.contain(i[n]))return!1;return!0}var r=this.x+this.width,o=this.y+this.height;return(t[0]-this.x)*(t[0]-r)<=0&&(t[1]-this.y)*(t[1]-o)<=0},e.prototype.union=function(e){var t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),n=Math.max(this.x+this.width,e.x+e.width),r=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.y=i,this.width=n-t,this.height=r-i,this},e.prototype.expand=function(e,t){return this.width+=2*e,this.x-=e,void 0!==t?(this.y-=t,this.height+=2*t):(this.y-=e,this.height+=2*e),this},e.prototype.isIntersectOfSegment=function(e,t){if(!n.Z.getBoundOfPoints([e,t]).isOverlaped(this))return!1;if(this.contain(e)||this.contain(t))return!0;for(var i=n.Z.getDirectionVec(e,t),r=this.getVetexs(),o=1;o<r.length;o++){var a=n.Z.getDirectionVec(e,r[o-1]),l=n.Z.getDirectionVec(e,r[o]);if(n.Z.isBothSide(i,a,l))return!0}return!1},e}()},78734:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(96639),r=i(82317),o=i(59061),a=i(23716);const l=function(){function e(e,t){this.v0=new n.Z(e.x,e.y),this.v1=new n.Z(t.x,t.y)}return e.getPedalPointOfLine=function(e,t,i){var r=new n.Z(e.x-t.x,e.y-t.y),a=new n.Z(i.x-t.x,i.y-t.y),l=o.Z.getDotMultiply(r,a)/a.getModelLength();return new n.Z(t.x,t.y).add(a.normalize().scale(l))},e.getNearestPointToSegment=function(e,t,i){var n=this.getPedalPointOfLine(e,t,i);return this.isPointAtSegment(n,t,i)?n.toXY():o.Z.getSquareDistance(e,t)<o.Z.getSquareDistance(e,i)?t:i},e.getDistanceToLine=function(e,t,i){var r=new n.Z(e.x-t.x,e.y-t.y),a=new n.Z(i.x-t.x,i.y-t.y),l=o.Z.getCrossMultiply(r,a);return Math.abs(l/a.getModelLength())},e.getIntersectWidthBound=function(e,t,i){for(var n=i.getVetexs(),r=null,a=0,l=n.length;a<l;a++){var s={x:n[a][0],y:n[a][1]},c={x:n[(a+1)%l][0],y:n[(a+1)%l][1]},u=this.getIntersectOfSegmentPt(e,t,s,c);if(u&&(r||(r=u),r&&!o.Z.isSamePoint(r,u)))return[r,u]}return[]},e.isPointAtLine=function(e,t,i,r){var a=new n.Z(i.x-t.x,i.y-t.y),l=new n.Z(e.x-t.x,e.y-t.y),s=o.Z.getCrossMultiply(a,l)/a.getModelLength();return o.Z.isZero(s,r)},e.isPointAtSegment=function(e,t,i,n){return!!this.isPointAtLine(e,t,i,n)&&(this.isHorizontalLine(t,i)?(e.x-t.x)*(e.x-i.x)<=0:(this.isVerticalLine(t,i)||(e.x-t.x)*(e.x-i.x)<=0)&&(e.y-t.y)*(e.y-i.y)<=0)},e.isHorizontalLine=function(e,t){return o.Z.isZero(e.y-t.y)},e.isVerticalLine=function(e,t){return o.Z.isZero(e.x-t.x)},e.isParalled=function(e,t,i,r,a){var l=new n.Z(t.x-e.x,t.y-e.y),s=new n.Z(r.x-i.x,r.y-i.y),c=o.Z.getCrossMultiply(l,s);return o.Z.isZero(c,a)},e.isCollinear=function(e,t,i,r,a){var l=new n.Z(t.x-e.x,t.y-e.y),s=new n.Z(r.x-i.x,r.y-i.y),c=new n.Z(e.x-i.x,e.y-i.y),u=o.Z.getCrossMultiply(l,s),d=o.Z.getCrossMultiply(l,c);return o.Z.isZero(u,a)&&o.Z.isZero(d,a)},e.isIntersect=function(e,t,i,n,r){return!this.isParalled(e,t,i,n,r)},e.getIntersectPt=function(e,t,i,r){if(!this.isParalled(e,t,i,r)){var a,l=new n.Z(t.x-e.x,t.y-e.y),s=new n.Z(r.x-i.x,r.y-i.y),c=new n.Z(i.x-e.x,i.y-e.y),u=new n.Z(r.x-e.x,r.y-e.y),d=Math.abs(o.Z.getCrossMultiply(l,c)),h=Math.abs(o.Z.getCrossMultiply(l,u));return a=o.Z.isBothSide(l,c,u)?d/(d+h):d/(d-h),new n.Z(i.x,i.y).clone().add(s.clone().scale(a)).toXY()}},e.getIntersectOfSegmentPt=function(e,t,i,n){var r=this.getIntersectPt(e,t,i,n);if(r)return this.isPointAtSegment(r,i,n)?r:void 0},e.isIntersectOfSegment=function(e,t,i,r,a){var l=new n.Z(t.x-e.x,t.y-e.y),s=new n.Z(r.x-i.x,r.y-i.y),c=new n.Z(i.x-e.x,i.y-e.y),u=new n.Z(r.x-e.x,r.y-e.y),d=new n.Z(e.x-i.x,e.y-i.y),h=new n.Z(t.x-i.x,t.y-i.y);return o.Z.isBothSide(l,c,u,a)&&o.Z.isBothSide(s,d,h,a)},e.prototype.getDirVector=function(){var e=this.v1.x-this.v0.x,t=this.v1.y-this.v0.y;return new n.Z(e,t)},e.prototype.getDirection=function(){return this.getDirVector().normalize()},e.prototype.getLineLength=function(){return this.getDirVector().getModelLength()},e.prototype.getBound=function(){var e=Math.min(this.v0.x,this.v1.x),t=Math.min(this.v0.y,this.v1.y),i=Math.abs(this.v1.x-this.v0.x),n=Math.abs(this.v1.y-this.v0.y);return new r.Z(e,t,i,n)},e.prototype.isPointAtLine=function(e,t){var i=this.getDirVector(),r=new n.Z(e.x-this.v0.x,e.y-this.v1.y),a=o.Z.getCrossMultiply(i,r);return o.Z.isZero(a,t)},e.prototype.isParalled=function(e,t){var i=this.getDirection(),n=e.getDirection(),r=o.Z.getCrossMultiply(i,n);return o.Z.isZero(r,t)},e.prototype.isCollinear=function(e,t){var i=e.getDirection(),r=new n.Z(e.v0.x-this.v0.x,e.v0.y-this.v0.y),a=o.Z.getCrossMultiply(i,r);return this.isParalled(e,t)&&o.Z.isZero(a,t)},e.prototype.isIntersect=function(e,t){return!this.isParalled(e,t)},e.prototype.getIntersectPt=function(e){if(this.isParalled(e))return this.isCollinear(e)?void a.warn("These lines is collinear"):void a.warn("These lines is paralled");var t,i=this.getDirVector(),r=e.getDirVector(),l=new n.Z(e.v0.x-this.v0.x,e.v0.y-this.v0.y),s=new n.Z(e.v1.x-this.v0.x,e.v1.y-this.v0.y),c=Math.abs(o.Z.getCrossMultiply(i,l)),u=Math.abs(o.Z.getCrossMultiply(i,s));return t=o.Z.isBothSide(i,l,s)?c/(c+u):c/(c-u),e.v0.clone().add(r.clone().scale(t))},e.prototype.isIntersectOfSegment=function(e){var t=this.getDirVector(),i=e.getDirVector(),r=new n.Z(e.v0.x-this.v0.x,e.v0.y-this.v0.y),a=new n.Z(e.v1.x-this.v0.x,e.v1.y-this.v0.y),l=new n.Z(this.v0.x-e.v0.x,this.v0.y-e.v0.y),s=new n.Z(this.v1.x-e.v0.x,this.v1.y-e.v0.y);return o.Z.isBothSide(t,r,a)&&o.Z.isBothSide(i,l,s)},e.prototype.isIntersectOfBound=function(e){return e.isIntersectOfSegment(o.Z.transformPointToArray(this.v0),o.Z.transformPointToArray(this.v1))},e}();var s=i(46772);const c=function(){function e(e){this.coordinates=e,this.coordinates=e}return e.prototype.getBound=function(){for(var e=Number.MAX_VALUE,t=Number.MAX_VALUE,i=-Number.MAX_VALUE,n=-Number.MAX_VALUE,o=this.coordinates.slice(0);o.length>0;){var a=o.pop();if(void 0===a)break;Array.isArray(a)?o=o.concat(a):(e=Math.min(a.x,e),i=Math.max(a.x,i),t=Math.min(a.y,t),n=Math.max(a.y,n))}return new r.Z(e,t,i-e,n-t)},e.prototype.getNearestPoint=function(e){for(var t=e,i=Number.MAX_SAFE_INTEGER,n=this.coordinates.slice(0);n.length>0;){var r=n.pop();if(Array.isArray(r))if((0,s.Kn)(r[0]))for(var o=0,a=r.length;o<a-1;o++){var l=this.getDisAndPointAtLine(e,r[o],r[o+1]),c=l.pos;i>(u=l.dis)&&(i=u,t=c)}else n=n.concat(r);else if((0,s.Kn)(r)&&n[n.length-1]){var u,d=this.getDisAndPointAtLine(e,r,n[n.length-1]);c=d.pos,i>(u=d.dis)&&(i=u,t=c)}}return{point:t,dis:i}},e.prototype.getDisAndPointAtLine=function(e,t,i){var n=l.getNearestPointToSegment(e,t,i);return{pos:n,dis:o.Z.getSquareDistance(e,n)}},e}(),u={Vector2:n.Z,Line:l,Bound:r.Z,Polyline:c,Algorith:o.Z}},96639:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(46772),o=i(59061);const a=function(){function e(e,t){var i;this.x=0,this.y=0,"number"==typeof e&&"number"==typeof t?(this.x=e,this.y=t):Array.isArray(e)?(i=(0,n.__read)(e,2),this.x=i[0],this.y=i[1]):(0,r.Kn)(e)&&(this.x=e.x,this.y=e.y)}return e.lerp=function(t,i,n){var r=new e(i.x-t.x,i.y-t.y);return t.add(r.scale(n))},e.prototype.add=function(e){return this.x+=Number(e.x),this.y+=Number(e.y),this},e.prototype.substract=function(e){return this.x-=Number(e.x),this.y-=Number(e.y),this},e.prototype.normalize=function(){var t=this.getModelLength();return 0===t?new e(0,0):new e(this.x/t,this.y/t)},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.rotate=function(e){var t=o.Z.degreeToRadius(e),i=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=i,this.y=n,this},e.prototype.scale=function(e,t){return this.x*=e,this.y*=t||e,this},e.prototype.getSquareLength=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},e.prototype.getModelLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.toArray=function(){return[this.x,this.y]},e.prototype.toXY=function(){return{x:this.x,y:this.y}},e}()},95260:(e,t,i)=>{i.d(t,{AX:()=>p,HD:()=>o,Jj:()=>w,K0:()=>C,L7:()=>g,Li:()=>l,Ri:()=>u,Sz:()=>_,UX:()=>y,Wi:()=>a,X8:()=>h,_Y:()=>d,dt:()=>x,kn:()=>v,oO:()=>b});var n,r,o,a,l,s=i(5163),c=i(8042),u=((n={})[c.QX.Month]=2592e6,n[c.QX.Day]=864e5,n[c.QX.Hour]=36e5,n[c.QX.Minute]=6e4,n[c.QX.Second]=1e3,n),d=1e-5,h=["click","dblclick","mousedown","mousemove","mouseup","mouseout","wheel","gesturestart","gesturechange","gestureend","contextmenu"],g=[{type:c.QX.Month,number:36},{type:c.QX.Month,number:24},{type:c.QX.Month,number:12},{type:c.QX.Month,number:6},{type:c.QX.Month,number:3},{type:c.QX.Month,number:1},{type:c.QX.Day,number:7},{type:c.QX.Day,number:3},{type:c.QX.Day,number:1},{type:c.QX.Hour,number:12},{type:c.QX.Hour,number:6},{type:c.QX.Hour,number:4},{type:c.QX.Hour,number:2},{type:c.QX.Hour,number:1},{type:c.QX.Minute,number:30},{type:c.QX.Minute,number:15},{type:c.QX.Minute,number:5},{type:c.QX.Minute,number:3},{type:c.QX.Minute,number:1},{type:c.QX.Second,number:30}],p=new Set(["strokeStyle","fillStyle","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","globalCompositeOperation","font","textAlign","textBaseline","direction","lineDashOffset"]),f={"line.color1":c.E.LineColor1,"line.color2":c.E.LineColor2,"line.color3":c.E.LineColor3,"line.color4":c.E.LineColor4,"line.color5":c.E.LineColor5,"line.color6":c.E.LineColor6,"area.fillColor1":c.E.AreaFillColor1,"area.fillColor2":c.E.AreaFillColor2,defaultColor:c.E.CandleBlue,"cross.upLabelBorderColor":c.E.Green500,"cross.upLabelBgColor":c.E.Green600,"cross.downLabelBgColor":c.E.Red600,"cross.downLabelBorderColor":c.E.Red500,"countdown.upTextColor":c.E.Gray600,"countdown.upBgColor":c.E.CandleGreen,"countdown.upBorderColor":c.E.CandleGreen,"countdown.downTextColor":c.E.Gray600,"countdown.downBgColor":c.E.CandleRed,"countdown.downBorderColor":c.E.CandleRed,"vertGridLine.color":c.E.Gray10,"horzGridLine.color":c.E.Gray10,"LSratio.outline":"","LSratio.area":"","oi.bar":"","BS.buy":"","BS.sell":"","basis.area":""},v=(0,s.__assign)((0,s.__assign)({},f),{background:c.E.White,"candle.upBarColor":c.E.CandleGreen,"candle.downBarColor":c.E.CandleRed,"candle.lineColor":"#5a9ad8","frame.borderLineColor":c.E.Gray50,"text.defaultColor":c.E.Gray600,"axis.tickLineColor":c.E.Gray300,"axis.tickTextColor":c.E.Gray300,"cross.labelTextColor":c.E.White,"cross.borderLineColor":c.E.Gray600,"grid.borderLineColor":c.E.Gray10,"volume.upBarColor":c.E.CandleGreen,"volume.downBarColor":c.E.CandleRed,"volume.maLineColor":c.E.LineColor1,"volume.upTextColor":c.E.Green500,"volume.downTextColor":c.E.Red500,"boll.fillColor":c.E.AreaFillColor1,"cross.defaultLabelTextColor":c.E.Gray600,"cross.defaultLabelBgColor":c.E.Gray10,"cross.defaultLabelBorderColor":c.E.Gray50,"horzGridLine.color":c.E.Gray10,"vertGridLine.color":c.E.Gray10}),m=(0,s.__assign)((0,s.__assign)({},v),{background:c.E.Gray900,"candle.lineColor":c.E.White,"text.defaultColor":c.E.Gray200,"frame.borderLineColor":c.E.Gray700,"axis.tickLineColor":c.E.Gray500,"axis.tickTextColor":c.E.Gray500,"cross.borderLineColor":c.E.Gray200,"grid.borderLineColor":c.E.Gray800,"volume.upBarColor":c.E.Green700,"volume.downBarColor":c.E.Red700,"boll.fillColor":c.E.AreaFillColor2,"cross.defaultLabelTextColor":c.E.Gray0,"cross.defaultLabelBgColor":c.E.Gray700,"cross.defaultLabelBorderColor":c.E.Gray600,"horzGridLine.color":c.E.Gray800,"vertGridLine.color":c.E.Gray800}),y=((r={})[c.hY.LIGHT]=v,r[c.hY.DARK]=m,r),x=function(e){return(y[e.toLocaleLowerCase()]||{}).background},b=function(e,t){return(y[e.toLocaleLowerCase()]||{})[t]};!function(e){e.MOUSE="MOUSE",e.MOUSE_DOWN="MOUSE_DOWN",e.MOUSE_DOWN_MOVE="MOUSE_DOWN_MOVE",e.MOUSE_DOWN_UP="MOUSE_DOWN_UP",e.MOUSE_MOVE="MOUSE_MOVE",e.MOUSE_CLICK="MOUSE_CLICK"}(o||(o={})),function(e){e.DRAW_TREND_LINE="draw-trendline",e.DRAW_EX_TREND_LINE="draw-exTrendLine",e.DRAW_FIB_LINE="draw-fibLine",e.DRAW_INFO_LINE="draw-infoLine",e.DRAW_HORIZONTAL_LINE="draw-horizontalLine",e.DRAW_VERTICAL_LINE="draw-verticalLine",e.DRAW_PARRLLEL_LINE="draw-parallelLine",e.DRAW_RAY_LINE="draw-rayLine",e.DRAW_PRICE_LINE="draw-priceLine",e.DRAW_ARROW_LINE="draw-arrowLine",e.DRAW_UP_ARROW="draw-upArrow",e.DRAW_DOWN_ARROW="draw-downArrow",e.DRAW_LEFT_ARROW="draw-leftArrow",e.DRAW_RIGHT_ARROW="draw-rightArrow",e.DRAW_CROSS_LINE="draw-crossLine",e.DRAW_TEXT="draw-text",e.DRAW_RECTANGLE="draw-rectangle",e.DRAW_DELETE_ALL="draw-deleteAll",e.DRAW_BAR="draw-bar",e.DRAW_DAY="draw-day",e.DRAW_HOUR="draw-hour",e.DRAW_MINUTE="draw-minute",e.DRAW_DEFAULT_CURSOR="draw-defaultCursor",e.DRAW_CROSS_CURSOR="draw-crossCursor",e.DRAW_CONTINUE="draw-continue",e.DRAW_LOCK="draw-lock",e.DRAW_TOGGLE="draw-toggle-visible",e.ANNOTATION_DEFAULT="annotation-back-default",e.ANNOTATION_COLOR="annotation-color",e.ANNOTATION_BACKGROUND="annotation-background",e.ANNOTATION_LINE_WIDTH="annotation-line-width",e.ANNOTATION_LINE_STYLE="annotation-line-style",e.ANNOTATION_LOCK="annotation-lock",e.ANNOTATION_UNLOCK="annotation-unLock",e.ANNOTATION_DELETE="annotation-delete",e.ANNOTATION_FONT_SIZE="annotation-font-size",e.ANNOTATION_FONT_BOLD="annotation-font-bold",e.ANNOTATION_EDIT_TEXT="annotation-edit-text",e.ICON_FOLD="icon-fold",e.ICON_UNFOLD="icon-unfold"}(a||(a={})),function(e){e.DEFAULT="default",e.CROSSHAIR="crosshair",e.NSRESIZE="ns-resize",e.EWRESIZE="ew-resize",e.POINTER="pointer"}(l||(l={}));var C={"1m":6e4,"3m":18e4,"5m":3e5,"15m":9e5,"30m":18e5,"1h":36e5,"2h":72e5,"4h":144e5,"6h":216e5,"8h":288e5,"12h":432e5,"1d":864e5,"3d":2592e5,"1w":6048e5,"1M":2592e6},_=function(e){return C[e]||0},w={settingManager:"SETTINGMANAGER"}},8042:(e,t,i)=>{var n,r,o,a,l,s,c,u,d,h,g,p,f,v,m,y,x;i.d(t,{A:()=>s,Bf:()=>x,E:()=>c,HS:()=>y,Nm:()=>g,PH:()=>a,QX:()=>r,TD:()=>m,Us:()=>v,Vt:()=>f,Wr:()=>o,aI:()=>h,hY:()=>u,mB:()=>l,oX:()=>p,wh:()=>d}),function(e){e.Up="up",e.Down="down"}(n||(n={})),function(e){e.Year="Year",e.Month="Month",e.Week="Week",e.Day="Day",e.Hour="Hour",e.Minute="Minute",e.Second="Second"}(r||(r={})),function(e){e.Alphabetic="alphabetic",e.Top="top",e.Hanging="hanging",e.Middle="middle",e.Ideographic="ideographic",e.Bottom="bottom"}(o||(o={})),function(e){e.Start="start",e.End="end",e.Center="center",e.Left="left",e.Right="right"}(a||(a={})),function(e){e.All="All",e.Marks="Marks",e.Resize="Resize"}(l||(l={})),function(e){e.DEFAULT="",e.CANDLE="CANDLE",e.MACD="MACD",e.EMA="EMA",e.MA="MA",e.SMA="SMA",e.MOMENTUM="MOMENTUM",e.ATR="ATR",e.BOLL="BOLL",e.VOL="VOL"}(s||(s={})),function(e){e.White="#ffffff",e.Black="#000000",e.Gray="#2d2d2d",e.CandleRed="#E0294A",e.CandleGreen="#2EBD85",e.CandleBlue="#0303F7",e.LightGray="#9a9b9a",e.GrayD="#D8D8D8",e.GrayF="#F2F2F2",e.Gray8="#848E9C",e.GrayE="#EAECEF",e.GrayC="#C1C6CD",e.YellowF="#F0B90B",e.Dark4="#48515D",e.Dark2="#212833",e.Dark2A="#2A2F37",e.Dark1F="#1F2124",e.Blue3="#328DFD",e.Gray0="#FFFFFF",e.Gray5="#FAFAFA",e.Gray10="#F5F5F5",e.Gray50="#E6E8EA",e.Gray100="#CACED3",e.Gray200="#AEB4BC",e.Gray300="#929AA5",e.Gray400="#76808F",e.Gray500="#5E6673",e.Gray600="#474D57",e.Gray700="#2B2F36",e.Gray800="#1E2026",e.Gray900="#14151A",e.Gray1000="#0B0E11",e.Red5="#FEF6F7",e.Red10="#FEF1F2",e.Red50="#FDDDDE",e.Red100="#FDBAB9",e.Red200="#FC9897",e.Red300="#FC6E75",e.Red400="#F84960",e.Red500="#D9304E",e.Red600="#982A42",e.Red700="#5C1929",e.Red800="#35141D",e.Red900="#221113",e.Green5="#F0FFFA",e.Green10="#E2FDF4",e.Green50="#CBF6E8",e.Green100="#9BE8CD",e.Green200="#54E8B4",e.Green300="#2ED191",e.Green400="#02C076",e.Green500="#0F8F62",e.Green600="#1E644E",e.Green700="#143D31",e.Green800="#102821",e.Green900="#0B1915",e.LineColor1="#ff00ff",e.LineColor2="#cc0066",e.LineColor3="#00cccc",e.LineColor4="#2ED191",e.LineColor5="#bd930b",e.LineColor6="#c305c6",e.AreaFillColor1="#e5e5f2",e.AreaFillColor2="#161833"}(c||(c={})),function(e){e.LIGHT="light",e.DARK="dark"}(u||(u={})),function(e){e.BASE="BASE",e.EXT="EXT"}(d||(d={})),function(e){e.Normal="NORMAL",e.Percentage="PERCENTAGE"}(h||(h={})),function(e){e.Up="UP",e.Down="DOWN",e.Right="RIGHT",e.Left="LEFT"}(g||(g={})),function(e){e.Line="LINE",e.Bar="BAR",e.CandleBar="CANDLEBAR",e.Area="AREA",e.Point="POINT",e.CrossLine="CROSSLINE",e.Transcation="TRANSCATION",e.HollowCandleBar="HOLLOW_CANDLEBAR",e.HollowBar="HOLLOW_BAR"}(p||(p={})),function(e){e.Width="WIDTH",e.Height="HIGHT",e.All="ALL"}(f||(f={})),function(e){e.DefaultCursor="DEFAULTCURSOR",e.CrossHairCursor="CROSSHAIRCURSOR",e.TrendLine="TRENDLINE",e.ExtendTrendLine="EXTRENDLINE",e.FibonacciLine="FIBONACCILINE",e.InfoLine="INFOLINE",e.HorizontalLine="HORIZONTALLINE",e.VerticalLine="VERTICALLINE",e.CrossLine="CROSSLINE",e.StraightLine="STRAIGHTLINE",e.ParallelLine="PARALLELLINE",e.Arrow="ARROW",e.UpArrow="UPARROW",e.DownArrow="DOWNARROW",e.LeftArrow="LEFTARROW",e.RightArrow="RIGHTARROW",e.Text="TEXT",e.Rectangle="RECTANGLE",e.RayLine="RAYLINE",e.PriceLine="PRICELINE",e.ArrowLine="ARROWLINE",e.OrderLine="ORDERLINE",e.PositionLine="POSITIONLINE",e.ExecutionOrders="EXECUTION_ORDERS",e.ToolTip="TOOLTIP",e.Delete="DELETE",e.KeepDrawing="KeepDrawing",e.LockDraw="LOCKDRAW",e.ToggleVisible="TOGGLEVISIBLE"}(v||(v={})),function(e){e.SOLID="solid",e.DASHED="dashed",e.DOTTED="dotted"}(m||(m={})),function(e){e.BOLD="bold",e.NORMAL="NORMAL"}(y||(y={})),function(e){e.EDIT="EDIT",e.ADD="ADD",e.REMOVE="REMOVE"}(x||(x={}))},80427:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(57207),r="GLOBAL_CANVS";const o=function(){function e(){}return e.getBufferCanvas=function(t){return e._globalCache.get(t)},e.setBufferCanvas=function(t,i){e._globalCache.set(t,i)},e.drawLine=function(e,t,i,n,r){e.moveTo(t,i),e.lineTo(n,r)},e.drawLines=function(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=n.x,o=n.y;0===i?e.moveTo(r,o):e.lineTo(r,o)}},e.drawPoints=function(e,t,i){if(i){var n=i.width,r=i.height,o=.5*n,a=.5*r;t.forEach((function(t){var l=t.x,s=t.y;e.drawImage(i,l-o,s-a,n,r)}))}else t.forEach((function(t){e.strokeRect(t.x-1,t.y-1,2,2)}))},e.drawCrossLines=function(e,t){var i=this;t.forEach((function(t){var n=t.x,r=t.y;i.drawLine(e,n-2,r,n+2,r),i.drawLine(e,n,r-2,n,r+2)}))},e.drawBackground=function(e,t,i){void 0===t&&(t="#FFFFFF"),i||(i={x:0,y:0,width:e.canvas.width,height:e.canvas.height}),e.fillStyle=t,e.fillRect(i.x,i.y,i.width,i.height)},e.clearRect=function(e,t){var i;e&&(t||(t={x:0,y:0,width:e.canvas.width,height:e.canvas.height}),null===(i=null==e?void 0:e.clearRect)||void 0===i||i.call(e,t.x,t.y,t.width,t.height))},e.drawText=function(e,t,i,n,r){e.fillText(t,i,n,r)},e.strokeRect=function(e,t,i,n,r){e.strokeRect(t,i,n,r)},e.fillRect=function(e,t,i,n,r){e.fillRect(t,i,n,r)},e.drawCircle=function(e,t,i,n){e.arc(t,i,n,0,2*Math.PI)},e.fillPath2D=function(e,t){e.fill(t)},e.strokePath2D=function(e,t){e.stroke(t)},e.drawImage=function(e,t,i,n,r,o){(null==t?void 0:t.width)<1||(null==t?void 0:t.height)<1||(r&&o?e.drawImage(t,i,n,r,o):e.drawImage(t,i,n))},e.getCanvas=function(){var e=this.getBufferCanvas(r);return e||(e=(0,n.az)("canvas",{}),this.setBufferCanvas(r,e)),e},e.getContext=function(){var e=this.getCanvas();return this._context||(this._context=e.getContext("2d")),this._context},e.measureTextWidth=function(e){var t=this.getContext();if(!t)return 0;var i=t.measureText(e);return 5*Math.floor(i.width/5)+i.width%5},e._globalCache=new Map,e}()},57207:(e,t,i)=>{i.d(t,{AS:()=>v,BG:()=>K,BM:()=>D,CN:()=>x,Ds:()=>I,FH:()=>_,Fr:()=>m,Hf:()=>y,Lo:()=>V,M8:()=>R,Nw:()=>L,O5:()=>g,P2:()=>P,P7:()=>Z,PM:()=>B,R4:()=>X,T:()=>G,U2:()=>U,Vq:()=>H,XH:()=>S,XR:()=>E,Xp:()=>b,az:()=>p,gH:()=>k,gt:()=>A,h7:()=>F,h8:()=>O,kC:()=>j,ln:()=>z,mr:()=>C,r3:()=>Y,rs:()=>N,ry:()=>W,sL:()=>w,tq:()=>M,uf:()=>q,ui:()=>f,x_:()=>T});var n=i(5163),r=i(32711),o=i.n(r),a=i(13185),l=i.n(a),s=i(34244),c=i.n(s),u=i(8042),d=i(95260),h=i(46772);function g(e,t,i){void 0===i&&(i={style:{position:"reletive",width:"100%",height:"100%"}});var n=document.createElement("canvas");n.width=e*T(),n.height=t*T(),i.className&&(n.className=i.className);var r=i.style;return r&&v(n,r),n}function p(e,t,i){var n=document.createElement(e);return v(n,t),i&&n.classList.add(i),n}function f(e,t){Object.keys(t||{}).forEach((function(i){var n=t[i];void 0!==n&&d.AX.has(i)&&(e[i]=n)}))}function v(e,t){void 0===t&&(t={}),e&&e.style&&Object.keys(t).forEach((function(i){e.style[i]=t[i]}))}function m(e,t){return void 0===t&&(t=d._Y),Math.abs(e)<t}function y(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var i=e.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/),n=i?Math.max(t,Math.max(0,(i[1]||"").length-i[2])):t;return i?e.toFixed(n):""+e}function x(e){var t=e.originEvent,i=t.offsetX,n=t.offsetY;if((void 0===i||void 0===n)&&e.target){var r=e.target.getBoundingClientRect(),o=r.left,a=void 0===o?0:o,l=r.top,s=void 0===l?0:l;return{x:e.clientX-a,y:e.clientY-s}}return{x:i,y:n}}function b(e,t){var i=document.createElement("iframe");i.style.cssText="\n    position: absolute; left: 0; top: 0; width: 100%; height: 100%;\n        border: 0; margin: 0; display: block; z-index: -999;\n  ",e.appendChild(i);var n,r=e.offsetWidth,o=e.offsetHeight,a=1;function l(){var i=e.offsetWidth,n=e.offsetHeight,l=window.devicePixelRatio;r===i&&o===n&&a===l||(t&&t({width:i,height:n},{width:r,height:o}),r=i,o=n,a=l)}void 0!==window&&(a=window.devicePixelRatio,(n=window.matchMedia("(min-resolution: "+window.devicePixelRatio+"dppx) and (max-resolution: "+window.devicePixelRatio+"dppx)")).addListener((function e(){n&&n.removeListener(e),l(),(n=window.matchMedia("(min-resolution: "+window.devicePixelRatio+"dppx) and (max-resolution: "+window.devicePixelRatio+"dppx)")).addListener(e)}))),(i.contentWindow||i).onresize=P(l,10)}function C(e,t){void 0===t&&(t="YYYY-MM-DD hh:mm:ss");var i=function(e){return(0,h.hj)(e)?e:e instanceof Date?e.getTime():(0,h.HD)(e)?e.replace(/\//g,"-"):NaN}(e);if(isNaN(i))return t;var n=new Date(i),r={"M+":n.getMonth()+1,"D+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};return/(Y+)/.test(t)&&(t=t.replace(RegExp.$1,(""+n.getUTCFullYear()).substr(4-RegExp.$1.length))),Object.keys(r).forEach((function(e){if(new RegExp("("+e+")").test(t)){var i=r[e];t=t.replace(RegExp.$1,1===RegExp.$1.length?i:("00"+i).substr((""+i).length))}})),t}function _(e,t){var i=parseFloat(""+e);return isNaN(i)||isNaN(t)?"NaN":t<=0?i.toFixed(0):e===1/0?e.toLocaleString():c()(+e).toFixed(t).toString()}function w(e,t){var i,n,r=new Date(e);return t.type===u.QX.Month?C(e,0===r.getUTCMonth()?"YYYY":"MM/DD"):0===r.getUTCHours()?C(e,((i={})[u.QX.Month]="MM/DD",i[u.QX.Day]="MM/DD",i[u.QX.Hour]="MM/DD",i[u.QX.Minute]="hh:mm",i[u.QX.Second]="hh:mm:ss",i)[t.type]):C(e,((n={})[u.QX.Day]="MM/DD",n[u.QX.Hour]="hh:00",n[u.QX.Minute]="hh:mm",n[u.QX.Second]="hh:mm:ss",n)[t.type])}function S(e,t){var i="YYYY/MM/DD hh:mm:ss";return t===u.QX.Month?i="YYYY/MM/01 08:00":t===u.QX.Day?i="YYYY/MM/DD hh:00":t!==u.QX.Minute&&t!==u.QX.Hour||(i="YYYY/MM/DD hh:mm"),C(e,i)}function L(e,t){if(t-e<=7*d.Ri.Day)return 0;var i=new Date(e),r=(0,n.__read)([i.getUTCFullYear(),i.getUTCMonth()],2),o=r[0],a=r[1],l=new Date(t),s=(0,n.__read)([l.getUTCFullYear(),l.getUTCMonth()],2);return 12*(s[0]-o)+s[1]-a+1}function E(e,t){if(void 0===t&&(t=2),Math.abs(e)<1e-9&&Math.abs(e)>0)return""+e.toExponential(2);if(Math.abs(e)<1e3)return k(e,t);var i,n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];for(i=n.length-1;i>0&&!(Math.abs(e)>=n[i].value);i--);return(e/n[i].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[i].symbol}function k(e,t,i){if(void 0===i&&(i=!1),isNaN(e))return"NaN";if(t<=0)return""+Math.floor(e);if(i){var r=e.toLocaleString("en-US",{maximumFractionDigits:t+2,minimumFractionDigits:t+2,useGrouping:!1}),o=(0,n.__read)(r.split("."),2),a=o[0],l=o[1];return a+"."+(void 0===l?"":l).slice(0,t).padEnd(t,"0")}return e===1/0?e.toLocaleString():new(c())(+e).toFixed(t)}function V(e,t){if(void 0===t&&(t=0),isNaN(e))return"NaN";if(e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)return e.toLocaleString();var i=(100*e).toLocaleString("en-US",{maximumFractionDigits:t+1,minimumFractionDigits:t+1,useGrouping:!1}),r=(0,n.__read)(i.split("."),2),o=r[0],a=r[1];return t>0?o+"."+a.slice(0,t)+"%":o+"%"}function A(e,t){return void 0===t&&(t=2),(0,h.hj)(e)?(100*e).toFixed(t)+"%":"0.00%"}function T(){return"undefined"!=typeof window&&window.devicePixelRatio||1}function M(){if("undefined"!=typeof navigator){var e=navigator.userAgent;return/Android|webOS|iPhone|iPod|BlackBerry/i.test(e)}return!1}function D(e,t,i){var n,r=[20,30,40,50,60,100],o=(e-t)/i,a=Math.floor(Math.log10(o)-1),l=o/(a=Math.pow(10,a)),s=0;for(s=0;s<r.length;s++)if(r[s]>=l){n=r[s]*a;break}return{max:Math.ceil(e/n)*n,min:Math.floor(t/n)*n,step:n}}function I(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var r=null;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];r&&clearTimeout(r),i&&null===r?e.apply(null,(0,n.__spreadArray)([],(0,n.__read)(o))):r=setTimeout((function(){e.apply(null,(0,n.__spreadArray)([],(0,n.__read)(o)))}),t)}}function P(e,t){var i;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=+new Date;(!i||a-i>t)&&(e.call.apply(e,(0,n.__spreadArray)([null],(0,n.__read)(r))),i=a)}}function B(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!t.length)return e;var r=t.shift();return void 0===r?e:((0,h.Kn)(e)&&(0,h.Kn)(r)&&Object.keys(r).forEach((function(t){(0,h.Kn)(r[t])?(e[t]||(e[t]={}),B(e[t],r[t])):e[t]=r[t]})),B.apply(void 0,(0,n.__spreadArray)([e],(0,n.__read)(t))))}function W(e,t){for(var i,n=0,r=e.length;n<r;){var o=t(e[i=Math.floor((r+n)/2)]);if(!(0,h.hj)(o))throw new Error("binarySearch result is not number: "+o);if(o<0&&(r=i),0===o)return i;o>0&&(n=i+1)}return Math.floor((r+n)/2)}function R(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function H(e,t){void 0===e&&(e=""),void 0===t&&(t=1);var i=t;if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){var n="",r="",o="";return 7===e.length?(n=""+parseInt(e.slice(1,3),16),r=""+parseInt(e.slice(3,5),16),o=""+parseInt(e.slice(5,7),16)):4===e.length&&(n=""+parseInt(e.slice(1,2),16),r=""+parseInt(e.slice(2,3),16),o=""+parseInt(e.slice(3,4),16)),"rgba("+n+","+r+","+o+","+i+")"}return e.startsWith("rgb(")?"rgba"+e.slice(3,-1)+","+i+")":e}function Z(e){if(e.startsWith("#"))return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1};var t=e.match(/\(([^)]*)\)/);if(t){var i=t[1],r=(0,n.__read)(i.split(","),4),o=r[0],a=r[1],l=r[2],s=r[3];return{r:parseInt(o,10),g:parseInt(a,10),b:parseInt(l,10),a:void 0===s?1:parseFloat(s)}}return{r:255,g:255,b:255,a:0}}function O(e,t,i){var n=0,r=Math.max(e,t,i),o=r-Math.min(e,t,i);return n=0===o?0:e===r?(t-i)/o%6:t===r?(i-e)/o+2:(e-t)/o+4,(n=Math.floor(60*n))<0&&(n+=360),{h:n,s:Math.round(100*(0===r?0:o/r)),v:Math.round(r/255*100)}}function N(e,t,i){var n=[],r=(i/=100)*(t/=100),o=e/60,a=r*(1-Math.abs(o%2-1)),l=i-r;switch(parseInt(""+o,10)){case 0:n=[r,a,0];break;case 1:n=[a,r,0];break;case 2:n=[0,r,a];break;case 3:n=[0,a,r];break;case 4:n=[a,0,r];break;case 5:n=[r,0,a]}if(0===n.length)throw new Error("hsv color is not valid");return{r:Math.round(255*(n[0]+l)),g:Math.round(255*(n[1]+l)),b:Math.round(255*(n[2]+l))}}function F(e,t,i,n){var r=N(e,t,i);return"rgba("+r.r+", "+r.g+", "+r.b+", "+n+")"}function K(e){var t=e.match(/\(([^)]*)\)/);if(e.startsWith("rgb")&&t){var i=t[1],r=(0,n.__read)(i.split(",").map(Number),3),o=r[0],a=r[1],l=r[2];return"#"+o.toString(16)+a.toString(16)+l.toString(16)}return"#000000"}function U(e){var t="000000"+(16777215-Number("0x"+e.replace(/#/g,""))).toString(16);return"#"+t.substring(t.length-6,t.length)}function z(e,t){for(var i=[],n=[],r=0,o=e.length;r<o;r++)t(e[r])?i.push(e[r]):n.push(e[r]);return[i,n]}function X(e,t){var i,n;return function(r){i&&clearTimeout(i),n=e(r,n),i=setTimeout((function(){t.call(null,n),n=void 0}),16)}}function G(e){var t=Object.keys(e||{});return JSON.stringify(t.sort().reduce((function(t,i){return t[i]=e[i],t}),{}))}function Y(e,t){var i=Object.keys(t||{}),n=o()(e,i);return l()(n,t)}function j(e){return e.replace(/^\S/,(function(e){return e.toUpperCase()}))}var q=function(e){var t=e.number,i=e.digits;return t.toLocaleString("en-US",{maximumFractionDigits:i,minimumFractionDigits:i,useGrouping:!1})}},46772:(e,t,i)=>{function n(e){return"[object String]"===Object.prototype.toString.call(e)}function r(e){return"number"==typeof e&&isFinite(e)}function o(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e){return e&&"[object Function]"===Object.prototype.toString.call(e)}i.d(t,{HD:()=>n,Kn:()=>o,hj:()=>r,mf:()=>a})},25522:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 11V3h8v8H3zm2-6h4v4H5V5zM3 21v-8h8v8H3zm2-6h4v4H5v-4zM13 3v8h8V3h-8zm6 2h-4v4h4V5zM13 21v-8h8v8h-8zm2-6h4v4h-4v-4z",fill:"currentColor"}))}},77828:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M5 5v14.94h14.94V5H5zm12.94 12.94H7V7h10.94v10.94z",fill:"currentColor"}),r.createElement("path",{d:"M19.94 5H5v14.94h14.94V5zM7 17.94V7h10.94v10.94H7z",fill:"currentColor"}))}},71218:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M9.708 18.123a1 1 0 01-1.415 0l-4.589-4.598a.997.997 0 011.411-1.41L9 16l9.473-9.473a1.003 1.003 0 011.42 1.42L9.707 18.123z"}))}},16505:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M8 17.586A1 1 0 109.414 19L16 12.414A1 1 0 0016 11L9.414 4.414A1 1 0 108 5.828l5.879 5.879L8 17.586z"}))}},10337:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M14.5 10.29a1 1 0 011 1v.353a1 1 0 01-.273.686l-2.5 2.65a1 1 0 01-1.454 0l-2.5-2.65a1 1 0 01-.273-.686v-.353a1 1 0 011-1h5z"}))}},39378:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),r.createElement("path",{d:"M12 10.586l5.95-5.95a1 1 0 111.414 1.414L13.414 12l5.95 5.95a1 1 0 01-1.414 1.414L12 13.414l-5.95 5.95a1 1 0 01-1.414-1.414l5.95-5.95-5.95-5.95A1 1 0 116.05 4.636l5.95 5.95z"}))}},34274:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(2784),r=i(76699),o=function(e,t){var i=(0,r.$)(t),o=i.t,a=i.i18n,l=(0,n.useCallback)((function(t,i){void 0===i&&(i={});var n=[e,t].filter((function(e){return e})).join("-");return o(n,i).trim()||("string"==typeof i?i:i.defaultValue)}),[o,e]);return{i18n:a,t:o,getI18n:l}}},85527:(e,t,i)=>{i.d(t,{Fg:()=>c});var n=i(2784),r=i(39727),o=function(e){return e.cookies||{}},a="dark",l="light",s="shouldResetTradingView",c=function(){var e,t,i=(e=(0,n.useRef)(null),t=(0,r.I0)(),e.current=(0,r.v9)(o),{cookies:e.current,saveCookie:(0,n.useCallback)((function(i,n){var r="function"==typeof n?n(e.current[i]):n;t.cookies.save({key:i,value:r})}),[])}),c=i.cookies,u=i.saveCookie,d=(0,n.useCallback)((function(){return JSON.parse(localStorage.getItem(s)||"0")}),[]),h=(0,n.useCallback)((function(){var e=d();localStorage.setItem(s,JSON.stringify(e+1))}),[d]);return{isLight:c.theme!==a,shouldResetTradingViewKey:s,getThemeCounter:d,incThemeCounter:h,toggleTheme:(0,n.useCallback)((function(){u("theme",(function(e){return e!==l?l:a})),h()}),[h])}}},49487:(e,t,i)=>{i.r(t),i.d(t,{OpeningCountdown:()=>f,default:()=>v});var n=i(5163),r=i(2784),o=i(23438),a=i(92036),l=i(62143),s=i(48658),c=i(7845),u=function(e){var t=e.children;return r.createElement(a.Z,{sx:{justifyContent:"center",position:"relative",mr:"4px",width:"40px",height:"54px",borderRadius:"4px",overflow:"hidden"}},r.createElement(s.Z,{sx:{color:"t.primary",fontSize:"40px",position:"relative",zIndex:100}},t),r.createElement(l.Z,{sx:{position:"absolute",width:"100%",height:"26px",top:0,left:0,background:"#F0B90B",opacity:.1}}),r.createElement(l.Z,{sx:{position:"absolute",width:"100%",height:"26px",bottom:0,left:0,background:"#F0B90B",opacity:.1}}))},d=function(e){var t=e.digits;return r.createElement(r.Fragment,null,t.split("").map((function(e,t){return r.createElement(u,{key:t},e)})))},h=function(){return r.createElement(s.Z,{sx:{fontSize:"24px",color:"t.secondary",mx:2}},":")},g=36e5,p=function(e){var t,i=e.hourglassImagePath,u=e.backgroundImagePath,p=e.backgroundShinyImagePath,f=e.timeLeft,v=e.symbol,m=e.willOpenInText,y=(0,n.__read)((0,o.Z)(),2),x=y[0],b=y[1].width,C=(0,r.useMemo)((function(){return b+120<=500}),[b]),_=(t=f,[Math.floor(t/g),Math.floor(t%g/6e4),Math.floor(t%6e4/1e3)].map((function(e){return Math.min(e,999).toString().padStart(2,"0")})));return r.createElement(a.Z,{ref:x,sx:{width:"100%",height:"100%",justifyContent:"center",px:"60px",background:"url("+u+") no-repeat",backgroundSize:"auto 90%",backgroundPosition:"right top"}},r.createElement(a.Z,{sx:{maxWidth:"661px",alignItems:"center",justifyContent:"space-between",flex:1,background:"url("+p+") no-repeat",backgroundSize:"45%",backgroundPosition:"right center"}},r.createElement(l.Z,null,r.createElement(s.Z,{sx:{fontSize:32,color:"t.primary"}},v),r.createElement(s.Z,{sx:{fontSize:24,fontWeight:200,color:"t.primary"}},m),r.createElement(a.Z,{sx:{mt:5,alignItems:"center"}},_.map((function(e,t){return r.createElement(r.Fragment,{key:t},r.createElement(d,{digits:e}),t!==_.length-1&&r.createElement(h,null))})))),r.createElement(l.Z,{sx:{display:C?"none":"block"}},r.createElement(c.Z,{src:i,sx:{width:"100%",height:"100%",maxWidth:"192px",maxHegiht:"192px"}}))))},f=function(e){var t,i,o,a,l,s,c,u=(i=(t=e).openTime,o=t.onReady,a=(0,n.__rest)(t,["openTime","onReady"]),l=(0,n.__read)((0,r.useState)(i-Date.now()),2),s=l[0],c=l[1],(0,r.useEffect)((function(){var e=setInterval((function(){c(i-Date.now())}),100);return function(){return clearInterval(e)}}),[i]),(0,r.useEffect)((function(){s<=0&&o()}),[s]),(0,n.__assign)((0,n.__assign)({},a),{timeLeft:s}));return r.createElement(p,(0,n.__assign)({},u))};const v=f},50909:(e,t,i)=>{var n;i.d(t,{l:()=>n}),function(e){e[e.ExtraSmall=0]="ExtraSmall",e[e.Small=1]="Small",e[e.Small2=2]="Small2",e[e.Medium=3]="Medium"}(n||(n={}))},23749:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(5163),r=i(2784),o=i(71926),a=i(34274),l=r.lazy((function(){return i.e(1839).then(i.bind(i,51839))})),s=function(e){var t=e.isReady,i=e.children,o=(0,n.__rest)(e,["isReady","children"]);return t?i:o.openTime?r.createElement(r.Suspense,{fallback:null},r.createElement(l,(0,n.__assign)({},o))):null};const c=function(e){var t=e.symbol,i=e.symbolDisplay,l=e.hostAddress,c=e.themeName,u=e.checkTradeStatus,d=e.children,h=(0,a.Z)("trd-chart","trade-ui").getI18n,g=(0,n.__read)((0,r.useState)(!0),2),p=g[0],f=g[1],v=(0,n.__read)((0,r.useState)(Date.now()),2),m=v[0],y=v[1],x=(0,n.__read)((0,r.useState)(0),2),b=x[0],C=x[1];(0,r.useEffect)((function(){(0,n.__awaiter)(void 0,void 0,void 0,(function(){var e,i,r;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return[4,u(t)];case 1:return e=n.sent(),i=e.isReadyToTrade,r=e.openTime,f(i),y(r),[2]}}))}))}),[u,t]),(0,o.Z)((function(){var e=m-Date.now();C(Math.max(0,e)),f(e<=0)}),m-Date.now()>0?500:null);var _=(0,r.useMemo)((function(){return l+"/static/images/trade-next-ui/"+c+"-hourglass.gif"}),[l,c]),w=(0,r.useMemo)((function(){return l+"/static/images/trade-next-ui/countdown-bg-"+c+".svg"}),[l,c]),S=(0,r.useMemo)((function(){return l+"/static/images/trade-next-ui/countdown-shiny.svg"}),[l]),L=(0,r.useMemo)((function(){return h("will-be-open",{defaultValue:"will be open for trading in"})||""}),[h]);return r.createElement(s,{hourglassImagePath:_,backgroundImagePath:w,backgroundShinyImagePath:S,willOpenInText:L,timeLeft:b,isReady:p,openTime:m,symbol:i},d)}},72540:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(5163),r=i(2784),o=i(55521),a=i(23438),l=i(40010),s=i(92036),c=i(62143),u=i(10687),d=function(){return r.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3}},r.createElement(u.Z,{sx:{zIndex:100}}))},h=(0,r.forwardRef)((function(e,t){var i=e.headerSx,o=e.headerSlot,a=e.showLoading,l=e.children;return r.createElement(s.Z,{sx:{height:"100%",flexDirection:"column"},ref:t},r.createElement(c.Z,{sx:(0,n.__assign)({borderBottom:"1px solid",borderBottomColor:"newLine"},i)},o),r.createElement(c.Z,{sx:{height:"100%",position:"relative"},className:"draggableCancel"},l,a&&r.createElement(d,null)))})),g=i(86368);const p=function(e){var t=e.namespace,i=e.useMiniHeader,s=e.headerSlot,c=e.children,u=(0,g.createStore)(t),d=(0,n.__read)(u(g.getLoading),1)[0],p=(0,n.__read)(u(g.getLayoutWidth),2)[1],f=(0,o.F)().isMobile,v=(0,n.__read)((0,a.Z)(),2),m=v[0],y=v[1].width,x=(0,l.Z)(y,100);return(0,r.useEffect)((function(){return p(x)}),[x,p]),r.createElement(h,{ref:m,headerSx:{minHeight:!i&&f?"48px":"40px",paddingLeft:f||i?0:"sm",paddingRight:f?0:"sm"},showLoading:d,headerSlot:s},c)}},23793:(e,t,i)=>{i.d(t,{Zl:()=>M,vb:()=>n,ZP:()=>D});var n,r=i(5163),o=i(2784),a=i(62143),l=i(92424),s=i(50909),c=[l.DisplayIntervals.Time,l.DisplayIntervals["1m"],l.DisplayIntervals["3m"],l.DisplayIntervals["5m"],l.DisplayIntervals["15m"],l.DisplayIntervals["30m"],l.DisplayIntervals["1h"],l.DisplayIntervals["2h"],l.DisplayIntervals["4h"],l.DisplayIntervals["6h"],l.DisplayIntervals["8h"],l.DisplayIntervals["12h"],l.DisplayIntervals["1d"],l.DisplayIntervals["3d"],l.DisplayIntervals["1w"],l.DisplayIntervals["1M"]],u=o.lazy((function(){return i.e(5366).then(i.bind(i,25366))})),d=o.lazy((function(){return i.e(7164).then(i.bind(i,67164))})),h=o.lazy((function(){return i.e(3038).then(i.bind(i,93038))})),g=o.lazy((function(){return i.e(2156).then(i.bind(i,52156))})),p=o.lazy((function(){return i.e(4196).then(i.bind(i,74196))})),f=o.lazy((function(){return i.e(9467).then(i.bind(i,39467))})),v=o.lazy((function(){return i.e(8266).then(i.bind(i,78266))})),m=o.lazy((function(){return i.e(9731).then(i.bind(i,99731))})),y=o.lazy((function(){return i.e(8059).then(i.bind(i,98059))})),x=o.lazy((function(){return i.e(6125).then(i.bind(i,76125))})),b=o.lazy((function(){return i.e(8873).then(i.bind(i,58873))})),C=o.lazy((function(){return i.e(6511).then(i.bind(i,96511))})),_=o.lazy((function(){return i.e(4647).then(i.bind(i,44647))})),w=o.lazy((function(){return i.e(8793).then(i.bind(i,38793))})),S=o.lazy((function(){return i.e(2092).then(i.bind(i,32092))})),L=o.lazy((function(){return i.e(6468).then(i.bind(i,26468))})),E=o.lazy((function(){return i.e(993).then(i.bind(i,70993))})),k=o.lazy((function(){return Promise.resolve().then(i.bind(i,79301))})),V=function(e){var t=e.namespace,i=e.symbol,n=e.getSymbolDisplayName,r=e.intervalFilterType,l=e.generateToolbar,V=e.children,A=(0,o.useMemo)((function(){switch(r){case s.l.ExtraSmall:return u;case s.l.Small:return d;case s.l.Small2:return h;default:return g}}),[r]),T=(0,o.useMemo)((function(){return n(i)}),[n,i]),M=(0,o.useCallback)((function(e){return o.createElement(a.Z,{sx:{ml:"0px !important"}},o.createElement(o.Suspense,{fallback:null},o.createElement(A,{namespace:t,intervalOptions:e.intervalOptions||c})))}),[A,t]),D=(0,o.useCallback)((function(){return o.createElement(o.Suspense,{fallback:null}," ",o.createElement(p,{namespace:t})," ")}),[t]),I=(0,o.useCallback)((function(e){return o.createElement(o.Suspense,{fallback:null},o.createElement(f,{namespace:t,options:e.options,isFullscreen:e.isFullscreen,orderHistoryTooltip:e.orderHistoryTooltip}))}),[t]),P=(0,o.useCallback)((function(e){return o.createElement(o.Suspense,{fallback:null},o.createElement(v,{namespace:t,options:null==e?void 0:e.options}))}),[t]),B=(0,o.useCallback)((function(){return o.createElement(o.Suspense,{fallback:null},o.createElement(m,{namespace:t}))}),[t]),W=(0,o.useCallback)((function(){return o.createElement(o.Suspense,{fallback:null},o.createElement(y,{namespace:t}))}),[t]),R=(0,o.useCallback)((function(){return o.createElement(o.Suspense,{fallback:null},o.createElement(x,{namespace:t}))}),[t]),H=(0,o.useCallback)((function(e){return o.createElement(o.Suspense,{fallback:null},o.createElement(b,{namespace:t,showChange:e.showChange,symbolDisplayName:T}))}),[t,T]),Z=(0,o.useCallback)((function(e){return o.createElement(a.Z,{sx:{"&:not(:last-child)":{mr:"sm"}}},o.createElement(o.Suspense,{fallback:null},o.createElement(C,{namespace:t,tabKeys:e.tabKeys})))}),[t]),O=(0,o.useCallback)((function(e){return o.createElement(o.Suspense,{fallback:null},o.createElement(_,{expanded:e.expanded,onClick:e.onClick}))}),[]),N=(0,o.useCallback)((function(e){return o.createElement(o.Suspense,{fallback:null},o.createElement(w,{namespace:t,onClick:e.onClick}))}),[t]),F=(0,o.useCallback)((function(e){return o.createElement(o.Suspense,{fallback:null},o.createElement(S,{onResume:e.onResume}))}),[]),K=(0,o.useCallback)((function(e){return o.createElement(o.Suspense,{fallback:null},o.createElement(L,{onRemove:e.onRemove}))}),[]),U=(0,o.useCallback)((function(e){return o.createElement(o.Suspense,{fallback:null},o.createElement(E,{namespace:t,getSymbolDisplayName:n,onSymbolChange:e.onSymbolChange}))}),[n,t]),z=(0,o.useCallback)((function(e){return o.createElement(o.Suspense,{fallback:null},o.createElement(k,{namespace:t,trigger:e.trigger,orderMarkOptions:e.orderMarkOptions,enablePriceTypeSelection:e.enablePriceTypeSelection,orderHistoryTooltip:e.orderHistoryTooltip}))}),[t]),X=l({namespace:t,components:{intervalFilter:M,indicator:D,orderMark:I,chartStyleDropdown:P,priceDropdown:B,compareButton:W,cameraButton:R,miniSymbolStatus:H,tabs:Z,fullscreen:O,chartModeDropdown:N,resumeWindow:F,closeButton:K,symbolTabs:U,settingsDropdown:z}});return o.createElement(o.Fragment,null,V(X))},A=o.lazy((function(){return i.e(9576).then(i.bind(i,19576))})),T=o.lazy((function(){return i.e(9574).then(i.bind(i,69574))}));!function(e){e[e.Medium=0]="Medium",e[e.Small=1]="Small"}(n||(n={}));var M=function(e){var t=e.namespace,i=e.symbol,a=e.getSymbolDisplayName,l=e.generateToolbar,s=e.intervalFilterType,c=e.headerType;return o.createElement(o.Suspense,{fallback:null},o.createElement(V,{symbol:i,namespace:t,intervalFilterType:s,generateToolbar:l,getSymbolDisplayName:a},(function(e){var i=e.medium,a=e.small;return c===n.Small?o.createElement(A,{namespace:t,head:a.head}):o.createElement(T,(0,r.__assign)({},i))})))};const D=M},79301:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var n=i(5163),r=i(2784),o=i(34274),a=i(33322),l=i(27986),s=i(92036),c=i(48658),u=i(62143),d=i(74900),h=i(55742),g=i(21030),p=i(53935),f=i(35054),v=i(35208),m=i(28598),y=function(e){var t=e.checked,i=e.onClick,n=e.text,o=e.tooltip;return r.createElement(a.Z,{sx:{cursor:"pointer"},onClick:i},r.createElement(l.Z,{checked:t}),r.createElement(s.Z,{sx:{alignItems:"center","& > *":{":not(:last-child)":{mr:"xxs"}}}},r.createElement(c.Z,{sx:{color:"t.primary",fontSize:"xs"}},n),o&&r.createElement(g.ZP,{enablePortal:!0,arrow:!0,placement:"top",tip:o,sx:{display:"flex",alignItems:"center"}},r.createElement(p.Z,{size:16,color:"t.third"}))))},x=function(e){var t=e.title,i=e.children;return r.createElement(s.Z,{sx:{flexDirection:"column","& > *":{":not(:last-child)":{mb:"sm"}}}},r.createElement(c.Z,{sx:{color:"t.secondary",fontSize:"xs",fontWeight:"medium"}},t),i)},b=function(){return r.createElement(u.Z,{sx:{width:"100%",height:"1px",bg:"line",my:"sm"}})};const C=function(e){var t=e.namespace,i=e.trigger,a=e.orderMarkOptions,l=e.enablePriceTypeSelection,u=e.orderHistoryTooltip,g=e.size,p=void 0===g?12:g,C=e.iconSx,_=(0,o.Z)("","trade-ui").getI18n,w=(0,r.useMemo)((function(){return _("trd-chart-kline-settings",{defaultValue:"K-Line Settings"})||""}),[_]),S=(0,r.useMemo)((function(){return _("trd-chart-data-source-title",{defaultValue:"Select the Data Source of K-Line"})||""}),[_]),L=(0,v.u)({namespace:t,options:a,orderHistoryTooltip:u}),E=L.values,k=L.options,V=L.onClickItem,A=(0,m.w)({namespace:t}),T=A.priceType,M=A.options,D=A.onClickItem,I={title:w,children:k.map((function(e){var t=e.value,i=e.text,n=e.tooltip;return r.createElement(y,{key:t,checked:E.includes(t),onClick:function(e){e.preventDefault(),e.stopPropagation(),V(t)},text:i,tooltip:n})}))},P={title:S,children:M.map((function(e){var t=e.value,i=e.text;return r.createElement(s.Z,{key:t,onClick:function(e){e.stopPropagation(),e.preventDefault()}},r.createElement(d.ZP,{value:t,checked:T===t,onChange:function(){return D(t)},label:r.createElement(c.Z,{sx:{color:"t.primary",fontSize:"xs",cursor:"pointer"}},i)}))}))},B=l?[I,P]:[I],W=r.createElement(s.Z,{sx:{bg:"popupBg",p:"sm",borderRadius:"4px",boxShadow:"0px 7px 14px rgba(0, 0, 0, 0.08), 0px 3px 6px rgba(0, 0, 0, 0.08), inset 0px 0px 1px rgba(94, 102, 115, 0.9)",color:"white",flexDirection:"column"}},B.map((function(e,t){var i=e.title,n=e.children;return r.createElement(r.Fragment,null,r.createElement(x,{title:i},n),t!==B.length-1?r.createElement(b,null):null)})));return r.createElement(h.ZP,{enablePortal:!0,trigger:i,overlay:W},r.createElement(f.Z,{size:p,sx:(0,n.__assign)({flexShrink:0,color:"icons.close",cursor:"pointer","&:hover":{color:"t.third"}},C)}))}},35208:(e,t,i)=>{i.d(t,{u:()=>l});var n=i(5163),r=i(2784),o=i(34274),a=i(92424),l=function(e){var t=e.namespace,i=e.options,l=e.orderHistoryTooltip,s=(0,a.createStore)(t),c=(0,n.__read)(s(a.getShowLimitOrder),3)[2],u=(0,n.__read)(s(a.getShowPositionOrder),3)[2],d=(0,n.__read)(s(a.getShowExecutionOrder),3)[2],h=s(a.getOrderMarkOptions),g=(0,o.Z)("","trade-ui").getI18n,p=(0,r.useMemo)((function(){return g("trd-layout-tabOpenOrder",{defaultValue:"Open Orders"})||""}),[g]),f=(0,r.useMemo)((function(){return g("trd-layout-tabPositions",{defaultValue:"Positions"})||""}),[g]),v=(0,r.useMemo)((function(){return g("trd-layout-tabOrderHistory",{defaultValue:"Order History"})||""}),[g]),m=(0,r.useMemo)((function(){return g("trd-chart-order-history-tooltip",{defaultValue:"Display the last 500 executed orders"})||""}),[g]),y=(0,r.useMemo)((function(){return{value:a.OrderMarkOption.Open,text:p}}),[p]),x=(0,r.useMemo)((function(){return{value:a.OrderMarkOption.Position,text:f}}),[f]),b=(0,r.useMemo)((function(){return l||m}),[m,l]),C=(0,r.useMemo)((function(){return{value:a.OrderMarkOption.Execution,text:v,tooltip:b}}),[v,b]);return{values:h,options:(0,r.useMemo)((function(){return i.map((function(e){switch(e){case a.OrderMarkOption.Open:return y;case a.OrderMarkOption.Position:return x;case a.OrderMarkOption.Execution:return C;default:return{value:a.OrderMarkOption.Unkonwn,text:""}}}))}),[C,y,i,x]),onClickItem:(0,r.useCallback)((function(e){switch(e){case a.OrderMarkOption.Open:c();break;case a.OrderMarkOption.Position:u();break;case a.OrderMarkOption.Execution:d()}}),[d,c,u])}}},28598:(e,t,i)=>{i.d(t,{w:()=>l});var n=i(5163),r=i(2784),o=i(34274),a=i(92424),l=function(e){var t=e.namespace,i=(0,o.Z)("trd-chart","trade-ui").getI18n,l=(0,a.createStore)(t),s=(0,n.__read)(l(a.getPriceType),2),c=s[0],u=s[1],d=(0,r.useMemo)((function(){return i("indexPrice",{defaultValue:"Index Price"})||""}),[i]),h=(0,r.useMemo)((function(){return i("markPrice",{defaultValue:"Mark Price"})||""}),[i]),g=(0,r.useMemo)((function(){return i("lastPrice",{defaultValue:"Last Price"})||""}),[i]);return{priceType:c,options:(0,r.useMemo)((function(){return[{text:d,value:a.PriceType.Index},{text:h,value:a.PriceType.Mark},{text:g,value:a.PriceType.Last}]}),[d,h,g]),onClickItem:(0,r.useCallback)((function(e){return u(e)}),[u])}}},73002:(e,t,i)=>{i.d(t,{k:()=>ac});var n={};i.r(n),i.d(n,{ExtraSmall:()=>U,Medium:()=>B,Small:()=>H,Small2:()=>F});var r={};i.r(r),i.d(r,{Medium:()=>$,Small:()=>J});var o={};i.r(o),i.d(o,{Name:()=>oe,PriceDrop:()=>le,PriceFlat:()=>se,PriceRise:()=>ae,Status:()=>ce});var a={};i.r(a),i.d(a,{ChartStyleDropdown:()=>Me,ChartStyles:()=>Ce,MultiChartDropdown:()=>_e,MultiChartDropdownType:()=>D,OrderMarkDropdown:()=>me,TextDropdown:()=>ye,UniversalDropdown:()=>Z});var l={};i.r(l),i.d(l,{Plain:()=>Ie,SymbolTab:()=>ue});var s={};i.r(s),i.d(s,{Area:()=>Ve,Bar:()=>we,Baseline:()=>Ae,Camera:()=>Be,Candle:()=>Se,Close:()=>re,Compare:()=>Re,Fullscreen:()=>Oe,HeikinAshi:()=>Ee,HollowCandle:()=>Le,Indicator:()=>Fe,Kagi:()=>Ge,Line:()=>ke,LineBreak:()=>Xe,Logo:()=>ie,OrderMark:()=>Ke,PointAndFugure:()=>Ye,Range:()=>je,Renko:()=>ze,ResumeWindow:()=>Ue});var c={};i.r(c),i.d(c,{MiniMultiChartPrompt:()=>ml});var u={};i.r(u),i.d(u,{TVResolutionToTrueInterval:()=>es,TradingView:()=>Jl,TrueIntervalToTVResolution:()=>$l,findLCMInterval:()=>is,findMaximumInterval:()=>ns,intervalToMillseconds:()=>ts});var d={};i.r(d),i.d(d,{createStore:()=>Hs,getDepthScale:()=>Zs});var h={};i.r(h),i.d(h,{createStore:()=>rc,getOrderHistory:()=>oc});var g=i(5163),p=i(2784),f=i(92036),v=i(26182),m=p.forwardRef((function(e,t){var i=e.active,n=e.hidden,r=void 0!==n&&n,o=(0,g.__rest)(e,["active","hidden"]);return r?null:p.createElement(f.Z,(0,g.__assign)({},o,{sx:(0,g.__assign)({alignItems:"center",justifyContent:"center",color:i?"t.yellow":"t.third",cursor:"pointer",fontSize:0,lineHeight:"16px",p:"minor",borderRadius:"2px","&:hover":{color:"t.yellow"}},o.sx),ref:t}))})),y=function(e){var t=e.text,i=e.value,n=e.active,r=e.onClick,o=e.onObscured,a=e.onRevealed,l=(0,p.useRef)(null),s=(0,v.Z)(l,{root:null,rootMargin:"0px",threshold:1});return(0,p.useEffect)((function(){s&&(s.intersectionRatio<1?o(i):a(i))}),[s]),p.createElement(m,{id:i,active:n,onClick:r,ref:l,sx:{mr:2}},t)},x=i(10337),b=i(31023),C=i(48658),_=function(e){var t=e.dropdownExpanded,i=e.onDropdownMouseEnter,n=e.onDropdownMouseLeave,r=e.onDropdownButtonClick,o=e.isDropdownButtonActive,a=e.dropdownText,l=e.overlay;return p.createElement(b.Z,{open:t,onMouseEnter:i,onMouseLeave:n,overlay:l,sx:{position:"relative",height:"24px",flex:"1 0 auto",mr:2,"&:hover":{".interval-expand-btn":{color:"t.primary",transform:"rotate(180deg)"}}},enablePortal:!0},p.createElement(m,{onClick:r,sx:{width:"100%",height:"100%"},active:o},p.createElement(f.Z,{sx:{alignItems:"center",justifyContent:"center"}},a&&p.createElement(C.Z,null,a),p.createElement(x.Z,{className:"interval-expand-btn",size:3,sx:{color:"t.third",transition:"transform .2s, color .2s","&:not(:first-of-type)":{marginLeft:"4px"}}}))))},w=i(33322),S=i(62143),L=i(71218),E=function(e){var t=e.onChange,i=e.value,n=e.checked,r=e.checkboxSize,o=void 0===r?13:r;return p.createElement(S.Z,{sx:{position:"absolute",top:"-"+o/2+"px",right:"-"+o/2+"px"}},p.createElement("input",{type:"checkbox",value:i,onChange:t,hidden:!0}),p.createElement(f.Z,{sx:{alignItems:"center",justifyContent:"center",width:"16px",height:"16px",borderRadius:"100%",background:function(e){return n?e.colors.primary:e.colors.t.placeholder}}},p.createElement(L.Z,{color:"modalBg",size:o})))},k=i(69967),V=function(e){var t=e.showCheckbox,i=e.checked,n=e.value,r=e.onChange,o=e.onClick,a=e.children,l=e.className,s=void 0===l?"interval-option":l;return p.createElement(w.Z,{className:s,onClick:o,alignItems:"center",justifyContent:"center",sx:{fontWeight:"normal",fontSize:"14px",lineHeight:1.43,color:"t.primary",width:"60px",height:"24px",position:"relative",transition:"background-color 0.2s ease 0s",cursor:"pointer",bg:function(e){return i?(0,k.D)(e.colors.primary,.15):(0,k.D)(e.colors.line,.5)},"&:hover":{bg:function(e){return i?(0,k.D)(e.colors.primary,.3):e.colors.line}},borderRadius:"2px"}},p.createElement(C.Z,{sx:{color:i?"t.yellow":"t.primary",fontSize:"12px"}},a),t&&p.createElement(E,{onChange:r,value:n,checked:i}))},A=i(45362),T=function(e){var t=e.children,i=e.onClick;return p.createElement(A.Z,{sz:"s",sx:{lineHeight:"16px",fontSize:12,wordBreak:"keep-all",minHeight:"24px",border:"none",color:"primary",fontWeight:"normal",padding:"0",backgroundImage:"none",bg:"transparent","&:hover:not(:disabled):not(:active):not(.inactive)":{backgroundImage:"none"},"&:active:not(:disabled):not(.inactive)":{backgroundColor:"transparent"}},onClick:i},t)};function M(e){var t=e.options,i=e.onClickEdit,n=e.editText,r=e.title;return p.createElement(f.Z,{sx:{bg:"modalBg",marginTop:"8px",flexDirection:"column",boxShadow:"0px 0px 1px rgba(20, 21, 26, 0.1), 0px 7px 14px rgba(71, 77, 87, 0.08), 0px 3px 6px rgba(20, 21, 26, 0.08)",borderRadius:"4px",padding:"12px 16px 2px",width:"300px"}},p.createElement(f.Z,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"}},p.createElement(C.Z,{sx:{color:"t.third",fontSize:"12px"}},r),p.createElement(T,{onClick:i},n)),p.createElement(f.Z,{sx:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between","&>.interval-option":{marginBottom:"10px"}}},t.map((function(e){var t=e.text,i=e.value,n=e.showCheckbox,r=e.checked,o=e.onClick,a=e.onChange;return p.createElement(V,{key:i,value:i,checked:r,showCheckbox:n,onClick:o,onChange:a},t)}))))}var D,I=function(e){var t=e.dropdownExpanded,i=e.onDropdownMouseEnter,n=e.onDropdownMouseLeave,r=e.onDropdownButtonClick,o=e.isDropdownButtonActive,a=e.dropdownText,l=e.options,s=e.onClickEdit,c=e.editText,u=e.title,d=e.displayedOptions;return p.createElement(f.Z,{height:24},p.createElement(f.Z,{sx:{flexWrap:"wrap",overflow:"hidden",justifyContent:"space-between"}},d.map((function(e){var t=e.text,i=e.value,n=e.active,r=e.onClick,o=e.onObscured,a=e.onRevealed;return p.createElement(y,{key:i,text:t,value:i,active:n,onClick:r,onObscured:o,onRevealed:a})}))),p.createElement(_,{dropdownExpanded:t,onDropdownMouseEnter:i,onDropdownMouseLeave:n,onDropdownButtonClick:r,isDropdownButtonActive:o,dropdownText:a,overlay:p.createElement(M,{options:l,onClickEdit:s,editText:c,title:u})}))},P=function(){return null},B=function(e){var t=function(e){var t=e.options,i=e.value,n=e.isEditing,r=e.onClickEdit,o=e.title,a=e.saveText,l=e.editText,s=e.dropdownExpanded,c=e.onDropdownMouseEnter,u=e.onDropdownMouseLeave,d=e.onDropdownButtonClick,h=e.onClickItem,f=(0,g.__rest)(e,["options","value","isEditing","onClickEdit","title","saveText","editText","dropdownExpanded","onDropdownMouseEnter","onDropdownMouseLeave","onDropdownButtonClick","onClickItem"]),v=(0,g.__read)((0,p.useState)(t),2),m=v[0],y=v[1],x=(0,g.__read)((0,p.useState)({}),2),b=x[0],C=x[1];(0,p.useEffect)((function(){return y(t)}),[t]);var _=m.map((function(e){return{text:e.text,value:e.text,checked:e.selected,showCheckbox:n,onClick:n?P:function(){return h(e.value)},onChange:function(){return y((function(t){return t.map((function(t){return(0,g.__assign)((0,g.__assign)({},t),{selected:t.value===e.value?!t.selected:t.selected})}))}))}}})),w=t.filter((function(e){return e.selected})).map((function(e){return{text:e.text,value:e.value,active:e.value===i,onClick:function(){return h(e.value)},onObscured:function(e){C((function(t){var i=(0,g.__assign)({},t);return i[e]=!0,i}))},onRevealed:function(e){C((function(t){var i=(0,g.__assign)({},t);return i[e]=!1,i}))}}})),S=t.find((function(e){return e.value===i&&(!e.selected||b[e.value])}));return(0,g.__assign)({options:_,displayedOptions:w,editText:n?a:l,dropdownText:(null==S?void 0:S.text)||"",dropdownExpanded:s,onDropdownMouseEnter:c,onDropdownMouseLeave:function(e){y(t),u(e)},onDropdownButtonClick:function(){return d((null==S?void 0:S.value)||"")},title:o,isDropdownButtonActive:!!S,onClickEdit:function(){return r(m)}},f)}(e);return p.createElement(I,(0,g.__assign)({},t))},W=i(55742),R=function(e){var t=e.isActive,i=e.children,n=(0,g.__rest)(e,["isActive","children"]);return p.createElement(f.Z,(0,g.__assign)({width:.2},n,{sx:(0,g.__assign)({alignItems:"center",justifyContent:"center",py:"minor",color:t?"t.yellow":"t.primary",textAlign:"center",cursor:"pointer"},n.sx)}),p.createElement(C.Z,{sx:{fontSize:1}},i))},H=function(e){var t=e.options,i=e.value,n=e.showDropdown,r=e.onMouseEnterDropdwon,o=e.onMouseLeaveDropdown,a=e.onClickDropdownButton,l=e.onClickItem,s=t.slice(1),c=s.find((function(e){return e.value===i}))||s[0],u=p.createElement(f.Z,{sx:{flexWrap:"wrap",p:"md",bg:"modalBg",mt:"minor",py:"xs",borderRadius:"2px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.15)"}},s.map((function(e){return p.createElement(R,{isActive:e.value===i,key:e.value,onClick:function(){return l(e.value)}},e.text)})));return p.createElement(f.Z,null,p.createElement(m,{active:t[0].value===i,onClick:function(){return l(t[0].value)},sx:{minWidth:"32px"}},t[0].text),p.createElement(W.ZP,{open:n,onMouseEnter:r,onMouseLeave:o,overlay:u,enablePortal:!0},p.createElement(m,{active:!!s.find((function(e){return e.value===i})),onClick:a,sx:{ml:"minor",minWidth:"32px"}},c.text,p.createElement(x.Z,{sx:{transform:"scale(1.8)"},size:8}))))},Z=function(e){var t=e.options,i=e.value,n=e.showArrowIcon,r=void 0!==n&&n,o=e.onClickDropdownButton,a=e.overlay,l=(0,g.__rest)(e,["options","value","showArrowIcon","onClickDropdownButton","overlay"]),s=t.find((function(e){return e.value===i}));return p.createElement(W.ZP,(0,g.__assign)({},l,{enablePortal:!0,overlay:a({option:s,options:t}),sx:(0,g.__assign)({cursor:"pointer",minWidth:"auto","&:hover":{".interval-expand-btn":{color:"t.primary",transform:"rotate(180deg)"}}},l.sx)}),p.createElement(f.Z,{onClick:o,sx:{minWidth:"auto",alignItems:"center",justifyContent:"center"}},null==s?void 0:s.display,r&&p.createElement(x.Z,{className:"interval-expand-btn",size:3,sx:{color:"t.third",transition:"transform .2s, color .2s","&:not(:first-of-type)":{ml:"minor"}}})))},O=function(e){var t=e.active,i=e.onClick,n=e.children,r=(0,g.__rest)(e,["active","onClick","children"]);return p.createElement(f.Z,(0,g.__assign)({},r,{onClick:i,sx:(0,g.__assign)({alignItems:"center",justifyContent:"center",borderRadius:"2px",bg:t?"line":"bg3",color:"t.primary",fontSize:"xs",cursor:"pointer",":hover":{bg:"line"}},r.sx)}),n)},N=function(e){var t=e.children,i=(0,g.__rest)(e,["children"]);return p.createElement(S.Z,(0,g.__assign)({},i,{sx:(0,g.__assign)({display:"grid",gridTemplateColumns:"repeat(5, 60px)",gridTemplateRows:"repeat(4, 24px)",gridGap:"10px",bg:"popupBg",shadow:"0 2 16px rgba(0,0,0,.25)",p:"sm"},i.sx)}),t)},F=function(e){var t=e.onClickItem,i=e.options,n=(0,g.__rest)(e,["onClickItem","options"]),r=i.map((function(e){return{value:e.value,display:p.createElement(f.Z,{sx:{color:"t.third",fontSize:"xs",alignItems:"center"}},e.text),children:p.createElement(O,{key:e.value,active:e.value===n.value,onClick:function(){return t(e.value)}},e.text)}}));return p.createElement(Z,(0,g.__assign)({},n,{showArrowIcon:!0,options:r,overlay:function(){return p.createElement(N,{sx:n.overlaySx||{}},r.map((function(e){return e.children})))}}))},K=function(e){var t=e.isActive,i=e.children,n=(0,g.__rest)(e,["isActive","children"]);return p.createElement(f.Z,(0,g.__assign)({},n,{sx:(0,g.__assign)({alignItems:"center",justifyContent:"center",py:"minor",color:t?"t.yellow":"t.primary"},n.sx)}),i)},U=function(e){var t=e.options,i=e.value,n=e.isDropdownActive,r=e.showDropdown,o=e.onClickDropdownButton,a=e.onClickItem,l=t.find((function(e){return e.value===i}));return p.createElement(W.ZP,{open:r,isFixed:!0,placement:"bottom-start",enablePortal:!0,sx:{width:"100%"},overlay:p.createElement(f.Z,{sx:{flexWrap:"wrap",p:"xs",bg:"modalBg",mt:"minor",width:300}},t.map((function(e){return p.createElement(K,{key:e.value,isActive:e.value===i,onClick:function(){return a(e.value)},width:.2,sx:{textAlign:"center",padding:"6px 0 6px 0"}},p.createElement(C.Z,{fontSize:1},e.text))})))},p.createElement(m,{active:n,onClick:o},p.createElement(C.Z,{sx:{fontSize:1}},null==l?void 0:l.text),p.createElement(x.Z,{sx:{transform:"scale(1.8)"},size:12})))},z=i(49487),X=function(e){var t=e.isReady,n=e.children,r=(0,g.__rest)(e,["isReady","children"]);if(t)return n;if(r.openTime){var o=p.lazy((function(){return Promise.resolve().then(i.bind(i,49487))}));return p.createElement(p.Suspense,{fallback:function(){return null}},p.createElement(o,(0,g.__assign)({},r)))}return null},G=i(10687),Y=function(){return p.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3}},p.createElement(G.Z,{sx:{zIndex:100}}))},j=(0,p.forwardRef)((function(e,t){var i=e.height,n=void 0===i?"100%":i,r=e.headerHeight,o=e.headerSlot,a=e.showLoading,l=e.children;return p.createElement(f.Z,{sx:{height:n,flexDirection:"column"},ref:t},p.createElement(S.Z,{sx:{height:r,flex:"0 0 auto"}},o),p.createElement(S.Z,{sx:{height:"100%",position:"relative"},className:"draggableCancel"},l,a&&p.createElement(Y,null)))})),q=(0,p.forwardRef)((function(e,t){var i=e.countdownProps,n=e.layoutProps,r=e.children;return p.createElement(X,(0,g.__assign)({},i),p.createElement(j,(0,g.__assign)({},n,{ref:t}),r))})),Q=function(e){var t=e.isActive,i=e.children,n=(0,g.__rest)(e,["isActive","children"]);return p.createElement(f.Z,(0,g.__assign)({},n,{sx:(0,g.__assign)({alignItems:"center",justifyContent:"center",py:"minor",color:t?"t.yellow":"t.primary"},n.sx)}),i)},J=function(e){var t=e.children,i=e.indicatorText,n=e.depthText,r=e.onClickIndicator,o=e.onClickDepth,a=e.isDepthActive;return p.createElement(f.Z,{sx:{justifyContent:"space-between",alignItems:"center",textAlign:"center",py:"xs"}},p.createElement(Q,{isActive:!1,sx:{flex:1,height:32}},t),p.createElement(Q,{isActive:!1,onClick:r,sx:{py:0,flex:1,height:32}},p.createElement(C.Z,{sx:{fontSize:1,textAlign:"center",padding:"8px",width:"100%"}},i)),p.createElement(Q,{isActive:a,onClick:o,sx:{py:0,flex:1,height:32}},p.createElement(C.Z,{sx:{fontSize:1}},n)))},$=function(e){var t=e.head,i=e.mid,n=e.tail,r=e.useDraggableHandle,o=void 0!==r&&r,a=e.sx;return p.createElement(f.Z,{className:"focus-area",sx:(0,g.__assign)({height:40,justifyContent:"space-between",py:"minor",px:"sm",borderBottom:"1px solid",borderBottomColor:"newLine"},a)},p.createElement(f.Z,{sx:{justifyContent:"space-between",alignItems:"center",py:"minor",maxWidth:"55%","& > *:not(:first-of-type)":{ml:"sm"}}},t),p.createElement(f.Z,{className:o?"draggableHandle":"",sx:{flex:1,minWidth:"20px",alignItems:"center",justifyContent:"center","& > *:not(:first-of-type)":{ml:"sm"}}},i),p.createElement(f.Z,{sx:{alignItems:"center",justifyContent:"flex-end","& > *:not(:first-of-type)":{ml:"sm"}}},n))},ee=function(e){var t=e.resetErrorBoundary,i=e.mainText,n=e.btnText;return p.createElement(f.Z,{sx:{width:"100%",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"}},p.createElement(C.Z,{fontSize:3,color:"t.primary"},i),p.createElement(C.Z,{fontSize:"14px",sx:{textDecoration:"underline",cursor:"pointer",color:"t.yellow",mt:3},onClick:t},n))},te=i(98569),ie=function(e){return p.createElement(te.Z,(0,g.__assign)({width:"225",height:"45",viewBox:"0 0 225 45",fill:"none"},e,{sx:(0,g.__assign)({width:"255px",height:"45px",color:"t.primary",opacity:"0.07"},e.sx)}),p.createElement("path",{d:"M10.2072 22.5L5.12569 27.5537L0 22.5L5.12569 17.4023L10.2072 22.5ZM22.6237 10.1514L31.3727 18.8525L36.4984 13.7549L22.6237 0L8.74902 13.7988L13.8747 18.8965L22.6237 10.1514ZM40.1218 17.4023L35.0403 22.5L40.1659 27.5977L45.2916 22.5L40.1218 17.4023ZM22.6237 34.8486L13.8747 26.1035L8.74902 31.2012L22.6237 45L36.4984 31.2012L31.3727 26.1035L22.6237 34.8486ZM22.6237 27.5537L27.7494 22.4561L22.6237 17.4023L17.498 22.5L22.6237 27.5537ZM76.5318 28.0811V27.9932C76.5318 24.6973 74.7643 23.0273 71.8922 21.9287C73.6597 20.9619 75.162 19.3799 75.162 16.6113V16.5234C75.162 12.6562 72.0247 10.1514 66.9874 10.1514H55.4546V34.8047H67.2525C72.8643 34.8486 76.5318 32.5635 76.5318 28.0811ZM69.727 17.5342C69.727 19.3799 68.2247 20.127 65.7944 20.127H60.7571V14.8975H66.1479C68.4456 14.8975 69.727 15.8203 69.727 17.4463V17.5342ZM71.0968 27.3779C71.0968 29.2236 69.6386 30.0586 67.2525 30.0586H60.7571V24.6533H67.0758C69.8596 24.6533 71.0968 25.6641 71.0968 27.334V27.3779ZM87.9762 34.8486V10.1514H82.497V34.8047H87.9762V34.8486ZM117.316 34.8486V10.1514H111.926V25.3564L100.304 10.1514H95.2671V34.8047H100.658V19.1602L112.677 34.8486H117.316ZM147.54 34.8486L136.891 10.0195H131.854L121.205 34.8486H126.817L129.07 29.3115H139.542L141.796 34.8486H147.54ZM137.598 24.5215H131.014L134.328 16.5234L137.598 24.5215ZM173.566 34.8486V10.1514H168.176V25.3564L156.554 10.1514H151.517V34.8047H156.908V19.1602L168.927 34.8486H173.566ZM201.713 30.8496L198.223 27.3779C196.278 29.1357 194.555 30.2783 191.683 30.2783C187.441 30.2783 184.481 26.7627 184.481 22.5439V22.4121C184.481 18.1934 187.485 14.7217 191.683 14.7217C194.157 14.7217 196.102 15.7764 198.046 17.4902L201.537 13.4912C199.239 11.25 196.455 9.66797 191.771 9.66797C184.171 9.66797 178.825 15.4248 178.825 22.4121V22.5C178.825 29.5752 184.26 35.2002 191.55 35.2002C196.323 35.2441 199.151 33.5742 201.713 30.8496ZM225 34.8486V30.0147H211.523V24.8291H223.233V19.9951H211.523V14.9854H224.823V10.1514H206.132V34.8047H225V34.8486Z",fill:"currentColor"}))},ne=i(77711),re=function(e){return p.createElement(ne.Z,(0,g.__assign)({},e,{sx:(0,g.__assign)({flexShrink:0,color:"icons.close",cursor:"pointer","&:hover":{color:"t.third"}},e.sx),className:"pro-layout-close-button"}))},oe=function(e){var t=e.children;return p.createElement(S.Z,{sx:{color:"t.primary",fontSize:"sm",letterSpacing:".16px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},t)},ae=function(e){var t=e.children;return p.createElement(S.Z,{sx:{color:"t.buy",fontSize:"xs",letterSpacing:".32px"}},t)},le=function(e){var t=e.children;return p.createElement(S.Z,{sx:{color:"t.sell",fontSize:"xs",letterSpacing:".32px"}},t)},se=function(e){var t=e.children;return p.createElement(S.Z,{sx:{color:"t.primary",fontSize:"xs",letterSpacing:".32px"}},t)},ce=function(e){var t=e.name,i=e.price,n=e.change;return p.createElement(f.Z,{sx:{alignItems:"center"}},p.createElement(f.Z,{sx:{alignItems:"center",flex:"1"}},t),p.createElement(f.Z,{sx:{alignItems:"center",pl:"minor"}},i),p.createElement(f.Z,{sx:{alignItems:"center",pl:"minor"}},n))},ue=function(e){var t=e.options,i=e.value,n=e.onChange,r=e.onClose;return p.createElement(f.Z,null,t.map((function(e){return p.createElement(f.Z,{key:""+e.value,onClick:function(){return n(e)},sx:{alignItems:"center",cursor:"pointer",p:"xs",bg:e.value===i?"bg3":"transparent"}},p.createElement(ce,{name:e.name,price:e.price}),e.showClose&&p.createElement(re,{size:16,onClick:function(t){t.stopPropagation(),r(e)}}))})))},de=i(27986),he=i(21030),ge=i(53935),pe=i(6157),fe=function(e){var t=e.onClick,i=e.active,n=e.children,r=(0,g.__rest)(e,["onClick","active","children"]);return p.createElement(f.Z,(0,g.__assign)({},r,{onClick:t,sx:(0,g.__assign)({px:"ls",py:"sm",fontSize:"xs",color:i?"t.yellow":"t.primary",bg:"transparent",cursor:"pointer",alignItems:"center",":hover":{bg:"bg3"},"& > *:not(:last-child)":{mr:"5px"}},r.sx)}),n)},ve=function(e){var t=e.children,i=(0,g.__rest)(e,["children"]);return p.createElement(f.Z,(0,g.__assign)({},i,{sx:(0,g.__assign)({bg:"popupBg",shadow:"0px 7px 14px rgba(0, 0, 0, 0.08), 0px 3px 6px rgba(0, 0, 0, 0.08), inset 0px 0px 1px rgba(94, 102, 115, 0.9)",borderRadius:"4px",py:"5px",flexDirection:"column"},i.sx)}),t)},me=function(e){var t=e.values,i=e.options,n=e.onClickDropdownItem,r=p.createElement(ve,null,i.map((function(e){var i=e.value,r=e.children,o=e.tooltip;return p.createElement(fe,{key:""+i,active:!1,onClick:function(e){e.stopPropagation(),null==n||n(i)},sx:{px:"xs",py:"ls"}},p.createElement(S.Z,{sx:{width:"100%",display:"grid",gridTemplateColumns:"1fr auto auto"}},p.createElement(f.Z,{sx:{alignItems:"center",fontSize:"12px",lineHeight:"16px",marginRight:"5px"}},r),p.createElement(f.Z,{sx:{marginRight:"16px"}},o?p.createElement(he.ZP,{enablePortal:!0,arrow:!0,placement:"top",tip:o,sx:{display:"flex",alignItems:"center"}},p.createElement(ge.Z,{size:14,color:"t.third"})):null),p.createElement(f.Z,{sx:{alignItems:"center"}},p.createElement(de.Z,{sx:{width:"20px",height:"20px",margin:"0px"},checked:t.includes(i)}))))})));return p.createElement(W.ZP,{enablePortal:!0,trigger:"hover",overlay:r,sx:{display:"block"}},p.createElement(pe.Z,{sx:{display:"block"},color:t.length>0?"t.yellow":"t.third",size:20}))},ye=function(e){var t=e.onClickItem,i=e.options,n=(0,g.__rest)(e,["onClickItem","options"]),r=i.map((function(e,i){return{value:e.value,display:p.createElement(f.Z,{sx:{fontSize:"xs",color:"t.third"}},e.text),children:p.createElement(fe,{key:i,active:e.value===n.value,onClick:function(){return t(e.value)},sx:{px:"xs",py:"ls"}},e.text)}}));return p.createElement(Z,(0,g.__assign)({},n,{options:r,overlay:function(){return p.createElement(ve,{sx:{position:"absolute",left:"-8px",width:"max-content"}},r.map((function(e){return e.children})))}}))},xe=i(25522),be=i(77828);!function(e){e[e.Single=1]="Single",e[e.Four=4]="Four"}(D||(D={}));var Ce,_e=function(e){var t=e.value,i=e.onClickItem,n=e.singleOptionText,r=e.multiOptionText,o=e.tooltipText,a=(0,g.__rest)(e,["value","onClickItem","singleOptionText","multiOptionText","tooltipText"]),l=[{value:D.Single,display:p.createElement(xe.Z,{size:20,color:"icons.close"}),children:p.createElement(fe,{key:"1",onClick:function(){return i(D.Single)},active:t===D.Single},p.createElement(be.Z,{size:20,color:"slider.line"}),p.createElement(S.Z,{sx:{fontSize:"xs",color:"t.primary"}},n))},{value:D.Four,display:p.createElement(xe.Z,{size:20,color:"icons.close"}),children:p.createElement(fe,{key:"4",onClick:function(){return i(D.Four)},active:t===D.Four},p.createElement(xe.Z,{size:20,color:"icons.close"}),p.createElement(S.Z,{sx:{fontSize:"xs",color:"t.primary"}},r),p.createElement(he.ZP,{enablePortal:!0,arrow:!0,placement:"bottom-start",tip:o,sx:{display:"flex",alignItems:"center"}},p.createElement(ge.Z,{size:20,color:"icons.close"})))}];return p.createElement(Z,(0,g.__assign)({placement:"bottom",options:l,value:t,overlay:function(){return p.createElement(ve,null,l.map((function(e){return e.children})))}},a))},we=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 20 20",fill:"none"},e),p.createElement("path",{d:"M16.0714 11.7857H14.2857M7.5 5.35717V16.0715V5.35717ZM5.35714 14.6429H7.14285H5.35714ZM9.64285 8.21431H7.85714H9.64285ZM13.9286 4.64288V15.3572V4.64288ZM11.7857 6.78574H13.5714H11.7857Z",stroke:"currentColor",strokeLinecap:"square"}))},Se=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 16 19",fill:"none"},e),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3333 0.833313H13V3.33331H15.5V15H13V18.3333H11.3333V15H8.83333V3.33331H11.3333V0.833313ZM13.8333 13.3333V4.99998H10.5V13.3333H13.8333Z",fill:"#848E9C"}),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 5.83331H4.66667V8.33331H7.16667V15H4.66667V18.3333H3V15H0.5V8.33331H3V5.83331ZM5.5 13.3333V9.99998H2.16667V13.3333H5.5Z",fill:"#848E9C"}))},Le=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 10 15",fill:"none"},e),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.85714 0.857117H2.14286V2.99998H1.07143C0.976713 2.99998 0.885872 3.0376 0.818895 3.10458C0.751918 3.17156 0.714291 3.2624 0.714291 3.35712V11.9285C0.714291 12.0233 0.751918 12.1141 0.818895 12.1811C0.885872 12.2481 0.976713 12.2857 1.07143 12.2857H2.14286V14.4285H2.85714V12.2857H3.92858C4.0233 12.2857 4.11414 12.2481 4.18111 12.1811C4.24809 12.1141 4.28572 12.0233 4.28572 11.9285V3.35712C4.28572 3.2624 4.24809 3.17156 4.18111 3.10458C4.11414 3.0376 4.0233 2.99998 3.92858 2.99998H2.85714V0.857117ZM2.14286 3.71426H1.42858V4.42855H2.14286V5.14283H1.42858V5.85712H2.14286V6.5714H1.42858V7.28569H2.14286V7.99997H1.42858V8.71426H2.14286V9.42855H1.42858V10.1428H2.14286V10.8571H1.42858V11.5714H2.14286V10.8571H2.85714V11.5714H3.57143V10.8571H2.85714V10.1428H3.57143V9.42855H2.85714V8.71426H3.57143V7.99997H2.85714V7.28569H3.57143V6.5714H2.85714V5.85712H3.57143V5.14283H2.85714V4.42855H3.57143V3.71426H2.85714V4.42855H2.14286V3.71426ZM2.85714 5.14283V5.85712H2.14286V5.14283H2.85714ZM2.85714 6.5714V7.28569H2.14286V6.5714H2.85714ZM2.85714 7.99997V8.71426H2.14286V7.99997H2.85714ZM2.85714 9.42855V10.1428H2.14286V9.42855H2.85714ZM8.57143 2.99998H7.85715V5.14284H6.78572C6.691 5.14284 6.60016 5.18046 6.53319 5.24744C6.46621 5.31442 6.42858 5.40526 6.42858 5.49998V10.5C6.42858 10.5947 6.46621 10.6855 6.53319 10.7525C6.60016 10.8195 6.691 10.8571 6.78572 10.8571H7.85715V13H8.57143V10.8571H9.64287C9.73759 10.8571 9.82843 10.8195 9.8954 10.7525C9.96238 10.6855 10 10.5947 10 10.5V5.49998C10 5.40526 9.96238 5.31442 9.8954 5.24744C9.82843 5.18046 9.73759 5.14284 9.64287 5.14284H8.57143V2.99998ZM7.14287 10.1428V5.85712H9.28572V10.1428H7.14287Z",fill:"currentColor"}))},Ee=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 10 14",fill:"none"},e),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57144 0.428528H7.85716V2.57147H6.78429C6.58215 2.57147 6.42858 2.73147 6.42858 2.92862V7.92861C6.42914 8.02292 6.46675 8.11322 6.5333 8.18003C6.59985 8.24685 6.68999 8.28482 6.78429 8.28576H9.64429C9.84644 8.28576 10 8.12576 10 7.92861V2.92862C10 2.73576 9.84072 2.57147 9.64429 2.57147H8.57144V0.428528ZM2.85713 1.85716H2.14284V4H1.06998C0.867838 4 0.714267 4.15929 0.714267 4.35571V13.6443C0.714078 13.6911 0.723149 13.7374 0.740959 13.7806C0.758768 13.8239 0.784963 13.8632 0.818032 13.8962C0.851101 13.9293 0.890389 13.9555 0.933632 13.9733C0.976874 13.9911 1.02322 14.0002 1.06998 14H3.92998C3.97683 14.0005 4.0233 13.9916 4.06667 13.9739C4.11004 13.9562 4.14945 13.93 4.18257 13.8969C4.2157 13.8638 4.24188 13.8243 4.25959 13.781C4.2773 13.7376 4.28617 13.6911 4.28569 13.6443V4.35571C4.28569 4.15714 4.12641 4 3.92998 4H2.85713V1.85716ZM1.42855 13.2857V4.71429H3.57141V13.2857H1.42855ZM7.14286 3.28576V7.57147H9.28572V3.28576H7.14286Z",fill:"currentColor"}))},ke=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 20 20",fill:"none"},e),p.createElement("g",{clipPath:"url(#clip0)"},p.createElement("path",{d:"M8.55857 11.9207L12.28 8.57145H14.4464L17.41 5.23716L16.8757 4.76288L14.1257 7.85716H12.0057L8.58428 10.9364L6.42857 8.78074L3.31857 11.89L3.82428 12.3957L6.42857 9.79073L8.55857 11.9207Z",fill:"currentColor"})),p.createElement("defs",null,p.createElement("clipPath",{id:"clip0"},p.createElement("rect",{width:"20",height:"20",fill:"currentColor"}))))},Ve=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 20 20",fill:"none"},e),p.createElement("path",{d:"M8.92857 12.2907L13.3621 7.85713H14.7907L17.3957 5.25285L16.89 4.74713L14.495 7.14285H13.0664L8.92857 11.2807L6.78571 9.13785L3.31857 12.6043L3.82428 13.11L6.78571 10.1478L8.92857 12.2907Z",fill:"currentColor"}),p.createElement("path",{d:"M6.42857 11.4286H7.14286V12.1429H6.42857V11.4286ZM7.14286 12.1429H7.85714V12.8572H7.14286V12.1429ZM6.42857 12.8572H7.14286V13.5715H6.42857V12.8572ZM7.85714 12.8572H8.57143V13.5715H7.85714V12.8572ZM7.14286 13.5715H7.85714V14.2857H7.14286V13.5715ZM6.42857 14.2857H7.14286V15H6.42857V14.2857ZM7.85714 14.2857H8.57143V15H7.85714V14.2857ZM5.71429 12.1429H6.42857V12.8572H5.71429V12.1429ZM5 12.8572H5.71429V13.5715H5V12.8572ZM4.28572 13.5715H5V14.2857H4.28572V13.5715ZM5.71429 13.5715H6.42857V14.2857H5.71429V13.5715ZM5 14.2857H5.71429V15H5V14.2857ZM3.57143 14.2857H4.28572V15H3.57143V14.2857ZM15.7143 7.85717H16.4286V8.57145H15.7143V7.85717ZM16.4286 7.14288H17.1429V7.85717H16.4286V7.14288ZM16.4286 8.57145H17.1429V9.28574H16.4286V8.57145ZM15.7143 9.28574H16.4286V10H15.7143V9.28574ZM15 10H15.7143V10.7143H15V10ZM16.4286 10H17.1429V10.7143H16.4286V10ZM15.7143 10.7143H16.4286V11.4286H15.7143V10.7143ZM15 11.4286H15.7143V12.1429H15V11.4286ZM16.4286 11.4286H17.1429V12.1429H16.4286V11.4286ZM15.7143 12.1429H16.4286V12.8572H15.7143V12.1429ZM15 12.8572H15.7143V13.5715H15V12.8572ZM16.4286 12.8572H17.1429V13.5715H16.4286V12.8572ZM15.7143 13.5715H16.4286V14.2857H15.7143V13.5715ZM15 14.2857H15.7143V15H15V14.2857ZM16.4286 14.2857H17.1429V15H16.4286V14.2857ZM12.8571 9.28574H13.5714V10H12.8571V9.28574ZM14.2857 9.28574H15V10H14.2857V9.28574ZM15 8.57145H15.7143V9.28574H15V8.57145ZM13.5714 10H14.2857V10.7143H13.5714V10ZM12.8571 10.7143H13.5714V11.4286H12.8571V10.7143ZM14.2857 10.7143H15V11.4286H14.2857V10.7143ZM13.5714 11.4286H14.2857V12.1429H13.5714V11.4286ZM12.8571 12.1429H13.5714V12.8572H12.8571V12.1429ZM14.2857 12.1429H15V12.8572H14.2857V12.1429ZM13.5714 12.8572H14.2857V13.5715H13.5714V12.8572ZM12.8571 13.5715H13.5714V14.2857H12.8571V13.5715ZM14.2857 13.5715H15V14.2857H14.2857V13.5715ZM13.5714 14.2857H14.2857V15H13.5714V14.2857ZM12.1429 10H12.8571V10.7143H12.1429V10ZM11.4286 10.7143H12.1429V11.4286H11.4286V10.7143ZM10.7143 11.4286H11.4286V12.1429H10.7143V11.4286ZM12.1429 11.4286H12.8571V12.1429H12.1429V11.4286ZM11.4286 12.1429H12.1429V12.8572H11.4286V12.1429ZM10.7143 12.8572H11.4286V13.5715H10.7143V12.8572ZM12.1429 12.8572H12.8571V13.5715H12.1429V12.8572ZM11.4286 13.5715H12.1429V14.2857H11.4286V13.5715ZM10.7143 14.2857H11.4286V15H10.7143V14.2857ZM12.1429 14.2857H12.8571V15H12.1429V14.2857ZM10 12.1429H10.7143V12.8572H10V12.1429ZM9.28572 12.8572H10V13.5715H9.28572V12.8572ZM8.57143 13.5715H9.28572V14.2857H8.57143V13.5715ZM10 13.5715H10.7143V14.2857H10V13.5715ZM9.28572 14.2857H10V15H9.28572V14.2857Z",fill:"currentColor"}))},Ae=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 20 20",fill:"none"},e),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.37578 4.41928C9.29109 4.24988 9.11796 4.14288 8.92857 4.14288C8.73918 4.14288 8.56605 4.24988 8.48136 4.41928L7.5 6.38199L7.23293 5.84785C7.14823 5.67846 6.9751 5.57145 6.78571 5.57145C6.59633 5.57145 6.42319 5.67846 6.3385 5.84785L4.90993 8.70499C4.78643 8.95198 4.88654 9.25232 5.13353 9.37581C5.38052 9.49931 5.68086 9.39919 5.80435 9.1522L6.78571 7.18949L7.05278 7.72363C7.13748 7.89303 7.31061 8.00003 7.5 8.00003C7.68938 8.00003 7.86252 7.89303 7.94721 7.72363L8.92857 5.76092L10.6242 9.1522C10.7477 9.39919 11.048 9.49931 11.295 9.37581C11.542 9.25232 11.6421 8.95198 11.5186 8.70499L9.37578 4.41928ZM2.85714 10.8572H3.34821V9.8572H2.85714V10.8572ZM4.33035 10.8572H5.3125V9.8572H4.33035V10.8572ZM6.29464 10.8572H7.27678V9.8572H6.29464V10.8572ZM8.25893 10.8572H9.24107V9.8572H8.25893V10.8572ZM10.2232 10.8572H11.2054V9.8572H10.2232V10.8572ZM12.1875 10.8572H13.1696V9.8572H12.1875V10.8572ZM14.1518 10.8572H15.1339V9.8572H14.1518V10.8572ZM16.1161 10.8572H17.0982V9.8572H16.1161V10.8572ZM18.0804 10.8572H18.5714V9.8572H18.0804V10.8572ZM4.15219 11.3385C4.39918 11.462 4.49929 11.7623 4.3758 12.0093L3.66151 13.4379C3.53802 13.6849 3.23768 13.785 2.99069 13.6615C2.7437 13.538 2.64359 13.2377 2.76708 12.9907L3.48137 11.5621C3.60487 11.3151 3.9052 11.215 4.15219 11.3385ZM17.9472 7.72365C18.0707 7.47666 17.9706 7.17632 17.7236 7.05283C17.4766 6.92933 17.1763 7.02944 17.0528 7.27643L16.3385 8.70501C16.215 8.95199 16.3151 9.25233 16.5621 9.37583C16.8091 9.49932 17.1094 9.39921 17.2329 9.15222L17.9472 7.72365ZM12.5 11.2858C12.3267 11.2858 12.1658 11.3755 12.0747 11.5229C11.9836 11.6703 11.9753 11.8544 12.0528 12.0094L13.4813 14.8665C13.566 15.0359 13.7392 15.1429 13.9286 15.1429C14.1179 15.1429 14.2911 15.0359 14.3758 14.8665L15.8043 12.0094C15.8818 11.8544 15.8736 11.6703 15.7825 11.5229C15.6913 11.3755 15.5304 11.2858 15.3571 11.2858H12.5ZM13.9286 13.5249L13.309 12.2858H14.5481L13.9286 13.5249Z",fill:"currentColor"}))};!function(e){e[e.Bars=0]="Bars",e[e.Candles=1]="Candles",e[e.Line=2]="Line",e[e.Area=3]="Area",e[e.HeikinAshi=8]="HeikinAshi",e[e.HollowCandles=9]="HollowCandles",e[e.Baseline=10]="Baseline"}(Ce||(Ce={}));var Te=[{value:Ce.Bars,icon:we},{value:Ce.Candles,icon:Se},{value:Ce.HollowCandles,icon:Le},{value:Ce.HeikinAshi,icon:Ee},{value:Ce.Line,icon:ke},{value:Ce.Area,icon:Ve},{value:Ce.Baseline,icon:Ae}],Me=function(e){var t=e.value,i=e.onClickItem,n=e.optionText,r=(0,g.__rest)(e,["value","onClickItem","optionText"]),o=Te.map((function(e,r){var o=e.value,a=e.icon;return{value:o,display:p.createElement(a,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:"t.secondary"}),children:p.createElement(fe,{key:r,onClick:function(){return i(o)},active:t===o,sx:{py:"ls"}},p.createElement(a,{size:20,sx:{color:t===o?"t.yellow":"t.secondary",mr:"xs"}}),p.createElement(S.Z,null,n[r]))}}));return p.createElement(Z,(0,g.__assign)({placement:"bottom-start",options:o,value:t,overlay:function(){return p.createElement(ve,{sx:{position:"absolute",left:"-12px",width:"max-content"}},o.map((function(e){return e.children})))}},r))},De=i(74900),Ie=function(e){var t=e.name,i=e.options,n=e.value,r=e.onChange;return p.createElement(De.QE,{name:t,value:n,onChange:r},i.map((function(e){return p.createElement(De.ZP,{key:e.value,value:e.value,label:e.label,sx:{"&:not(:first-of-type)":{ml:"10px"},"& label":{cursor:"pointer",color:e.value===n?"t.yellow":"t.third","&:hover":{color:"t.yellow"},"& div":{ml:0,p:"minor",fontSize:"12px",lineHeight:"16px",letterSpacing:"0.32px"}},"& svg":{display:"none"}}})})))},Pe=i(55268),Be=function(e){return p.createElement(he.ZP,(0,g.__assign)({},e,{placement:"top",enablePortal:!0,arrow:!0,sx:(0,g.__assign)({cursor:"pointer",display:"flex",minWidth:"auto",alignItems:"center",justifyContent:"center"},e.sx)}),p.createElement(Pe.Z,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:"t.third"}))},We=i(43986),Re=function(e){return p.createElement(he.ZP,(0,g.__assign)({},e,{placement:"top",enablePortal:!0,arrow:!0,sx:(0,g.__assign)({cursor:"pointer",display:"flex",minWidth:"auto",alignItems:"center",justifyContent:"center"},e.sx)}),p.createElement(We.Z,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:"t.third"}))},He=i(76979),Ze=i(51386),Oe=function(e){var t=e.expanded,i=(0,g.__rest)(e,["expanded"]),n=(0,g.__assign)((0,g.__assign)({},i),{sx:(0,g.__assign)({flexShrink:0,color:"icons.close",cursor:"pointer","&:hover":{color:"t.third"}},i.sx)});return t?p.createElement(He.Z,(0,g.__assign)({},n)):p.createElement(Ze.Z,(0,g.__assign)({},n))},Ne=i(35054),Fe=function(e){return p.createElement(he.ZP,(0,g.__assign)({},e,{placement:"top",enablePortal:!0,arrow:!0,sx:(0,g.__assign)({cursor:"pointer",display:"flex",minWidth:"auto",alignItems:"center",justifyContent:"center"},e.sx)}),p.createElement(Ne.Z,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:"t.third"}))},Ke=function(e){var t=e.toggled,i=(0,g.__rest)(e,["toggled"]);return p.createElement(he.ZP,(0,g.__assign)({},i,{placement:"top",enablePortal:!0,arrow:!0,sx:(0,g.__assign)({cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},i.sx)}),p.createElement(pe.Z,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:t?"t.yellow":"t.third"}))},Ue=function(e){return p.createElement(te.Z,(0,g.__assign)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},e,{sx:(0,g.__assign)({flexShrink:0,color:"icons.close",cursor:"pointer","&:hover":{color:"t.third"}},e.sx)}),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 3.33331L2.5 3.33331V9.16665H4.16667V4.99998H15.8333V15.8333H10.8333V17.5H17.5V3.33331Z",fill:"currentColor"}),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.1665 10.8333H2.49984V17.5H9.1665V10.8333ZM7.49984 12.5V15.8333H4.1665V12.5H7.49984Z",fill:"currentColor"}),p.createElement("path",{d:"M14.1665 13.3334L14.1665 6.66669L7.49984 6.66669L7.49984 8.33335L11.3603 8.33335L7.49984 11.6667L8.67835 12.8452L12.4998 9.51186L12.4998 13.3334L14.1665 13.3334Z",fill:"currentColor"}))},ze=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 20 20",fill:"none"},e),p.createElement("path",{d:"M12.8571 3.57146V7.14289H15V3.57146H12.8571ZM12.1429 2.85718H15.7143V7.85718H12.1429V2.85718ZM9.28571 12.1429H11.4286V8.57146H9.28571V12.1429ZM8.57143 7.85718H12.1429V12.8572H8.57143V7.85718ZM5.71429 17.1429H7.85714V13.5715H5.71429V17.1429ZM5 12.8572H8.57143V17.8572H5V12.8572Z",fill:"currentColor"}))},Xe=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 20 20",fill:"none"},e),p.createElement("path",{d:"M12.8571 17.1429H15V8.57145H12.8571V17.1429ZM12.1429 7.85716H15.7143V17.8572H12.1429V7.85716ZM9.28571 2.14287V7.14287H11.4286V2.14287H9.28571ZM8.57143 1.42859H12.1429V7.85716H8.57143V1.42859ZM5.71429 13.5714H7.85714V8.57145H5.71429V13.5714ZM5 7.85716H8.57143V14.2857H5V7.85716Z",fill:"currentColor"}))},Ge=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 20 20",fill:"none"},e),p.createElement("path",{d:"M7.85714 3.57146H10V12.1429H13.5714V5.71432H15.7143V15H16.4286V5.00004H12.8571V11.4286H10.7143V2.85718H7.14285V15.7143H5V12.1429H4.28571V16.4286H7.85714V3.57146Z",fill:"currentColo"}))},Ye=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 20 20",fill:"none"},e),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.09445 10.9056C9.42933 11.2404 9.88354 11.4286 10.3571 11.4286C10.8307 11.4286 11.2849 11.2404 11.6198 10.9056C11.9547 10.5707 12.1429 10.1165 12.1429 9.64287C12.1429 9.16927 11.9547 8.71507 11.6198 8.38018C11.2849 8.04529 10.8307 7.85715 10.3571 7.85715C9.88354 7.85715 9.42933 8.04529 9.09445 8.38018C8.75956 8.71507 8.57142 9.16927 8.57142 9.64287C8.57142 10.1165 8.75956 10.5707 9.09445 10.9056ZM11.1148 10.4005C10.9138 10.6014 10.6413 10.7143 10.3571 10.7143C10.073 10.7143 9.80045 10.6014 9.59952 10.4005C9.39859 10.1996 9.28571 9.92703 9.28571 9.64287C9.28571 9.35871 9.39859 9.08619 9.59952 8.88525C9.80045 8.68432 10.073 8.57144 10.3571 8.57144C10.6413 8.57144 10.9138 8.68432 11.1148 8.88525C11.3157 9.08619 11.4286 9.35871 11.4286 9.64287C11.4286 9.92703 11.3157 10.1996 11.1148 10.4005ZM9.09445 15.1913C9.42933 15.5262 9.88354 15.7143 10.3571 15.7143C10.8307 15.7143 11.2849 15.5262 11.6198 15.1913C11.9547 14.8564 12.1429 14.4022 12.1429 13.9286C12.1429 13.455 11.9547 13.0008 11.6198 12.6659C11.2849 12.331 10.8307 12.1429 10.3571 12.1429C9.88354 12.1429 9.42933 12.331 9.09445 12.6659C8.75956 13.0008 8.57142 13.455 8.57142 13.9286C8.57142 14.4022 8.75956 14.8564 9.09445 15.1913ZM11.1148 14.6862C10.9138 14.8871 10.6413 15 10.3571 15C10.073 15 9.80045 14.8871 9.59952 14.6862C9.39859 14.4853 9.28571 14.2127 9.28571 13.9286C9.28571 13.6444 9.39859 13.3719 9.59952 13.171C9.80045 12.97 10.073 12.8572 10.3571 12.8572C10.6413 12.8572 10.9138 12.97 11.1148 13.171C11.3157 13.3719 11.4286 13.6444 11.4286 13.9286C11.4286 14.2127 11.3157 14.4853 11.1148 14.6862ZM14.1379 5.35717L12.7093 3.92858L13.2143 3.42358L14.6429 4.85217L16.0714 3.42358L16.5764 3.92858L15.1479 5.35717L16.5764 6.78573L16.0714 7.29073L14.6429 5.86217L13.2143 7.29073L12.7093 6.78573L14.1379 5.35717ZM16.0714 11.5764L14.6429 10.1479L13.2143 11.5764L12.7093 11.0714L14.1379 9.64286L12.7093 8.2143L13.2143 7.7093L14.6429 9.13786L16.0714 7.70927L16.5765 8.21427L15.1479 9.64286L16.5764 11.0714L16.0714 11.5764ZM6.07146 14.4336L7.50002 15.8621L8.00502 15.3571L6.57646 13.9286L8.00502 12.5L7.50002 11.995L6.07146 13.4236L4.64288 11.995L4.13788 12.5L5.56646 13.9286L4.13788 15.3572L4.64288 15.8622L6.07146 14.4336ZM7.50002 7.29073L6.07145 5.86215L4.64288 7.29073L4.13788 6.78573L5.56645 5.35716L4.13788 3.92858L4.64288 3.42358L6.07145 4.85216L7.50002 3.42358L8.00502 3.92858L6.57645 5.35716L8.00502 6.78573L7.50002 7.29073ZM6.07144 10.1479L7.50002 11.5764L8.00502 11.0714L6.57644 9.64285L8.00502 8.21427L7.50002 7.70927L6.07144 9.13786L4.64288 7.7093L4.13788 8.2143L5.56644 9.64285L4.13788 11.0714L4.64288 11.5764L6.07144 10.1479Z",fill:"currentColor"}))},je=function(e){return p.createElement(te.Z,(0,g.__assign)({viewBox:"0 0 20 20",fill:"none"},e),p.createElement("path",{d:"M15.3571 15.7143L14.2857 13.9285M7.5 6.42854V15V6.42854ZM5 13.2143H7.5H5ZM10 6.78568H7.5H10ZM13.9286 2.14282V10.7143V2.14282ZM11.4286 4.64282H13.9286H11.4286ZM16.4286 10.3571H13.9286H16.4286ZM13.2143 13.9285H14.6429C14.8323 13.9285 15.014 13.8533 15.1479 13.7193C15.2819 13.5854 15.3571 13.4037 15.3571 13.2143C15.3571 13.0248 15.2819 12.8431 15.1479 12.7092C15.014 12.5752 14.8323 12.5 14.6429 12.5H13.2143V15.7143V13.9285Z",stroke:"currentColor"}))},qe=i(51072),Qe=i(66306),Je=function(e){var t=e.children;return p.createElement(C.Z,{sx:{ml:"8px",color:"t.disabled"}},t)},$e=function(e){var t=e.children;return p.createElement(C.Z,{sx:{mr:"8px",color:"t.disabled"}},t)},et=i(87872),tt=function(e,t,i,n){return n-e(t)>=e(i)-n?i:t},it=function(e,t,i){var n=e.length;if(i<=t(e[0]))return e[0];if(i>=t(e[n-1]))return e[n-1];for(var r=0,o=n,a=0;r<o;){if(t(e[a=(r+o)/2>>>0])===i)return e[a];if(i<t(e[a])){if(a>0&&i>t(e[a-1]))return tt(t,e[a-1],e[a],i);o=a}else{if(a<n-1&&i<t(e[a+1]))return tt(t,e[a],e[a+1],i);r=a+1}}return e[a]},nt=function(e,t){if(!e.length)return null;var i,n=e.length-1,r=0,o=t(e[r]);if(t(e[n])===o)return null;for(;n>=r;)t(e[i=(n+r)/2>>>0])===o?r=i+1:n=i-1;return r},rt={desktop:1260,tablet:768,phone:480},ot=function(e){var t=e.xData;return{xData:e.yData,yData:t}},at=function(e){return"undefined"!=typeof window&&(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=rt[e]},lt=function(e){var t=e.symbol,i=e.d1Group,n=e.d2Group,r=e.width,o=e.height,a=e.cursor,l=e.scale,s=e.yAxisScale,c=void 0===s?.6:s,u=r/2,d=(0,p.useRef)(Number.NEGATIVE_INFINITY),h=(0,p.useRef)(Number.NEGATIVE_INFINITY);(0,p.useEffect)((function(){d.current=Number.NEGATIVE_INFINITY,h.current=Number.NEGATIVE_INFINITY}),[t]);var f=function(e,t,i){var n,r,o,a,l,s;return void 0===i&&(i=10),{d1:{low:null===(n=e[0])||void 0===n?void 0:n.xData,high:null===(r=e[e.length-1])||void 0===r?void 0:r.xData,atIndex:null===(o=e[i-1])||void 0===o?void 0:o.xData},d2:{low:null===(a=t[t.length-1])||void 0===a?void 0:a.xData,high:null===(l=t[0])||void 0===l?void 0:l.xData,atIndex:null===(s=t[i-1])||void 0===s?void 0:s.xData}}}(i,n),v=f.d1,m=f.d2,y=(m.high+v.low)/2,x=function(e,t){return{min:1/Math.max(e.high-e.low,t.high-t.low)||-1/0,max:1/Math.max((e.atIndex||e.high)-e.low,t.high-(t.atIndex||t.low))||-1/0}}(v,m),b=x.min,C=x.max;d.current=Math.max(b,d.current),h.current=Math.max(C,h.current);var _=function(e,t,i){return e+(t-e)/1e3*i}(d.current,h.current,l),w=(0,p.useCallback)((function(e){return function(e){var t=e.width;return(e.value-e.midValue)*e.scale*t+t}({value:e,width:u,scale:_,midValue:y})}),[u,_,y]),S=(0,p.useCallback)((function(e){return function(e){var t=e.width;return(e.x-t)/t/e.scale+e.midValue}({x:e,width:u,scale:_,midValue:y})}),[u,_,y]),L=function(e){var t,i,n=e.d1Group,r=e.d2Group,o=e.d2Predicate,a=nt(n,e.d1Predicate)||n.length,l=nt(r,o)||r.length,s=null===(t=n[a-1])||void 0===t?void 0:t.yData,c=null===(i=r[l-1])||void 0===i?void 0:i.yData;return{max:Math.max(c,s),maxD1Index:a,maxD2Index:l}}({d1Group:i,d2Group:n,d1Predicate:function(e){return w(e.xData)>r},d2Predicate:function(e){return w(e.xData)<0}}),E=L.max,k=L.maxD1Index,V=L.maxD2Index,A=(0,p.useCallback)((function(e){return function(e){var t=e.height;return t-e.value/e.maxValue*e.scale*t-1}({value:e,height:o,scale:c,maxValue:E})}),[o,E]),T=function(e){var t=e.d1Group,i=e.d2Group,n=e.x,r=e.midValue,o=e.breakpoint,a=e.xToValueFn,l=e.valueToXFn,s=e.valueToYFn,c={xData:NaN,yData:NaN},u={xData:NaN,yData:NaN};if(n&&t.length){var d=void 0;n>o?(d=2*r-(null==(c=it(t,(function(e){return null==e?void 0:e.xData}),a(n)))?void 0:c.xData),u=it(i,(function(e){return-(null==e?void 0:e.xData)}),-d)):(d=2*r-(null==(u=it(i,(function(e){return-(null==e?void 0:e.xData)}),-a(n)))?void 0:u.xData),c=it(t,(function(e){return null==e?void 0:e.xData}),d))}return{d1:(0,g.__assign)((0,g.__assign)({},c),{x:l(null==c?void 0:c.xData)||0,y:s(null==c?void 0:c.yData)||0}),d2:(0,g.__assign)((0,g.__assign)({},u),{x:l(null==u?void 0:u.xData)||0,y:s(null==u?void 0:u.yData)||0})}}({d1Group:i.slice(0,k-1),d2Group:n.slice(0,V-1),x:a.x,midValue:y,breakpoint:u,xToValueFn:S,valueToXFn:w,valueToYFn:A}),M=T.d1,D=T.d2,I=E/c,P=function(e,t,i){var n;n=e>=t?at("mobile")||e<500?3:at("tablet")||e<800?5:10:t<500?3:t<800?5:10;for(var r=i(0),o=(i(e)-r)/n,a=[],l=r+o/2,s=0;s<n;s++)l&&(l>0&&a.push(l),l+=o);return a}(r,o,S),B=function(e,t,i){var n=[20,50,100],r=(t-0)/Math.floor(i/40),o=Math.floor(Math.log10(r)-1),a=r/(o=Math.pow(10,o)),l=0,s=0;for(s=0;s<n.length;s++)if(n[s]>=a){l=n[s]*o;break}var c,u=0;c=Math.ceil(t/l)*l,u=Math.floor(0/l)*l;for(var d=[];u<c;)d.push(parseFloat((u+l).toPrecision(12))),u+=l;return d}(0,I,o);return{width:r,height:o,halfWidth:u,midValue:y,d1:M,d2:D,xTicks:P,yTicks:B,valueToX:w,valueToY:A}},st=function(e){var t=e.initCursorState,i=void 0===t?{x:0,y:0}:t,n=e.scale,r=e.setScale,o=void 0===r?function(){return null}:r,a=(0,g.__read)((0,p.useState)(i),2),l=a[0],s=a[1];return{cursor:l,onMouseMove:function(e){return s({x:e.evt.offsetX,y:e.evt.offsetY})},onMouseLeave:function(){return s(i)},onMouseWheel:(0,p.useCallback)((function(e){var t,i,r=(null===(t=null==e?void 0:e.evt)||void 0===t?void 0:t.deltaY)<0?Math.min(n+5,1e3):Math.max(0,n-5);null==o||o(r),null===(i=null==e?void 0:e.evt)||void 0===i||i.preventDefault()}),[n,o])}},ct=i(9850),ut=i.n(ct),dt=["dont_show_boolean_study_arguments","hide_last_na_study_output","left_toolbar","timeframes_toolbar","keep_left_toolbar_visible_on_small_screens","save_chart_properties_to_local_storage","compare_symbol","snapshot_trading_drawings"],ht=["header_widget","header_symbol_search","symbol_info","header_compare","header_chart_type","display_market_status","symbol_search_hot_key","border_around_the_chart","remove_library_container_border","symbol_info","header_interval_dialog_button","show_interval_dialog_on_key_press","volume_force_overlay","header_resolutions","legend_context_menu"],gt=function(e){var t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m,y,x,b,C,_,w,S,L,E,k,V,A,T,M,D,I,P,B,W,R,H,Z,O;return{volumePaneSize:"medium","symbolWatermarkProperties.transparency":85,"symbolWatermarkProperties.color":"rgba(0, 0, 0, 0)","scalesProperties.textColor":null===(i=null===(t=null==e?void 0:e.colors)||void 0===t?void 0:t.t)||void 0===i?void 0:i.third,"scalesProperties.lineColor":null===(n=null==e?void 0:e.colors)||void 0===n?void 0:n.line,"scalesProperties.backgroundColor":null===(r=null==e?void 0:e.colors)||void 0===r?void 0:r.background,"paneProperties.background":null===(o=null==e?void 0:e.colors)||void 0===o?void 0:o.moduleBg,"paneProperties.horzGridProperties.color":null===(a=null==e?void 0:e.colors)||void 0===a?void 0:a.lineForK,"paneProperties.vertGridProperties.color":null===(l=null==e?void 0:e.colors)||void 0===l?void 0:l.lineForK,"paneProperties.crossHairProperties.color":null===(c=null===(s=null==e?void 0:e.colors)||void 0===s?void 0:s.t)||void 0===c?void 0:c.secondary,"candleStyle.upColor":null===(u=null==e?void 0:e.colors)||void 0===u?void 0:u.buy,"candleStyle.downColor":null===(d=null==e?void 0:e.colors)||void 0===d?void 0:d.sell,"candleStyle.drawWick":!0,"candleStyle.drawBorder":!0,"candleStyle.borderColor":"transparent","candleStyle.borderUpColor":null===(h=null==e?void 0:e.colors)||void 0===h?void 0:h.buy,"candleStyle.borderDownColor":null===(g=null==e?void 0:e.colors)||void 0===g?void 0:g.sell,"candleStyle.wickUpColor":null===(p=null==e?void 0:e.colors)||void 0===p?void 0:p.buy,"candleStyle.wickDownColor":null===(f=null==e?void 0:e.colors)||void 0===f?void 0:f.sell,"hollowCandleStyle.upColor":null===(v=null==e?void 0:e.colors)||void 0===v?void 0:v.buy,"hollowCandleStyle.downColor":null===(m=null==e?void 0:e.colors)||void 0===m?void 0:m.sell,"hollowCandleStyle.drawWick":!0,"hollowCandleStyle.drawBorder":!0,"hollowCandleStyle.borderColor":"transparent","hollowCandleStyle.borderUpColor":null===(y=null==e?void 0:e.colors)||void 0===y?void 0:y.buy,"hollowCandleStyle.borderDownColor":null===(x=null==e?void 0:e.colors)||void 0===x?void 0:x.sell,"hollowCandleStyle.wickUpColor":null===(b=null==e?void 0:e.colors)||void 0===b?void 0:b.buy,"hollowCandleStyle.wickDownColor":null===(C=null==e?void 0:e.colors)||void 0===C?void 0:C.sell,"haStyle.upColor":null===(_=null==e?void 0:e.colors)||void 0===_?void 0:_.buy,"haStyle.downColor":null===(w=null==e?void 0:e.colors)||void 0===w?void 0:w.sell,"haStyle.drawWick":!0,"haStyle.drawBorder":!0,"haStyle.borderColor":"transparent","haStyle.borderUpColor":null===(S=null==e?void 0:e.colors)||void 0===S?void 0:S.buy,"haStyle.borderDownColor":null===(L=null==e?void 0:e.colors)||void 0===L?void 0:L.sell,"haStyle.wickUpColor":null===(E=null==e?void 0:e.colors)||void 0===E?void 0:E.buy,"haStyle.wickDownColor":null===(k=null==e?void 0:e.colors)||void 0===k?void 0:k.sell,"barStyle.upColor":null===(V=null==e?void 0:e.colors)||void 0===V?void 0:V.buy,"barStyle.downColor":null===(A=null==e?void 0:e.colors)||void 0===A?void 0:A.sell,"lineStyle.color":null===(T=null==e?void 0:e.colors)||void 0===T?void 0:T.buy,"areaStyle.color1":null===(M=null==e?void 0:e.colors)||void 0===M?void 0:M.buy,"areaStyle.color2":null===(D=null==e?void 0:e.colors)||void 0===D?void 0:D.sell,"areaStyle.linecolor":null===(I=null==e?void 0:e.colors)||void 0===I?void 0:I.sell,"baselineStyle.baselineColor":null===(P=null==e?void 0:e.colors)||void 0===P?void 0:P.buy,"baselineStyle.topFillColor1":null===(B=null==e?void 0:e.colors)||void 0===B?void 0:B.buy,"baselineStyle.topFillColor2":null===(W=null==e?void 0:e.colors)||void 0===W?void 0:W.sell,"baselineStyle.bottomFillColor1":null===(R=null==e?void 0:e.colors)||void 0===R?void 0:R.buy,"baselineStyle.bottomFillColor2":null===(H=null==e?void 0:e.colors)||void 0===H?void 0:H.sell,"baselineStyle.topLineColor":null===(Z=null==e?void 0:e.colors)||void 0===Z?void 0:Z.buy,"baselineStyle.bottomLineColor":null===(O=null==e?void 0:e.colors)||void 0===O?void 0:O.sell}},pt=function(e){return{originalTheme:e,overrides:gt(e)}},ft=["1S","1","3","5","15","30","60","120","240","360","480","720","1D","3D","1W","1M"],vt=function(){var e=new Map,t={},i=[];return function(n){var r=n.config,o=n.onSymbolResolved,a=n.onFetchSymbolsInfo,l=n.onFetchBars,s=n.onSubscribeBars,c=n.onUnsubscribeBars,u=n.onFetchServerTimeApi,d=n.onTransformSymbolInfo,h=void 0===d?function(e){return e.template}:d;return{datafeed:{onReady:function(e){setTimeout((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(n){switch(n.label){case 0:return[4,a()];case 1:return t=n.sent(),i=Object.keys(t).map((function(e){var i=t[e],n=i.ticker,r=i.name,o=i.fullName,a=i.description,l=void 0===a?"":a,s=i.exchange,c=void 0===s?"":s,u=i.type;return{symbol:r,ticker:n,full_name:o,description:l,exchange:c,type:void 0===u?"":u}})),e((0,g.__assign)({exchanges:[],symbols_types:[],supported_resolutions:ft,supports_marks:!1,supports_timescale_marks:!1,supports_time:!0},r)),[2]}}))}))}))},resolveSymbol:function(e,i,n){var r=t[e];if(r){var a=h({info:r,template:{description:r.description||"",fractional:!1,has_seconds:!0,seconds_multipliers:["1"],has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,minmov:1,minmove2:0,name:r.name,full_name:r.fullName,ticker:r.ticker,timezone:"Etc/UTC",pricescale:r.tickSize,session:"24x7",type:r.type||"",exchange:r.exchange||"",listed_exchange:r.exchange||"",format:"price",supported_resolutions:r.supportedResolutions||ft}});setTimeout((function(){i(a),null==o||o(a)}))}else n("cannot resolve symbol - "+e)},searchSymbols:function(e,t,n,r){var o=new RegExp(e,"i"),a=new RegExp(t,"i"),l=new RegExp(n,"i");r(i.filter((function(e){var t=e.symbol,i=e.ticker,n=e.full_name,r=e.description,s=void 0===r?"":r,c=e.exchange,u=void 0===c?"":c,d=e.type,h=void 0===d?"":d;return[t,i,n,s].some((function(e){return o.test(e)}))&&a.test(u)&&l.test(h)})))},getBars:function(e,t,i,n,r,o){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var a,s;return(0,g.__generator)(this,(function(c){switch(c.label){case 0:a=[],c.label=1;case 1:return c.trys.push([1,4,,5]),n>=0?[4,l({symbolInfo:e,resolution:t,rangeStartDate:i,rangeEndDate:n})]:[3,3];case 2:a=c.sent(),c.label=3;case 3:return r(a,{noData:0===a.length}),[3,5];case 4:return s=c.sent(),o(s.toString()),[3,5];case 5:return[2]}}))}))},subscribeBars:function(t,i,n,r,o){var a=s({symbolInfo:t,resolution:i,callback:n,onResetCacheNeededCallback:o});e.set(r,a)},unsubscribeBars:function(t){var i;null===(i=null==e?void 0:e.get(t))||void 0===i||i(),null==e||e.delete(t),null==c||c(t)},getServerTime:function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,u()];case 1:return t=i.sent(),e(t),[3,3];case 2:return i.sent(),e(Date.now()/1e3),[3,3];case 3:return[2]}}))}))}},observers:e,symbolsInfo:t}}},mt=i(27027),yt=i(20140),xt=function(e){var t=e.widget,i=e.theme,n=e.styles,r=e.onSave,o=void 0===r?function(){return null}:r,a=e.onSetThemeDone;return function(e){var t=e.widget,i=e.theme,n=t.chart().getCheckableActionState("showCountdown");t.changeTheme(i),n?new Promise((function(e){setTimeout((function(){t.chart().executeActionById("showCountdown"),e()}),0)})):Promise.resolve()}({widget:t,theme:i}),new Promise((function(e){setTimeout((function(){t.applyOverrides(n.overrides),function(e){var t=e.widget,i=e.styles;try{var n=t.activeChart().getAllStudies().find((function(e){var t;return"volume"===(null===(t=null==e?void 0:e.name)||void 0===t?void 0:t.toLowerCase())}));n&&t.activeChart().getStudyById(n.id).applyOverrides({"volume.color.0":(0,k.D)(i.overrides["candleStyle.downColor"],.5),"volume.color.1":(0,k.D)(i.overrides["candleStyle.upColor"],.5)})}catch(e){}}({widget:t,styles:n}),t.save(o),null==a||a(),e()}),0)}))},bt=function(e){var t=e.widget,i=e.seriesStyle;t.applyOverrides({"mainSeriesProperties.style":i})},Ct=function(e){var t=e.tradingViewSave,i=e.widget,n=e.theme,r=e.styles;return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return t?[2,Promise.resolve()]:[4,xt({widget:i,theme:n,styles:r})];case 1:return e.sent(),[2]}}))}))},_t=function(e){var t=e.tradingViewSave,i=e.theme,n=e.styles,r=e.seriesStyle,o=e.widget,a=e.onInitStudies;return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,Ct({widget:o,tradingViewSave:t,theme:i,styles:n})];case 1:return e.sent(),null==a||a({tradingViewSave:t,widget:o}),bt({widget:o,seriesStyle:r}),[2]}}))}))},wt=function(e){var t=e.symbol,i=e.symbolsInfo,n=void 0===i?{}:i,r=e.interval,o=e.theme,a=e.styles,l=e.limitOrders,s=void 0===l?[]:l,c=e.positionOrders,u=void 0===c?[]:c,d=e.executionOrders,h=void 0===d?[]:d,f=e.seriesStyle,v=e.showIndicators,m=e.isChartReady,y=e.overwritingThemeOnLoaded,x=void 0!==y&&y,b=e.widget,C=e.initialConfig,_=C.tvConfig,w=C.onSave,L=C.onCreateOrderShapesError,E=C.onLoadConfig,k=void 0===E?function(){return Promise.resolve(null)}:E,V=C.onLoading,A=C.onWidgetInitialized,T=C.onChartReadyDone,M=C.onChartReadyError,D=C.onWillUnmount,I=C.onWidgetRefNotFoundError,P=C.onScriptLoaded,B=C.onScriptLoadingError,W=C.onFirstTimeSetThemeDone,R=C.onSetThemeDone,H=C.onFirstTimeDataLoadedDone,Z=C.onDataLoadedDone,O=C.onTradingViewInitError,N=C.onVisibleRangeChanged,F=C.onSymbolWillChange,K=C.onSymbolChanged,U=C.onIntervalChanged,z=C.onInitStudies,X=(0,g.__read)((0,p.useState)(0),2),G=X[0],Y=X[1],j=(0,p.useCallback)((function(){return Y((function(e){return e+1}))}),[Y]),q=(0,p.useRef)([]),Q=(0,p.useRef)([]),J=(0,p.useRef)([]),$=(0,p.useRef)(),ee=(0,p.useRef)(t),te=(0,p.useRef)(n),ie=(0,p.useRef)(o),ne=(0,p.useRef)(a),re=(0,p.useRef)(x);(0,p.useEffect)((function(){ie.current=o}),[o]),(0,p.useEffect)((function(){ne.current=a}),[a]),(0,p.useEffect)((function(){re.current=x}),[x]),(0,p.useEffect)((function(){ee.current=t}),[t]),(0,p.useEffect)((function(){te.current=n}),[n]);var oe=(0,p.useCallback)((function(){$.current&&function(e){var t=e.onSave,i=void 0===t?function(){return Promise.resolve()}:t;e.widget.save(i)}({widget:$.current,onSave:w})}),[w]),ae=(0,p.useCallback)((function(e){if($.current&&e){var t=$.current.activeChart().getStudyById(e),i=ee.current,n=(te.current[i]||{}).tickSize,r=void 0===n?1e7:n,o=Math.log10(r);null==t||t.applyOverrides({precision:o})}}),[]),le=(0,p.useCallback)((function(){$.current&&$.current.activeChart().getAllStudies().filter((function(e){return"Volume"!==e.name})).forEach((function(e){var t=e.id;return ae(t)}))}),[ae]),se=(0,p.useCallback)((function(){setTimeout((function(){var e;if($.current){var t=$.current.activeChart().getAllStudies();ae(null===(e=t[0])||void 0===e?void 0:e.id),oe()}}),0)}),[ae,oe]),ce=(0,p.useCallback)((function(){null==V||V(!0),null==K||K(),le()}),[le,V,K]),ue=(0,p.useCallback)((function(){null==V||V(!0),null==U||U()}),[U,V]),de=(0,p.useCallback)((function(){null==V||V(!1),j(),null==H||H(),le()}),[le,j,H,V]),he=(0,p.useCallback)((function(){null==V||V(!1),j(),null==Z||Z()}),[j,Z,V]),ge=(0,p.useCallback)((function(e){var t=e.from,i=e.to;null==N||N({startTime:1e3*t,endTime:1e3*i})}),[N]),pe=(0,p.useCallback)((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,t,i;return(0,g.__generator)(this,(function(n){switch(n.label){case 0:return null==P||P(),[4,k()];case 1:e=n.sent(),t=function(e,t){var i=e.tradingViewSave,n=e.styles,r=t.symbol,o=t.interval,a=t.theme,l=void 0===a?"Dark":a,s=t.library_path,c=t.custom_css_url,u=void 0===c?"./themed.css":c,d=t.locale,h=void 0===d?"en":d,p=t.overrides,f=t.debug,v=void 0!==f&&f,m=t.time_frames,y=void 0===m?[]:m,x=t.autosize,b=void 0===x||x,C=t.toolbar_bg,_=void 0===C?"transparent":C,w=t.studies_overrides,S=t.loading_screen,L=t.enabled_features,E=void 0===L?dt:L,k=t.disabled_features,V=void 0===k?ht:k,A=(0,g.__rest)(t,["symbol","interval","theme","library_path","custom_css_url","locale","overrides","debug","time_frames","autosize","toolbar_bg","studies_overrides","loading_screen","enabled_features","disabled_features"]),T="Asia/Shanghai";try{T=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}var M=ut()(i);if(M)for(var D=0;D<M.charts[0].panes.length;D++)M.charts[0].panes[D].sources[0].state.symbol=r,M.charts[0].panes[D].sources[0].state.interval=o;return(0,g.__assign)((0,g.__assign)({},A),{symbol:r,interval:o,timezone:T,theme:l,library_path:s,custom_css_url:u,locale:h,overrides:p,debug:v,time_frames:y,autosize:b,toolbar_bg:_,studies_overrides:w,loading_screen:S||{backgroundColor:n.overrides["paneProperties.background"]},enabled_features:E,disabled_features:V,saved_data:M||void 0})}({tradingViewSave:e,styles:a},_);try{$.current=new window.TradingView.widget(t),null==A||A(),null===(i=$.current)||void 0===i||i.onChartReady((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:if(!$.current)return[2,null==I?void 0:I()];i.label=1;case 1:return i.trys.push([1,5,,6]),$.current.subscribe("onAutoSaveNeeded",oe),$.current.subscribe("study",se),$.current.chart().onDataLoaded().subscribe(null,de,!0),$.current.chart().onDataLoaded().subscribe(null,he),$.current.chart().onSymbolChanged().subscribe(null,ce),$.current.chart().onIntervalChanged().subscribe(null,ue),$.current.chart().onVisibleRangeChanged().subscribe(null,ge),[4,_t({tradingViewSave:e,theme:o,styles:a,seriesStyle:f,widget:$.current,onInitStudies:z})];case 2:return i.sent(),re.current?[4,xt({widget:$.current,theme:ie.current,styles:ne.current,onSave:w,onSetThemeDone:W})]:[3,4];case 3:i.sent(),i.label=4;case 4:return setTimeout(le,0),null==T||T(),[3,6];case 5:return t=i.sent(),null==M||M(t),[3,6];case 6:return[2]}}))}))}))}catch(e){null==O||O(e)}return[2]}}))}))}),[]);return(0,p.useLayoutEffect)((function(){if(window.TradingView)pe();else{var e=document.createElement("script");e.src=_.library_path+"charting_library.js",e.async=!1,e.addEventListener("load",pe),e.addEventListener("error",(function(e){return null==B?void 0:B(e)})),document.head.appendChild(e)}}),[]),(0,mt.Z)((function(){var e;$.current&&(null===(e=$.current)||void 0===e||e.remove(),$.current=void 0,null==D||D())})),(0,yt.Z)((function(){var e;if(0!==G&&$.current)try{null===(e=q.current)||void 0===e||e.forEach((function(e){return e.remove()})),q.current=function(e){var t=e.widget,i=e.styles;return e.shapes.map((function(e){return function(e){var t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m,y,x,b,C,_=e.widget,w=e.order,S=w.id,L=w.text,E=w.price,k=w.quantity,V=w.isBuy,A=w.tooltip,T=void 0===A?"":A,M=w.modifyTooltip,D=void 0===M?"":M,I=w.cancelTooltip,P=void 0===I?"":I,B=w.editable,W=w.onMove,R=w.onModify,H=w.onCancel,Z=e.styles,O=V?null===(i=null===(t=Z.originalTheme)||void 0===t?void 0:t.colors)||void 0===i?void 0:i.buy:null===(r=null===(n=Z.originalTheme)||void 0===n?void 0:n.colors)||void 0===r?void 0:r.sell,N=_.chart().createOrderLine({}).setText(L).setPrice(E).setQuantity(k).setTooltip(T).setModifyTooltip(D).setCancelTooltip(P).setEditable(B).setExtendLeft(!1).setLineLength(65).setLineStyle(2).setLineColor(O).setBodyFont("normal 14pt Verdana").setQuantityFont("normal 14pt Verdana").setBodyBorderColor(O).setBodyBackgroundColor(O).setBodyTextColor(null===(l=null===(a=null===(o=Z.originalTheme)||void 0===o?void 0:o.colors)||void 0===a?void 0:a.t)||void 0===l?void 0:l.primary).setQuantityBorderColor(null===(c=null===(s=Z.originalTheme)||void 0===s?void 0:s.colors)||void 0===c?void 0:c.line).setQuantityBackgroundColor(null===(d=null===(u=Z.originalTheme)||void 0===u?void 0:u.colors)||void 0===d?void 0:d.popupBg).setQuantityTextColor(null===(p=null===(g=null===(h=Z.originalTheme)||void 0===h?void 0:h.colors)||void 0===g?void 0:g.t)||void 0===p?void 0:p.secondary).setCancelButtonBorderColor(null===(v=null===(f=Z.originalTheme)||void 0===f?void 0:f.colors)||void 0===v?void 0:v.line).setCancelButtonBackgroundColor(null===(y=null===(m=Z.originalTheme)||void 0===m?void 0:m.colors)||void 0===y?void 0:y.popupBg).setCancelButtonIconColor(null===(C=null===(b=null===(x=Z.originalTheme)||void 0===x?void 0:x.colors)||void 0===b?void 0:b.t)||void 0===C?void 0:C.secondary);return N.onModify((function(){return R({id:S,text:N.getText(),price:N.getPrice(),quantity:N.getQuantity()})})).onMove((function(){return W({id:S,text:N.getText(),price:N.getPrice(),quantity:N.getQuantity()})})).onCancel((function(){return H({id:S,text:N.getText(),price:N.getPrice(),quantity:N.getQuantity()})})),N}({widget:t,order:e,styles:i})}))}({widget:$.current,styles:a,shapes:s})}catch(e){null==L||L(e)}}),[G,s,a]),(0,yt.Z)((function(){var e;if(0!==G&&$.current)try{null===(e=Q.current)||void 0===e||e.forEach((function(e){return e.remove()})),Q.current=function(e){var t=e.widget,i=e.styles;return e.shapes.map((function(e){return function(e){var t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m=e.widget,y=e.position,x=y.text,b=y.price,C=y.PNL,_=y.quantity,w=y.tooltip,S=e.styles,L=+_>0?null===(i=null===(t=S.originalTheme)||void 0===t?void 0:t.colors)||void 0===i?void 0:i.buy:null===(r=null===(n=S.originalTheme)||void 0===n?void 0:n.colors)||void 0===r?void 0:r.sell,E=C>0?null===(a=null===(o=S.originalTheme)||void 0===o?void 0:o.colors)||void 0===a?void 0:a.buy:C<0?null===(s=null===(l=S.originalTheme)||void 0===l?void 0:l.colors)||void 0===s?void 0:s.sell:L;return m.chart().createPositionLine({}).setText(x).setPrice(b).setQuantity(_).setTooltip(w).setExtendLeft(!1).setLineLength(100).setLineStyle(2).setLineColor(E).setBodyFont("normal 14pt Verdana").setQuantityFont("normal 14pt Verdana").setBodyBorderColor(E).setBodyBackgroundColor(E).setBodyTextColor(null===(d=null===(u=null===(c=S.originalTheme)||void 0===c?void 0:c.colors)||void 0===u?void 0:u.t)||void 0===d?void 0:d.primary).setQuantityBorderColor(L).setQuantityBackgroundColor(null===(g=null===(h=S.originalTheme)||void 0===h?void 0:h.colors)||void 0===g?void 0:g.popupBg).setQuantityTextColor(null===(v=null===(f=null===(p=S.originalTheme)||void 0===p?void 0:p.colors)||void 0===f?void 0:f.t)||void 0===v?void 0:v.primary)}({widget:t,position:e,styles:i})}))}({widget:$.current,styles:a,shapes:u})}catch(e){null==L||L(e)}}),[G,u,a]),(0,yt.Z)((function(){var e;if(0!==G&&$.current)try{null===(e=J.current)||void 0===e||e.forEach((function(e){return e.remove()})),J.current=function(e){var t=e.widget,i=e.styles;return e.shapes.map((function(e){return function(e){var t,i,n,r,o,a,l,s=e.widget,c=e.executionShape,u=c.price,d=c.time,h=c.text,g=c.tooltip,p=c.isBuy,f=e.styles,v=p?null===(i=null===(t=f.originalTheme)||void 0===t?void 0:t.colors)||void 0===i?void 0:i.buy:null===(r=null===(n=f.originalTheme)||void 0===n?void 0:n.colors)||void 0===r?void 0:r.sell;return s.chart().createExecutionShape({}).setPrice(u).setTime(d).setDirection(p?"buy":"sell").setText(h).setTooltip(g).setArrowHeight(8).setArrowSpacing(1).setArrowColor(v).setTextColor(null===(l=null===(a=null===(o=f.originalTheme)||void 0===o?void 0:o.colors)||void 0===a?void 0:a.t)||void 0===l?void 0:l.primary).setFont("normal 14pt Verdana")}({widget:t,executionShape:e,styles:i})}))}({widget:$.current,styles:a,shapes:h})}catch(e){null==L||L(e)}}),[G,h,a]),(0,yt.Z)((function(){m&&$.current&&bt({widget:$.current,seriesStyle:f})}),[f]),(0,yt.Z)((function(){m&&$.current&&(null==F||F(t))}),[m,F,t]),(0,yt.Z)((function(){m&&$.current&&function(e){var t=e.widget,i=e.symbol,n=e.interval,r=e.onDone,o=void 0===r?function(){return null}:r;t.setSymbol(i,n,(function(){t.activeChart().symbol()!==i?t.setSymbol(i,n,o):o()}))}({widget:$.current,symbol:t,interval:r})}),[t,r]),(0,yt.Z)((function(){m&&$.current&&xt({widget:$.current,theme:o,styles:a,onSetThemeDone:R,onSave:w})}),[o,a,w]),(0,yt.Z)((function(){m&&$.current&&function(e){e.chart().executeActionById("insertIndicator")}($.current)}),[v]),(0,p.useImperativeHandle)(b,(function(){return $.current})),p.createElement(S.Z,{id:_.container_id,style:{height:"100%"}})},St=function(e){var t=(0,g.__read)((0,p.useState)(!1),2),i=t[0],n=t[1],r=(0,p.useMemo)((function(){return ut()(e.initialConfig)}),[]),o=(0,p.useCallback)((function(){var e;n(!0),null===(e=r.onChartReadyDone)||void 0===e||e.call(r)}),[r]),a=(0,g.__assign)((0,g.__assign)({},e),{isChartReady:i,initialConfig:(0,g.__assign)((0,g.__assign)({},r),{onChartReadyDone:o})});return p.createElement(S.Z,{sx:{height:"100%",position:"relative"}},p.createElement(wt,(0,g.__assign)({},a)),!i&&p.createElement(S.Z,{sx:{height:"100%",width:"100%",background:e.styles.overrides["paneProperties.background"],position:"absolute",left:0,top:0}},p.createElement(Y,null)))},Lt=i(25291),Et=i.n(Lt),kt=i(75486),Vt=i.n(kt),At=i(13185),Tt=i.n(At),Mt=i(95260),Dt=i(8042),It=i(57207),Pt=i(71644),Bt=i.n(Pt),Wt=i(65680),Rt=i.n(Wt),Ht=i(33958),Zt=i.n(Ht),Ot=i(98537),Nt=i.n(Ot),Ft=i(18149),Kt=i.n(Ft),Ut=i(13318),zt=i(1868),Xt=i.n(zt),Gt=i(21842),Yt=i.n(Gt),jt=i(55324),qt=i.n(jt),Qt=i(10937),Jt=i.n(Qt),$t=i(9907),ei=i.n($t);const ti=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bound={x:0,y:0,width:0,height:0},t}return(0,g.__extends)(t,e),t.prototype.getBound=function(){return this.bound},t.prototype.setBound=function(e){return this.bound=Object.assign(this.bound||{},e),this},t.prototype.updateBound=function(e,t){this.bound[e]=t},t.prototype.contain=function(e){return e.x>=this.bound.x&&e.y<=this.bound.y&&e.x-this.bound.x<=this.bound.width&&this.bound.y-e.y<=this.bound.height},t.prototype.transformPointToView=function(e){return{x:e.x-this.bound.x,y:this.bound.y-e.y}},t.prototype.setCanvasTransform=function(e){e.scale(this.devicePixelRatio,this.devicePixelRatio),e.translate(this.bound.x,this.bound.y)},t.prototype.initialCtxs=function(e){var t=this;e.forEach((function(e){e&&(e.save(),t.setCanvasTransform(e))}))},t.prototype.restoreCtxs=function(e){e.forEach((function(e){var t;return null===(t=null==e?void 0:e.restore)||void 0===t?void 0:t.call(e)}))},t.prototype.getClearBound=function(e){void 0===e&&(e=0);var t=this.bound,i=t.x,n=t.y,r=t.width,o=t.height;return{x:i*this.devicePixelRatio,y:(n-o)*this.devicePixelRatio,width:r*this.devicePixelRatio,height:(o+e)*this.devicePixelRatio}},t.prototype.createClipBound=function(e,t){void 0===t&&(t=0),Array.isArray(e)?e.forEach(this.createClipBound.bind(this)):(e.beginPath(),e.rect(-.5,-this.bound.height-.5,this.bound.width,this.bound.height+t),e.clip())},t.prototype.afterSetParent=function(){},t.defaultConfig=(0,g.__assign)((0,g.__assign)({},Ut.Z.defaultConfig),{zIndex:0}),t}(Ut.Z);var ii=i(46772);const ni=function(){function e(e,t){this._min=0,this._max=0,this._min=e,this._max=t}return e.prototype.isInvalid=function(){return!(0,ii.hj)(this._min)||!(0,ii.hj)(this._max)},e.prototype.getMinValue=function(){return this._min},e.prototype.setMinValue=function(e){return this._min=e,this},e.prototype.getMaxValue=function(){return this._max},e.prototype.setMaxValue=function(e){return this._max=e,this},e.prototype.getInterval=function(){return this._max-this._min},e.prototype.getCenter=function(){return(this._max+this._min)/2},e.prototype.clone=function(){return new e(this._min,this._max)},e.prototype.toArray=function(){return[this._min,this._max]},e.prototype.isEqual=function(e){return(0,It.Fr)(this._max-e._max)&&(0,It.Fr)(this._min-e._min)},e.prototype.merge=function(e){e.isInvalid()||(this.setMaxValue(Math.max(this._max,e.getMaxValue())),this.setMinValue(Math.min(this._min,e.getMinValue())))},e.prototype.scaleAroundCenter=function(e){if((0,ii.hj)(e)){var t=.5*(this._min+this._max),i=.5*(this._max-this._min)*e;this._min=t-i,this._max=t+i}},e.prototype.scaleAroundPoint=function(e,t){if((0,ii.hj)(e)&&(0,ii.hj)(t)){var i=e-this.getMinValue(),n=this.getMaxValue()-e;this._min=e-i*t,this._max=e+n*t}},e.prototype.scaleAboveBottom=function(e){if((0,ii.hj)(e)){var t=this.getInterval();this._max=this._min+t*e}},e.prototype.shift=function(e){return(0,ii.hj)(e)?(this._min+=e,this._max+=e,this):this},e.prototype.contains=function(e,t){return void 0===t&&(t=!0),t?this._min<e.getMinValue()&&this._max>e.getMaxValue():this._min<=e.getMinValue()&&this._max>=e.getMaxValue()},e.prototype.contain=function(e,t){return void 0===t&&(t=!1),t?e>this.getMinValue()&&e<this.getMaxValue():e>=this.getMinValue()&&e<=this.getMaxValue()},e.prototype.sliceArray=function(e,t){var i=this;if(0===e.length)return e;var n=(0,It.ry)(e,(function(e){var n=t(e);return i._min<=n?-1:1})),r=(0,It.ry)(e,(function(e){var n=t(e);return i._max<n?-1:1}));return e.slice(n,r)},e.prototype.getSliceArrayIndexs=function(e,t){var i=this;return 0===e.length?[0,0]:[(0,It.ry)(e,(function(e){var n=t(e);return i._min<=n?-1:1})),(0,It.ry)(e,(function(e){var n=t(e);return i._max<n?-1:1}))]},e}(),ri=function(){function e(e,t,i){void 0===i&&(i=!0),this.unitWidth=0,this._originUnitWidth=30,this._displayUnitWidth=0,this._scaleCoeff=1.2,this._maxScaleCoeff=6,this._minScaleCoeff=1.2,this.domainRange=new ni(e[0],e[1]),this.coordRange=new ni(t[0],t[1]),this._displayUnitWidth=this.unitWidth=this._originUnitWidth/this._scaleCoeff,i&&this.domainRange.scaleAroundCenter(this._scaleCoeff)}return e.prototype.setCurrentScaleCoeff=function(e){this._scaleCoeff=e,this.domainRange.scaleAroundCenter(this._scaleCoeff)},e.prototype.getCurrentScaleCoeff=function(){return this._scaleCoeff},e.prototype.setUnitWidth=function(e){this.unitWidth=e},e.prototype.isValid=function(){return this.domainRange.getInterval()>0},e.prototype.getAxisData=function(e){var t=this;void 0===e&&(e=function(e){return e}),(this._displayUnitWidth<=this._originUnitWidth/1.5||this._displayUnitWidth>=1.5*this._originUnitWidth)&&(this._displayUnitWidth=this._originUnitWidth);var i=Math.ceil(this.coordRange.getInterval()/this._originUnitWidth+1e-5);if(i<=0)return[];var n=this.domainRange,r=(0,It.BM)(n.getMaxValue(),n.getMinValue(),i),o=r.min,a=r.step;return(0,g.__spreadArray)([],(0,g.__read)(Array(i+1))).map((function(i,n){var r=o+n*a;return{p:t.getCoordOfValue(r),v:e(r)}}))},e.prototype.getUnitTimeValue=function(){return this.domainRange.getInterval()/this.coordRange.getInterval()*this.unitWidth},e.prototype.getScaleCoeff=function(){return this._scaleCoeff},e.prototype.getCoordOfValue=function(e){var t=this.domainRange.getInterval(),i=this.coordRange.getInterval();return this.coordRange.getMinValue()+(e-this.domainRange.getMinValue())/t*i},e.prototype.getValueOfCoord=function(e){var t=this.domainRange.getInterval(),i=this.coordRange.getInterval();return this.domainRange.getMinValue()+(e-this.coordRange.getMinValue())/i*t},e.prototype.scaleAroundCenter=function(e){this._scaleCoeff*e>this._maxScaleCoeff||this._scaleCoeff*e<this._minScaleCoeff||(this.unitWidth/=e,this._displayUnitWidth/=e,this._scaleCoeff*=e,this.domainRange.scaleAroundCenter(e))},e.prototype.scaleAboveBottom=function(e){this._scaleCoeff*e>this._maxScaleCoeff||this._scaleCoeff*e<this._minScaleCoeff||(this.unitWidth/=e,this._displayUnitWidth/=e,this._scaleCoeff*=e,this.domainRange.scaleAboveBottom(e))},e}(),oi=function(e){function t(t,i){var n=e.call(this,t,i,!1)||this;return n._scaleCoeff=1,n._maxScaleCoeff=4,n._minScaleCoeff=1,n.unitWidth/=n._scaleCoeff,n}return(0,g.__extends)(t,e),t.prototype.scaleAroundCenter=function(e){this._scaleCoeff*e>this._maxScaleCoeff||this._scaleCoeff*e<this._minScaleCoeff||(this.unitWidth/=e,this._scaleCoeff*=e,this.domainRange.scaleAboveBottom(e))},t}(ri);var ai=i(98572),li=i.n(ai);const si=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._shapes=[],t._annotationSet=new Set,t._isWaiting=!1,t}return(0,g.__extends)(t,e),Object.defineProperty(t.prototype,"xAxis",{get:function(){return this.getRoot().getXAxis()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TitleContainer",{get:function(){return this.root.titleContainer},enumerable:!1,configurable:!0}),t.prototype.getShapes=function(){return this._shapes},t.prototype.getAnnotations=function(){return Array.from(this._annotationSet)},t.prototype.addAnnotation=function(e){!this._annotationSet.has(e)&&this._annotationSet.add(e)},t.prototype.removeAnnotation=function(e){this._annotationSet.delete(e)},t.prototype.eachAnnotations=function(e){for(var t=this.getAnnotations(),i=t.length-1;i>=0;--i)e(t[i])},t.prototype.addShapes=function(e){e.forEach(this.addShape.bind(this))},t.prototype.addShape=function(e){this._shapes.push(e)},t.prototype.removeShape=function(e){for(var t=this._shapes,i=t.length-1;i>=0;i--)if(t[i]===e){t.splice(i,1);break}},t.prototype.update=function(e){var t=this;void 0===e&&(e=Dt.mB.All),this._isWaiting||(this._isWaiting=!0,setTimeout((function(){t.render(e),t._isWaiting=!1}),16))},t.prototype.updateImmediate=function(e){void 0===e&&(e=Dt.mB.All),this.render(e)},t.prototype.setParent=function(e){if(this._parent)throw new Error("Current Node had parent, Pls do not set parent repeatly!");this._parent=e},t.prototype.getParent=function(){return this._parent},t.prototype.getRoot=function(){return this._parent instanceof Ii?this._parent.getParent():this._parent},t.prototype.getYAxisWidth=function(){return this.getRoot().getAttr("margin").right||0},t.prototype.getXAxisHeight=function(){return this.getRoot().getAttr("xAxis").height||0},t.prototype.updateAnnotations=function(){this._annotationSet.forEach((function(e){e.updateData()}))},t.prototype.plotShapes=function(e){var t=this.getBound();this.updateAnnotations();for(var i=0,n=this._shapes.length;i<n;i++){var r=this._shapes[i],o=r.isVisible((0,g.__assign)((0,g.__assign)({},t),{y:0,x:0}));r.setAttr("isContain",o),o&&r.draw(e)}},t.prototype.transformToGroup=function(e,t,i){return void 0===t&&(t="color"),void 0===i&&(i=!1),i?e.reduce((function(e,t,i,n){var r=n.length,o=e.compare,a="string"==typeof o?t[o]:o(t);return e.group.push(t),e.result[a]||(e.result[a]=[]),e.lastCompare===a&&i!==r-1||(e.result[e.lastCompare||a].push(e.group),e.group=[t]),e.lastCompare=a,e}),{result:{},group:[],compare:t,lastCompare:""}).result:li()(e,t)},t.prototype.plotGroupGraphs=function(e,t,i,n,r){var o,a=this;void 0===r&&(r=!1);var l=((o={})[Dt.oX.Line]=this.renderer.drawPolyline,o[Dt.oX.Bar]=this.renderer.drawBars,o[Dt.oX.HollowBar]=this.renderer.drawHollowBars,o[Dt.oX.CandleBar]=this.renderer.drawCandlestickBars,o[Dt.oX.Point]=this.renderer.drawPoints,o[Dt.oX.CrossLine]=this.renderer.drawCrossLines,o[Dt.oX.Area]=this.renderer.drawArea,o[Dt.oX.HollowCandleBar]=this.renderer.drawHollowCandlestickBars,o)[i];l&&Object.keys(t||{}).forEach((function(i){var o=n(i);(0,It.ui)(e,o),r?t[i].forEach((function(t){l.call(a,e,t)})):l.call(a,e,t[i])}))},t.prototype.plotChart=function(e,t){var i,n=((i={})[Dt.oX.Line]=this._plotLineChart,i[Dt.oX.Bar]=this._plotBarChart,i[Dt.oX.HollowBar]=this._plotHollowBarChart,i[Dt.oX.Point]=this._plotPointChart,i[Dt.oX.CrossLine]=this._plotCrossChart,i[Dt.oX.Area]=this._plotAreaChart,i[Dt.oX.Transcation]=this._plotTranscations,i),r=t.chartType;e.save(),n[r]&&n[r].call(this,e,t),e.restore()},t.prototype._plotTranscations=function(e,t){var i=this,n=t.data,r=void 0===n?[]:n,o=t.color,a=void 0===o?"#cc47ed":o,l=t.colorLong,s=void 0===l?"#2962ff":l,c=this.getRoot(),u=this.getParent(),d=c.getAttr("candlestick").barWeight,h=void 0===d?.8:d,p=this.xAxis.unitWidth*h>9,f=r,v=f.map((function(e){return e.transcations.filter((function(e){return!0===e.long})).map((function(t){return{value:t.price,time:e.time}}))})).reduce((function(e,t){return e.push.apply(e,(0,g.__spreadArray)([],(0,g.__read)(t))),e}),[]),m=f.map((function(e){return e.transcations.filter((function(e){return!1===e.long})).map((function(t){return{value:t.price,time:e.time}}))})).reduce((function(e,t){return e.push.apply(e,(0,g.__spreadArray)([],(0,g.__read)(t))),e}),[]);(0,It.ui)(e,{fillStyle:s,strokeStyle:s}),u.getLineDatas(v).forEach((function(t){return i.renderer.drawSmallTriangle(e,t,!0)})),(0,It.ui)(e,{fillStyle:a,strokeStyle:a}),u.getLineDatas(m).forEach((function(t){return i.renderer.drawSmallTriangle(e,t,!1)})),f.forEach((function(t){var n=u.getPosition({time:t.time,value:t.high}),r=u.getPosition({time:t.time,value:t.low});n.y=-n.y,n.y-=5,r.y=-r.y,r.y+=5,(0,It.ui)(e,{fillStyle:a,strokeStyle:a}),t.transcations.filter((function(e){return!1===e.long})).forEach((function(t){var r=i.renderer.drawTranscation(e,n,t.long,t.qty,t.signal,p);n.y-=r})),(0,It.ui)(e,{fillStyle:s,strokeStyle:s}),t.transcations.filter((function(e){return!0===e.long})).forEach((function(t){var n=i.renderer.drawTranscation(e,r,t.long,t.qty,t.signal,p);r.y+=n}))}))},t.prototype._plotLineChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.color,o=t.lineWidth,a=t.yAxisIndex,l=this.getParent().getLineDatas(n,a);if(r)(0,It.ui)(e,{strokeStyle:r,lineWidth:o}),this.renderer.drawPolyline(e,l);else{var s=this.transformToGroup(l,"color",!0);this.plotGroupGraphs(e,s,Dt.oX.Line,(function(e){return{strokeStyle:e,lineWidth:o}}),!0)}},t.prototype._plotBarChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.color,o=t.lineWidth,a=void 0===o?1:o,l=t.zeroBase,s=void 0===l?0:l,c=t.yAxisIndex,u=t.getBarInfos,d=this.getParent(),h=d.getAttr("indicatorType"),g=d.getBarDatas(n,{zeroBase:s,yAxisIndex:c,indicatorType:h},u);if(r)(0,It.ui)(e,{fillStyle:r,lineWidth:a}),this.renderer.drawBars(e,g);else{var p=this.transformToGroup(g,"color");this.plotGroupGraphs(e,p,Dt.oX.Bar,(function(e){return{fillStyle:e,lineWidth:+a||1}}))}},t.prototype._plotHollowBarChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.color,o=t.lineWidth,a=void 0===o?1:o,l=t.zeroBase,s=void 0===l?0:l,c=t.yAxisIndex,u=t.getBarInfos,d=this.getParent().getBarDatas(n,{zeroBase:s,yAxisIndex:c},u);if(r)(0,It.ui)(e,{fillStyle:r,lineWidth:a}),this.renderer.drawHollowBars(e,d);else{var h=this.transformToGroup(d,"color");this.plotGroupGraphs(e,h,Dt.oX.HollowBar,(function(e){return{fillStyle:e,lineWidth:+a||1}}))}},t.prototype._plotPointChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.color,o=t.lineWidth,a=void 0===o?1:o,l=t.yAxisIndex,s=this.getParent().getLineDatas(n,l);if(r)(0,It.ui)(e,{strokeStyle:r,lineWidth:a}),this.renderer.drawPoints(e,s);else{var c=this.transformToGroup(s,"color");this.plotGroupGraphs(e,c,Dt.oX.Point,(function(e){return{strokeStyle:e,lineWidth:a}}))}},t.prototype._plotCrossChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.color,o=t.lineWidth,a=void 0===o?1:o,l=t.yAxisIndex,s=this.getParent().getLineDatas(n,l);if(r)(0,It.ui)(e,{strokeStyle:r,lineWidth:a}),this.renderer.drawCrossLines(e,s);else{var c=this.transformToGroup(s,"color");this.plotGroupGraphs(e,c,Dt.oX.CrossLine,(function(e){return{strokeStyle:e,lineWidth:a}}))}},t.prototype._plotAreaChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.borderData,o=t.color,a=t.opacity,l=void 0===a?.6:a,s=t.histBase,c=void 0===s?0:s,u=t.yAxisIndex,d=this.getParent(),h=-d.yAxis.getCoordOfValue(c),p=d.getLineDatas(n,u);if(o)if((0,It.ui)(e,{fillStyle:o,globalAlpha:l}),r){var f=d.getLineDatas(r,u).reverse();this.renderer.drawArea(e,(0,g.__spreadArray)((0,g.__spreadArray)([],(0,g.__read)(p)),(0,g.__read)(f)))}else{var v={x:p[p.length-1].x,y:h},m={x:p[0].x,y:h};p.push(v,m),this.renderer.drawArea(e,p)}else{var y=this._groupAreaData({pointData:p,borderData:r,histBase:h,yAxisIndex:u});this.plotGroupGraphs(e,y,Dt.oX.Area,(function(e){return{fillStyle:e,globalAlpha:l}}),!0)}},t.prototype._groupAreaData=function(e){var t=e.pointData,i=void 0===t?[]:t,n=e.borderData,r=e.histBase,o=void 0===r?0:r,a=e.yAxisIndex,l=this.getParent(),s=i.reduce((function(e,t,i,n){var r=n.length,o=t[e.compare];return e.group.j=i,e.result[o]||(e.result[o]=[]),(e.lastCompare&&e.lastCompare!==o||i===r-1)&&(e.result[o].push(e.group),e.group={i,j:i}),e.lastCompare=o,e}),{result:{},group:{i:0,j:0},compare:"color",lastCompare:""}).result;if(n){var c=l.getLineDatas(n,a);return Object.keys(s).reduce((function(e,t){var n=s[t];return e[t]=n.map((function(e){var t=e.i,n=e.j,r=i.slice(t,n+1),o=c.slice(t,n+1).reverse();return r.concat(o)})),e}),{})}return Object.keys(s).reduce((function(e,t){var n=s[t];return e[t]=n.map((function(e){var t=e.i,n=e.j,r=i.slice(t,n+1),a=[{x:i[n].x,y:o},{x:i[t].x,y:o}];return r.concat(a)})),e}),{})},t.prototype.drawLogo=function(e){},t.defaultConfig=(0,g.__assign)({},ti.defaultConfig),t}(ti);var ci=i(80427);const ui=function(e){function t(){var t=e.call(this)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(si.defaultConfig)),{zIndex:1}),t._isScaling=!1,t._isMouseDown=!1,t.gestureLastScale=1,t.wheelAccumlateX=0,t.wheelAccumlateY=0,t.wheelMode="ready",t.resetWheelMode=function(){t.wheelMode="ready",t.wheelAccumlateX=0,t.wheelAccumlateY=0},t._initEvents(),t}return(0,g.__extends)(t,e),t.prototype._initEvents=function(){this.on("mousemove","pan",this.onmousemove),this.on("mouseout",this.onmouseout.bind(this)),this.on("mousewheel",this.onmousewheel.bind(this)),this.on("mousedown",Mt.HD.MOUSE_DOWN,this.onmousedown),this.on("gesturestart",this.ongesture.bind(this)),this.on("gesturechange",this.ongesture.bind(this)),this.on("gestureend",this.ongesture.bind(this))},t.prototype.getCtxsByDrawMode=function(e){var t,i=this.getRoot(),n=i.getContext(),r=i.getMarkContext(),o=i.getCountdownContext();return((t={})[Dt.mB.All]=[n,r,o],t[Dt.mB.Resize]=[n,r,o],t[Dt.mB.Marks]=[r],t)[e]||[]},t.prototype.clear=function(e){var t=this.getClearBound();e.forEach((function(e){return ci.Z.clearRect(e,t)}))},t.prototype.setViewBound=function(){var e=this.getRoot(),t=this.getParent().getBound(),i=e.getAttr("margin"),n=e.getAttr("yAxis").isFloat,r=void 0!==n&&n,o=this.getAttr("isMobile")&&r?0:i.right;this.setBound({x:t.x,y:t.y,width:t.width-o,height:t.height})},t.prototype.getXYTicksData=function(){var e,t,i=this.getRoot(),n=this.getParent(),r=(null===(e=i.getXAxis())||void 0===e?void 0:e.getAxisData())||[],o=(null===(t=n.yAxis)||void 0===t?void 0:t.getAxisData())||[];return{xData:r.map((function(e){return e.p})),yData:o.map((function(e){return e.p}))}},t.prototype.getXLabelByTime=function(e){var t=this.getRoot(),i=t.getXAxis(),n=t.visibleViewHeight;return{point:{x:i.getCoordOfValue(e),y:n-this.bound.y},text:(0,It.XH)(e,i.getOriginTimeScaleType())}},t.prototype.getYLabelByValue=function(e){var t=this.getParent().yAxis.getCoordOfValue(e);return{point:{x:this.bound.width+1,y:-t},text:this.getCrossYAxisLabel(e)}},t.prototype.drawCrossHairByTime=function(e){if(void 0!==e||void 0!==this._lastCursor){var t=this.getRoot(),i=t.getXAxis(),n=e||this._lastCursor,r=n.x,o=n.y;e&&(this._lastCursor=e);var a=i.getValueOfCoord(r);t.setCurrentItemByTime(a);var l=t.getAttr("currentItem"),s=t.getHitContext(),c=t.visibleViewHeight,u=this.getParent().yAxis;this.clearHitContext(),this.initialCtxs([s]);var d=t.getAttr("margin"),h=this.bound,p=h.y,f=h.width,v={minX:0,minY:d.top-p,maxX:f,maxY:c-p},m=this.getXLabelByTime((null==l?void 0:l.time)||a),y=t.getSettingValues("@background.crosshairBorderLine.color");(0,It.ui)(s,{strokeStyle:y,lineWidth:1}),s.save(),this.renderer.drawVerticleCrossLine(s,{x:m.point.x,y:o},v,[4,4]),s.restore();var x=t.getSettingValues("@background.crosshairBorderLine.color");(0,It.ui)(s,{strokeStyle:x,lineWidth:1}),s.save(),this.renderer.drawHorizontalCrossLine(s,{x:m.point.x,y:o},v,[4,4]),s.restore();var b=this.getYLabelByValue(u.getValueOfCoord(o)),C=t.getSettingValues("@background.crosshairCursorLabel.textColor"),_=t.getSettingValues("@background.crosshairCursorLabel.backgroundColor"),w=t.getSettingValues("@background.crosshairCursorLabel.borderColor");this.renderer.drawXAxisLabel(s,(0,g.__assign)((0,g.__assign)({},m),{color:C,bgColor:_,borderColor:w}),this.getXAxisHeight()),this.renderer.drawYAxisLabel(s,(0,g.__assign)((0,g.__assign)({},b),{color:C,bgColor:_,borderColor:w}),this.getYAxisWidth()-1,18),this.restoreCtxs([s])}},t.prototype.getCrossYAxisLabel=function(e){var t=this.getParent(),i=2;if(t.panelType===Dt.wh.BASE){var n=this.getRoot(),r=n.getAttr("candlestick").dataFormatter;if(i=n.getAttr("precision"),r===Dt.aI.Percentage){var o=Math.max(0,i-2);return(100*e).toFixed(o)+"%"}}return t.formatterValue(e)},t.prototype.clearHitContext=function(){var e=this.getRoot().getHitContext();ci.Z.clearRect(e)},t.prototype.onmousemove=function(e){var t=this.getRoot(),i=this.getParent();if(t.setCursor({isRecord:!1,weight:100,config:{style:Mt.Li.CROSSHAIR}}),i.getAttr("isAbleTriggerMove"))if(e.isDealed)this.clearHitContext();else{var n=this.transformPointToView(e.point),r=n.x,o=n.y,a=t.getAttr("crossHair").show;void 0!==a&&a&&this.drawCrossHairByTime({x:r,y:o})}},t.prototype.ongesture=function(e){if(!this._isMouseDown){var t=e.originEvent;t.preventDefault();var i=this.getRoot(),n=i.getXAxis(),r=this.transformPointToView(e.point).x,o=n.getValueOfCoord(r);"gesturestart"===t.type&&(this.gestureLastScale=t.scale),"gesturechange"===t.type&&(i.zoomByCoeff(this.gestureLastScale/t.scale,o),this.gestureLastScale=t.scale)}},t.prototype.onmouseout=function(){var e=this.getRoot(),t=e.getHitContext();ci.Z.clearRect(t),this.clearDragEvent(),e.setCurrentItemByTime(e.getMaxTimestamp())},t.prototype.onmousedown=function(e){var t=this;if(!e.isDealed){var i=e.originEvent;if(this._isMouseDown=!0,i.touches&&i.touches.length>1)return this._isScaling=!0,void this.onmousescale(e);var n=this.getRoot(),r=this.getAttr("isMobile"),o=e.point,a=o.x,l=o.y,s=Date.now(),c=0;this.on("mousemove",Mt.HD.MOUSE_DOWN_MOVE,(function(i){if(!t._isScaling){var r=i.point,o=r.x,u=r.y;Math.abs(o-e.point.x)>2*Math.abs(u-l)&&(n.shiftTimeLine(a-o),a=o,c=Date.now()-s,e.originEvent.preventDefault(),i.originEvent.preventDefault())}})),this.on("mouseup",Mt.HD.MOUSE_DOWN_UP,(function(i){if(t.getRoot().endShiftTime(),t._isMouseDown=!1,t.clearDragEvent(),r){var n=i.point.x-e.point.x,o=i.point.y-e.point.y;Math.abs(n)>Math.abs(o)&&t._keepScroll(n,c/1e3)}}))}},t.prototype.onmousescale=function(e){var t=this,i=this.getRoot(),n=e.clientX,r=e.clientX1,o=(0,g.__read)([n,r],2),a=o[0],l=o[1];this.on("mousemove",Mt.HD.MOUSE_DOWN_MOVE,(function(n){var r=n.clientX,o=n.clientX1;if(void 0===o)t.clearDragEvent();else{var s=300*Math.log10(Math.abs((r-o)/(a-l)));if(!Number.isFinite(s))return;s>1?i.zoomIn(s):i.zoomOut(s),a=r,l=o}n.originEvent.preventDefault(),e.originEvent.preventDefault()})),this.on("mouseup",Mt.HD.MOUSE_DOWN_UP,(function(){t.clearDragEvent(),i.endShiftTime()}))},t.prototype.wheelEventType=function(e){var t=e.deltaX,i=e.deltaY;return-3*i===e.wheelDeltaY||Math.abs(t)>=Math.abs(i)?"touchpad":"mousewheel"},t.prototype.onmousewheel=function(e){var t=e.originEvent,i=e.point,n=t,r=n.deltaY,o=n.deltaX,a=n.wheelDeltaY,l=n.ctrlKey,s=this.transformPointToView(i),c=s.x,u=s.y,d=this.getRoot(),h=this.wheelEventType(t);if("ready"!==this.wheelMode||l||(this.wheelAccumlateX+=o,this.wheelAccumlateY+=r,Math.abs(this.wheelAccumlateX)>10?this.wheelMode="x":Math.abs(this.wheelAccumlateY)>10&&(this.wheelMode="y")),"y"===this.wheelMode||l||"mousewheel"===h)if("mousewheel"===h){var g=r?-r/3:a/12;d.zoomAroundRight(g)}else d.zoomAroundRight(l?r:-r);"x"===this.wheelMode&&d.shiftTimeLine(o),this.wheelResetTimer&&window.clearTimeout(this.wheelResetTimer),l&&this.resetWheelMode(),this.wheelResetTimer=window.setTimeout(this.resetWheelMode,20);var p=d.getAttr("crossHair").show;void 0!==p&&p&&this.drawCrossHairByTime({x:c,y:u}),t.preventDefault()},t.prototype.clearDragEvent=function(){this.off("mousemove",Mt.HD.MOUSE_DOWN_MOVE),this.off("mouseup",Mt.HD.MOUSE_DOWN_UP),this._isScaling=!1},t.prototype._keepScroll=function(e,t){var i,n=this.getRoot(),r=Math.abs(e/t),o=Math.abs(r/1e3),a=Math.abs(e)-1e3*t*t*.5,l=Date.now(),s=0,c=function(){var t,r=(Date.now()-l)/1e3,u=0+a*(-(t=r/o)*t+2*t),d=5*Math.abs(s-u);s=u,r>o?cancelAnimationFrame(i):(0!==d&&n.shiftTimeLine(e>0?-d:d),i=requestAnimationFrame(c))};c()},t}(si),di=function(){function e(){this.drawCrossLine=function(e,t,i){e.setLineDash([4,4]),e.beginPath();var n=i.minX,r=i.minY,o=i.maxX,a=i.maxY;ci.Z.drawLine(e,n,-t.y,o,-t.y),ci.Z.drawLine(e,t.x,r,t.x,a),e.stroke()},this.drawLabel=function(e,t,i){var n=t.x,r=t.y,o=i.text,a=i.px,l=i.py,s=i.color,c=i.bgColor,u=i.borderColor,d=i.width,h=i.height;e.strokeStyle=u,e.fillStyle=c,e.fillRect(n,r,d,h),e.strokeRect(n,r,d,h),e.textAlign=Dt.PH.Left,e.textBaseline=Dt.Wr.Top,e.fillStyle=s;var g=n+a,p=r+l;ci.Z.drawText(e,o,g,p)},this.drawXAxisLabel=function(e,t,i){var n=Math.ceil(e.measureText(t.text).width)+16,r=t.point,o=r.x,a=r.y,l={x:o-n/2,y:a,width:n,height:i};ci.Z.drawBackground(e,t.bgColor,l),e.textAlign=Dt.PH.Center,e.textBaseline=Dt.Wr.Middle,e.fillStyle=t.color,e.strokeStyle=t.color,ci.Z.drawText(e,t.text,o,a+.5*i),e.beginPath(),ci.Z.drawLine(e,o,a,o,a+5),e.stroke()},this.drawYAxisLabel=function(e,t,i,n){var r=t.point,o=r.x,a=r.y;e.beginPath(),e.strokeStyle=t.borderColor,e.fillStyle=t.bgColor;var l=[{x:o,y:a-.5*n},{x:o+i,y:a-.5*n},{x:o+i,y:a+.5*n},{x:o,y:a+.5*n}];ci.Z.drawLines(e,l),e.closePath(),e.fill(),e.stroke(),e.textAlign=Dt.PH.Left,e.textBaseline=Dt.Wr.Middle,e.fillStyle=t.color,ci.Z.drawText(e,t.text,o+8,a)},this.drawCandlestickBars=function(e,t){t.forEach((function(t){var i=t.x,n=t.y,r=t.width,o=t.height,a=t.lowY,l=t.highY,s=t.color,c=t.borderColor,u=t.wickColor,d=i-.5*r;if(r<2){(0,It.ui)(e,{fillStyle:s,strokeStyle:s});var h=l-a,g=h<1?1:h;ci.Z.fillRect(e,i,-l,.75,g),ci.Z.strokeRect(e,i,-l,.75,g)}else(0,It.ui)(e,{strokeStyle:u}),e.beginPath(),ci.Z.drawLine(e,i,-l,i,-a),e.stroke(),(0,It.ui)(e,{fillStyle:s,strokeStyle:c}),ci.Z.fillRect(e,d,-n,r,o),ci.Z.strokeRect(e,d,-n,r,o)}))},this.drawHollowCandlestickBars=function(e,t){t.forEach((function(t){var i=t.x,n=t.y,r=t.width,o=t.height,a=t.lowY,l=t.highY,s=t.close,c=t.open,u=t.color,d=t.borderColor,h=t.wickColor,g=i-.5*r;r<2?((0,It.ui)(e,{strokeStyle:u}),e.beginPath(),ci.Z.drawLine(e,i,-a,i,-l),e.stroke()):((0,It.ui)(e,{strokeStyle:h}),e.beginPath(),ci.Z.drawLine(e,i,-l,i,-a),e.stroke(),(0,It.ui)(e,{fillStyle:u,strokeStyle:d}),s<c?ci.Z.fillRect(e,g,-n,r,o):ci.Z.clearRect(e,{x:g,y:-n,width:r,height:o}),ci.Z.strokeRect(e,g,-n,r,o))}))},this.drawPolyline=function(e,t){e.beginPath(),ci.Z.drawLines(e,t),e.stroke()},this.drawGrid=function(e,t,i,n){void 0===i&&(i=[]);var r=t.width,o=t.height;e.beginPath(),n.forEach((function(t){ci.Z.drawLine(e,0,-t,r,-t)})),i.forEach((function(t){ci.Z.drawLine(e,t,0,t,-o)})),e.stroke()},this.drawVertGridLine=function(e,t,i){void 0===i&&(i=[]);var n=t.height;e.beginPath(),i.forEach((function(t){ci.Z.drawLine(e,t,0,t,-n)})),e.stroke()},this.drawHorzGridLine=function(e,t,i){var n=t.width;e.beginPath(),i.forEach((function(t){ci.Z.drawLine(e,0,-t,n,-t)})),e.stroke()},this.drawPaths=function(e,t){e.beginPath(),ci.Z.drawLines(e,t),e.fill(),e.stroke()},this.drawPoints=function(e,t,i){i?ci.Z.drawPoints(e,t,i):(e.beginPath(),ci.Z.drawPoints(e,t,i),e.stroke())},this.drawCrossLines=function(e,t){e.beginPath(),ci.Z.drawCrossLines(e,t),e.stroke()},this.drawBars=function(e,t){t.forEach((function(t){var i=t.x,n=t.y,r=t.width,o=t.height,a=t.strokeColor,l=t.fillColor;r<2?((0,It.ui)(e,{strokeStyle:a}),e.beginPath(),ci.Z.drawLine(e,i,n,i,n+o),e.stroke()):((0,It.ui)(e,{strokeStyle:a,fillStyle:l}),ci.Z.fillRect(e,i,n,r,o),ci.Z.strokeRect(e,i,n,r,o))}))},this.drawHollowBars=function(e,t){t.forEach((function(i,n){var r=(t[n-1]||{}).value,o=void 0===r?Number.NEGATIVE_INFINITY:r,a=i.x,l=i.y,s=i.width,c=i.height,u=i.value,d=i.color;s<2?((0,It.ui)(e,{strokeStyle:d}),e.beginPath(),ci.Z.drawLine(e,a,l,a,l+c),e.stroke()):u>0&&o>=u||u<0&&o>=u?((0,It.ui)(e,{fillStyle:d}),ci.Z.fillRect(e,a,l,s,c)):(u>0&&o<u||u<0&&o<=u)&&((0,It.ui)(e,{strokeStyle:d}),ci.Z.strokeRect(e,a,l,s,c))}))},this.drawMultiLines=function(e,t){e.beginPath(),t.forEach((function(t){ci.Z.drawLines(e,t)})),e.stroke()},this.drawArea=function(e,t){e.beginPath(),ci.Z.drawLines(e,t),e.closePath(),e.fill()},this.drawTitle=function(e,t,i){ci.Z.drawText(e,t,i.x,i.y)}}var t,i;return e.calculateTextWidth=function(t,i,n){void 0===t&&(t=""),void 0===i&&(i=10),void 0===n&&(n=1);var r=e.getCacheCanvas(),o=i+"px sans-serif";r.font=o;var a=Math.round(r.measureText(t.trim()).width);return n>1?Math.round(a/n)*n:a},e.calculateTextHeight=function(t,i){void 0===t&&(t=""),void 0===i&&(i=10);var n=e.getCacheCanvas(),r=i+"px sans-serif";n.font=r;var o=n.measureText(t.trim());return Math.abs(o.actualBoundingBoxAscent)+Math.abs(o.actualBoundingBoxDescent)},e.drawImage=function(e,t,i,n){var r=i.x+.5*i.width-.5*n.width,o=.5*i.height+.5*n.height;e.drawImage(t,r,-o,n.width,n.height)},e.prototype.drawHorizontalCrossLine=function(e,t,i,n){var r=i.minX,o=i.maxX;e.setLineDash(n),e.beginPath(),ci.Z.drawLine(e,r,-t.y,o,-t.y),e.stroke()},e.prototype.drawVerticleCrossLine=function(e,t,i,n){var r=i.minY,o=i.maxY;e.setLineDash(n),e.beginPath(),ci.Z.drawLine(e,t.x,r,t.x,o),e.stroke()},e.prototype.drawSmallTriangle=function(e,t,i){e.save(),e.translate(t.x,t.y),e.beginPath(),i&&e.scale(-1,1),e.moveTo(1,0),e.lineTo(5,-5),e.lineTo(5,5),e.lineTo(1,0),e.fill(),e.closePath(),e.restore()},e.prototype.drawArrow=function(e,t,i){e.save(),e.translate(t.x,t.y),e.beginPath(),i&&e.scale(1,-1),e.rect(-4,0,9,2),e.moveTo(.5,2),e.lineTo(5,7),e.lineTo(3,7),e.lineTo(3,12),e.lineTo(-2,12),e.lineTo(-2,7),e.lineTo(-4,7),e.lineTo(.5,2),e.fill(),e.closePath(),e.restore()},e.prototype.drawTranscation=function(e,t,i,n,r,o){if(e.save(),e.translate(Math.round(t.x),Math.round(t.y)),this.drawArrow(e,{x:0,y:0},!i),o)if(i){e.translate(0,12),e.textAlign="center",e.textBaseline="top";var a=e.measureText(r);e.fillText(r,0,0),e.translate(0,a.actualBoundingBoxDescent+2),e.fillText("+"+n,0,0)}else e.translate(0,-12),e.textAlign="center",e.textBaseline="bottom",a=e.measureText(r),e.fillText(r,0,0),e.translate(0,-a.actualBoundingBoxAscent-2),e.fillText("-"+n,0,0);return e.restore(),o?36:14},e.prototype.drawImage=function(e,t,i,n){var r=i.x+.5*i.width-.5*n.width,o=.5*i.height+.5*n.height;e.drawImage(t,r,-o,n.width,n.height)},e.getCacheCanvas=function(){return t||void 0===document||(t=document.createElement("canvas"),i=t.getContext("2d")),i},e.createTextLabel=function(t){var i=t.text,n=void 0===i?"":i,r=t.px,o=void 0===r?6:r,a=t.py,l=void 0===a?6:a;return{text:n,px:o,py:l,color:t.color,bgColor:t.bgColor,borderColor:t.borderColor,width:e.calculateTextWidth(n)+2*o,height:e.calculateTextHeight(n)+2*l}},e}(),hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,g.__extends)(t,e),t.prototype.draw=function(){},t}(di);var gi=new Map;function pi(e,t){e.classList.contains(t)||e.classList.add(t)}function fi(e,t){e.classList&&e.classList.remove(t)}var vi=function(){var e,t,i,n=["Up","Down","Left","Right"],r=function(e){i&&clearTimeout(i),i=e};return function(o,a){if(!e){e=(0,It.az)("div",{display:"none"},"tooltip-wrap"),t=(0,It.az)("div",{},"tooltip-text");var l=(0,It.az)("div",{},"tooltip-arrow");e.append.apply(e,[t,l])}return a&&(n.forEach((function(t){return t!==a&&fi(e,t.toLowerCase())})),pi(e,a.toLowerCase())),o&&(t.innerText=o),{tooltip:e,timer:i,setTimer:r}}}();function mi(e,t){void 0===t&&(t="Up"),e.addEventListener("mouseenter",(function(){var i=e.getAttribute("tooltip")||"",n=vi(i,t),r=n.tooltip,o=n.timer;o&&clearTimeout(o),r.parentNode!==e&&e.append(r),(0,It.AS)(r,{display:"block"})})),e.addEventListener("mouseleave",(function(){var e=vi("",t),i=e.tooltip;(0,e.setTimer)(setTimeout((function(){(0,It.AS)(i,{display:"none"})}),100))}))}function yi(e){if(gi.has(e)){var t=gi.get(e).image;return new Promise((function(e){t.complete?e(t):t.onload=function(){e(t)}}))}return new Promise((function(t){"undefined"==typeof window&&t();var i=new Image,n=URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}));i.src=n,i.onload=function(){t(i)},gi.set(e,{url:n,image:i})}))}function xi(e){if(gi.has(e))return gi.get(e).url||"";if("undefined"==typeof window)return"";var t=new Image,i=URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}));return t.src=i,gi.set(e,{url:i,image:t}),i}var bi=i(26565);const Ci=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderer=new hi,t.checkData=(0,It.P2)((function(e){var i=t.getRoot(),n=i.getXAxis().getUnitTimeValue(),r=e.length;if(r>2&&n<864e5&&e[r-1].time>=i.lastDataTime+n)for(var o=r-1;o>=1;o--){var a=e[o-1].time,l=e[o].time;if(l<=i.lastDataTime+n)return;l-a>=2*n&&i.fire("dispatchErrorData",{data:{type:"disConnect",payload:{prevItem:e[o-1],nextItem:e[o]}}})}}),500),t}return(0,g.__extends)(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var t=this.getRoot(),i=t.getContext(),n=t.getMarkContext(),r=this.getCtxsByDrawMode(e);if(this.clear(r),this.initialCtxs(r),this.createClipBound(r),e===Dt.mB.All||e===Dt.mB.Resize){var o=this.getXYTicksData(),a=o.xData,l=o.yData,s=t.getSettingValues("@background.vertGridLine.show"),c=t.getSettingValues("@background.vertGridLine.color"),u=t.getSettingValues("@background.vertGridLine.lineWidth");s&&(i.save(),(0,It.ui)(i,{strokeStyle:c,lineWidth:+u}),this.renderer.drawVertGridLine(i,this.bound,a),i.restore());var d=t.getSettingValues("@background.horzGridLine.show"),h=t.getSettingValues("@background.horzGridLine.color"),g=t.getSettingValues("@background.horzGridLine.lineWidth");d&&(i.save(),(0,It.ui)(i,{strokeStyle:h,lineWidth:+g}),this.renderer.drawHorzGridLine(i,this.bound,l),i.restore()),this._renderMainIndicatorCharts(i)}t.getAttr("annotationVisible")&&this.plotShapes(n),this.restoreCtxs(r)},t.prototype.drawMainSeries=function(e,t){var i=this.getRoot();if(t===Dt.oX.Line)this.plotChart(e,{chartType:Dt.oX.Line,data:this.getLineData(),zIndex:0,color:i.getColorFromColorTable("candle.lineColor")}),this.drawMaxAndMinArrows(e,!0);else if(t===Dt.oX.Area)this.plotChart(e,{chartType:Dt.oX.Area,data:this.getLineData(),zIndex:0,color:i.getColorFromColorTable("line.color3"),opacity:.4}),this.drawMaxAndMinArrows(e,!0);else{var n=this.transformToGroup(this.getVisibleBars());this.plotGroupGraphs(e,n,t,(function(e){return{fillStyle:e,strokeStyle:e}})),this.drawMaxAndMinArrows(e,!1)}this.drawLastPriceLine(e),this.drawBidAskLabels(e)},t.prototype.drawLogo=function(){var e,t=this,i=this.getRoot(),n=(null===(e=i.getAttr("theme"))||void 0===e?void 0:e.toLowerCase())===Dt.hY.LIGHT,r=i.getFrameContext();r&&yi(n?bi.rk:bi.d0).then((function(e){ci.Z.clearRect(r),t.initialCtxs([r]),r.globalAlpha=.04;var i=t.getAttr("isMobile")?{width:150,height:30}:{width:300,height:60};t.renderer.drawImage(r,e,t.getBound(),i),r.restore()}))},t.prototype.drawMaxAndMinArrows=function(e,t){void 0===t&&(t=!1);var i=this.getRoot(),n=i.getAttr("precision"),r=i.getColorFromColorTable("text.defaultColor"),o=(0,g.__read)(this.getMaxMinItems(t),2),a=o[0],l=o[1];if(a&&l){(0,It.ui)(e,{fillStyle:r,strokeStyle:r}),e.beginPath();var s=(0,g.__assign)((0,g.__assign)({},a),{value:Xt()(a.value,n)});this.drawArrowText(e,s,-1),this.drawArrowText(e,l,1)}},t.prototype.drawArrowText=function(e,t,i){var n=this.getParent();(0,It.ui)(e,{textAlign:Dt.PH.Right,textBaseline:Dt.Wr.Middle});var r=this.getPosition(t.time,t.value),o=n.formatterValue(t.value),a=ci.Z.measureTextWidth(o),l=-3,s=-12;this.isOverlapLeft(r.x+s-a+l)&&((0,It.ui)(e,{textAlign:Dt.PH.Left}),l=3,s=12),ci.Z.drawLine(e,r.x,r.y+i,r.x+s,r.y+i),ci.Z.drawText(e,o,r.x+s+l,r.y+i),e.stroke()},t.prototype.drawBidAskLabels=function(e){var t=this.getRoot(),i=this.getParent(),n=t.getSettingValues("@contextMenu.bidAsk"),r=t.getConfig().askBid,o=void 0===r?{}:r,a=o.ask,l=o.bid;if(n&&a&&l){var s=i.xAxis.coordRange.getMaxValue(),c=t.getI18n("ask","Ask"),u=t.getI18n("bid","Bid"),d=hi.createTextLabel({text:c+"  "+a,px:6,py:6,color:t.getColorFromColorTable("cross.labelTextColor"),bgColor:t.getColorFromColorTable("cross.upLabelBgColor"),borderColor:t.getColorFromColorTable("cross.upLabelBgColor")}),h=hi.createTextLabel({text:u+"  "+l,px:6,py:6,color:t.getColorFromColorTable("cross.labelTextColor"),bgColor:t.getColorFromColorTable("cross.downLabelBgColor"),borderColor:t.getColorFromColorTable("cross.downLabelBgColor")}),g={x:s-d.width-8,y:-i.yAxis.getCoordOfValue(a)-d.height/2},p={x:s-h.width-8,y:-i.yAxis.getCoordOfValue(l)-h.height/2},f=g.y+d.height;p.y=p.y<f?f:p.y,this.renderer.drawLabel(e,g,d),this.renderer.drawLabel(e,p,h)}},t.prototype.drawLastPriceLine=function(e){var t=this.getRoot(),i=this.getParent(),n=t.getSettingValues("@contextMenu.priceLine"),r=t.getSeriesData(),o=r[0],a=r[r.length-1];if(n&&a&&o){var l=i.xAxis.coordRange.getMinValue(),s=i.xAxis.coordRange.getMaxValue(),c=i.yAxis.getCoordOfValue(a.close);if(!(c<0||c>i.yAxis.coordRange.getMaxValue())){var u=a.close>=a.open?t.getColorFromColorTable("cross.upLabelBgColor"):t.getColorFromColorTable("cross.downLabelBgColor");(0,It.ui)(e,{strokeStyle:u,lineWidth:1}),this.renderer.drawHorizontalCrossLine(e,{x:0,y:c},{minX:l,maxX:s,minY:0,maxY:0},[4,4])}}},t.prototype.getBarPosition=function(e){var t=this.getParent().yAxis,i=e.time,n=e.low,r=e.high,o=e.open,a=e.close;return{x:this.xAxis.getCoordOfValue(i),lowY:t.getCoordOfValue(n),highY:t.getCoordOfValue(r),openY:t.getCoordOfValue(o),closeY:t.getCoordOfValue(a)}},t.prototype.getPosition=function(e,t){return{x:this.xAxis.getCoordOfValue(e),y:-this.parent.yAxis.getCoordOfValue(t)}},t.prototype.getLineData=function(){var e=this.getRoot().getVisibleSeriesData();return this.checkData(e),e.map((function(e){return{time:e.time,value:e.close}}))},t.prototype.getVisibleBars=function(){var e=this,t=this.getRoot(),i=t.getVisibleSeriesData();this.checkData(i);var n,r=t.getAttr("candlestick").barWeight,o=void 0===r?.8:r,a=t.getSettingValues("@symbol.candlestick.up.color"),l=t.getSettingValues("@symbol.candlestick.down.color"),s=t.getSettingValues("@symbol.candlestick.up.borderColor"),c=t.getSettingValues("@symbol.candlestick.down.borderColor"),u=t.getSettingValues("@symbol.candlestick.up.wickColor"),d=t.getSettingValues("@symbol.candlestick.down.wickColor"),h=this.getParent().getFixedBarWidth(o),p=t.getXAxis().getUnitTimeValue()<864e5;return i.map((function(r,o){var f=e.getBarPosition(r),v=f.x,m=f.lowY,y=f.highY,x=f.openY,b=f.closeY;return p&&o>0&&!(0,It.Fr)(v-n-e.xAxis.unitWidth,1e-5)&&t.fire("dispatchErrorData",{data:{type:"renderError",payload:{prevItem:i[o-1],nextItem:r}}}),n=v,(0,g.__assign)((0,g.__assign)({},r),{x:v,y:Math.max(x,b),width:h,height:Math.max(1,Math.abs(b-x)),openY:x,closeY:b,highY:y,lowY:m,color:r.close>=r.open?a:l,borderColor:r.close>=r.open?s:c,wickColor:r.close>=r.open?u:d})}))},t.prototype.getMaxMinItems=function(e){void 0===e&&(e=!1);var t=this.getRoot(),i=this.xAxis.domainRange,n=t.getVisibleSeriesData().filter((function(e){return i.contain(e.time)}));if(0===n.length)return[];for(var r={time:0,value:-Number.MAX_SAFE_INTEGER},o={time:0,value:Number.MAX_SAFE_INTEGER},a=0;a<n.length;a++){var l=n[a],s=l.time,c=l.close,u=l.high,d=l.low;e?(c>r.value&&(r={time:s,value:c}),c<o.value&&(o={time:s,value:c})):(u>r.value&&(r={time:s,value:u}),d<o.value&&(o={time:s,value:d}))}return[r,o]},t.prototype.isOverlapLeft=function(e){return e<this.xAxis.coordRange.getMinValue()},t.prototype._renderMainIndicatorCharts=function(e){var t=this.getRoot(),i=t.getSettingValues(t.getSettingManager().getSymbolDescription().styleKey),n=this.getParent().getVisibleResults(),r=[],o=[];n.forEach((function(e){var t=(0,g.__read)((0,It.ln)(e,(function(e){return e.zIndex<0})),2),i=t[0],n=t[1];r.push.apply(r,(0,g.__spreadArray)([],(0,g.__read)(i))),o.push.apply(o,(0,g.__spreadArray)([],(0,g.__read)(n)))})),r.sort((function(e,t){return(e.zIndex||0)-(t.zIndex||0)})),r.forEach(this.plotChart.bind(this,e)),this.drawMainSeries(e,null==i?void 0:i.toUpperCase()),o.sort((function(e,t){return(e.zIndex||0)-(t.zIndex||0)})),o.forEach(this.plotChart.bind(this,e))},t}(ui);var _i=i(34244),wi=i.n(_i);const Si=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawTicks=function(e,t,i){var n=i.textMargin,r=i.tickWidth,o=i.precision,a=i.boudHeight,l=i.textHeight;e.beginPath(),t.forEach((function(t){var i=t.p,s=t.v;ci.Z.drawLine(e,.5,-i-.5,r,-i-.5);var c=o>=0&&(0,ii.hj)(s)?s.toFixed(o):""+s;i>a-.5*l?i=a-.5*l:i<.5*l&&(i=.5*l),e.fillText(c,r+n,-i)})),e.stroke()},t}return(0,g.__extends)(t,e),t.prototype.draw=function(e,t){e.beginPath(),ci.Z.drawLine(e,0,0,0,-t.height),e.stroke()},t}(di),Li=function(e){function t(){var t=e.call(this)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(si.defaultConfig)),{zIndex:1e3}),t.renderer=new Si,t.on("mousemove",t.onmousemove),t.on("mousewheel",t.onmousewheel),t.on("mouseout",t.onmouseout),setTimeout((function(){t.getParent().panelType===Dt.wh.BASE&&setInterval((function(){t.drawCountdown()}),1e3)}),0),t}return(0,g.__extends)(t,e),t.prototype.getCtxsByDrawMode=function(e){var t,i=this.getRoot(),n=i.getContext(),r=i.getMarkContext();return((t={})[Dt.mB.All]=[n,r],t[Dt.mB.Resize]=[n,r],t[Dt.mB.Marks]=[r],t)[e]||[]},t.prototype.clear=function(e){var t=this.getParent(),i=this.getClearBound(t.isLastPanel?6:0);e.forEach((function(e){return ci.Z.clearRect(e,i)}))},t.prototype.render=function(e){var t=this.getRoot(),i=this.getParent(),n=t.getConfig().tick,r=n.width,o=void 0===r?5:r,a=n.textMargin,l=void 0===a?5:a,s=t.getContext(),c=t.getMarkContext(),u=this.getCtxsByDrawMode(e);if(this.clear(u),this.initialCtxs(u),e===Dt.mB.All||e===Dt.mB.Resize){this.createClipBound(s,i.isLastPanel?6:0),(0,It.ui)(s,{strokeStyle:t.getColorFromColorTable("axis.tickLineColor"),fillStyle:t.getColorFromColorTable("axis.tickTextColor"),textBaseline:Dt.Wr.Middle,textAlign:Dt.PH.Left});var d={tickWidth:o,textMargin:l,precision:-1,boudHeight:this.getBound().height,textHeight:10};i.panelType===Dt.wh.BASE&&(d.precision=t.getAttr("precision")),this.renderer.drawTicks(s,this.getTicksData(),d);var h=t.getSettingValues("@background.frame.color");(0,It.ui)(s,{strokeStyle:h}),this.renderer.draw(s,this.bound)}this.createClipBound(c),t.getAttr("annotationVisible")&&this.plotShapes(c),this.drawLastUpdateItemShape(c),this.drawCountdown(),this.restoreCtxs(u)},t.prototype.drawLastUpdateItemShape=function(e){var t=this.getRoot(),i=t.getSeriesData(),n=t.getSettingValues("@contextMenu.priceLine"),r=t.getVisibleSeriesData(),o=i[i.length-1],a=r[r.length-1];a&&this.drawPriceLabel({ctx:e,item:a}),o&&n&&this.drawPriceLabel({ctx:e,item:o})},t.prototype.drawPriceLabel=function(e){var t=e.ctx,i=e.item,n=this.getParent(),r=this.getRoot();if(n.panelType===Dt.wh.BASE){var o=n.yAxis,a=i.close,l=i.open,s=o.getCoordOfValue(a);if(!(s<0||s>o.coordRange.getMaxValue())){var c=(0,g.__read)(a>=l?[r.getColorFromColorTable("cross.upLabelBgColor"),r.getColorFromColorTable("cross.upLabelBorderColor")]:[r.getColorFromColorTable("cross.downLabelBgColor"),r.getColorFromColorTable("cross.downLabelBorderColor")],2),u=c[0],d=c[1],h={point:{x:1,y:-s},text:""+n.formatterValue(a),color:r.getColorFromColorTable("cross.labelTextColor"),bgColor:u,borderColor:d};this.renderer.drawYAxisLabel(t,h,this.getYAxisWidth()-1,18)}}},t.prototype.setViewBound=function(){var e=this.getRoot(),t=this.getParent().getBound(),i=e.getAttr("margin"),n=t.x,r=t.y,o=t.width,a=t.height;this.setBound({x:n+o-i.right,y:r,width:i.right,height:a})},t.prototype.getTicksData=function(){var e=this.getParent(),t=e.yAxis,i=this.bound.height;if(!t)return[];var n={};return t.getAxisData().map((function(t){var i=t.p,r=t.v,o=e.formatterValue(+r);return function(e,t,i){if(t&&i){var n=wi()(i),r=wi()(e),o=wi()(t);return wi()(o).minus(n).abs().gte(r.minus(n).abs())}return!0}(+r,n[o],+o)&&(n[o]=+r),{p:i,fv:o,v:r}})).reduce((function(e,t){var r=t.p,o=t.v,a=t.fv;return n[a]===o&&r>=0&&r<=i&&e.push({p:r,v:a}),e}),[])},t.prototype.drawCountdown=function(){var e=this.getParent(),t=this.getRoot(),i=t.getCountdownContext(),n=t.getSettingValues("@contextMenu.countDown");this.clear([i]),this.initialCtxs([i]),e.panelType===Dt.wh.BASE&&n?(this.createClipBound(i),this.renderer.drawYAxisLabel(i,this.getCountdownLabel(),this.getYAxisWidth()-1,18),this.restoreCtxs([i])):this.restoreCtxs([i])},t.prototype.getNextTimestamp=function(){var e=this.getRoot(),t=e.getAttr("interval"),i=Mt.K0[t],n=e.getMaxTimestamp()+i;return n<Date.now()?n+i:n},t.prototype.getTimeUntilNextInterval=function(e){var t=this.getRoot().getAttr("interval"),i=Mt.K0[t],n=this.getNextTimestamp()-e;return n>0?n>i?i:n:0},t.prototype.getCountdownText=function(e){var t=this.getRoot().getAttr("interval"),i=(0,g.__read)(/\d{4}-\d{2}-(\d{2})T(\d{2}):(\d{2}):(\d{2})/.exec(new Date(e).toISOString())||[],5),n=i[1],r=i[2],o=i[3],a=i[4],l=(0,g.__read)([(+n-1).toString().padStart(2,"0"),r,o,a],4),s=l[0],c=l[1],u=l[2],d=l[3];switch(t){case"1s":case"1m":case"3m":case"5m":case"15m":case"30m":case"1h":return u+":"+d;case"2h":case"4h":case"6h":case"8h":case"12h":case"1d":return c+":"+u+":"+d;case"3d":case"1w":case"1M":default:return s+"D:"+c+"H"}},t.prototype.getCountdownLabel=function(){var e,t=this.getParent(),i=this.getRoot(),n=i.getVisibleSeriesData(),r=n[n.length-1]||{},o=r.close,a=r.open,l=(0,g.__read)(o>=a?[i.getSettingValues("@countdown.upTextColor"),i.getSettingValues("@countdown.upBgColor"),i.getSettingValues("@countdown.upBorderColor")]:[i.getSettingValues("@countdown.downTextColor"),i.getSettingValues("@countdown.downBgColor"),i.getSettingValues("@countdown.downBorderColor")],3),s=l[0],c=l[1],u=l[2],d=this.getCountdownText(this.getTimeUntilNextInterval(Date.now())),h=null===(e=null==t?void 0:t.yAxis)||void 0===e?void 0:e.getCoordOfValue(o);return{point:{x:1,y:h?18-h:0},text:d.toString(),color:s,bgColor:c,borderColor:u}},t.prototype.onmousemove=function(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:Mt.Li.NSRESIZE},weight:1e3,isRecord:!1})},t.prototype.onmouseout=function(){this.getRoot().setCursor({key:"gap",isClear:!0,config:{},weight:1e3})},t.prototype.onmousewheel=function(e){var t=this.getParent();if(t.panelType!==Dt.wh.EXT){var i=e.originEvent,n=i.deltaY,r=t.yAxis,o=r.getCurrentScaleCoeff(),a=n>0?1.02:1/1.02;r.scaleAroundCenter(a);var l=r.getCurrentScaleCoeff();(0,It.Fr)(o-l)||t.update(),i.preventDefault()}},t}(si),Ei=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawCloseIcon=function(e,t){var i=t.x,n=t.y,r=t.width,o=t.height;e.beginPath(),ci.Z.strokeRect(e,i,-(n+o),r,o),ci.Z.drawLine(e,i+3,-(n+3),i+r-3,-(n+o-3)),ci.Z.drawLine(e,i+3,-(n+o-3),i+r-3,-(n+3)),e.stroke()},t}return(0,g.__extends)(t,e),t.prototype.draw=function(e,t){var i=t.width,n=t.height;ci.Z.drawLine(e,0,-n,i,-n),e.stroke()},t}(di),ki=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderer=new Ei,t.weight=.3,t}return(0,g.__extends)(t,e),t.prototype.render=function(e){var t,i=this.getRoot(),n=this.getParent().getAttr("indicatorType"),r=i.getContext(),o=this.getCtxsByDrawMode(e);if(this.clear(o),null===(t=i.getIndicatorViewByName(n))||void 0===t?void 0:t.visible){this.initialCtxs(o),this.createClipBound(r);var a=this.getXYTicksData(),l=a.xData,s=a.yData,c=i.getSettingValues("@background.vertGridLine.show"),u=i.getSettingValues("@background.vertGridLine.color"),d=i.getSettingValues("@background.vertGridLine.lineWidth");c&&(r.save(),(0,It.ui)(r,{strokeStyle:u,lineWidth:+d}),this.renderer.drawVertGridLine(r,this.bound,l),r.restore());var h=i.getSettingValues("@background.horzGridLine.show"),g=i.getSettingValues("@background.horzGridLine.color"),p=i.getSettingValues("@background.horzGridLine.lineWidth");h&&(r.save(),(0,It.ui)(r,{strokeStyle:g,lineWidth:+p}),this.renderer.drawHorzGridLine(r,this.bound,s),r.restore()),this._renderIndicatorCharts(r),this.restoreCtxs(o)}},t.prototype._renderIndicatorCharts=function(e){var t=this.getParent(),i=t.getVisibleChartData(t.getPanelId());i.sort((function(e,t){return(e.zIndex||0)-(t.zIndex||0)})),i.forEach(this.plotChart.bind(this,e))},t}(ui);var Vi,Ai,Ti,Mi;!function(e){e.High="high",e.Low="low",e.Open="open",e.Close="close"}(Vi||(Vi={})),function(e){e.Hollow="hollow",e.Solid="solid"}(Ai||(Ai={})),function(e){e.MA="@MA",e.EMA="@EMA",e.WMA="@WMA",e.BOLL="@BOLL",e.VWAP="@VWAP",e.AVL="@AVL",e.TRIX="@TRIX",e.SAR="@SAR"}(Ti||(Ti={})),function(e){e.VOL="@VOL",e.MACD="@MACD",e.RSI="@RSI",e.KDJ="@KDJ",e.OBV="@OBV",e.CCI="@CCI",e.StochRSI="@Stoch RSI",e.WR="@Wm %R",e.DMI="@DMI",e.MTM="@MTM",e.EMV="@EMV",e.OI_UM="@OI-UM",e.OI_CM="@OI-CM",e.LS_ACCO="@LS-Acco",e.LS_POSIT="@LS-Posit",e.LS_RATIO="@LS-Ratio",e.BS_VOL="@BSVol",e.BASIS="@Basis"}(Mi||(Mi={}));var Di=i(23716);const Ii=function(e){function t(t,i){var n=e.call(this)||this;return n.widgets=[],n._isWaiting=!1,n._weight=0,n._result=new Map,n._isFirstWatch=!0,n._storageData={annotations:[],indicators:[],weight:.25},n._supplyYAxisMap=new Map,n._isFirstRender=!0,n.updateChartData=(0,It.Ds)((function(e,t){var i;void 0===e&&(e=0);var r=n.getAttr("indicatorType"),o=n.getPanelId(),a=n.getParent(),l=a.indicatorViews,s=n.getSeriesData();if(r!==Dt.A.CANDLE){var c=a.getIndicatorViewByName(o);if(!c||e>0&&c.isDiffSource)return;var u=c.params,d=a.getIndicatorHelperByName(o);if(void 0===d)return;if(e>0&&void 0!==d.updateResult){var h=n._result.get(o);if(h&&(null===(i=s[e])||void 0===i?void 0:i.time))return void d.updateResult(e,h.result,u,s[e])}try{d.getResult(s,u,(function(e){n._result.set(r,{result:e,params:u,styles:c.styles}),null==t||t()}))}catch(e){Di.error(e.message)}}else{var g=l.filter((function(e){var t=e.isHistBase,i=e.id;return t&&a.getIndicatorViewByName(i)&&a.getIndicatorHelperByName(i)})).length;l.forEach((function(i){var r,o=i.id,l=i.isHistBase,c=i.params;if(l){var u=a.getIndicatorViewByName(o);if(u){var d=a.getIndicatorHelperByName(o);if(d){if(e>0&&void 0!==d.updateResult){var h=n._result.get(o);if(h&&(null===(r=s[e])||void 0===r?void 0:r.time))return void d.updateResult(e,h.result,c,s[e])}try{d.getResult(s,c,(function(e){g--,n._result.set(o,{result:e,params:c,styles:u.styles}),0===g&&(null==t||t())}))}catch(e){Di.error("indicator get Result occured error: ",e.message)}}}}}))}}),100,!0),n.watchTheme=function(e){n.drawLogo()},n.config=(0,g.__assign)((0,g.__assign)((0,g.__assign)({},ei()(ti.defaultConfig)),{iconSize:10,margin:5,isShowClose:!1,isShowSetting:!0,titleInfo:{},isFormatNum:!1,isAbleTriggerMove:!0,isDestryed:!1}),i),n._panelType=t,n._weight=(null==i?void 0:i.weight)||(n.panelType===Dt.wh.BASE?.75:.25),n._initWidgets(),n}return(0,g.__extends)(t,e),Object.defineProperty(t.prototype,"yAxis",{get:function(){return this._yAxis||(0,g.__spreadArray)([],(0,g.__read)(this._supplyYAxisMap.values()))[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelType",{get:function(){return this._panelType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return this._weight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xAxis",{get:function(){return this.getParent().getXAxis()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chartResult",{get:function(){var e=this.getAttr("indicatorType"),t=(this._result.get(e)||{}).result;return void 0===t?[]:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"results",{get:function(){return Array.from(this._result.values()).map((function(e){var t=e.result;return void 0===t?[]:t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleContainer",{get:function(){return this._titleContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mainPane",{get:function(){return this._mainWidget},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"axisPane",{get:function(){return this._axisWidget},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeAxisPane",{get:function(){return this.getParent().getTimeAxisWidget()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLastPanel",{get:function(){var e=this.getParent().getIPanels();return e[e.length-1]===this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDiffPanel",{get:function(){var e=this.getParent().getIndicatorHelperByName(this.getPanelId());return!!(null==e?void 0:e.defaultProps.isDiffSource)},enumerable:!1,configurable:!0}),t.prototype.setYAxis=function(){var e=this;this._supplyYAxisMap.clear();var t=this._getYExtent(),i=t.default,n=(0,g.__rest)(t,["default"]),r=this._panelType===Dt.wh.BASE?25:10;i.isScaleCenter?this._yAxis=new ri([i.min,i.max],[0,this.bound.height-r]):this._yAxis=new oi([0,i.max],[0,this.bound.height-r]),Object.keys(n||{}).forEach((function(t){var i=n[t],o=i.max,a=i.min,l=i.isScaleCenter?new ri([a,o],[0,e.bound.height-r]):new oi([0,o],[0,e.bound.height-r]);e._supplyYAxisMap.set(t,l)}))},t.prototype.getPanelId=function(){return this.getAttr("id")},t.prototype.getYAxisByIndex=function(e){return this._supplyYAxisMap.get(e)},t.prototype.getAnnotations=function(){return this._mainWidget.getAnnotations()},t.prototype.getSavedData=function(){return this._storageData},t.prototype.updateWeight=function(e){(0,ii.hj)(e)&&(this._weight=e)},t.prototype.save=function(){for(var e=this.getAnnotations(),t=[],i=0,n=e.length;i<n;i++)e[i].getAttr("isNeedStore")&&t.push(e[i].getDescription());this._storageData.annotations=t,this._storageData.indicators=this.getSaveIndicatorsData(),this._storageData.weight=this._weight,this.getParent().saveChart()},t.prototype.getSaveIndicatorsData=function(){var e=[],t=this.getParent();if(this._panelType===Dt.wh.BASE)t.indicatorViews.forEach((function(t){var i=t.id,n=t.title,r=t.isHistBase,o=t.params,a=t.visible,l=t.isTriggeredByClick,s=void 0!==l&&l,c=t.isCustom,u=void 0!==c&&c;r&&e.push({name:n,id:i,type:n,params:o,visible:a,isTriggeredByClick:s,isCustom:u})}));else{var i=this.getPanelId(),n=t.getIndicatorViewByName(i)||{},r=n.id,o=n.title,a=n.params,l=void 0===a?{}:a,s=n.visible,c=n.isCustom,u=void 0!==c&&c,d=n.isTriggeredByClick,h=void 0!==d&&d;e.push({name:o,id:r,type:o,params:l,visible:s,isCustom:u,isTriggeredByClick:h})}return e},t.prototype.updateCursorStyle=function(e){var t=this.getParent(),i=t.getAttr("crossHair").style;t.setCursor({config:{style:e?Mt.Li.POINTER:i},weight:e?500:400,isRecord:!1})},t.prototype.transformAbsoluteXYToPlotItem=function(e){var t=this.transformPointToView(e),i=t.x,n=t.y;return{time:this.xAxis.getValueOfCoord(i),value:this.yAxis.getValueOfCoord(n)}},t.prototype.transformXYToAbsoluteXY=function(e){var t=this.getBound(),i=t.x,n=t.y;return{x:i+e.x,y:n-e.y}},t.prototype.getI18n=function(e,t){return this.getParent().getI18n(e,t)},t.prototype.getMainBound=function(){var e=this.getParent().getAttr("margin").right,t=this.bound;return{x:t.x,y:t.y,width:t.width-e,height:t.height}},t.prototype.getChartDatas=function(e){var t=(this._result.get(e)||{}).result;return void 0===t?[]:t},t.prototype.hasIndicator=function(e){return this._result.has(e)},t.prototype.updateParams=function(e,t,i){var n=this,r=this.getParent(),o=this._result.get(e),a=r.getIndicatorHelperByName(e);o&&a&&a.getResult(this.getSeriesData(),t,(function(e){o.result=e,n.setYAxis(),null==i||i()}))},t.prototype.getSeriesData=function(){var e=this._parent.getConfig().seriesData;return void 0===e?[]:e},t.prototype.getVisibleSeriesData=function(){return this._parent.getAttr("visibleSeriesData")||this.getSeriesData()},t.prototype.setParent=function(e){if(this._parent)throw new Error("Current Node had parent, Pls do not set parent repeatly!");this._parent=e,this._afterSetParent()},t.prototype.getParent=function(){return this._parent},t.prototype.afterSetParent=function(){this.initEvents()},t.prototype.getPosition=function(e){var t=e.time,i=e.value;return{x:this.xAxis.getCoordOfValue(t),y:this.yAxis.getCoordOfValue(i)}},t.prototype.getYPos=function(e){var t;return null===(t=this.yAxis)||void 0===t?void 0:t.getCoordOfValue(e)},t.prototype.getPriceOfYPos=function(e){return this.yAxis.getValueOfCoord(e)},t.prototype.getPlotItemByPosition=function(e,t){return{time:this.xAxis.getValueOfCoord(e),value:this.yAxis.getValueOfCoord(t)}},t.prototype.addWidget=function(e){return e.setParent(this),this.widgets.push(e),this},t.prototype.addWidgets=function(e){var t=this;return e.forEach((function(e){e.setParent(t),t.widgets.push(e)})),this},t.prototype.eachWidgets=function(e){var t=this;this.widgets.forEach((function(i){e.call(t,i)}))},t.prototype.setViewBound=function(e){e!==Dt.Vt.Width&&this.setBound(this.getUpdatedBound()),this.setWidgetsBound(),this.updateTitleContainer()},t.prototype.getAllWeight=function(){return this.getParent().iPanels.reduce((function(e,t){return e+t.weight}),0)},t.prototype.updateViewBound=function(){this.setBound(this.getUpdatedBound()),this.setWidgetsBound(),this.setYAxis(),this.updateTitleContainer()},t.prototype.updateViewBoundHeight=function(e,t){var i=this.getParent().visibleViewHeight,n=this.bound.height+e,r=this.getAllWeight();this._weight=n/i*r,this.setBound((0,g.__assign)((0,g.__assign)({},this.bound),{y:this.bound.y+t,height:n})),this.setWidgetsBound(),this.setYAxis(),this.updateTitleContainer()},t.prototype.setWidgetsBound=function(){this.eachWidgets((function(e){return e.setViewBound()}))},t.prototype.update=function(e){var t=this;if(void 0===e&&(e=Dt.mB.All),!this._isWaiting){this._isWaiting=!0;var i=this.getParent();setTimeout((function(){var n;i.hasPanel(t)&&(t.updateImmediate(e),null===(n=i.getFrontGapOfIPanel(t))||void 0===n||n.render(),t._isWaiting=!1)}),16)}},t.prototype.updateImmediate=function(e){void 0===e&&(e=Dt.mB.All),this.drawLogo(e),this.yAxis&&(this.widgets.forEach((function(t){t.updateImmediate(e)})),this.updateTitleLabel(),this._isFirstRender=!1)},t.prototype.removeWidget=function(e){for(var t=0;t<this.widgets.length;t++)if(this.widgets[t]===e){this.widgets.splice(t,1);break}return this},t.prototype.removeIndicator=function(e){this._result.delete(e)},t.prototype.initEvents=function(){var e,t=this,i=this.getParent(),n=this.getPanelId(),r=i.getIndicatorHelperByName(n);(null==r?void 0:r.defaultProps.isDiffSource)?(null===(e=null==r?void 0:r.subscribe)||void 0===e||e.call(r,(function(){t.updateChartData(0,(function(){t.setYAxis(),t.update()}))})),i.watch(["symbol","interval"],(function(){if(!t.getAttr("isDestryed")){var e=i.getConfig(),n=e.symbol,o=e.interval;if(n&&o){var a=(0,g.__read)(i.getTimeExtent(),2),l=a[0],s=a[1],c=void 0===s?Date.now():s;r.init(n,o,{startTime:l,endTime:c})}}}),!0),i.on("afterTimeShifted",n,(0,It.Ds)((function(e){var i,n=e.minTime,o=e.shiftedMinTime;n-o>((null===(i=t.xAxis)||void 0===i?void 0:i.getUnitTimeValue())||Number.MAX_SAFE_INTEGER)&&r.loadData({startTime:o,endTime:n-1})}),100))):i.watch("theme",this.watchTheme)},t.prototype.destroy=function(){var e,t=this.getParent(),i=t.titleContainer;this._wrapperContainer&&i.removeChild(this._wrapperContainer);var n=this.getPanelId(),r=t.getIndicatorHelperByName(n);(null==r?void 0:r.defaultProps.isDiffSource)?(null===(e=null==r?void 0:r.unSusbcribe)||void 0===e||e.call(r),t.off("afterTimeShifted",n),t.unwatch(["symbol","interval"])):t.unwatch("theme",this.watchTheme),this.setAttr("isDestryed",!0)},t.prototype.updateYExtend=function(){var e=this;if(this.yAxis){var t=this._getYExtent(),i=t.default,n=(0,g.__rest)(t,["default"]),r=function(t,i){var n=i.min,r=i.max,o=i.isScaleCenter,a=(n+r)/2,l=(r-n)/2,s=e.yAxis.getScaleCoeff();o?t.domainRange.setMinValue(a-l*s).setMaxValue(a+l*s):t.domainRange.setMinValue(0).setMaxValue(r*s)};r(this.yAxis,i),Object.keys(n||{}).forEach((function(t){var i=e.getYAxisByIndex(t);i&&r(i,n[t])}))}},t.prototype.getCloseIconBound=function(){var e=this.getConfig(),t=e.margin,i=void 0===t?10:t,n=e.iconSize,r=void 0===n?40:n;return{x:this.bound.width-i-r,y:this.bound.height-i-r,width:r,height:r}},t.prototype.getVisibleChartData=function(e){var t=this.getParent(),i=t.getColorFromColorTable("defaultColor"),n=this.xAxis.getUnitTimeValue(),r=this.xAxis.domainRange,o=new ni(r.getMinValue()-n,r.getMaxValue()+n),a=this.getChartDatas(e),l={},s=function(e,t){var i,n,r=l[e],o=r.vals,a=r.stack;if(!o)return[0,1,0];var s=o.length,c=o.indexOf(t),u=0;return(null===(i=a[e])||void 0===i?void 0:i.has(t))&&(u=(null===(n=a[e])||void 0===n?void 0:n.get(t))||0),[c,s,u]},c=a.filter((function(e){var i=e.visible;return!1!==t.getSettingValues(i)})).map((function(e){var n=e.data,r=e.borderData,a=e.color,l=e.colors,s=e.labelColors,c=e.lineWidth,u=(0,g.__rest)(e,["data","borderData","color","colors","labelColors","lineWidth"]),d=(0,g.__assign)((0,g.__assign)({},u),{data:[],lineWidth:c?t.getSettingValues(""+c):1});try{var h=(0,g.__read)(o.getSliceArrayIndexs(n,(function(e){return e.time})),2),p=h[0],f=h[1],v=l?l.slice(p,f):[],m=s?s.slice(p,f):[];d.data=n.slice(p,f).map((function(e,t){return(0,g.__assign)((0,g.__assign)({},e),{color:v[t]||a||i,labelColor:m[t]||a||i})})),r&&(d.borderData=o.sliceArray(r,(function(e){return e.time})))}catch(e){Di.error(o,n)}return d}));return c.forEach((function(e){var t,i=e.data,n=e.chartType,r=e.visible,o=void 0===r||r,a=e.stack,u=e.yAxisIndex;n===Dt.oX.Bar&&o&&(a&&(t=c.find((function(e){return e.name===a&&e.data!==i&&e.yAxisIndex===u}))),i.forEach((function(e){var n,r=e.time;if(void 0===l[r]&&(l[r]={vals:[],stack:{}}),t&&(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.length)>1){var o=(0,It.ry)(t.data,(function(e){var t=e.time;return r-t})),a=t.data[o];(null==a?void 0:a.time)===r&&(void 0===l[r].stack[r]&&(l[r].stack[r]=new Map),l[r].stack[r].set(i,a.value))}void 0===t&&l[r].vals.push(i)})),e.getBarInfos=s)})),c},t.prototype.getVisibleResults=function(){var e,t,i=this,n=this.getParent();return Array.from((null===(t=null===(e=this._result)||void 0===e?void 0:e.keys)||void 0===t?void 0:t.call(e))||{}).filter((function(e){var t=(n.getIndicatorViewByName(e)||{}).visible;return void 0===t||t})).map((function(e){return i.getVisibleChartData(e)}))},t.prototype.getBarDatas=function(e,t,i){var n,r=t.zeroBase,o=void 0===r?0:r,a=t.yAxisIndex,l=t.indicatorType,s=this.getParent(),c=s.getSettingValues("@MACD.longGrowth.style"),u=s.getSettingValues("@MACD.longGrowth.color"),d=s.getSettingValues("@MACD.longFall.style"),h=s.getSettingValues("@MACD.longFall.color"),p=s.getSettingValues("@MACD.shortGrowth.style"),f=s.getSettingValues("@MACD.shortGrowth.color"),v=s.getSettingValues("@MACD.shortFall.style"),m=s.getSettingValues("@MACD.shortFall.color"),y=null===(n=s.getAttr("candlestick"))||void 0===n?void 0:n.barWeight,x=this.getAttr("barWeight")||y,b=this.getFixedBarWidth(x),C=[],_=void 0!==a?this.getYAxisByIndex(a):this.yAxis;if(!_)return[];for(var w=_.getCoordOfValue(o),S=0,L=e.length;S<L;S++){var E=e[S],k=E.time,V=E.value,A=E.color;if((0,ii.hj)(k)&&(0,ii.hj)(V)){var T=this.xAxis.getCoordOfValue(k),M=(0,g.__read)((null==i?void 0:i(k,e))||[0,1,0],3),D=M[0],I=M[1],P=M[2],B=V,W=Math.max(1,Math.abs(_.getCoordOfValue(B)-w));V<0==P<0&&(B+=P);var R=_.getCoordOfValue(B),H=Math.min(-1,B>o?-R:-w),Z=(0,g.__read)(this.findPosition(T,D,I,b),2),O=Z[0],N=Z[1],F=s.getColorFromColorTable(A||"defaultColor"),K=F;if(l==="@"+Dt.A.MACD){var U=(e[S-1]||{}).value;V>0&&U>=V?(K=d===Ai.Hollow?"transparent":h,F=h):V<0&&U>=V?(K=v===Ai.Hollow?"transparent":m,F=m):V>0&&U<V?(K=c===Ai.Hollow?"transparent":u,F=u):V<0&&U<=V&&(K=p===Ai.Hollow?"transparent":f,F=f)}C.push({x:O,y:H,width:N,height:W,value:V,color:F,strokeColor:F,fillColor:K})}}return C},t.prototype.findPosition=function(e,t,i,n){if(1===i)return[e-.5*n,n];var r=n/(10*i+2*(i-1)),o=10*r,a=2*r,l=i/2;return[i%2==0?e+(t-l)*(o+a)+.5*a:e+(t-l)*o+Math.round(t-l)*a,o]},t.prototype.getLineDatas=function(e,t){var i=this.getParent(),n=[],r=void 0!==t?this.getYAxisByIndex(t):this.yAxis;if(!r)return[];for(var o=0,a=e.length;o<a;o++){var l=e[o],s=l.time,c=l.value,u=l.color,d=l.labelColor;if((0,ii.hj)(s)&&(0,ii.hj)(c)){var h={x:this.xAxis.getCoordOfValue(s),y:-r.getCoordOfValue(c)};u&&(h.color=i.getColorFromColorTable(u)),d&&(h.labelColor=i.getColorFromColorTable(d)),n.push(h)}}return n},t.prototype.updateTitleContainer=function(){var e=this.getParent().getAttr("margin"),t=this.getBound(),i=t.x,n=t.y,r=t.width,o={position:"absolute",top:n-t.height+"px",left:i+"px",maxWidth:r-e.right+"px",padding:"3px 4px",boxSizing:"border-box"};if(this._wrapperContainer)(0,It.AS)(this._wrapperContainer,o);else{var a=this.getParent().titleContainer;this._wrapperContainer=(0,It.az)("div",o,"title-wrapper-container"),this._titleContainer=(0,It.az)("div",{},"chart-title-row"),this._indicatorContainer=(0,It.az)("div",{},"chart-title-indicator-container"),this._titleContainer.appendChild(this._indicatorContainer),this._wrapperContainer.appendChild(this._titleContainer),a.appendChild(this._wrapperContainer)}},t.prototype.formatterValue=function(e){if(!(0,ii.hj)(e))return"";var t=this.getParent(),i=this.getAttr("isFormatNum")||!1,n=t.getAttr("candlestick"),r=n.dataFormatter,o=void 0===r?Dt.aI.Normal:r,a=n.isFloor,l=this.getAttr("precision")||t.getAttr("precision");return i?(0,It.XR)(e):o===Dt.aI.Percentage&&this.panelType===Dt.wh.BASE?(0,It.Lo)(e,l):(0,It.gH)(e,l,!!a)},t.prototype.formatOCHL=function(e,t){if(void 0===t&&(t=Yt()),!(0,ii.hj)(e))return"";var i=this.getParent(),n=this.getAttr("precision")||i.getAttr("precision"),r=t(e,n);return(0,It.uf)({number:r,digits:n})},t.prototype.updateTitleLabel=function(){var e,t=this,i=null===(e=this.getParent())||void 0===e?void 0:e.getAttr("currentItem");if(i&&this._indicatorContainer){var n=this.getAttr("titleInfo"),r=this.getAttr("indicatorType"),o=this.getPanelId(),a=this.getParent(),l=a.getIndicatorViewByName(o)||{},s=l.params,c=void 0===s?{}:s,u=l.visible,d=void 0===u||u,h=this._getTitleLabels(i,r,c);if(0!==h.length){var g=a.regContetxt;h.length!==this._indicatorContainer.childNodes.length&&(this._indicatorContainer.innerHTML=""),h.forEach((function(e){var i,r=e.label,o=e.key,l=e.styles,s=void 0===l?{}:l,c=e.className;if(r=r.replace(/\{\{(.*?)\}\}/g,(function(e,t){return g[t.trim()]||e})),s.color&&(s.color=a.getColorFromColorTable(s.color)),!t._indicatorContainer.querySelector("[key='"+o+"']")){var u=(0,It.az)("span",{paddingRight:"5px"},"default-label-box");u.setAttribute("key",o),null===(i=t._indicatorContainer)||void 0===i||i.appendChild(u),n[o]="",c&&pi(u,c),t.watchProperty(o,u)}t.setWatchProperty(n,o,r,s)})),this._isFirstWatch&&h.length>0&&(this.addFoldIcon(this._titleContainer,o),this._panelType===Dt.wh.EXT&&this.addToolIcons(this._titleContainer,{id:o,indicatorType:r,visible:d}),this._isFirstWatch=!1),this._panelType===Dt.wh.BASE&&this.updateHistBaseChartsTitle(i)}}},t.prototype.setIndicatorVisible=function(e,t,i){void 0===i&&(i=!1);var n=this.getParent(),r=n.getIndicatorViewByName(e),o=r.visible,a=(0,g.__rest)(r,["visible"]);if(o!==t){var l,s=this._wrapperContainer&&this._wrapperContainer.querySelector('[id="'+e+'-visible"');if(s){var c=(0,g.__read)(t?[bi.bM,this.getI18n("indicator-hide","Hide")]:[bi._q,this.getI18n("indicator-show","Show")],2),u=c[0],d=c[1];l=u,s.innerHTML=l,s.setAttribute("tooltip",d)}n.setIndicatorView(e,(0,g.__assign)((0,g.__assign)({},a),{visible:t,isTriggeredByClick:i})),this.setYAxis(),this.update(),this.save()}},t.prototype.drawLogo=function(e){var t;void 0===e&&(e=Dt.mB.Resize),(null===(t=this.getParent())||void 0===t?void 0:t.getAttr("isHiddenLogo"))||!this._isFirstRender&&e!==Dt.mB.Resize||this._panelType!==Dt.wh.BASE||this._mainWidget.drawLogo(e)},t.prototype.createIcon=function(e,t){var i=(0,It.az)("div",{},"icon-box");return t&&i.setAttribute("id",t),i.innerHTML=e,(0,It.AS)(i),i},t.prototype.addFoldIcon=function(e,t){var i=this.getParent(),n=i.getSettingManager(),r=t+"-title-fold",o=this.createIcon(bi.Y4);null==e||e.insertBefore(o,e.firstChild);var a=function(t){t?pi(e,"fold"):fi(e,"fold"),e.setAttribute("isFold",t?"true":"false")};o.addEventListener("click",(function(){var t="true"===e.getAttribute("isFold");a(!t),i.setSettingValues(r,t?"false":"true")})),(null==n?void 0:n.isLoaded())?a("true"===n.getValue(r)):null==n||n.addPenddingList((function(){a("true"===n.getValue(r))}))},t.prototype.getFixedBarWidth=function(e){void 0===e&&(e=.8);var t=this.getParent().getXAxis(),i=t.unitWidth*e,n=t.unitWidth-3,r=t.unitWidth-2;return n>0?n:i>r&&r>0?r:i},t.prototype.addToolIcons=function(e,t){var i=this,n=t.indicatorType,r=t.visible,o=t.id;if(this.getAttr("isShowSetting")){var a=this.getParent(),l=(0,g.__read)(r?[bi.bM,this.getI18n("indicator-hide","Hide")]:[bi._q,this.getI18n("indicator-show","Show")],2),s=l[0],c=l[1],u=this.createIcon(s,n+"-visible");u.setAttribute("tooltip",c);var d=this.createIcon(bi.qY),h=this.createIcon(bi.Tw),p=(0,It.az)("div",{},"indicator-title-toolbox");p.append.apply(p,[u,d,h]),null==e||e.append(p),d.addEventListener("click",(function(){null==a||a.fire("showParamsSettingPanel",{id:o})})),d.setAttribute("tooltip",this.getI18n("indicator-settings","Settings")),h.setAttribute("tooltip",this.getI18n("indicator-close","Close")),u.addEventListener("click",(function(){var e=a.getIndicatorViewByName(o).visible;i.setIndicatorVisible(o,!e,!0)})),h.addEventListener("click",(function(){a.closeIndicatorByName(o)})),mi(u),mi(d),mi(h)}},t.prototype.updateHistBaseChartsTitle=function(e){var t=this,i=this.getParent().indicatorViews,n=this.getAttr("titleInfo"),r=this.getParent(),o=r.regContetxt;i.forEach((function(a){var l,s=a.id,c=a.indicatorType,u=a.isHistBase,d=a.visible,h=a.subElement,g=a.params;if(u){var p=t._getTitleLabels(e,s,g);if(0!==p.length){var f=h.querySelector("[key='"+s+"']");f||((f=t._indicatorContainer.cloneNode()).setAttribute("key",s),h.appendChild(f)),p.forEach((function(e){var i=e.label,a=e.key,l=e.styles,s=void 0===l?{}:l,c=e.className;if(i=i.replace(/\{\{(.*?)\}\}/g,(function(e,t){return o[t.trim()]||e})),s.color&&(s.color=r.getColorFromColorTable(s.color)),!f.querySelector("[key='"+a+"']")){var u=(0,It.az)("span",{paddingRight:"5px"},"default-label-box");u.setAttribute("key",a),null==f||f.appendChild(u),n[a]="",c&&pi(u,c),t.watchProperty(a,u)}t.setWatchProperty(n,a,i,s)})),h.parentNode||(t._wrapperContainer.appendChild(h),(null===(l=i.find((function(e){return e.isHistBase})))||void 0===l?void 0:l.id)===s&&t.addFoldIcon(h,"main-indicators-fold"),t.addToolIcons(h,{id:s,indicatorType:c,visible:d}))}}}))},t.prototype.getUpdatedBound=function(){for(var e=this.getAllWeight(),t=this.getParent(),i=t.getConfig(),n=i.width,r=i.margin,o=t.visibleViewHeight,a=t.iPanels,l=0,s=0;s<a.length;s++){var c=a[s];if(c===this)break;l+=c.bound.height}var u=o*this._weight/e,d=n-r.left;return l+=u,{x:r.left,y:l,height:u,width:d}},t.prototype._initWidgets=function(){this._axisWidget=new Li,this._panelType===Dt.wh.BASE?(this._mainWidget=new Ci,this.addWidgets([this._mainWidget,this._axisWidget])):(this._mainWidget=new ki,this.addWidgets([this._mainWidget,this._axisWidget]))},t.prototype._getYExtent=function(){var e=this.getAttr("indicatorType"),t=this.getParent(),i=t.getAttr("precision"),n=t.getSettingValues(t.getSettingManager().getSymbolDescription().styleKey),r={default:{max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:!0,fixMax:!1,fixMin:!1}};if(e===Dt.A.CANDLE){var o=this.getVisibleSeriesData().reduce((function(e,t){var i=e.high,r=e.low,o=n===Dt.oX.CandleBar?t.high:t.close,a=n===Dt.oX.CandleBar?t.low:t.close;return{high:i=Math.max(i,o),low:r=Math.min(r,a)}}),{high:Number.MIN_SAFE_INTEGER,low:Number.MAX_SAFE_INTEGER});r.default.max=o.high,r.default.min=o.low,r.default.isScaleCenter=!0;for(var a=0,l=(s=this.getVisibleResults()).length;a<l;a++)s[a].forEach((function(e){var t=e.data,i=e.yAxisIndex,n=e.isScaleCenter,o=void 0===n||n,a=e.min,l=e.max,s={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,fixMax:!1,fixMin:!1};if(void 0!==i?(r[i]||(r[i]={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:o,fixMax:!1,fixMin:!1}),s=r[i]):s=r.default,(0,ii.hj)(l))s.max=l,s.fixMax=!0;else if(!s.fixMax){var c=qt()(t,"value");c&&c.value>s.max&&(s.max=c.value)}if((0,ii.hj)(a))s.min=a,s.fixMin=!0;else if(!s.fixMin){var u=Jt()(t,"value");u&&u.value<s.min&&(s.min=u.value)}}))}else{var s;(s=this.getVisibleChartData(e)).forEach((function(e){var t=e.chartType,i=e.data,n=void 0===i?[]:i,o=e.yAxisIndex,a=e.isScaleCenter,l=void 0===a||a,s=e.min,c=e.max,u=e.stack,d=e.zeroBase,h=void 0===d?0:d,p=e.getBarInfos,f={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,fixMax:!1,fixMin:!1};if(void 0!==o?(r[o]||(r[o]={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:!!l,fixMin:!1,fixMax:!1}),f=r[o]):(f=r.default,r.default.isScaleCenter=!!l),(0,ii.hj)(c)?(f.max=c,f.fixMax=!0):f.fixMax||(v=qt()(n,"value"))&&v.value>f.max&&(f.max=v.value),(0,ii.hj)(s)?(f.min=s,f.fixMin=!0):f.fixMin||(m=Jt()(n,"value"))&&m.value<f.min&&(f.min=m.value),void 0!==u&&t===Dt.oX.Bar){var v,m,y=n.map((function(e){var t=e.time,i=e.value,r=(0,g.__read)((null==p?void 0:p(t,n))||[0,1,0],3)[2],o=void 0===r?0:r;return i<h==o<h?{time:t,value:i+o}:{time:t,value:i}}));(v=qt()(y,"value"))&&v.value>f.max&&!f.fixMin&&(f.max=v.value),(m=Jt()(n,"value"))&&m.value<f.min&&!f.fixMax&&(f.min=m.value)}}))}return Object.keys(r).forEach((function(e){var t=r[e],n=t.min,o=t.max,a=t.isScaleCenter;if((0,It.Fr)(o-n,Math.pow(10,-i))){var l=0===o?10:Math.abs(o),s=Math.floor(Math.log(l)/Math.log(10)),c=Math.pow(10,s)/2;a||(r[e].max=o+c),r[e].min=n-c,r[e].max=o+c}})),r},t.prototype._getTitleLabels=function(e,t,i){void 0===i&&(i={});var n=[],r=this.getParent(),o=r.getAttr("precision"),a=this.getAttr("isFormatNum"),l=r.getXAxis();if(t===Dt.A.CANDLE){var s=e.time,c=e.open,u=e.high,d=e.low,h=e.close,p=e.change,f=void 0===p?"0.00%":p,v=e.amplitude,m=void 0===v?"0.00%":v,y=h>=c?{color:r.getColorFromColorTable("candle.upBarColor")}:{color:r.getColorFromColorTable("candle.downBarColor")},x=this.getI18n("open","Open"),b=this.getI18n("high","High"),C=this.getI18n("close","Close"),_=this.getI18n("low","Low"),w=this.getI18n("change","CHANGE"),S=this.getI18n("amplitude","AMPLITUDE");n.push({label:this._getTitleTime(s,l.getOriginTimeScaleType()),key:"t"},{label:x+":",key:"O"},{label:this.formatOCHL(c),key:"o",styles:y},{label:b+":",key:"H"},{label:this.formatOCHL(u,Xt()),key:"h",styles:y},{label:_+":",key:"L"},{label:this.formatOCHL(d),key:"l",styles:y},{label:C+":",key:"C"},{label:this.formatOCHL(h),key:"c",styles:y},{label:w+":",key:"CHANGE",className:"title_change_label"},{label:f,key:"change",styles:y,className:"title_change_value"},{label:S+":",key:"AMP",className:"title_amplitude_label"},{label:m,key:"amp",styles:y,className:"title_amplitude_value"})}else{var L=r.getIndicatorHelperByName(t);if(void 0===L)return[];var E=this.getChartDatas(t).map((function(e){var t=e.visible,i=(0,g.__rest)(e,["visible"]);return(0,g.__assign)((0,g.__assign)({},i),{visible:!1!==r.getSettingValues(t)})}));n=L.getLabel(e.time,E,(0,g.__assign)((0,g.__assign)({},i),{precision:o,isFormatNum:a}))}return n},t.prototype._getTitleTime=function(e,t){var i="YYYY/MM/DD";return t===Dt.QX.Month?i="YYYY/MM/01":t===Dt.QX.Minute?i="YYYY/MM/DD hh:mm":t===Dt.QX.Hour?i="YYYY/MM/DD hh:00":t===Dt.QX.Second&&(i="YYYY/MM/DD hh:mm:ss"),(0,It.mr)(e,i)},t.prototype._afterSetParent=function(){},t}(ti),Pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,g.__extends)(t,e),t.prototype.draw=function(e,t){var i=t.width;ci.Z.fillRect(e,0,0,i,1)},t}(di);var Bi=i(82317);const Wi=function(e){function t(t,i){var n=e.call(this)||this;return n.config=(0,g.__assign)((0,g.__assign)({},ei()(si.defaultConfig)),{zIndex:100}),n.renderer=new Pi,n._frontPanel=t,n._nextPanel=i,n._initEvents(),n}return(0,g.__extends)(t,e),Object.defineProperty(t.prototype,"frontPanel",{get:function(){return this._frontPanel},set:function(e){this._frontPanel=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPanel",{get:function(){return this._nextPanel},set:function(e){this._nextPanel=e},enumerable:!1,configurable:!0}),t.prototype.clear=function(){var e=this.getRoot().getContext(),t=this.getClearBound(),i=t.x,n=t.y,r=t.width;ci.Z.clearRect(e,{x:i,y:n,width:r,height:1})},t.prototype.render=function(){var e=this.getRoot(),t=e.getContext();t.save(),this.setCanvasTransform(t);var i=e.getSettingValues("@background.frame.color");(0,It.ui)(t,{fillStyle:i}),this.renderer.draw(t,this.bound),t.restore()},t.prototype.setViewBound=function(){var e=this._frontPanel.getBound();this.setBound((0,g.__assign)((0,g.__assign)({},e),{height:0}))},t.prototype.contain=function(e){var t=this.bound,i=t.x,n=t.y,r=t.width,o=t.height,a=new Bi.Z(i,0,r,o),l=[e.x,n-e.y];return a.expand(0,5).contain(l)},t.prototype._initEvents=function(){this.on("mousedown",this._onmousedown),this.on("mousemove",this._onmousemove),this.on("mouseout",this._onmouseout)},t.prototype._onmousemove=function(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:Mt.Li.NSRESIZE},weight:1e3,isRecord:!1,key:"gap"})},t.prototype._onmouseout=function(){this.getRoot().setCursor({key:"gap",isClear:!0,config:{},weight:1e3})},t.prototype._onmousedown=function(e){var t=this,i=e.point.y,n=e.originEvent,r=this.getRoot();this._clearDragEvent(),this._frontPanel.setAttr("isAbleTriggerMove",!1),this._nextPanel.setAttr("isAbleTriggerMove",!1);var o=!1;r.on("mousemove","gap",(function(e){var n=e.point.y,r=n-i,a=t._frontPanel.getBound().height,l=t._nextPanel.getBound().height;a+r<=30||l-r<=30||(o=!0,t._frontPanel.updateViewBoundHeight(r,r),t.setBound((0,g.__assign)((0,g.__assign)({},t.bound),{y:t.bound.y+r})),t._nextPanel.updateViewBoundHeight(-r,0),t._frontPanel.update(Dt.mB.Resize),t._nextPanel.update(Dt.mB.Resize),i=n)})),r.on("mouseup","gap",(function(){t._frontPanel.setAttr("isAbleTriggerMove",!0),t._nextPanel.setAttr("isAbleTriggerMove",!0),t._clearDragEvent(),o&&(t._frontPanel.save(),t._nextPanel.save())})),n.preventDefault()},t.prototype._clearDragEvent=function(){var e=this.getRoot();e.off("mousemove","gap"),e.off("mouseup","gap")},t}(si),Ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panels=[],t._indicatorViews=new Map,t._isLoaded=!1,t._isWaiting=!1,t._colorMode=Mt.UX,t.getI18n=function(e,t){return t},t.moduleManager={},t}return(0,g.__extends)(t,e),Object.defineProperty(t.prototype,"indicatorViews",{get:function(){return Array.from(this._indicatorViews.values())},enumerable:!1,configurable:!0}),t.prototype.registerModule=function(e,t){t&&this.moduleManager[e]!==t&&(this.moduleManager[e]=t)},t.prototype.getModule=function(e){return this.moduleManager[e]},t.prototype.getSettingManager=function(){return this.getModule(Mt.Jj.settingManager)},t.prototype.getSettingValues=function(e){var t=this.getSettingManager();return e&&t?t.getValue(e):void 0},t.prototype.setSettingValues=function(e,t){var i=this.getSettingManager();null==i||i.setValue(e,t)},t.prototype.getIndicatorParams=function(e){var t=this.getSettingManager();return t?t.getValue(e):{}},t.prototype.getIndicatorViewByName=function(e){return this._indicatorViews.get(e)},t.prototype.setIndicatorView=function(e,t){this._indicatorViews.set(e,t)},t.prototype.deleteIndicatorViewByName=function(e){this._indicatorViews.delete(e)},t.prototype.getPanels=function(e){return e?this.panels.filter((function(t){return e(t)})):this.panels},t.prototype.getIPanels=function(){return this.panels.filter((function(e){return e instanceof Ii}))},t.prototype.getFrontGapOfIPanel=function(e){for(var t=this.getPanels(),i=!1,n=t.length-1;n>=0;n--){var r=t[n];if(i&&r instanceof Wi)return r;i=r===e}},t.prototype.addPanels=function(e){var t=this;return e.forEach((function(e){t.setWidgetParent(e),t.panels.push(e)})),this},t.prototype.addElement=function(e){var t=this.getAttr("container");t&&e&&t.appendChild(e)},t.prototype.addElemens=function(e){var t=this.getAttr("container");t&&e.forEach((function(e){return t.appendChild(e)}))},t.prototype.eachPanels=function(e,t){var i=this;void 0===t?this.panels.forEach((function(t,n){e.call(i,t,n)})):t?this.panels.slice(0).sort((function(e,t){return t.getAttr("zIndex")-e.getAttr("zIndex")})).forEach((function(t){e.call(i,t)})):this.panels.slice(0).sort((function(e,t){return e.getAttr("zIndex")-t.getAttr("zIndex")})).forEach((function(t){e.call(i,t)}))},t.prototype.update=function(e){var t=this;void 0===e&&(e=Dt.mB.All),!this._isWaiting&&this._isLoaded&&(this._isWaiting=!0,this._lastRenderTimer=requestAnimationFrame((function(){cancelAnimationFrame(t._lastRenderTimer),t._lastRenderTimer=null,t.renderImmediate(e),t._isWaiting=!1})))},t.prototype.renderImmediate=function(e){void 0===e&&(e=Dt.mB.All),this._isLoaded&&(this._lastRenderTimer&&cancelAnimationFrame(this._lastRenderTimer),this.eachPanels((function(t){t.updateImmediate(e)}),!1),this._isWaiting=!1)},t.prototype.removePanel=function(e){for(var t=0;t<this.panels.length;t++)if(this.panels[t]===e){this.panels.splice(t,1),e instanceof Ii&&(this._indicatorViews.delete(e.getAttr("indicatorType")),e.destroy());break}return this},t.prototype.removePanels=function(e){for(var t=this.panels.length-1;t>=0;t--){var i=this.panels[t];if(e.has(i)&&(this.panels.splice(t,1),e.delete(i),i instanceof Ii&&(this._indicatorViews.delete(i.getAttr("indicatorType")),i.destroy()),0===e.size))return}},t.prototype.initPanelBound=function(e){void 0===e&&(e=Dt.Vt.All),this.eachPanels((function(t){t.setViewBound(e)}))},t.prototype.updatePanelBound=function(){this.eachPanels((function(e){e instanceof Ii&&e.updateViewBound(),e instanceof Wi&&e.setViewBound()}))},t.prototype.resizeAllPanelBound=function(){this.eachPanels((function(e){e instanceof Ii?e.updateViewBound():e.setViewBound()}))},t.prototype.initPanelYAxis=function(){this.eachPanels((function(e){e instanceof Ii&&e.setYAxis()}))},t.prototype.filterPanels=function(e){var t=this;return this.panels.filter((function(i){return e.call(t,i)}))},t.prototype.getPanel=function(e){return this.panels.find(e)},t.prototype.hasPanel=function(e){return this.panels.some((function(t){return t===e}))},t.prototype.setIsLoaded=function(e){this._isLoaded=e},t.prototype.isLoaded=function(){return this._isLoaded},t.prototype.registerColorTable=function(e,t){e=e.toLocaleLowerCase();var i=this._colorMode[e]||{},n=Nt()((0,g.__assign)({},i),t);Kt()(i,n)||(Object.assign(this._colorMode[e]||{},n),this.update())},t.prototype.getColorTableByTheme=function(e){return this._colorMode[e.toLocaleLowerCase()]},t.prototype.registerI18n=function(e){this.getI18n=e},t}(Ut.Z),Hi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawBorder=function(e,t){e.beginPath();var i=t.width,n=t.height;ci.Z.drawLine(e,0,-n,i,-n),e.stroke()},t.drawTicks=function(e,t,i,n,r,o){e.beginPath();var a=-i.height;t.forEach((function(t){var i=(0,It.sL)(t.v,o);i&&(ci.Z.drawLine(e,t.p,a,t.p,a+r),ci.Z.drawText(e,i,t.p,a+r+n))})),e.stroke()},t}return(0,g.__extends)(t,e),t.prototype.draw=function(e,t){this.drawBorder(e,t)},t}(di),Zi=function(e){function t(){var t=e.call(this)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(si.defaultConfig)),{zIndex:1e3}),t.renderer=new Hi,t.on("mousemove",t.onmousemove),t.on("mouseout",t.onmouseout),t.on("mousedown",t.onmousedown),t}return(0,g.__extends)(t,e),t.prototype.getCtxsByDrawMode=function(e){var t,i=this.getRoot(),n=i.getContext(),r=i.getMarkContext();return((t={})[Dt.mB.All]=[n,r],t[Dt.mB.Resize]=[n,r],t[Dt.mB.Marks]=[r],t)[e]||[]},t.prototype.clear=function(e){void 0===e&&(e=[]);var t=this.getClearBound();e.forEach((function(e){return ci.Z.clearRect(e,t)}))},t.prototype.render=function(e){var t=this.getRoot(),i=t.getConfig(),n=i.xAxis,r=i.tick,o=r.width,a=void 0===o?5:o,l=r.textMargin,s=void 0===l?0:l,c=t.getContext(),u=t.getMarkContext(),d=this.getCtxsByDrawMode(e);if(this.clear(d),this.initialCtxs(d),e===Dt.mB.All||e===Dt.mB.Resize){this.createClipBound(c);var h=t.getSettingValues("@background.frame.color");(0,It.ui)(c,{strokeStyle:h}),this.renderer.drawPolyline(c,[{x:0,y:-n.height},{x:this.bound.width,y:-n.height}]);var g=this.getRoot().getXAxis(),p=this.getTicksData(),f=g.getCurrentTimeScale(),v=t.getColorFromColorTable("axis.tickLineColor"),m=t.getColorFromColorTable("axis.tickTextColor");(0,It.ui)(c,{strokeStyle:v,fillStyle:m,textBaseline:Dt.Wr.Top,textAlign:Dt.PH.Center}),this.renderer.drawTicks(c,p,this.bound,s,a,f)}this.createClipBound(u),t.getAttr("annotationVisible")&&this.plotShapes(u),this.restoreCtxs(d)},t.prototype.setViewBound=function(){var e=this.getRoot().getConfig(),t=e.xAxis,i=e.margin,n=e.width,r=e.height;this.setBound({x:i.left,y:r-i.bottom,width:n-i.right,height:t.height})},t.prototype.getTicksData=function(){var e=this.getRoot();return e?e.getXAxis().getAxisData():[]},t.prototype.onmouseout=function(){var e=this.getRoot(),t=e.getHitContext();ci.Z.clearRect(t),this.clearDragEvent(),e.setCursor({key:"gap",isClear:!0,config:{},weight:1e3})},t.prototype.onmousedown=function(e){var t=this,i=this.getRoot(),n=e.point.x;this.on("mousemove","mousedown",(function(e){var i=e.point.x;t.getRoot().shiftTimeLine(n-i),n=i})),this.on("mouseup","mousedown",(function(){t.clearDragEvent(),i.endShiftTime()}))},t.prototype.clearDragEvent=function(){this.off("mousemove","mousedown"),this.off("mouseup","mousedown")},t.prototype.onmousemove=function(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:Mt.Li.EWRESIZE},weight:1e3,isRecord:!1})},t}(si),Oi=function(e){function t(t,i,n,r){void 0===r&&(r=1.5);var o=e.call(this,t,i,!1)||this;return o.unitWidth=10,o.timeUnitValue=Mt.Ri[Dt.QX.Day],o._maxScaleCoeff=9,o._minScaleCoeff=.2,o._minNearUnitWidth=50,o._originTimeScaleType=Dt.QX.Day,o._timeScales=[],o._sliceRanges=[],o._hasSliceTimeRange=!1,o._scaleCoeff=r,o.unitWidth/=o._scaleCoeff,o._timeIntervals=(0,g.__assign)({},Mt.Ri),o.analysisTimeInterval(n),o.resetTimeDomainRange(),o._maxTimeValue=o.domainRange.getMaxValue(),o}return(0,g.__extends)(t,e),t.prototype.getCoordOfValue=function(e){var t=this.coordRange.getMinValue(),i=this.domainRange.getMinValue();return t+(e-i-this.getEasedSliceTime(i,e-i,!0).sliceTimeLength)/this.getUnitTimeValue()*this.unitWidth},t.prototype.getValueOfCoord=function(e){var t=this.getUnitTimeValue(),i=this.domainRange.getMinValue(),n=(this._maxTimeValue-i)%this.timeUnitValue,r=n/t*this.unitWidth,o=e-this.coordRange.getMinValue()-r,a=n+Math.round(o/this.unitWidth)*t,l=this.getEasedSliceTime(i,a).time;if(this._originTimeScaleType===Dt.QX.Month){var s=new Date(l),c=new Date(l+this._timeIntervals.Day);if(s.getUTCMonth()!==c.getUTCMonth())return l+this._timeIntervals.Day}return l},t.prototype.getUnitTimeValue=function(){return this.timeUnitValue},t.prototype.getCurrentTimeScale=function(){return this._currentTimeScale},t.prototype.getOriginTimeScaleType=function(){return this._originTimeScaleType},t.prototype.setCurrentTimeScale=function(e){return this._currentTimeScale=e,this},t.prototype.getAxisData=function(){for(var e=this.domainRange.getMinValue(),t=this.coordRange.getMinValue(),i=this.coordRange.getInterval()/this.unitWidth,n=this.getUnitTimeValue(),r=[],o={lastTime:0,pos:Number.MIN_SAFE_INTEGER},a=0;a<=i;a++){if(0===a){var l=(this._maxTimeValue-e)%this.timeUnitValue;t+=l/n*this.unitWidth,e+=l}var s=this.getEasedSliceTime(e,a*n).time;if(this._originTimeScaleType===Dt.QX.Month){var c=new Date(s),u=new Date(s+this._timeIntervals.Day);c.getUTCMonth()!==u.getUTCMonth()&&(s+=this._timeIntervals.Day)}this.isShowTicks(s,o)&&r.push({p:t+a*this.unitWidth,v:s})}return r},t.prototype.scaleAroundTimestamp=function(e,t){this.unitWidth/t<2||this._scaleCoeff*t>this._maxScaleCoeff||this._scaleCoeff*t<this._minScaleCoeff||(this.unitWidth/=t,this._scaleCoeff*=t,this.scaleAroundPoint(e,t),this.updateTimeScale())},t.prototype.scaleAroundRight=function(e){if(!(this.unitWidth<=2&&e>1||this._scaleCoeff>=this._maxScaleCoeff&&e>1||this._scaleCoeff<=this._minScaleCoeff&&e<1)){this.unitWidth=Math.max(2,this.unitWidth/e);var t=this._scaleCoeff*e;this._scaleCoeff=Math.min(this._maxScaleCoeff,Math.max(this._minScaleCoeff,t));var i=this.domainRange.getMaxValue(),n=this.getDomainInterval(),r=this.getEasedSliceTime(i,-n).time;this.domainRange.setMinValue(r).setMaxValue(i),this.updateTimeScale()}},t.prototype.setTimeScales=function(e){return this._timeScales=e,this},t.prototype.updateSliceTimeInterval=function(e){this._sliceRanges.length=0;for(var t=2*this.timeUnitValue,i=1;i<e.length;i++){var n=e[i-1].time,r=e[i].time;r-n>=t&&this._sliceRanges.push([n+this.timeUnitValue,r])}this._hasSliceTimeRange=this._sliceRanges.length>0},t.prototype.shiftTime=function(e){if(this._hasSliceTimeRange){var t=this.getDomainInterval(),i=this.domainRange.getMinValue(),n=this.getEasedSliceTime(i,e).time,r=this.getEasedSliceTime(n,t).time;this.domainRange.setMinValue(n).setMaxValue(r)}else this.domainRange.shift(e)},t.prototype.getEasedSliceTime=function(e,t,i){void 0===i&&(i=!1);var n=e+t,r=0;if(t<0)for(var o=this._sliceRanges.length-1;o>=0&&(n<=(a=this._sliceRanges[o])[1]&&e>=a[1]&&(i||(n-=a[1]-a[0]),r+=a[1]-a[0]),!(n>a[1]));o--);if(t>0)for(o=0;o<this._sliceRanges.length;o++){var a;if(n>=(a=this._sliceRanges[o])[0]&&e<=a[0]&&(i||(n+=a[1]-a[0]),r+=a[1]-a[0]),n<a[0])break}return{time:n,sliceTimeLength:r}},t.prototype.getDomainInterval=function(){return this.coordRange.getInterval()/this.unitWidth*this.getUnitTimeValue()},t.prototype.updateTimeScale=function(){for(var e=this._timeScales.length-1;e>=0;e--){var t=this._timeScales[e],i=t.type,n=t.number,r=this._timeIntervals[i]*n;if(Math.floor(r/this.timeUnitValue)*this.unitWidth>=this._minNearUnitWidth&&this._timeIntervals[i]>=this.timeUnitValue){this.setCurrentTimeScale(this._timeScales[e]);break}}this._currentTimeScale||this.setCurrentTimeScale({type:Dt.QX.Month,number:12})},t.prototype.isShowTicks=function(e,t){var i,n=new Date(e),r=((i={})[Dt.QX.Year]=n.getUTCFullYear(),i[Dt.QX.Month]=n.getUTCMonth(),i[Dt.QX.Week]=n.getUTCDay(),i[Dt.QX.Day]=n.getUTCDate(),i[Dt.QX.Hour]=n.getUTCHours(),i[Dt.QX.Minute]=n.getUTCMinutes(),i[Dt.QX.Second]=n.getUTCSeconds(),i),o=this.getCoordOfValue(e),a=this._currentTimeScale,l=a.type,s=a.number,c=this._timeIntervals[l]*s,u=!1;if(l===Dt.QX.Month){var d=(0,It.Nw)(t.lastTime,e)-1;u=o-t.pos>=this._minNearUnitWidth&&this.isShowMonthOrYear(r,d,s)}else e-t.lastTime>=c&&o-t.pos+.01>=this._minNearUnitWidth&&(u=l===Dt.QX.Hour?this.isShowHour(r):l===Dt.QX.Day?this.isShowDay(r):r[l]%s==0);return u&&(t.lastTime=e,t.pos=o),u},t.prototype.isShowMonthOrYear=function(e,t,i){var n=!0;if(i>12){var r=Math.floor(i/12);n=e[Dt.QX.Year]%r==0}return n&&e[Dt.QX.Day]<=this.timeUnitValue/this._timeIntervals.Day+1&&t>=i&&e[Dt.QX.Month]%i==0},t.prototype.isShowHour=function(e){var t=!1,i=this._currentTimeScale.number;if(0!==e[Dt.QX.Minute])return!1;if(this.timeUnitValue>=this._timeIntervals.Hour){var n=e[Dt.QX.Hour]%(this.timeUnitValue/this._timeIntervals.Hour);0!==n&&n*this._timeIntervals.Hour<=this.timeUnitValue&&(t=(e[Dt.QX.Hour]-n)%i==0)}return e[Dt.QX.Hour]%i==0&&(t=!0),t},t.prototype.isShowDay=function(e){var t=this._currentTimeScale,i=t.type,n=t.number;return n%7==0?e[Dt.QX.Hour]*this._timeIntervals.Hour<=this.timeUnitValue&&0===e[Dt.QX.Week]:e[Dt.QX.Hour]*this._timeIntervals.Hour<this.timeUnitValue&&e[i]%n==0},t.prototype.getIntervalFrequency=function(e){for(var t={},i=1,n=e.length,r=e.length/2;i<n;i++){if((l=t[s=e[i].time-e[i-1].time]?t[s]+1:1)>r)return{interval:s};t[s]=l}var o=Object.keys(t),a={interval:0,count:0};for(i=0;i<o.length;i++){var l,s=Number(o[i]);(l=t[o[i]])>a.count&&(a={interval:s,count:l})}return a},t.prototype.analysisTimeInterval=function(e){var t=e.length;if(this._originTimeScaleType=Dt.QX.Day,1===t)this.timeUnitValue=Mt.Ri[Dt.QX.Day];else{var i=(0,It.Nw)(this.domainRange.getMinValue(),this.domainRange.getMaxValue());if(t<=i)this.timeUnitValue=this.domainRange.getInterval()/(i-1),this._originTimeScaleType=Dt.QX.Month,this._timeIntervals[Dt.QX.Month]=this.timeUnitValue;else{var n=this.getIntervalFrequency(e);this.timeUnitValue=n.interval;for(var r=Mt.L7.length-1;r>=0;r--){var o=Mt.L7[r].type;this.timeUnitValue%Mt.Ri[o]==0&&(this._originTimeScaleType=o)}}}this.setTimeScales(Mt.L7),this.updateTimeScale()},t.prototype.resetTimeDomainRange=function(){var e=this.domainRange.getMaxValue(),t=this.getDomainInterval(),i=this.getEasedSliceTime(e,-t).time;this.domainRange.setMinValue(i)},t.prototype.scaleAroundPoint=function(e,t){var i=this.coordRange.getInterval(),n=this.coordRange.getMinValue(),r=this.coordRange.getMaxValue(),o=this.getCoordOfValue(e);if(!(o<n||o>r)){var a=(o-n)/i,l=this.getDomainInterval(),s=l*a,c=l-s,u=this.getEasedSliceTime(e,-s*t).time,d=this.getEasedSliceTime(e,c*t).time;this.domainRange.setMinValue(u).setMaxValue(d)}},t}(ri),Ni={theme:"",margin:{left:0,right:0,top:0,bottom:8},xAxis:{height:24,scaleRatio:.0025},yAxis:{width:40,isFloat:!1},crossHair:{show:!0,style:Mt.Li.CROSSHAIR},grid:{show:!0},candlestick:{barWeight:.8,dataFormatter:Dt.aI.Normal},indicators:[]};var Fi=i(880),Ki=i.n(Fi),Ui=i(77485),zi=i.n(Ui),Xi=(i(1738),function(){});function Gi(e){return e&&"function"==typeof e.get}var Yi=function(e){function t(t){var i=e.call(this)||this;return i.get=t,i}return(0,g.__extends)(t,e),t}(Xi),ji=function(e){function t(t){var i=e.call(this)||this;return i.defaultValue=t,i.cache=[],i}return(0,g.__extends)(t,e),t.prototype.get=function(e){return e<0&&void 0!==this.defaultValue?this.defaultValue:this.cache[e]},t.prototype.set=function(e,i){var n=this;return new Yi(i?function(r){return r<t.currentTick?n.cache[r]:(n.cache[r]=e.get(r),i.get(r))}:function(i){return i<t.currentTick?n.cache[i]:(n.cache[i]=e.get(i),e.get(i))})},t.currentTick=NaN,t}(Xi),qi=(function(e){function t(t){var i=e.call(this)||this;return i.getHandler=t,i.cache=[],i}(0,g.__extends)(t,e),t.prototype.get=function(e){return this.getHandler(e,this.cache)}}(Xi),function(e){function t(t){var i=e.call(this)||this;return i.source=t,i}return(0,g.__extends)(t,e),t.prototype.get=function(e){return this.source instanceof Array?this.source[e]:this.source.get(e)},t}(Xi));function Qi(e){return new ji(e)}function Ji(e){return function(t){return Gi(t)?new Yi((function(i){return e(t.get(i))})):e(t)}}function $i(e){return function(t,i){return Gi(t)?Gi(i)?new Yi((function(n){return e(t.get(n),i.get(n))})):new Yi((function(n){return e(t.get(n),i)})):Gi(i)?new Yi((function(n){return e(t,i.get(n))})):e(t,i)}}var en=$i((function(e,t){return e+t})),tn=$i((function(e,t){return e-t})),nn=$i((function(e,t){return e*t})),rn=$i((function(e,t){return e/t})),on=$i((function(e,t){return Math.max(e,t)})),an=($i((function(e,t){return Math.min(e,t)})),Ji((function(e){return void 0===e||Number.isNaN(e)?0:e}))),ln=Ji((function(e){return void 0===e?NaN:e})),sn=Ji((function(e){return Math.abs(e)}));function cn(e){return new Yi(e)}function un(e,t,i){return cn((function(n){var r=e.get(n);return void 0!==r?t(r):i}))}Ji((function(e){return Math.acos(e)})),Ji((function(e){return Math.asin(e)})),Ji((function(e){return Math.atan(e)})),Ji((function(e){return Math.ceil(e)})),Ji((function(e){return Math.cos(e)})),Ji((function(e){return Math.exp(e)})),Ji((function(e){return Math.floor(e)})),Ji((function(e){return Math.log(e)})),Ji((function(e){return Math.round(e)})),Ji((function(e){return Math.sin(e)})),Ji((function(e){return Math.sqrt(e)})),Ji((function(e){return Math.tan(e)}));var dn=function(){function e(){this.seriesData=[],this.plots=[],this.labels=[],this.mobileLabels=[]}return e.prototype.getResult=function(e){for(var t=[],i=0;i<this.seriesData.length;i++)ji.currentTick=i,t[i]=e.get(i);return ji.currentTick=NaN,t},e.prototype.updateResult=function(e,t,i){void 0===i&&(i=0);for(var n=i;n<this.seriesData.length;n++)ji.currentTick=n,t[n]=e.get(n);ji.currentTick=NaN},e.prototype.source=function(e){return ln((t=this.sources(),i=e,un(t,(function(e){return e[i]}),void 0)));var t,i},e.prototype.sources=function(){return new qi(this.seriesData)},e.prototype.typicalPrice=function(){return ln(un(this.sources(),(function(e){return(e.high+e.low+e.close)/3}),void 0))},e.prototype.plot=function(e){this.plots.push(e)},e.prototype.label=function(e){e.styles||(e.styles={}),this.labels.push(e)},e.prototype.mobileLabel=function(e){this.mobileLabels.push(e)},e}(),hn=Symbol("indicatorParam"),gn=Symbol("indicatorProps");function pn(e,t){var i=e.length-t.length;return t.map((function(t,n){return{time:e[n+i].time,value:t}}))}function fn(e,t,i,n){return function(r,o,a){var l=Reflect.getOwnMetadata(hn,r,o)||[];l[a]={label:e,type:t,defaultValue:i,key:n||a.toString()},Reflect.defineMetadata(hn,l,r,o)}}function vn(e){return function(t,i,n){Reflect.defineMetadata(gn,e,t,i)}}function mn(e,t){var i=e.prototype,n=Reflect.getOwnMetadata(gn,i,t),r=Reflect.getOwnMetadata(hn,i,t)||[],o=new dn,a=new e(o),l=new WeakMap,s=new WeakMap,c=new WeakMap,u=function(e){return c.get(e)},d=function(e){var t=new Set;o.plots.forEach((function(e){var i=e.series,n=e.colorSeries,r=e.labelColorSeries;t.add(i),n&&t.add(n),r&&t.add(r),e.type===Dt.oX.Area&&e.borderSeries&&t.add(e.borderSeries)})),o.labels.forEach((function(e){e.series&&t.add(e.series)})),o.mobileLabels.forEach((function(e){e.series&&t.add(e.series)})),t.forEach((function(t){var i=c.get(t);i?o.updateResult(t,i,e):c.set(t,o.getResult(t))}))},h=function(e,t,i,r){var o=i.precision;return e.reduce((function(e,i,a){var s;if(i.series&&void 0!==r&&t.length>0){var c=l.get(i.series);if(c){var u=c.map((function(e){return t[e]})).map((function(e){var t=e.data,i=e.color,n=e.colors,o=e.labelColors,a=e.visible,l=function(e,t){var i=(0,It.ry)(e,(function(e){var i=e.time;return t-i}));return e[i]&&e[i].time===t?i:void 0}(t,r),s=void 0!==l&&t[l],c=i;return void 0!==l&&(c=o?o[l]:n?n[l]:i),{item:s,color:c,visible:!!a}})).find((function(e){return void 0!==e.item})),d=u&&!u.visible?"none":"block";if(i.forceShow&&(d="block"),i.title&&e.push({label:i.title,key:n.title+"["+a+"]",styles:(0,g.__assign)((0,g.__assign)({},i.styles),{display:d})}),u&&u.item){var h=void 0;if(i.formmater)h=null===(s=i.formmater)||void 0===s?void 0:s.call(i,u.item.value);else if(i.formatNumber||n.isFormatNum)h=(0,It.XR)(u.item.value,3);else if(void 0!==i.precision||void 0!==o){var p=u.item.value,f=(0,ii.hj)(i.precision)?i.precision:o;h=(0,It.FH)(p,f)}else h=u.item.value;e.push({label:h.toString(),key:n.title+"["+a+"]Series",styles:(0,g.__assign)((0,g.__assign)({color:u.color},i.styles),{display:d})})}else e.push({label:"NaN",key:n.title+"["+a+"]Series",styles:(0,g.__assign)((0,g.__assign)({},i.styles),{display:d})})}}else i.title&&e.push({label:i.title,key:n.title+"["+a+"]",styles:(0,g.__assign)({},i.styles)});return e}),[])};function p(e,t){l.has(e)||l.set(e,t)}return{defaultProps:n,paramMetas:r,getResult:function(e,i,n){var l=r.map((function(e){if(void 0!==e){var t=zi()(i,e.key);if(void 0===t)return e.defaultValue;switch(e.type){case Bn.INT:t="number"!=typeof t?parseInt(t):t;break;case Bn.FLOAT:t="number"!=typeof t?parseFloat(t):t}return t}}));o.seriesData=e,o.plots.splice(0),o.labels.splice(0),o.plots.splice(0),a[t].apply(a,l),d(0);var c=[];o.plots.forEach((function(e){var t=e.type,i=e.series,n=e.colorSeries,r=e.labelColorSeries,a=e.color,l=e.lineWidth,d=e.zIndex,h=void 0===d?-1:d,f=e.visible,v=(0,g.__rest)(e,["type","series","colorSeries","labelColorSeries","color","lineWidth","zIndex","visible"]),m=n&&u(n),y=r&&u(r),x=m?{colors:m}:{color:a},b=y?{labelColors:y}:{},C=(0,g.__assign)((0,g.__assign)({},x),b),_=u(i),w=pn(o.seriesData,_);if(e.type===Dt.oX.Area)if(e.borderSeries){var S=u(e.borderSeries),L=pn(o.seriesData,S);c.push((0,g.__assign)((0,g.__assign)((0,g.__assign)((0,g.__assign)({},v),{chartType:t,lineWidth:l,data:w,borderData:L,visible:f}),C),{zIndex:h})),p(e.series,[c.length-1]),p(e.borderSeries,[c.length-1]),s.set(e,[c.length-1])}else c.push((0,g.__assign)((0,g.__assign)((0,g.__assign)((0,g.__assign)({},v),{chartType:t,lineWidth:l,data:w,visible:f}),C),{histBase:e.histBase,zIndex:h})),p(e.series,[c.length-1]),s.set(e,[c.length-1]);else{var E=(0,g.__assign)((0,g.__assign)({},v),{chartType:t,lineWidth:l,data:w,visible:f});c.push((0,g.__assign)((0,g.__assign)((0,g.__assign)({},E),C),{zIndex:h})),p(i,[c.length-1]),s.set(e,[c.length-1])}})),null==n||n(c)},updateResult:function(e,t,i){d(e),o.plots.forEach((function(i){var n=i.series,r=i.colorSeries,a=r&&u(r),l=s.get(i),c=u(n);if(l&&c)if(i.type===Dt.oX.Area){for(var d=t[l[0]],h=d.data,g=d.borderData,p=e;p<o.seriesData.length;p++)h[p]={time:o.seriesData[p].time,value:c[p]};if(g&&i.borderSeries){var f=u(i.borderSeries);for(p=e;p<o.seriesData.length;p++)g[p]={time:o.seriesData[p].time,value:f[p]}}}else for(h=t[l[0]].data,p=e;p<o.seriesData.length;p++)h[p]=a?{time:o.seriesData[p].time,value:c[p],color:a[p]}:{time:o.seriesData[p].time,value:c[p]}}))},getLabel:function(e,t,i){return h(o.labels,t,i,e)},getMobileLabel:function(e,t){return h(o.labels,t,e)}}}Symbol("indicators");var yn=function(e){this.ctx=e},xn=Ji((function(e){return Math.abs(e)<=1e-10})),bn=(Ji((function(e){return isFinite(e)&&!xn(e)})),Ji((function(e){return Number.isNaN(e)||void 0===e}))),Cn=$i((function(e,t){return e&&t})),_n=($i((function(e,t){return e||t})),Ji((function(e){return!e})),$i((function(e,t){return e>t}))),wn=($i((function(e,t){return e>=t})),$i((function(e,t){return e<t}))),Sn=($i((function(e,t){return e<=t})),$i((function(e,t){return e===t})));function Ln(e,t,i){return new Yi((function(n){var r=Gi(t)?t.get(n):t,o=Gi(i)?i.get(n):i;return e.get(n)?r:o}))}function En(e,t){return new Yi((function(i){return e.get(i-t)}))}function kn(e,t){var i=Qi();return i.set(tn(en(an(En(i,1)),e),an(En(e,t))))}function Vn(e,t){return Ln(bn(En(e,t-1)),NaN,rn(kn(e,t),t))}function An(e,t){var i=kn(e,t),n=t-1,r=Qi(),o=En(r,1),a=rn(en(e,nn(o,n)),t),l=Ln(bn(En(e,n)),NaN,Ln(bn(o),rn(i,t),a));return r.set(l)}function Tn(e,t){var i=kn(e,t),n=Qi(),r=En(n,1),o=en(rn(nn(2,tn(e,r)),t+1),r),a=Ln(bn(En(e,t-1)),NaN,Ln(bn(r),rn(i,t),o));return n.set(a)}function Mn(e,t){return t=Math.round(t),cn((function(i){for(var n=0,r=t;r>=0;r--)n+=(t-r)*e.get(i-r);return 2*n/(t*(t+1))}))}function Dn(e,t,i,n){return cn((function(r){for(var o=n,a=r;a>r-t;a--)o=i(o,e.get(a),a);return o}))}function In(e,t){return Dn(e,t,(function(e,t){return isNaN(t)||void 0===t?e:Math.max(e,t)}),Number.MIN_VALUE)}function Pn(e,t){return Dn(e,t,(function(e,t){return isNaN(t)||void 0===t?e:Math.min(e,t)}),Number.MAX_VALUE)}$i((function(e,t){return e!==t}));var Bn,Wn,Rn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,g.__extends)(t,e),t.prototype.MA=function(e,t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m,y,x){var b=Vn(this.ctx.source(t),e),C=Vn(this.ctx.source(n),i),_=Vn(this.ctx.source(o),r),w=Vn(this.ctx.source(l),a),S=Vn(this.ctx.source(c),s),L=Vn(this.ctx.source(d),u),E=Vn(this.ctx.source(g),h),k=Vn(this.ctx.source(f),p),V=Vn(this.ctx.source(m),v),A=Vn(this.ctx.source(x),y);this.ctx.plot({series:b,type:Dt.oX.Line,color:"@MA.colors[0]",lineWidth:"@MA.lineWidths[0]",visible:"@MA.visibles[0]"}),this.ctx.label({title:"MA("+e+"):",series:b}),this.ctx.plot({series:C,type:Dt.oX.Line,color:"@MA.colors[1]",lineWidth:"@MA.lineWidths[1]",visible:"@MA.visibles[1]"}),this.ctx.label({title:"MA("+i+"):",series:C}),this.ctx.plot({series:_,type:Dt.oX.Line,color:"@MA.colors[2]",lineWidth:"@MA.lineWidths[2]",visible:"@MA.visibles[2]"}),this.ctx.label({title:"MA("+r+"):",series:_}),this.ctx.plot({series:w,type:Dt.oX.Line,color:"@MA.colors[3]",lineWidth:"@MA.lineWidths[3]",visible:"@MA.visibles[3]"}),this.ctx.label({title:"MA("+a+"):",series:w}),this.ctx.plot({series:S,type:Dt.oX.Line,color:"@MA.colors[4]",lineWidth:"@MA.lineWidths[4]",visible:"@MA.visibles[4]"}),this.ctx.label({title:"MA("+s+"):",series:S}),this.ctx.plot({series:L,type:Dt.oX.Line,color:"@MA.colors[5]",lineWidth:"@MA.lineWidths[5]",visible:"@MA.visibles[5]"}),this.ctx.label({title:"MA("+u+"):",series:L}),this.ctx.plot({series:E,type:Dt.oX.Line,color:"@MA.colors[6]",lineWidth:"@MA.lineWidths[6]",visible:"@MA.visibles[6]"}),this.ctx.label({title:"MA("+h+"):",series:E}),this.ctx.plot({series:k,type:Dt.oX.Line,color:"@MA.colors[7]",lineWidth:"@MA.lineWidths[7]",visible:"@MA.visibles[7]"}),this.ctx.label({title:"MA("+p+"):",series:k}),this.ctx.plot({series:V,type:Dt.oX.Line,color:"@MA.colors[8]",lineWidth:"@MA.lineWidths[8]",visible:"@MA.visibles[8]"}),this.ctx.label({title:"MA("+v+"):",series:V}),this.ctx.plot({series:A,type:Dt.oX.Line,color:"@MA.colors[9]",lineWidth:"@MA.lineWidths[9]",visible:"@MA.visibles[9]"}),this.ctx.label({title:"MA("+y+"):",series:A})},t.prototype.EMA=function(e,t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m,y,x){var b=Tn(this.ctx.source(t),e),C=Tn(this.ctx.source(n),i),_=Tn(this.ctx.source(o),r),w=Tn(this.ctx.source(l),a),S=Tn(this.ctx.source(c),s),L=Tn(this.ctx.source(d),u),E=Tn(this.ctx.source(g),h),k=Tn(this.ctx.source(f),p),V=Tn(this.ctx.source(m),v),A=Tn(this.ctx.source(x),y);this.ctx.plot({series:b,type:Dt.oX.Line,color:"@EMA.colors[0]",lineWidth:"@EMA.lineWidths[0]",visible:"@EMA.visibles[0]"}),this.ctx.label({title:"EMA("+e+"):",series:b}),this.ctx.plot({series:C,type:Dt.oX.Line,color:"@EMA.colors[1]",lineWidth:"@EMA.lineWidths[1]",visible:"@EMA.visibles[1]"}),this.ctx.label({title:"EMA("+i+"):",series:C}),this.ctx.plot({series:_,type:Dt.oX.Line,color:"@EMA.colors[2]",lineWidth:"@EMA.lineWidths[2]",visible:"@EMA.visibles[2]"}),this.ctx.label({title:"EMA("+r+"):",series:_}),this.ctx.plot({series:w,type:Dt.oX.Line,color:"@EMA.colors[3]",lineWidth:"@EMA.lineWidths[3]",visible:"@EMA.visibles[3]"}),this.ctx.label({title:"EMA("+a+"):",series:w}),this.ctx.plot({series:S,type:Dt.oX.Line,color:"@EMA.colors[4]",lineWidth:"@EMA.lineWidths[4]",visible:"@EMA.visibles[4]"}),this.ctx.label({title:"EMA("+s+"):",series:S}),this.ctx.plot({series:L,type:Dt.oX.Line,color:"@EMA.colors[5]",lineWidth:"@EMA.lineWidths[5]",visible:"@EMA.visibles[5]"}),this.ctx.label({title:"EMA("+u+"):",series:L}),this.ctx.plot({series:E,type:Dt.oX.Line,color:"@EMA.colors[6]",lineWidth:"@EMA.lineWidths[6]",visible:"@EMA.visibles[6]"}),this.ctx.label({title:"EMA("+h+"):",series:E}),this.ctx.plot({series:k,type:Dt.oX.Line,color:"@EMA.colors[7]",lineWidth:"@EMA.lineWidths[7]",visible:"@EMA.visibles[7]"}),this.ctx.label({title:"EMA("+p+"):",series:k}),this.ctx.plot({series:V,type:Dt.oX.Line,color:"@EMA.colors[8]",lineWidth:"@EMA.lineWidths[8]",visible:"@EMA.visibles[8]"}),this.ctx.label({title:"EMA("+v+"):",series:V}),this.ctx.plot({series:A,type:Dt.oX.Line,color:"@EMA.colors[9]",lineWidth:"@EMA.lineWidths[9]",visible:"@EMA.visibles[9]"}),this.ctx.label({title:"EMA("+y+"):",series:A})},t.prototype.WMA=function(e,t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m,y,x){var b=Mn(this.ctx.source(t),e),C=Mn(this.ctx.source(n),i),_=Mn(this.ctx.source(o),r),w=Mn(this.ctx.source(l),a),S=Mn(this.ctx.source(c),s),L=Mn(this.ctx.source(d),u),E=Mn(this.ctx.source(g),h),k=Mn(this.ctx.source(f),p),V=Mn(this.ctx.source(m),v),A=Mn(this.ctx.source(x),y);this.ctx.plot({series:b,type:Dt.oX.Line,color:"@WMA.colors[0]",lineWidth:"@WMA.lineWidths[0]",visible:"@WMA.visibles[0]"}),this.ctx.label({title:"WMA("+e+"):",series:b}),this.ctx.plot({series:C,type:Dt.oX.Line,color:"@WMA.colors[1]",lineWidth:"@WMA.lineWidths[1]",visible:"@WMA.visibles[1]"}),this.ctx.label({title:"WMA("+i+"):",series:C}),this.ctx.plot({series:_,type:Dt.oX.Line,color:"@WMA.colors[2]",lineWidth:"@WMA.lineWidths[2]",visible:"@WMA.visibles[2]"}),this.ctx.label({title:"WMA("+r+"):",series:_}),this.ctx.plot({series:w,type:Dt.oX.Line,color:"@WMA.colors[3]",lineWidth:"@WMA.lineWidths[3]",visible:"@WMA.visibles[3]"}),this.ctx.label({title:"WMA("+a+"):",series:w}),this.ctx.plot({series:S,type:Dt.oX.Line,color:"@WMA.colors[4]",lineWidth:"@WMA.lineWidths[4]",visible:"@WMA.visibles[4]"}),this.ctx.label({title:"WMA("+s+"):",series:S}),this.ctx.plot({series:L,type:Dt.oX.Line,color:"@WMA.colors[5]",lineWidth:"@WMA.lineWidths[5]",visible:"@WMA.visibles[5]"}),this.ctx.label({title:"WMA("+u+"):",series:L}),this.ctx.plot({series:E,type:Dt.oX.Line,color:"@WMA.colors[6]",lineWidth:"@WMA.lineWidths[6]",visible:"@WMA.visibles[6]"}),this.ctx.label({title:"WMA("+h+"):",series:E}),this.ctx.plot({series:k,type:Dt.oX.Line,color:"@WMA.colors[7]",lineWidth:"@WMA.lineWidths[7]",visible:"@WMA.visibles[7]"}),this.ctx.label({title:"WMA("+p+"):",series:k}),this.ctx.plot({series:V,type:Dt.oX.Line,color:"@WMA.colors[8]",lineWidth:"@WMA.lineWidths[8]",visible:"@WMA.visibles[8]"}),this.ctx.label({title:"WMA("+v+"):",series:V}),this.ctx.plot({series:A,type:Dt.oX.Line,color:"@WMA.colors[9]",lineWidth:"@WMA.lineWidths[9]",visible:"@WMA.visibles[9]"}),this.ctx.label({title:"WMA("+y+"):",series:A})},t.prototype.MACD=function(e,t,i,n){var r=this.ctx.source(n),o=tn(Tn(r,e),Tn(r,t)),a=Tn(o,i),l=tn(o,a);this.ctx.plot({series:l,type:Dt.oX.Bar,colorSeries:un(l,(function(e){return e>=0?"volume.upBarColor":"volume.downBarColor"}),"defaultColor"),labelColorSeries:un(l,(function(e){return e>=0?"volume.upTextColor":"volume.downTextColor"}),"defaultColor"),visible:"@MACD.visibles.MACD"}),this.ctx.plot({series:a,type:Dt.oX.Line,color:"@MACD.colors.DEA",lineWidth:"@MACD.lineWidths.DEA",visible:"@MACD.visibles.DEA"}),this.ctx.plot({series:o,type:Dt.oX.Line,color:"@MACD.colors.DIF",lineWidth:"@MACD.lineWidths.DIF",visible:"@MACD.visibles.DIF"}),this.ctx.label({title:"MACD("+e+", "+t+", "+i+")"}),this.ctx.label({series:a}),this.ctx.label({series:o}),this.ctx.label({series:l})},t.prototype.VOL=function(e){var t=this.ctx.source("volume"),i=this.ctx.source("quantity");if(this.ctx.plot({series:t,type:Dt.oX.Bar,colorSeries:un(this.ctx.sources(),(function(e){var t=e.open;return e.close>=t?"volume.upBarColor":"volume.downBarColor"}),"defaultColor"),labelColorSeries:un(this.ctx.sources(),(function(e){var t=e.open;return e.close>=t?"volume.upTextColor":"volume.downTextColor"}),"defaultColor"),isScaleCenter:!1}),this.ctx.plot({series:i,type:Dt.oX.Bar,labelColorSeries:un(this.ctx.sources(),(function(e){var t=e.open;return e.close>=t?"volume.upTextColor":"volume.downTextColor"}),"defaultColor"),visible:"@VOL.visibles[0]",isScaleCenter:!1,yAxisIndex:"1"}),e){var n=Vn(t,e);this.ctx.plot({series:n,type:Dt.oX.Area,color:"@VOL.maColor",opacity:.6}),this.ctx.label({title:"Vol({{baseAsset}})",series:t,formatNumber:!0}),this.ctx.label({title:"Vol({{quoteAsset}})",series:i,formatNumber:!0,forceShow:!0}),this.ctx.label({series:n})}else this.ctx.label({title:"Vol({{baseAsset}}):",series:t,formatNumber:!0}),this.ctx.label({title:"Vol({{quoteAsset}})",series:i,formatNumber:!0,forceShow:!0})},t.prototype.TRIX=function(e){var t=Tn(Tn(Tn(this.ctx.source("close"),e),e),e);this.ctx.plot({series:t,type:Dt.oX.Line,color:"@TRIX.color",lineWidth:"@TRIX.lineWidth"}),this.ctx.label({title:"TRIX("+e+"):",series:t})},(0,g.__decorate)([vn({id:"@MA",title:"MA",isHistBase:!0,isScaleCenter:!0}),(0,g.__param)(0,fn("Length 0","INT",7,"periods[0]")),(0,g.__param)(1,fn("Source 0","SOURCE","close","sources[0]")),(0,g.__param)(2,fn("Length 1","INT",25,"periods[1]")),(0,g.__param)(3,fn("Source 1","SOURCE","close","sources[1]")),(0,g.__param)(4,fn("Length 2","INT",99,"periods[2]")),(0,g.__param)(5,fn("Source 2","SOURCE","close","sources[2]")),(0,g.__param)(6,fn("Length 3","INT",120,"periods[3]")),(0,g.__param)(7,fn("Source 3","SOURCE","close","sources[3]")),(0,g.__param)(8,fn("Length 4","INT",150,"periods[4]")),(0,g.__param)(9,fn("Source 4","SOURCE","close","sources[4]")),(0,g.__param)(10,fn("Length 5","INT",0,"periods[5]")),(0,g.__param)(11,fn("Source 5","SOURCE","close","sources[5]")),(0,g.__param)(12,fn("Length 6","INT",0,"periods[6]")),(0,g.__param)(13,fn("Source 6","SOURCE","close","sources[6]")),(0,g.__param)(14,fn("Length 7","INT",0,"periods[7]")),(0,g.__param)(15,fn("Source 7","SOURCE","close","sources[7]")),(0,g.__param)(16,fn("Length 8","INT",0,"periods[8]")),(0,g.__param)(17,fn("Source 8","SOURCE","close","sources[8]")),(0,g.__param)(18,fn("Length 9","INT",0,"periods[9]")),(0,g.__param)(19,fn("Source 9","SOURCE","close","sources[9]")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"MA",null),(0,g.__decorate)([vn({id:"@EMA",title:"EMA",isHistBase:!0,isScaleCenter:!0}),(0,g.__param)(0,fn("Length 1","INT",7,"periods[0]")),(0,g.__param)(1,fn("Source 1","SOURCE","close","sources[0]")),(0,g.__param)(2,fn("Length 2","INT",25,"periods[1]")),(0,g.__param)(3,fn("Source 2","SOURCE","close","sources[1]")),(0,g.__param)(4,fn("Length 3","INT",99,"periods[2]")),(0,g.__param)(5,fn("Source 3","SOURCE","close","sources[2]")),(0,g.__param)(6,fn("Length 4","INT",120,"periods[3]")),(0,g.__param)(7,fn("Source 4","SOURCE","close","sources[3]")),(0,g.__param)(8,fn("Length 5","INT",120,"periods[4]")),(0,g.__param)(9,fn("Source 5","SOURCE","close","sources[4]")),(0,g.__param)(10,fn("Length 6","INT",120,"periods[5]")),(0,g.__param)(11,fn("Source 6","SOURCE","close","sources[5]")),(0,g.__param)(12,fn("Length 7","INT",0,"periods[6]")),(0,g.__param)(13,fn("Source 7","SOURCE","close","sources[6]")),(0,g.__param)(14,fn("Length 8","INT",0,"periods[7]")),(0,g.__param)(15,fn("Source 8","SOURCE","close","sources[7]")),(0,g.__param)(16,fn("Length 9","INT",0,"periods[8]")),(0,g.__param)(17,fn("Source 9","SOURCE","close","sources[8]")),(0,g.__param)(18,fn("Length 10","INT",0,"periods[9]")),(0,g.__param)(19,fn("Source 10","SOURCE","close","sources[9]")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"EMA",null),(0,g.__decorate)([vn({id:"@WMA",title:"WMA",isHistBase:!0,isScaleCenter:!0}),(0,g.__param)(0,fn("Length 1","INT",7,"periods[0]")),(0,g.__param)(1,fn("Source 1","SOURCE","close","sources[0]")),(0,g.__param)(2,fn("Length 2","INT",25,"periods[1]")),(0,g.__param)(3,fn("Source 2","SOURCE","close","sources[1]")),(0,g.__param)(4,fn("Length 3","INT",99,"periods[2]")),(0,g.__param)(5,fn("Source 3","SOURCE","close","sources[2]")),(0,g.__param)(6,fn("Length 4","INT",120,"periods[3]")),(0,g.__param)(7,fn("Source 4","SOURCE","close","sources[3]")),(0,g.__param)(8,fn("Length 5","INT",120,"periods[4]")),(0,g.__param)(9,fn("Source 5","SOURCE","close","sources[4]")),(0,g.__param)(10,fn("Length 6","INT",120,"periods[5]")),(0,g.__param)(11,fn("Source 6","SOURCE","close","sources[5]")),(0,g.__param)(12,fn("Length 7","INT",0,"periods[6]")),(0,g.__param)(13,fn("Source 7","SOURCE","close","sources[6]")),(0,g.__param)(14,fn("Length 8","INT",0,"periods[7]")),(0,g.__param)(15,fn("Source 8","SOURCE","close","sources[7]")),(0,g.__param)(16,fn("Length 9","INT",0,"periods[8]")),(0,g.__param)(17,fn("Source 9","SOURCE","close","sources[8]")),(0,g.__param)(18,fn("Length 10","INT",0,"periods[9]")),(0,g.__param)(19,fn("Source 10","SOURCE","close","sources[9]")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"WMA",null),(0,g.__decorate)([vn({id:"@MACD",title:"MACD",isHistBase:!1,isScaleCenter:!0}),(0,g.__param)(0,fn("Fast Length","INT",12,"fastPeriod")),(0,g.__param)(1,fn("Slow Length","INT",26,"slowPeriod")),(0,g.__param)(2,fn("Signal Length","INT",9,"signalPeriod")),(0,g.__param)(3,fn("Source","SOURCE","close","source")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,Number,Number,String]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"MACD",null),(0,g.__decorate)([vn({id:"@VOL",title:"VOL",isHistBase:!1,isScaleCenter:!1,isFormatNum:!0}),(0,g.__param)(0,fn("Period","INT",0,"period")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"VOL",null),(0,g.__decorate)([vn({id:"@TRIX",title:"TRIX",isHistBase:!0,isScaleCenter:!0}),(0,g.__param)(0,fn("Length","INT",9,"period")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"TRIX",null),t}(yn),Hn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,g.__extends)(t,e),t.prototype.RSI=function(e,t,i){var n=this.ctx.source("close"),r=En(n,1),o=on(tn(n,r),0),a=on(tn(r,n),0),l=rn(An(o,e),An(a,e)),s=rn(An(o,e),An(a,t)),c=rn(An(o,e),An(a,i)),u=tn(100,rn(100,en(1,l))),d=tn(100,rn(100,en(1,s))),h=tn(100,rn(100,en(1,c)));this.ctx.plot({series:u,type:Dt.oX.Line,color:"@RSI.colors[0]",lineWidth:"@RSI.lineWidths[0]",visible:"@RSI.visibles[0]"}),this.ctx.plot({series:d,type:Dt.oX.Line,color:"@RSI.colors[1]",lineWidth:"@RSI.lineWidths[1]",visible:"@RSI.visibles[1]"}),this.ctx.plot({series:h,type:Dt.oX.Line,color:"@RSI.colors[2]",lineWidth:"@RSI.lineWidths[2]",visible:"@RSI.visibles[2]"}),this.ctx.label({title:"RSI("+e+")",series:u}),this.ctx.label({title:"RSI("+t+")",series:d}),this.ctx.label({title:"RSI("+i+")",series:h})},t.prototype.CCI=function(e){var t=this.ctx.typicalPrice(),i=Vn(t,e),n=function(e,t){var i=Vn(e,t);return cn((function(n){for(var r=i.get(n),o=0,a=n;a>n-t;a--)o+=Math.abs(e.get(a)-r);return o/t}))}(t,e),r=rn(tn(t,i),nn(n,.015));this.ctx.plot({series:r,type:Dt.oX.Line,color:"@CCI.color",lineWidth:"@CCI.lineWidth"}),this.ctx.label({title:"CCI("+e+")",series:r})},(0,g.__decorate)([vn({id:"@RSI",title:"RSI",isHistBase:!1,isScaleCenter:!0}),(0,g.__param)(0,fn("Length 1","INT",6,"periods[0]")),(0,g.__param)(1,fn("Length 2","INT",12,"periods[1]")),(0,g.__param)(2,fn("Length 3","INT",24,"periods[2]")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,Number,Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"RSI",null),(0,g.__decorate)([vn({id:"@CCI",title:"CCI",isHistBase:!1,isScaleCenter:!0}),(0,g.__param)(0,fn("Length","INT",20,"period")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"CCI",null),t}(yn),Zn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,g.__extends)(t,e),t.prototype.BOLL=function(e,t){var i,n,r,o=this.ctx.source("close"),a=nn((r=Vn(i=o,n=e),cn((function(e){for(var t=r.get(e),o=0,a=e;a>e-n;a--)o+=Math.pow(i.get(a)-t,2);return Math.sqrt(o/n)}))),t),l=Vn(o,e),s=en(l,a),c=tn(l,a);this.ctx.plot({series:s,type:Dt.oX.Line,color:"@BOLL.colors[0]",lineWidth:"@BOLL.lineWidths[0]",visible:"@BOLL.visibles[0]"}),this.ctx.plot({series:l,type:Dt.oX.Line,color:"@BOLL.colors[1]",lineWidth:"@BOLL.lineWidths[1]",visible:"@BOLL.visibles[1]"}),this.ctx.plot({series:c,type:Dt.oX.Line,color:"@BOLL.colors[2]",lineWidth:"@BOLL.lineWidths[2]",visible:"@BOLL.visibles[2]"}),this.ctx.plot({series:s,borderSeries:c,type:Dt.oX.Area,color:"boll.fillColor"}),this.ctx.label({title:"BOLL("+e+", "+t+")"}),this.ctx.label({title:"UP",series:s}),this.ctx.label({title:"MB",series:l}),this.ctx.label({title:"DN",series:c})},(0,g.__decorate)([vn({id:"@BOLL",title:"BOLL",isHistBase:!0,isScaleCenter:!0}),(0,g.__param)(0,fn("Length","INT",21,"period")),(0,g.__param)(1,fn("Multipler","INT",2,"stdDev")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"BOLL",null),t}(yn),On=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,g.__extends)(t,e),t.prototype.KDJ=function(e,t,i){var n=this.ctx.source("close"),r=this.ctx.source("low"),o=this.ctx.source("high"),a=Pn(r,e),l=In(o,e),s=Ln(Sn(a,l),100,rn(nn(100,tn(n,a)),tn(l,a))),c=Qi(100),u=Qi(100),d=c.set(en(nn(1-1/t,En(c,1)),nn(1/t,s))),h=u.set(en(nn(1-1/t,En(u,1)),nn(1/t,d))),g=tn(nn(d,3),nn(h,2));this.ctx.plot({series:d,type:Dt.oX.Line,color:"@KDJ.colors[0]",lineWidth:"@KDJ.lineWidths[0]",visible:"@KDJ.visibles[0]"}),this.ctx.plot({series:h,type:Dt.oX.Line,color:"@KDJ.colors[1]",lineWidth:"@KDJ.lineWidths[1]",visible:"@KDJ.visibles[1]"}),this.ctx.plot({series:g,type:Dt.oX.Line,color:"@KDJ.colors[2]",lineWidth:"@KDJ.lineWidths[2]",visible:"@KDJ.visibles[2]"}),this.ctx.label({title:"KDJ("+e+", "+t+", "+i+")"}),this.ctx.label({title:"K",series:d}),this.ctx.label({title:"D",series:h}),this.ctx.label({title:"J",series:g})},(0,g.__decorate)([vn({id:"@KDJ",title:"KDJ",isHistBase:!1,isScaleCenter:!0}),(0,g.__param)(0,fn("K%","INT",9,"period[0]")),(0,g.__param)(1,fn("D%","INT",3,"period[1]")),(0,g.__param)(2,fn("Length","INT",3,"period[2]")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,Number,Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"KDJ",null),t}(yn),Nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,g.__extends)(t,e),t.prototype.VWAP=function(e){var t=this.ctx.source("volume"),i=this.ctx.typicalPrice(),n=rn(kn(nn(i,t),e),kn(t,e));this.ctx.plot({series:n,type:Dt.oX.Line,color:"@VWAP.color",lineWidth:"@VWAP.lineWidth"}),this.ctx.label({title:"VWAP("+e+")",series:n})},t.prototype.OBV=function(){var e=this.ctx.source("volume"),t=this.ctx.source("close"),i=Ln(_n(t,En(t,1)),1,Ln(wn(t,En(t,1)),-1,0)),n=Qi(),r=n.set(en(an(En(n,1)),nn(i,e)));this.ctx.plot({series:r,type:Dt.oX.Line,color:"@OBV.color",lineWidth:"@OBV.lineWidth"}),this.ctx.label({title:"OBV",series:r})},t.prototype.AVL=function(){var e=rn(en(en(this.ctx.source("open"),this.ctx.source("high")),en(this.ctx.source("low"),this.ctx.source("close"))),4),t=this.ctx.source("volume"),i=Qi(),n=Qi(),r=n.set(en(nn(e,t),an(En(n,1)))),o=i.set(en(t,an(En(i,1)))),a=rn(r,o);this.ctx.plot({series:a,type:Dt.oX.Line,color:"@AVL.color",lineWidth:"@AVL.lineWidth"}),this.ctx.label({title:"AVL",series:a})},(0,g.__decorate)([vn({id:"@VWAP",title:"VWAP",isHistBase:!0,isScaleCenter:!0}),(0,g.__param)(0,fn("Length","INT",14,"period")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"VWAP",null),(0,g.__decorate)([vn({id:"@OBV",title:"OBV",isHistBase:!1,isScaleCenter:!0}),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"OBV",null),(0,g.__decorate)([vn({id:"@AVL",title:"AVL",isHistBase:!0,isScaleCenter:!0}),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"AVL",null),t}(yn),Fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,g.__extends)(t,e),t.prototype.StochRSI=function(e,t,i,n){var r,o,a,l,s,c,u=(o=e,a=En(r=this.ctx.source("close"),1),l=on(tn(r,a),0),s=on(tn(a,r),0),c=rn(An(l,o),An(s,o)),tn(100,rn(100,en(1,c)))),d=Vn(function(e,t,i,n){return function(e){var t=Qi();return t.set(Ln(bn(e),En(t,1),e))}(rn(nn(100,tn(e,Pn(i,n))),tn(In(t,n),Pn(i,n))))}(u,u,u,t),i),h=Vn(d,n);this.ctx.plot({series:d,type:Dt.oX.Line,color:"@Stoch RSI.colors.smoothK",lineWidth:"@Stoch RSI.lineWidths.smoothK",visible:"@Stoch RSI.visibles.smoothK"}),this.ctx.plot({series:h,type:Dt.oX.Line,color:"@Stoch RSI.colors.smoothD",lineWidth:"@Stoch RSI.lineWidths.smoothD",visible:"@Stoch RSI.visibles.smoothD"}),this.ctx.label({title:"Stoch RSI("+e+", "+t+", "+i+", "+n+")"}),this.ctx.label({series:d}),this.ctx.label({series:h})},t.prototype.WR=function(e){var t=this.ctx.source("close"),i=this.ctx.source("high"),n=this.ctx.source("low"),r=nn(rn(tn(In(i,e),t),tn(In(i,e),Pn(n,e))),-100);this.ctx.plot({series:r,type:Dt.oX.Line,color:"@Wm %R.color",lineWidth:"@Wm %R.lineWidth"}),this.ctx.label({title:"Wm %R("+e+")",series:r})},t.prototype.MTM=function(e,t){var i=this.ctx.source(t),n=tn(i,En(i,e));this.ctx.plot({series:n,type:Dt.oX.Line,color:"@MTM.color",lineWidth:"@MTM.lineWidth"}),this.ctx.label({title:"MTM("+e+")",series:n})},(0,g.__decorate)([vn({id:"@Stoch RSI",title:"Stoch RSI",isHistBase:!1,isScaleCenter:!0}),(0,g.__param)(0,fn("LengthRSI","INT",14,"rsiPeriod")),(0,g.__param)(1,fn("LengthStoch","INT",14,"stochasticPeriod")),(0,g.__param)(2,fn("SmoothK","INT",3,"kPeriod")),(0,g.__param)(3,fn("SmoothD","INT",3,"dPeriod")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,Number,Number,Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"StochRSI",null),(0,g.__decorate)([vn({id:"@Wm %R",title:"Wm %R",isHistBase:!1,isScaleCenter:!0}),(0,g.__param)(0,fn("Length","INT",14,"period")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"WR",null),(0,g.__decorate)([vn({id:"@MTM",title:"MTM",isHistBase:!1,isScaleCenter:!0}),(0,g.__param)(0,fn("Length","INT",14,"period")),(0,g.__param)(1,fn("Source","SOURCE","close","source")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,String]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"MTM",null),t}(yn),Kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,g.__extends)(t,e),t.prototype.DMI=function(e){var t=this.ctx.source("high"),i=this.ctx.source("low"),n=this.ctx.source("close"),r=tn(t,En(t,1)),o=tn(En(i,1),i),a=Ln(Cn(_n(r,o),_n(r,0)),r,0),l=Ln(Cn(_n(o,r),_n(o,0)),o,0),s=on(tn(t,i),on(sn(tn(t,En(n,1))),sn(tn(i,En(n,1))))),c=An(a,e),u=An(l,e),d=An(s,e),h=nn(rn(c,d),100),g=nn(rn(u,d),100),p=An(nn(sn(rn(tn(h,g),en(h,g))),100),e);this.ctx.plot({type:Dt.oX.Line,series:h,color:"@DMI.colors.pDI",lineWidth:"@DMI.lineWidths.pDI",visible:"@DMI.visibles.pDI"}),this.ctx.plot({type:Dt.oX.Line,series:g,color:"@DMI.colors.nDI",lineWidth:"@DMI.lineWidths.nDI",visible:"@DMI.visibles.nDI"}),this.ctx.plot({type:Dt.oX.Line,series:p,color:"@DMI.colors.dx",lineWidth:"@DMI.lineWidths.dx",visible:"@DMI.visibles.dx"}),this.ctx.label({title:"DMI("+e+")"}),this.ctx.label({series:h,precision:4}),this.ctx.label({series:g,precision:4}),this.ctx.label({series:p,precision:4})},t.prototype.EMV=function(e,t){var i=this.ctx.source("high"),n=this.ctx.source("low"),r=this.ctx.source("volume"),o=tn(rn(en(i,n),2),rn(en(En(i,1),En(n,1)),2)),a=rn(rn(r,t),tn(i,n)),l=Vn(rn(o,a),e);this.ctx.plot({type:Dt.oX.Line,series:l,color:"@EMV.color",lineWidth:"@EMV.lineWidth"}),this.ctx.label({title:"EMV("+t+", "+e+")"}),this.ctx.label({series:l,precision:4})},t.prototype.SAR=function(e,t){var i=this.ctx.source("low"),n=this.ctx.source("high"),r=[],o=[],a=[],l=[],s=cn((function(s){return s>1?(o[s]=o[s-1]+l[s-1]*(a[s-1]-o[s-1]),a[s]=a[s-1],l[s]=l[s-1],r[s]=r[s-1],r[s]?(o[s]=Math.min(o[s],i.get(s-2),i.get(s-1)),n.get(s)>a[s]&&(a[s]=n.get(s),l[s]=Math.min(l[s]+e,t))):(o[s]=Math.max(o[s],n.get(s-2),n.get(s-1)),i.get(s)<a[s]&&(a[s]=i.get(s),l[s]=Math.min(l[s]+e,t))),(r[s]&&i.get(s)<o[s]||!r[s]&&n.get(s)>o[s])&&(l[s]=e,o[s]=a[s],r[s]=!r[s],a[s]=r[s]?n.get(s):i.get(s))):(o[s]=i.get(s),a[s]=n.get(s),l[s]=e,r[s]=!0),o[s]}));this.ctx.plot({type:Dt.oX.Point,series:s,color:"@SAR.color"}),this.ctx.label({title:"SAR("+e+", "+t+")"}),this.ctx.label({series:s})},(0,g.__decorate)([vn({id:"@DMI",title:"DMI",isHistBase:!1,isScaleCenter:!0}),(0,g.__param)(0,fn("Length","INT",14,"period")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"DMI",null),(0,g.__decorate)([vn({id:"@EMV",title:"EMV",isHistBase:!1,isScaleCenter:!0}),(0,g.__param)(0,fn("Length","INT",14,"period")),(0,g.__param)(1,fn("Divisor","FLOAT",1e4,"x")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"EMV",null),(0,g.__decorate)([vn({id:"@SAR",title:"SAR",isHistBase:!0,isScaleCenter:!0}),(0,g.__param)(0,fn("Start","FLOAT",.02,"step")),(0,g.__param)(1,fn("Maximum","FLOAT",.2,"x")),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Number,Number]),(0,g.__metadata)("design:returntype",void 0)],t.prototype,"SAR",null),t}(yn);!function(e){e.INT="INT",e.FLOAT="FLOAT",e.SOURCE="SOURCE",e.SELECT="SELECT",e.STRING="STRING"}(Bn||(Bn={})),function(e){e.HIGH="high",e.LOW="low",e.OPEN="open",e.CLOSE="close"}(Wn||(Wn={}));var Un={VOL:function(){return mn(Rn,"VOL")},MA:function(){return mn(Rn,"MA")},EMA:function(){return mn(Rn,"EMA")},WMA:function(){return mn(Rn,"WMA")},MACD:function(){return mn(Rn,"MACD")},RSI:function(){return mn(Hn,"RSI")},BOLL:function(){return mn(Zn,"BOLL")},KDJ:function(){return mn(On,"KDJ")},OBV:function(){return mn(Nn,"OBV")},CCI:function(){return mn(Hn,"CCI")},VWAP:function(){return mn(Nn,"VWAP")},StochRSI:function(){return mn(Fn,"StochRSI")},WR:function(){return mn(Fn,"WR")},AVL:function(){return mn(Nn,"AVL")},DMI:function(){return mn(Kn,"DMI")},MTM:function(){return mn(Fn,"MTM")},TRIX:function(){return mn(Rn,"TRIX")},EMV:function(){return mn(Kn,"EMV")},SAR:function(){return mn(Kn,"SAR")}},zn=["@VOL","@EMV","@VWAP","@OBV","@AVL"],Xn=function(){return Object.keys(Un).reduce((function(e,t){var i=(0,Un[t])();return e[i.defaultProps.id]=i,e}),{})},Gn={mousedown:{eventName:"mousedown",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mousemove:{eventName:"mousemove",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mouseup:{eventName:"mouseup",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mouseout:{eventName:"mouseout",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},wheel:{eventName:"wheel",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},click:{eventName:"click",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},dblclick:{eventName:"dblclick",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},contextmenu:{eventName:"contextmenu",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},resize:{eventName:"resize",handler:function(e){e()}},gesturestart:{eventName:"gesturestart",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},gesturechange:{eventName:"gesturechange",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},gestureend:{eventName:"gestureend",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}}},Yn={mousedown:{eventName:"touchstart",handler:function(e,t){var i={originEvent:t};Array.from(t.targetTouches).forEach((function(e,t){var n=0===t?"clientY":"clientY"+t;i[0===t?"clientX":"clientX"+t]=e.clientX,i[n]=e.clientY})),e(i)}},mousemove:{eventName:"touchmove",handler:function(e,t){var i={originEvent:t};Array.from(t.touches).forEach((function(e,t){var n=0===t?"clientY":"clientY"+t;i[0===t?"clientX":"clientX"+t]=e.clientX,i[n]=e.clientY})),e(i)}},mouseup:{eventName:"touchend",handler:function(e,t){var i={originEvent:t};Array.from(t.changedTouches).forEach((function(e,t){var n=0===t?"clientY":"clientY"+t;i[0===t?"clientX":"clientX"+t]=e.clientX,i[n]=e.clientY})),e(i)}},wheel:{eventName:"wheel",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},click:{eventName:"click",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}}};const jn={eventPool:new Map,getEventName:function(e){var t=(0,g.__read)(e.split("."),2),i=t[0],n=t[1],r=Object.assign(Gn[i]||{},{nameSpace:n}),o=Object.assign(Yn[i]||{},{nameSpace:n});return r.eventName===o.eventName?[r]:[r,o]},on:function(e,t,i,n){var r=this;return void 0===n&&(n=!1),this.getEventName(t).forEach((function(t){var o,a=t.eventName,l=t.nameSpace,s=t.handler;if(a){var c=s.bind(null,i),u=r.eventPool.get(e);if(!u){var d=new Map;(o={})[a]=d,u=o,r.eventPool.set(e,u)}u[a]||(u[a]=new Map);var h=new Map;h.set(i,c),u[a].set(l,h),e.addEventListener(a,c,n)}})),this},off:function(e,t,i,n){var r=this;void 0===n&&(n=!1);var o=this.getEventName(t),a=this.eventPool.get(e);return o.forEach((function(t){var o=t.eventName,l=t.nameSpace;if(a&&a[o]){var s=a[o],c=s.get(l);if(i){if(c&&i){var u=c.get(i);u&&e.removeEventListener(o,u,n)}}else l?c&&Array.from(c.values()).forEach((function(t){e.removeEventListener(o,t,n)})):Array.from(s.values()).forEach((function(t){Array.from(t.values()).forEach((function(t){e.removeEventListener(o,t,n)}))})),s.clear();0===s.size&&delete a[o],0===Object.keys(a).length&&r.eventPool.delete(e)}})),this}};var qn=i(97370),Qn=i(6927),Jn=i(13283),$n=i(32803),er=i(78734);const tr=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,g.__assign)((0,g.__assign)({},$n.Z.defaultConfig),{width:0,height:0,fontSize:10,fontFamily:"sans-serif",fontStyle:"",fontVariant:"",letterSpacing:0,textWidth:0,padding:0,borderRadius:0,borderColor:"#ddd",background:"#ddd",color:"#fff",text:"",dir:Dt.Nm.Right,useCache:!0}),i.setAttrs(t),i.watch(["background","lineWidth","borderColor","color","text","fontSize","letterSpacing","fontFamily","fontStyle","fontVariant","dir","useCache","borderRadius"],i.onDataChange.bind(i)),i}return(0,g.__extends)(t,e),t.prototype.beforeDrawHook=function(){var e=this.getAttr("fixWidth");if(this.isBatchUpdate&&void 0===e){var t=ci.Z.getContext();(0,It.ui)(t,{font:this._getTextFont()});var i=this.getAttr("text");this.setAttr("textWidth",ci.Z.measureTextWidth(i))}},t.prototype.onDataChange=function(){this.isBatchUpdate=!0},t.prototype.getDirection=function(){return(this.getAttr("dir")||"").toUpperCase()},t.prototype.getTransformOrigin=function(){var e=this.getAttr("data")||{},t=e.x,i=e.y,n=this.getWidth(),r=this.getHeight(),o=this.getDirection();return o===Dt.Nm.Left&&(t-=n,i-=.5*r),o===Dt.Nm.Right&&(i-=.5*r),o===Dt.Nm.Up&&(t-=.5*n,i-=r),o===Dt.Nm.Down&&(t-=.5*n),{x:t,y:i}},t.prototype.getContextStyles=function(){var e=this.getConfig(),t=e.color,i=e.lineWidth,n=e.background,r=e.borderColor,o=e.text,a=this.getDirection(),l={strokeStyle:t,lineWidth:i,fillStyle:t,background:n,borderColor:r,dir:a,text:o,font:this._getTextFont()},s=a===Dt.Nm.Left?"right":a===Dt.Nm.Right?"left":"center";return(0,g.__assign)((0,g.__assign)({},l),{textBaseline:"middle",textAlign:s})},t.prototype.getWidth=function(){var e=this.getConfig(),t=e.textWidth,i=e.padding,n=e.fixWidth,r=e.text;if((0,ii.hj)(n))return n;var o=Array.isArray(i)?i[0]:i;return""!==r&&this.setAttr("textWidth",ci.Z.measureTextWidth(r)),t+2*o},t.prototype.getHeight=function(){var e=this.getConfig(),t=e.padding,i=e.fontSize,n=e.fixHeight;return(0,ii.hj)(n)?n:i+2*(Array.isArray(t)?t[1]:t)},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getContext(),t=this.getWidth(),i=this.getHeight(),n=this.overrideSize({width:t,height:i});n&&this.setAttrs({width:t,height:i});var r=this.getContextStyles(),o=!Kt()(r,this.preContextStyles);if(o&&(this.preContextStyles=r),o||n){var a=this.getConfig(),l=a.background,s=a.color,c=a.text,u=a.borderColor,d=a.stroke,h=a.fill,g=a.lineWidth,p=a.borderRadius;(0,It.ui)(e,{fillStyle:l,strokeStyle:u,lineWidth:g}),this._hasBorderRadius(p)?(this._drawRoundRect(e,.5*g,.5*g,t-g,i-g,p),h&&e.fill(),d&&e.stroke()):(h&&ci.Z.fillRect(e,0,0,t,i),d&&ci.Z.strokeRect(e,.5*g,.5*g,t-g,i-g)),(0,It.ui)(e,{fillStyle:s,textAlign:"center",textBaseline:"middle",font:this._getTextFont()});var f=.5*t,v=.5*i;ci.Z.drawText(e,c,f,v)}this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){var t=this.getAttr("data"),i=this.getWidth(),n=this.getHeight();this._drawLabel(e,i,n,t)},t.prototype.isHover=function(e){if(!this.getAttr("isContain"))return!1;var t=this.getTransformOrigin(),i=t.x,n=t.y,r=this.getWidth(),o=this.getHeight();return new er.Z.Bound(i,n,r,o).contain([e.x,e.y])},t.prototype._drawLabel=function(e,t,i,n){var r=this.getConfig(),o=r.background,a=r.text,l=r.borderColor,s=r.color,c=r.stroke,u=r.fill,d=r.borderRadius;(0,It.ui)(e,{fillStyle:o,strokeStyle:l});var h=n.x,g=void 0===h?0:h,p=n.y,f=void 0===p?0:p;this._hasBorderRadius(d)?(this._drawRoundRect(e,g,f,t,i,d),u&&e.fill(),c&&e.stroke()):(u&&ci.Z.fillRect(e,g,f,t,i),c&&ci.Z.strokeRect(e,g,f,t,i)),(0,It.ui)(e,this.getContextStyles()),(0,It.ui)(e,{fillStyle:s,textAlign:"center",textBaseline:"middle"});var v=.5*t,m=.5*i;ci.Z.drawText(e,a,v,m)},t.prototype._drawRoundRect=function(e,t,i,n,r,o){var a=(0,g.__read)("number"==typeof o?[o,o,o,o]:o,4),l=a[0],s=a[1],c=a[2],u=a[3];e.beginPath(),e.moveTo(t,i+l),e.arc(t+l,i+l,l,Math.PI,1.5*Math.PI),e.lineTo(t+n-s,i),e.arc(t+n-s,i+s,s,1.5*Math.PI,2*Math.PI),e.lineTo(t+n,i+r-c),e.arc(t+n-c,i+r-c,c,0,.5*Math.PI),e.lineTo(t+u,i+r),e.arc(t+u,i+r-u,u,.5*Math.PI,Math.PI),e.closePath()},t.prototype._hasBorderRadius=function(e){return"number"==typeof e&&e>0||Array.isArray(e)&&e.some((function(e){return e>0}))},t.prototype._getTextFont=function(){var e=this.getConfig();return e.fontStyle+" "+e.fontVariant+" "+e.fontSize+"px "+e.fontFamily},t}($n.Z);var ir=i(78191);const nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{type:Dt.Us.TrendLine}),t.line=new Jn.Z({strokeStyle:Qn.e.default_line_color,lineWidth:1}),t.yLabel1=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.yLabel2=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.xLabel1=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.xLabel2=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.xRange=new ir.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.yRange=new ir.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.dragVertex1=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]),t.dragVertex2=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.getParent(),i=e.mainPane,n=e.axisPane,r=e.timeAxisPane,o=e.xAxis,a=n.bound.width,l=r.bound.height,s=this.getData(),c=s.p1,u=s.p2,d=e.getPosition(c),h=d.x,g=d.y,p=e.getPosition(u),f=p.x,v=p.y;this.line.setData({p1:{x:h,y:-g},p2:{x:f,y:-v}});var m=(t.getCurrentItemByTime(c.time)||{}).time,y=void 0===m?c.time:m,x=(t.getCurrentItemByTime(u.time)||{}).time,b=void 0===x?u.time:x;this.xLabel1.setAttrs({data:{x:h,y:-l},text:(0,It.XH)(y,o.getOriginTimeScaleType()),fixHeight:l}),this.xLabel2.setAttrs({data:{x:f,y:-l},text:(0,It.XH)(b,o.getOriginTimeScaleType()),fixHeight:l}),this.yLabel1.setAttrs({data:{x:0,y:-g},text:e.formatterValue(c.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-v},text:e.formatterValue(u.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(h,f),y:-l},width:Math.abs(h-f),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(g,v)},width:n.bound.width,height:Math.abs(g-v)}),this.dragVertex1.setAttrs({data:{x:h,y:-g}}),this.dragVertex2.setAttrs({data:{x:f,y:-v}}),this.addWidgetShapes(i,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(n,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,r,n])}},t.prototype.getShapes=function(){return[this.line,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Dt.Us.TrendLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.updateColor=function(e){this.line.setAttr("strokeStyle",e)},t.prototype.updateLineWidth=function(e){this.line.setAttr("lineWidth",e)},t.prototype.updateLineStyle=function(e){this.line.setAttr("lineDash",e)},t.prototype.isHover=function(e){return this.line.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel1.setAttr("isVisible",t),this.xLabel2.setAttr("isVisible",t),this.xRange.setAttr("isVisible",t),this.yLabel1.setAttr("isVisible",t),this.yLabel2.setAttr("isVisible",t),this.yRange.setAttr("isVisible",t),this.dragVertex1.setAttrs({isVisible:i||t,radius:Qn.e.radius,lineWidth:t?Qn.e.border_width:Qn.e.hover_border_width}),this.dragVertex2.setAttrs({isVisible:i||t,radius:Qn.e.radius,lineWidth:t?Qn.e.border_width:Qn.e.hover_border_width})},t.prototype.getVertexs=function(){return[this.dragVertex1,this.dragVertex2]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.line.isHover(e)?this.line:void 0},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),l=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o));(a||l)&&this.update()}},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r===this.line?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex1,r===this.dragVertex1),this.updateVertexBorderAndVisible(this.dragVertex2,r===this.dragVertex2),this._dragVertex(t,r)))}}},t.prototype._dragVertex=function(e,t){var i,n=this,r=e.mainPane;t===this.dragVertex1?(this.dragVertex2.setAttr("strokeStyle",Qn.e.hover_border_color),i="p1"):(this.dragVertex1.setAttr("strokeStyle",Qn.e.hover_border_color),i="p2"),r.on("mousemove",Dt.Us.TrendLine,(function(t){var r,o=e.transformAbsoluteXYToPlotItem(t.point),a=n.getAttr("data");n.setData((0,g.__assign)((0,g.__assign)({},a),((r={})[i]=o,r))),n.update()})),r.on("mouseup",Dt.Us.TrendLine,(function(){r.off(Dt.Us.TrendLine),n.recoverDragVertexts(),n.compeleDraw()}))},t.prototype._dragLine=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),l=a.p1,s=a.p2,c=e.getPosition(l),u=c.x,d=c.y,h=e.getPosition(s),g=h.x,p=h.y,f=0,v=0;o.on("mousemove",Dt.Us.TrendLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,l=o.y;f=a-n,v=l-r;var s=e.getPlotItemByPosition(u+f,d+v),c=e.getPlotItemByPosition(g+f,p+v);i.setData({p1:s,p2:c}),i.update()})),o.on("mouseup",Dt.Us.TrendLine,(function(){o.off(Dt.Us.TrendLine),i.compeleDraw()}))},t}(Qn.Z),rr=function(e){function t(){var t=e.call(this)||this;return t.setAttr("type",Dt.Us.ExtendTrendLine),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.getParent(),i=e.mainPane,n=e.axisPane,r=e.timeAxisPane,o=e.xAxis,a=n.bound.width,l=r.bound.height,s=this.getData(),c=s.p1,u=s.p2,d=e.getPosition(c),h=d.x,g=d.y,p=e.getPosition(u),f=p.x,v=p.y,m=i.getBound(),y=m.width,x=m.height;if(er.Z.Algorith.isSamePoint(d,p))this.line.setData({p1:{x:h,y:-g},p2:{x:f,y:-v}});else{var b=new er.Z.Bound(0,0,y,x),C=er.Z.Line.getIntersectWidthBound(d,p,b);2===C.length?this.line.setData({p1:{x:C[0].x,y:-C[0].y},p2:{x:C[1].x,y:-C[1].y}}):this.line.setData(null)}var _=(t.getCurrentItemByTime(c.time)||{}).time,w=void 0===_?c.time:_,S=(t.getCurrentItemByTime(u.time)||{}).time,L=void 0===S?u.time:S;this.xLabel1.setAttrs({data:{x:h,y:-l},text:(0,It.XH)(w,o.getOriginTimeScaleType()),fixHeight:l}),this.xLabel2.setAttrs({data:{x:f,y:-l},text:(0,It.XH)(L,o.getOriginTimeScaleType()),fixHeight:l}),this.yLabel1.setAttrs({data:{x:0,y:-g},text:e.formatterValue(c.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-v},text:e.formatterValue(u.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(h,f),y:-l},width:Math.abs(h-f),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(g,v)},width:n.bound.width,height:Math.abs(g-v)}),this.dragVertex1.setAttrs({data:{x:h,y:-g}}),this.dragVertex2.setAttrs({data:{x:f,y:-v}}),this.addWidgetShapes(i,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(n,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,r,n])}},t}(nr),or=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,g.__assign)((0,g.__assign)({},$n.Z.defaultConfig),{width:0,height:0,imageSource:null,globalAlpha:1,isLoading:!1,useCache:!0}),i.setAttrs(t),i.watch(["imageSource"],i.onDataChange.bind(i)),i}return(0,g.__extends)(t,e),t.prototype.onDataChange=function(){var e=this.getAttr("imageSource");if(e){var t=e.width,i=e.height;this.overrideSize({width:t,height:i}),this.setAttrs({width:t,height:i}),this.isBatchUpdate=!0}},t.prototype.setImage=function(e){this.setAttrs({imageSource:e,isLoading:!1})},t.prototype.getTransformOrigin=function(){return this.getAttr("data")},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.width,i=e.height,n=e.imageSource;t<=0||i<=0||!n||(this.getContext().drawImage(n,0,0),this.isBatchUpdate=!1)}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.data,n=i.x,r=i.y,o=t.width,a=t.height,l=t.imageSource;o<=0||a<=0||!l||ci.Z.drawImage(e,l,n,r)},t.prototype.isHover=function(e){if(!this.preDetect())return!1;var t=this.getTransformOrigin(),i=t.x,n=t.y;return new er.Z.Bound(i,n,this.getWidth(),this.getHeight()).contain([e.x,e.y])},t}($n.Z),ar=function(e){function t(){var t=e.call(this)||this;return t.rect=new ir.Z({fillStyle:"rgba(42, 47, 55, 0.75)",stroke:!1}),t.barImage=new or,t.priceDiffImage=new or,t.text1=Qn.Z.text.clone().setAttrs({fillStyle:"#E6E8EA",textBaseline:"middle"}),t.text2=Qn.Z.text.clone().setAttrs({fillStyle:"#E6E8EA",textBaseline:"middle"}),t._textWidth=0,t.setAttr("type",Dt.Us.InfoLine),t.watch(["data"],t._updateInfo.bind(t)),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this;this.barImage.getAttr("imageSource")||this.barImage.getAttr("isLoading")||(this.barImage.setAttr("isLoading",!0),yi(bi.P1).then((function(t){e.barImage.setImage(t)}))),this.priceDiffImage.getAttr("imageSource")||this.priceDiffImage.getAttr("isLoading")||(this.priceDiffImage.setAttr("isLoading",!0),yi(bi.Q$).then((function(t){e.priceDiffImage.setImage(t)})));var t=this.getParent();if(t){var i=t.getParent(),n=t.mainPane,r=t.axisPane,o=t.timeAxisPane,a=t.xAxis,l=r.bound.width,s=o.bound.height,c=this.getData(),u=c.p1,d=c.p2,h=t.getPosition(u),g=h.x,p=h.y,f=t.getPosition(d),v=f.x,m=f.y;this.line.setData({p1:{x:g,y:-p},p2:{x:v,y:-m}});var y=this.barImage.getAttr("width"),x=this.barImage.getAttr("height"),b=this.priceDiffImage.getAttr("width"),C=this.priceDiffImage.getAttr("height"),_=Math.max(180,this._textWidth+16+Math.max(y,b)+5),w=8,S=-80,L=(g-v)*(p-m)>0;(0,It.Fr)(g-v,10)?(w=8,S=-36):(0,It.Fr)(p-m,10)?(w=.5*-_,S=-80):L&&(w=-_-8,S=-80);var E=.5*(g+v)+w,k=.5*-(p+m)+S;this.rect.setAttrs({data:{x:E,y:k},width:_,height:72}),k+=12,this.barImage.setData({x:E+8,y:k}),this.text1.setData({x:E+8+y+5,y:k+.5*x}),k+=24,this.priceDiffImage.setData({x:E+8,y:k}),this.text2.setData({x:E+8+b+5,y:k+.5*C});var V=(i.getCurrentItemByTime(u.time)||{}).time,A=void 0===V?u.time:V,T=(i.getCurrentItemByTime(d.time)||{}).time,M=void 0===T?d.time:T;this.xLabel1.setAttrs({data:{x:g,y:-s},text:(0,It.XH)(A,a.getOriginTimeScaleType()),fixHeight:s}),this.xLabel2.setAttrs({data:{x:v,y:-s},text:(0,It.XH)(M,a.getOriginTimeScaleType()),fixHeight:s}),this.yLabel1.setAttrs({data:{x:0,y:-p},text:t.formatterValue(u.value),fixWidth:l}),this.yLabel2.setAttrs({data:{x:0,y:-m},text:t.formatterValue(d.value),fixWidth:l}),this.xRange.setAttrs({data:{x:Math.min(g,v),y:-s},width:Math.abs(g-v),height:o.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(p,m)},width:r.bound.width,height:Math.abs(p-m)}),this.dragVertex1.setAttrs({data:{x:g,y:-p}}),this.dragVertex2.setAttrs({data:{x:v,y:-m}}),this.addWidgetShapes(n,[this.line,this.dragVertex1,this.dragVertex2,this.rect,this.barImage,this.priceDiffImage,this.text1,this.text2]),this.addWidgetShapes(o,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(r,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([n,o,r])}},t.prototype.getShapes=function(){return[this.line,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2,this.rect,this.barImage,this.priceDiffImage,this.text1,this.text2]},t.prototype.updateColor=function(e){this.line.setAttr("strokeStyle",e),this.text1.setAttr("fillStyle",e),this.text2.setAttr("fillStyle",e)},t.prototype._updateInfo=function(e){var t=e.newVal,i=t.p1,n=t.p2,r=this.getParent();if(r){var o=r.getParent(),a=(0,g.__read)(o.getTimeExtent(),2),l=a[0],s=a[1],c=r.xAxis.unitWidth,u=Math.min(i.time,n.time),d=Math.max(i.time,n.time);u=Math.min(s,Math.max(l,u)),d=Math.max(l,Math.min(s,d));var h=r.getPosition((0,g.__assign)((0,g.__assign)({},i),{time:u})).x,p=r.getPosition((0,g.__assign)((0,g.__assign)({},i),{time:d})).x;this.text1.setAttr("content",Math.round((p-h)/c)+" "+r.getI18n(Mt.Wi.DRAW_BAR,"bars")+"("+this._getFormatInterval(u,d,r)+")"),this.text2.setAttr("content",r.formatterValue(n.value-i.value)+"("+(0,It.gt)((n.value-i.value)/i.value)+")");var f=this.text1.getAttr("textWidth"),v=this.text2.getAttr("textWidth");this._textWidth=Math.ceil(Math.max(f,v))}},t.prototype._getFormatInterval=function(e,t,i){var n=t-e;if(0===n)return"no data";var r=[],o=Math.floor(n/Mt.Ri.Day),a=n%Mt.Ri.Day;o>0&&r.push(""+o+i.getI18n(Mt.Wi.DRAW_DAY,"D"));var l=Math.floor(a/Mt.Ri.Hour);a=n%Mt.Ri.Hour,l>0&&r.push(""+l+i.getI18n(Mt.Wi.DRAW_HOUR,"h"));var s=Math.floor(a/Mt.Ri.Minute);return s>0&&r.push(""+s+i.getI18n(Mt.Wi.DRAW_MINUTE,"m")),r.join(", ")},t}(nr);const lr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{lineType:Dt.Us.HorizontalLine,type:Dt.Us.StraightLine}),t.line1=Qn.Z.line.clone(),t.line2=Qn.Z.line.clone(),t.yLabel=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.xLabel=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.dragVertex=Qn.Z.dragRect.clone(["fillStyle","strokeStyle"]).setAttrs({width:12,height:12}),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.getParent(),i=e.mainPane,n=e.axisPane,r=e.timeAxisPane,o=e.xAxis,a=n.bound.width,l=r.bound.height,s=i.getBound(),c=s.width,u=s.height,d=this.getData(),h=e.getPosition(d),g=h.x,p=h.y,f=this.getAttr("lineType");f===Dt.Us.VerticalLine?this.line1.setData({p1:{x:g,y:0},p2:{x:g,y:-u}}):f===Dt.Us.HorizontalLine?this.line1.setData({p1:{x:0,y:-p},p2:{x:c,y:-p}}):f===Dt.Us.CrossLine&&(this.line1.setData({p1:{x:g,y:0},p2:{x:g,y:-u}}),this.line2.setData({p1:{x:0,y:-p},p2:{x:c,y:-p}}));var v=(t.getCurrentItemByTime(d.time)||{}).time,m=void 0===v?d.time:v;this.xLabel.setAttrs({data:{x:g,y:-l},text:(0,It.XH)(m,o.getOriginTimeScaleType()),fixHeight:l}),this.yLabel.setAttrs({data:{x:0,y:-p},text:e.formatterValue(d.value),fixWidth:a}),this.dragVertex.setAttrs({data:{x:g-6,y:-p-6}}),f===Dt.Us.CrossLine?this.addWidgetShapes(i,[this.line1,this.line2,this.dragVertex]):this.addWidgetShapes(i,[this.line1,this.dragVertex]),this.addWidgetShapes(r,[this.xLabel]),this.addWidgetShapes(n,[this.yLabel]),this.setAnnotationToWidgets([i,r,n])}},t.prototype.isCross=function(){return this.getAttr("lineType")===Dt.Us.CrossLine},t.prototype.getShapes=function(){var e=[this.line1,this.dragVertex,this.xLabel,this.yLabel];return this.isCross()&&e.push(this.line2),e},t.prototype.updateColor=function(e){this.line1.setAttr("strokeStyle",e),this.line2.setAttr("strokeStyle",e)},t.prototype.updateLineWidth=function(e){this.line1.setAttr("lineWidth",e),this.line2.setAttr("lineWidth",e)},t.prototype.updateLineStyle=function(e){this.line1.setAttr("lineDash",e),this.line2.setAttr("lineDash",e)},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Dt.Us.HorizontalLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){var t=this.getAttr("lineType");return this.line1.isHover(e)||t===Dt.Us.CrossLine&&this.line2.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel.setAttr("isVisible",t),this.yLabel.setAttr("isVisible",t),this.dragVertex.setAttrs({isVisible:i||t,lineWidth:t?Qn.e.border_width:Qn.e.hover_border_width})},t.prototype.getVertexs=function(){return[this.dragVertex]},t.prototype.getDescription=function(){var e=this.getConfig(),t=e.data,i=e.lineType,n=e.type,r=e.background,o=e.color,a=e.lineWidth,l=e.lineStyle;return{data:t,type:n,color:o,background:r,lineType:i,isLock:e.isLock,lineWidth:a,lineStyle:l}},t.prototype.getCacheStyleKey=function(){return this.getAttr("lineType")},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y};this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover(o))&&this.update()}},t.prototype.getDragVertex=function(e){var t=this.getAttr("lineType");return this.dragVertex.isHover(e)?this.dragVertex:this.line1.isHover(e)?this.line1:t===Dt.Us.CrossLine&&this.line2.isHover(e)?this.line2:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r instanceof Jn.Z?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t)))}}},t.prototype._dragVertex=function(e){var t=this,i=e.mainPane;i.on("mousemove",Dt.Us.HorizontalLine,(function(i){t.setData(e.transformAbsoluteXYToPlotItem(i.point)),t.update()})),i.on("mouseup",Dt.Us.HorizontalLine,(function(){i.off(Dt.Us.HorizontalLine),t.recoverDragVertexts(),t.compeleDraw()}))},t.prototype._dragLine=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),l=e.getPosition(a),s=l.x,c=l.y,u=this.getAttr("lineType");o.on("mousemove",Dt.Us.HorizontalLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,l=o.y,d=a-n,h=l-r;if(u===Dt.Us.VerticalLine){if((0,It.Fr)(d))return;i.setData(e.getPlotItemByPosition(s+d,c))}else if(u===Dt.Us.HorizontalLine){if((0,It.Fr)(h))return;i.setData(e.getPlotItemByPosition(s,c+h))}else if(u===Dt.Us.CrossLine){if((0,It.Fr)(d)&&(0,It.Fr)(h))return;i.setData(e.getPlotItemByPosition(s+d,c+h))}i.update()})),o.on("mouseup",Dt.Us.HorizontalLine,(function(){o.off(Dt.Us.HorizontalLine),i.compeleDraw()}))},t}(Qn.Z);var sr=i(63270);const cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{type:Dt.Us.Rectangle}),t.rect=new ir.Z({fillStyle:sr.e.default_area_color,stroke:!1}),t.yLabel1=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.yLabel2=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.xLabel1=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.xLabel2=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.xRange=new ir.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.yRange=new ir.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.dragVertex1=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]),t.dragVertex2=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t.dragVertex3=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t.dragVertex4=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.getParent(),i=e.mainPane,n=e.axisPane,r=e.timeAxisPane,o=e.xAxis,a=n.bound.width,l=r.bound.height,s=this.getData(),c=s.p1,u=s.p2,d=e.getPosition(c),h=d.x,g=d.y,p=e.getPosition(u),f=p.x,v=p.y;this.rect.setData({x:h,y:-g}).setAnnotherVertex({x:f,y:-v});var m=(t.getCurrentItemByTime(c.time)||{}).time,y=void 0===m?c.time:m,x=(t.getCurrentItemByTime(u.time)||{}).time,b=void 0===x?u.time:x;this.xLabel1.setAttrs({data:{x:h,y:-l},text:(0,It.XH)(y,o.getOriginTimeScaleType()),fixHeight:l}),this.xLabel2.setAttrs({data:{x:f,y:-l},text:(0,It.XH)(b,o.getOriginTimeScaleType()),fixHeight:l}),this.yLabel1.setAttrs({data:{x:0,y:-g},text:e.formatterValue(c.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-v},text:e.formatterValue(u.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(h,f),y:-l},width:Math.abs(h-f),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(g,v)},width:n.bound.width,height:Math.abs(g-v)}),this.dragVertex1.setAttrs({data:{x:h,y:-g}}),this.dragVertex2.setAttrs({data:{x:f,y:-g}}),this.dragVertex3.setAttrs({data:{x:f,y:-v}}),this.dragVertex4.setAttrs({data:{x:h,y:-v}}),this.addWidgetShapes(i,[this.rect,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(n,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,r,n])}},t.prototype.getShapes=function(){return[this.rect,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Dt.Us.Rectangle,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.updateColor=function(e){this.rect.setAttrs({stroke:!0,strokeStyle:e})},t.prototype.updateBackground=function(e){this.rect.setAttr("fillStyle",e)},t.prototype.updateLineWidth=function(e){this.rect.setAttrs({stroke:!0,lineWidth:e})},t.prototype.updateLineStyle=function(e){this.rect.setAttrs({stroke:!0,lineDash:e})},t.prototype.isHover=function(e){return this.rect.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel1.setAttr("isVisible",t),this.xLabel2.setAttr("isVisible",t),this.xRange.setAttr("isVisible",t),this.yLabel1.setAttr("isVisible",t),this.yLabel2.setAttr("isVisible",t),this.yRange.setAttr("isVisible",t);var n={isVisible:i||t,radius:sr.e.radius,lineWidth:t?sr.e.border_width:sr.e.hover_border_width};this.updateVertex(this.getVertexs(),n)},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!0,lineWidth:e.lineWidth,showStyle:!0,lineStyle:e.lineStyle,showBg:!0,background:e.background,isLock:e.isLock,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),l=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex3,this.dragVertex3.isHover(o)),c=this.updateHighlightVertexBorderWidth(this.dragVertex4,this.dragVertex4.isHover(o));(a||l||s||c)&&this.update()}},t.prototype.getVertexs=function(){return[this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.dragVertex3.isHover(e)?this.dragVertex3:this.dragVertex4.isHover(e)?this.dragVertex4:this.rect.isHover(e)?this.rect:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r===this.rect?this._dragRect(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(r,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(r),!1),this._dragVertex(t,r)))}}},t.prototype._dragVertex=function(e,t){var i=this,n=e.mainPane;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:sr.e.hover_border_color}),n.on("mousemove",Dt.Us.Rectangle,(function(n){var r=e.transformAbsoluteXYToPlotItem(n.point),o=i.getAttr("data"),a=o.p1,l=o.p2;t===i.dragVertex1&&i.setData({p1:r,p2:l}),t===i.dragVertex2&&i.setData({p1:{time:a.time,value:r.value},p2:{time:r.time,value:l.value}}),t===i.dragVertex3&&i.setData({p1:a,p2:r}),t===i.dragVertex4&&i.setData({p1:{time:r.time,value:a.value},p2:{time:l.time,value:r.value}}),i.update()})),n.on("mouseup",Dt.Us.Rectangle,(function(){n.off(Dt.Us.Rectangle),i.recoverDragVertexts(),i.compeleDraw()}))},t.prototype._dragRect=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),l=a.p1,s=a.p2,c=e.getPosition(l),u=c.x,d=c.y,h=e.getPosition(s),g=h.x,p=h.y,f=0,v=0;o.on("mousemove",Dt.Us.Rectangle,(function(t){var o=e.transformPointToView(t.point),a=o.x,l=o.y;f=a-n,v=l-r;var s=e.getPlotItemByPosition(u+f,d+v),c=e.getPlotItemByPosition(g+f,p+v);i.setData({p1:s,p2:c}),i.update()})),o.on("mouseup",Dt.Us.Rectangle,(function(){o.off(Dt.Us.Rectangle),i.compeleDraw()}))},t}(Qn.Z),ur=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,g.__assign)((0,g.__assign)({},$n.Z.defaultConfig),{width:0,height:0,prevLineDash:[],fill:!0,stroke:!0,origin:{x:0,y:0},useCache:!0}),i.setAttrs(t),i.watch(["lineWidth","fillStyle","strokeStyle","fill","stroke","globalAlpha"],i.onCacheChange.bind(i)),i}return(0,g.__extends)(t,e),t.prototype.onDataChange=function(){var e=this.getMaxAndMin(),t=e.minX,i=e.maxX,n=e.minY,r=e.maxY,o=Math.max(i-t,1),a=Math.max(r-n,1);this.overrideSize({width:o,height:a}),this.setAttrs({width:o,height:a}),this.setAttr("origin",{x:t,y:n}),this.isDataUpdate=!0,this.isBatchUpdate=!0},t.prototype.getMaxAndMin=function(){var e=this.getAttr("data"),t=Number.MAX_SAFE_INTEGER,i=-Number.MAX_SAFE_INTEGER;return e.reduce((function(e,t){var i=e.minX,n=e.maxX,r=e.minY,o=e.maxY,a=t.x,l=t.y;return i>a&&(i=a),n<a&&(n=a),r>l&&(r=l),o<l&&(o=l),{minX:i,maxX:n,minY:r,maxY:o}}),{minX:t,maxX:i,minY:t,maxY:i})},t.prototype.getTransformOrigin=function(){return this.getAttr("origin")},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,lineWidth:e.lineWidth,lineDash:e.lineDash,globalAlpha:e.globalAlpha}},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.lineDash,i=e.data,n=e.stroke,r=e.fill,o=this.getContext(),a=this.getContextStyles();(!Kt()(a,this.preContextStyles)||this.isDataUpdate)&&(this.preContextStyles=a,(0,It.ui)(o,a)),t&&o.setLineDash(t),o.beginPath(),ci.Z.clearRect(o);var l=this.getTransformOrigin(),s=l.x,c=l.y,u=i.map((function(e){var t=e.x,i=e.y;return{x:t-s,y:i-c}}));ci.Z.drawLines(o,u),r&&(o.closePath(),o.fill()),n&&o.stroke(),this.isDataUpdate=!1,this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.lineDash,n=t.data,r=t.stroke,o=t.fill;(0,It.ui)(e,this.getContextStyles()),i&&e.setLineDash(i),e.beginPath(),ci.Z.drawLines(e,n),o&&(e.closePath(),e.fill()),r&&e.stroke()},t.prototype.isHover=function(e,t){return void 0===t&&(t=5),!!this.preDetect()&&t>=new er.Z.Polyline(this.getAttr("data")).getNearestPoint(e).dis},t}($n.Z),dr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{type:Dt.Us.ParallelLine}),t.path=new ur({fillStyle:sr.e.default_area_color,stroke:!1}),t.line1=Qn.Z.line.clone(),t.line2=Qn.Z.line.clone(),t.yLabel1=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.yLabel2=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.yLabel3=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.xLabel1=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.xLabel2=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.xRange=new ir.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.yRange=new ir.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.dragVertex1=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]),t.dragVertex2=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t.dragVertex3=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.getParent(),i=e.mainPane,n=e.axisPane,r=e.timeAxisPane,o=e.xAxis,a=n.bound.width,l=r.bound.height,s=this.getData(),c=s.p1,u=s.p2,d=s.p3,h=e.getPosition(c),g=h.x,p=h.y,f=e.getPosition(u),v=f.x,m=f.y,y=e.getPosition(d),x=y.x,b=y.y,C=new er.Z.Vector2(v-g,m-p),_=new er.Z.Vector2(x-g,b-p),w=er.Z.Algorith.getCrossMultiply(C,_),S=(0,It.Fr)(g-v),L=m-p+w/(v-g)+p,E=w/(v-g)+p,k=Math.min(p,m,b),V=Math.max(p,m,b);this.path.setData([{x:g,y:-p},{x:v,y:-m},{x:v,y:-L},{x:g,y:-E}]).setAttr("isVisible",!S),this.line1.setData({p1:{x:g,y:-p},p2:{x:v,y:-m}}),this.line2.setData({p1:{x:g,y:-E},p2:{x:v,y:-L}}).setAttr("isVisible",!S);var A=(t.getCurrentItemByTime(c.time)||{}).time,T=void 0===A?c.time:A,M=(t.getCurrentItemByTime(u.time)||{}).time,D=void 0===M?u.time:M;if(this.xLabel1.setAttrs({data:{x:g,y:-l},text:(0,It.XH)(T,o.getOriginTimeScaleType()),fixHeight:l}),this.xLabel2.setAttrs({data:{x:v,y:-l},text:(0,It.XH)(D,o.getOriginTimeScaleType()),fixHeight:l}),this.yLabel1.setAttrs({data:{x:0,y:-p},text:e.formatterValue(c.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-m},text:e.formatterValue(u.value),fixWidth:a}),this.yLabel3.setAttrs({data:{x:0,y:-b},text:e.formatterValue(d.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(g,v),y:-l},width:Math.abs(g-v),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-V},width:n.bound.width,height:V-k}),this.dragVertex1.setAttrs({data:{x:g,y:-p}}),this.dragVertex2.setAttrs({data:{x:v,y:-m}}),this.dragVertex3.setAttrs({data:{x:.5*(g+v),y:.5*-(L+E)}}),this.getAttr("isEdit")&&this.getAttr("isComplete")&&!(0,It.Fr)(g-v)){var I=e.getPlotItemByPosition(g,E);this._diffPrice=I.value-c.value}this.addWidgetShapes(i,[this.path,this.line1,this.line2,this.dragVertex1,this.dragVertex2,this.dragVertex3]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(n,[this.yRange,this.yLabel1,this.yLabel2,this.yLabel3]),this.setAnnotationToWidgets([i,r,n])}},t.prototype.getShapes=function(){return[this.path,this.line1,this.line2,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2,this.yLabel3]},t.prototype.updateColor=function(e){[this.line1,this.line2].forEach((function(t){t.setAttr("strokeStyle",e)})),this.path.setAttrs({stroke:!0,strokeStyle:e})},t.prototype.updateLineWidth=function(e){[this.line1,this.line2].forEach((function(t){t.setAttr("lineWidth",e)})),this.path.setAttrs({stroke:!0,lineWidth:e})},t.prototype.updateLineStyle=function(e){[this.line1,this.line2].forEach((function(t){t.setAttr("lineDash",e)})),this.path.setAttrs({stroke:!0,lineDash:e})},t.prototype.updateBackground=function(e){this.path.setAttr("fillStyle",e)},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Dt.Us.ParallelLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){return this.path.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel1.setAttr("isVisible",t),this.xLabel2.setAttr("isVisible",t),this.xRange.setAttr("isVisible",t),this.yLabel1.setAttr("isVisible",t),this.yLabel2.setAttr("isVisible",t),this.yLabel3.setAttr("isVisible",t),this.yRange.setAttr("isVisible",t);var n={isVisible:i||t,radius:sr.e.radius,lineWidth:t?sr.e.border_width:sr.e.hover_border_width};this.updateVertex(this.getVertexs(),n)},t.prototype.isValid=function(){var e=this.getData()||{},t=e.p1,i=e.p2,n=e.p3;return!!(t&&i&&n)},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!0,lineWidth:e.lineWidth,showStyle:!0,lineStyle:e.lineStyle,showBg:!0,background:e.background,isLock:e.isLock,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),l=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex3,this.dragVertex3.isHover(o));(a||l||s)&&this.update()}},t.prototype.getVertexs=function(){return[this.dragVertex1,this.dragVertex2,this.dragVertex3]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.dragVertex3.isHover(e)?this.dragVertex3:this.line1.isHover(e)?this.line1:this.line2.isHover(e)?this.line2:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n=i.x,r=i.y,o={x:n,y:-r},a=this.getDragVertex(o);a&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,a instanceof Jn.Z?this._dragLine(t,{x:n,y:r}):(this.updateVertexBorderAndVisible(a,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(a),!1),this._dragVertex(t,a,{x:n,y:r})))}}},t.prototype._dragVertex=function(e,t,i){var n=this,r=i.x,o=i.y,a=e.mainPane;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:sr.e.hover_border_color});var l=this.getData().p3,s=e.getPosition(l),c=s.x,u=s.y,d=0,h=0;a.on("mousemove",Dt.Us.ParallelLine,(function(i){var a=e.transformAbsoluteXYToPlotItem(i.point),l=n.getAttr("data"),s=l.p1,g=l.p2;if(t===n.dragVertex1&&n.setData({p1:a,p2:g,p3:{time:a.time,value:a.value+n._diffPrice}}),t===n.dragVertex2&&n.setData({p1:s,p2:a,p3:{time:s.time,value:s.value+n._diffPrice}}),t===n.dragVertex3){var p=e.transformPointToView(i.point),f=p.x,v=p.y;d=f-r,h=v-o;var m=e.getPlotItemByPosition(c+d,u+h);n.setData({p1:s,p2:g,p3:m}),n._diffPrice=a.value-s.value}n.update()})),a.on("mouseup",Dt.Us.ParallelLine,(function(){a.off(Dt.Us.ParallelLine),n.recoverDragVertexts(),n.compeleDraw()}))},t.prototype._dragLine=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),l=a.p1,s=a.p2,c=a.p3,u=e.getPosition(l),d=u.x,h=u.y,g=e.getPosition(s),p=g.x,f=g.y,v=e.getPosition(c),m=v.x,y=v.y,x=0,b=0;o.on("mousemove",Dt.Us.ParallelLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,l=o.y;x=a-n,b=l-r;var s=e.getPlotItemByPosition(d+x,h+b),c=e.getPlotItemByPosition(p+x,f+b),u=e.getPlotItemByPosition(m+x,y+b);i.setData({p1:s,p2:c,p3:u}),i.update()})),o.on("mouseup",Dt.Us.ParallelLine,(function(){o.off(Dt.Us.ParallelLine),i.compeleDraw(),i.recoverDragVertexts(),i.update()}))},t}(Qn.Z),hr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{type:Dt.Us.FibonacciLine}),t.rect=new ir.Z({fillStyle:Qn.e.default_line_color,strokeStyle:Qn.e.default_line_color,stroke:!1,globalAlpha:.2}),t.line1=Qn.Z.line.clone(),t.line2=Qn.Z.line.clone(),t.line3=Qn.Z.line.clone(),t.line4=Qn.Z.line.clone(),t.line5=Qn.Z.line.clone(),t.line6=Qn.Z.line.clone().setAttrs({lineDash:[3,3]}),t.text1=Qn.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.text2=Qn.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.text3=Qn.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.text4=Qn.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.text5=Qn.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.yLabel1=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.yLabel2=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t.xLabel1=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.xLabel2=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.xRange=new ir.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.yRange=new ir.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.dragVertex1=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]),t.dragVertex2=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.getParent(),i=e.mainPane,n=e.axisPane,r=e.timeAxisPane,o=e.xAxis,a=n.bound.width,l=r.bound.height,s=this.getData(),c=s.p1,u=s.p2,d=e.getPosition(c),h=d.x,g=d.y,p=e.getPosition(u),f=p.x,v=p.y,m=g-v,y=c.value-u.value,x=Math.min(h,f)-10;this.rect.setData({x:h,y:-g}).setAnnotherVertex({x:f,y:-v});var b=-v,C=u.value;this.line1.setAttrs({data:{p1:{x:h,y:b},p2:{x:f,y:b}}}),this.text1.setAttrs({content:"0("+e.formatterValue(C)+")",data:{x,y:-v}}),b=-(v+.382*m),C=u.value+.382*y,this.line2.setAttrs({data:{p1:{x:h,y:b},p2:{x:f,y:b}}}),this.text2.setAttrs({content:"0.382("+e.formatterValue(C)+")",data:{x,y:b}}),b=-(v+.5*m),C=u.value+.5*y,this.line3.setData({p1:{x:h,y:b},p2:{x:f,y:b}}),this.text3.setAttrs({content:"0.5("+e.formatterValue(C)+")",data:{x,y:b}}),b=-(v+.618*m),C=u.value+.618*y,this.line4.setData({p1:{x:h,y:b},p2:{x:f,y:b}}),this.text4.setAttrs({content:"0.618("+e.formatterValue(C)+")",data:{x,y:b}}),b=-g,C=c.value,this.line5.setData({p1:{x:h,y:b},p2:{x:f,y:b}}),this.text5.setAttrs({content:"1("+e.formatterValue(C)+")",data:{x,y:b}}),this.line6.setData({p1:{x:h,y:-g},p2:{x:f,y:-v}});var _=(t.getCurrentItemByTime(c.time)||{}).time,w=void 0===_?c.time:_,S=(t.getCurrentItemByTime(u.time)||{}).time,L=void 0===S?u.time:S;this.xLabel1.setAttrs({data:{x:h,y:-l},text:(0,It.XH)(w,o.getOriginTimeScaleType()),fixHeight:l}),this.xLabel2.setAttrs({data:{x:f,y:-l},text:(0,It.XH)(L,o.getOriginTimeScaleType()),fixHeight:l}),this.yLabel1.setAttrs({data:{x:0,y:-g},text:e.formatterValue(c.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-v},text:e.formatterValue(u.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(h,f),y:-l},width:Math.abs(h-f),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(g,v)},width:n.bound.width,height:Math.abs(g-v)}),this.dragVertex1.setAttrs({data:{x:h,y:-g}}),this.dragVertex2.setAttrs({data:{x:f,y:-v}}),this.addWidgetShapes(i,[this.rect,this.line1,this.line2,this.line3,this.line4,this.line5,this.line6,this.text1,this.text2,this.text3,this.text4,this.text5,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(n,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,r,n])}},t.prototype.getShapes=function(){return[this.rect,this.line1,this.line2,this.line3,this.line4,this.line5,this.line6,this.text1,this.text2,this.text3,this.text4,this.text5,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]},t.prototype.updateColor=function(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach((function(t){t.setAttr("strokeStyle",e)})),[this.text1,this.text2,this.text3,this.text4,this.text5].forEach((function(t){t.setAttr("fillStyle",e)})),this.rect.setAttrs({stroke:!0,strokeStyle:e})},t.prototype.updateLineWidth=function(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach((function(t){t.setAttr("lineWidth",e)})),this.rect.setAttrs({stroke:!0,lineWidth:e})},t.prototype.updateLineStyle=function(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach((function(t){t.setAttr("lineDash",e)})),this.rect.setAttrs({stroke:!0,lineDash:e})},t.prototype.updateBackground=function(e){this.rect.setAttr("fillStyle",e)},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Dt.Us.FibonacciLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){return this.rect.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel1.setAttr("isVisible",t),this.xLabel2.setAttr("isVisible",t),this.xRange.setAttr("isVisible",t),this.yLabel1.setAttr("isVisible",t),this.yLabel2.setAttr("isVisible",t),this.yRange.setAttr("isVisible",t);var n={isVisible:i||t,radius:Qn.e.radius,lineWidth:t?Qn.e.border_width:Qn.e.hover_border_width};this.updateVertex(this.getVertexs(),n)},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!0,lineWidth:e.lineWidth,showStyle:!0,lineStyle:e.lineStyle,showBg:!0,background:e.background,isLock:e.isLock,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),l=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o));(a||l)&&this.update()}},t.prototype.getVertexs=function(){return[this.dragVertex1,this.dragVertex2]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.rect.isHover(e)?this.rect:void 0},t.prototype._onmousedown=function(e){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r===this.rect?this._dragRect(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(r,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(r),!1),this._dragVertex(t,r)))}},t.prototype._dragVertex=function(e,t){var i=this,n=e.mainPane;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:Qn.e.hover_border_color}),n.on("mousemove",Dt.Us.FibonacciLine,(function(n){var r=e.transformAbsoluteXYToPlotItem(n.point),o=i.getAttr("data"),a=o.p1,l=o.p2;t===i.dragVertex1&&i.setData({p1:r,p2:l}),t===i.dragVertex2&&i.setData({p1:a,p2:r}),i.update()})),n.on("mouseup",Dt.Us.FibonacciLine,(function(){n.off(Dt.Us.FibonacciLine),i.recoverDragVertexts(),i.compeleDraw()}))},t.prototype._dragRect=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),l=a.p1,s=a.p2,c=e.getPosition(l),u=c.x,d=c.y,h=e.getPosition(s),g=h.x,p=h.y,f=0,v=0;o.on("mousemove",Dt.Us.FibonacciLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,l=o.y;f=a-n,v=l-r;var s=e.getPlotItemByPosition(u+f,d+v),c=e.getPlotItemByPosition(g+f,p+v);i.setData({p1:s,p2:c}),i.update()})),o.on("mouseup",Dt.Us.FibonacciLine,(function(){o.off(Dt.Us.FibonacciLine),i.compeleDraw()}))},t}(Qn.Z),gr=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,g.__assign)((0,g.__assign)({},$n.Z.defaultConfig),{width:0,height:0,prevLineDash:[],fill:!0,stroke:!0,origin:{x:0,y:0},useCache:!0}),i.setAttrs(t),i.watch(["lineWidth","fillStyle","strokeStyle","fill","stroke","globalAlpha"],i.onCacheChange.bind(i)),i}return(0,g.__extends)(t,e),t.prototype.onDataChange=function(){var e=this.getAttr("lineWidth"),t=new er.Z.Polyline(this.getAttr("data")).getBound(),i=t.x,n=t.y,r=t.width+e,o=t.height+e;this.overrideSize({width:r,height:o}),this.setAttrs({width:r,height:o}),this.setAttr("origin",{x:i-.5*e,y:n-.5*e}),this.isDataUpdate=!0,this.isBatchUpdate=!0},t.prototype.getTransformOrigin=function(){return this.getAttr("origin")},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,lineWidth:e.lineWidth,lineDash:e.lineDash,globalAlpha:e.globalAlpha}},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.lineDash,i=e.data,n=e.stroke,r=e.fill,o=this.getContext(),a=this.getContextStyles();(!Kt()(a,this.preContextStyles)||this.isDataUpdate)&&(this.preContextStyles=a,(0,It.ui)(o,a)),t&&o.setLineDash(t),o.beginPath(),ci.Z.clearRect(o);var l=this.getTransformOrigin(),s=l.x,c=l.y;i.forEach((function(e){var t=e.map((function(e){var t=e.x,i=e.y;return{x:t-s,y:i-c}}));ci.Z.drawLines(o,t),r&&(o.closePath(),o.fill())})),n&&((0,It.ui)(o,{globalAlpha:1}),o.stroke()),this.isDataUpdate=!1,this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.lineDash,n=t.data,r=t.stroke,o=t.fill;(0,It.ui)(e,this.getContextStyles()),i&&e.setLineDash(i),e.beginPath(),n.forEach((function(t){var i=t.map((function(e){return{x:e.x,y:e.y}}));ci.Z.drawLines(e,i),o&&(e.closePath(),e.fill())})),r&&((0,It.ui)(e,{globalAlpha:1}),e.stroke())},t.prototype.isHover=function(e,t){return void 0===t&&(t=5),!!this.preDetect()&&t>=new er.Z.Polyline(this.getAttr("data")).getNearestPoint(e).dis},t}($n.Z);var pr,fr=i(96639);!function(e){e.Up="UP",e.Down="DOWN",e.Right="RIGHT",e.Left="LEFT"}(pr||(pr={}));const vr=function(){function e(){}return e.createArrowData=function(t,i){void 0===i&&(i=pr.Right);var n=i===pr.Right?-this.Arrow_Offset:this.Arrow_Offset,r=new fr.Z(t.x+n,t.y),o=new fr.Z(0,1).rotate(120),a=new fr.Z(0,0),l=a.clone().add(o.clone().scale(e.Arrow_Len)),s=a.clone().substract(new fr.Z(e.Arrow_Len/2,0)),c=s.clone().substract(new fr.Z(e.Arrow_Len,0)),u=new fr.Z(l.x,-l.y);return i===pr.Right?[s,l,a,u,s,c].map((function(e){return e.clone().add(r).toXY()})):[s,l,a,u,s,c].map((function(e){return e.clone().rotate(180).add(r).toXY()}))},e.createArrowPath=function(e,t,i){void 0===i&&(i={arrowLen:12,len:27,arrowAngle:45});var n=i.arrowLen||12,r=i.len||27,o=i.arrowAngle||45,a=new fr.Z(e.x,e.y),l=a.clone().add(t.clone().rotate(o).scale(n)).toXY(),s=a.clone().add(t.clone().rotate(-o).scale(n)).toXY(),c=a.clone().add(t.clone().scale(r)).toXY(),u=a.toXY();return[[l,u,s],[u,c]]},e.Arrow_Len=8,e.Arrow_Offset=5,e}(),mr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{dir:Dt.Us.LeftArrow,type:Dt.Us.Arrow}),t.paths=(new gr).setAttrs({strokeStyle:Qn.e.default_line_color,lineWidth:4,fill:!1,lineJoin:"bevel"}),t.dragVertex=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=this.getData(),n=e.getPosition(i),r=n.x,o=n.y,a=this._getDirVector(),l=vr.createArrowPath({x:r,y:-o},a);this.paths.setData(l),this.dragVertex.setAttrs({data:new er.Z.Vector2(r,-o).add(a.clone().rotate(180).scale(15)).toXY()}),this.addWidgetShapes(t,[this.paths,this.dragVertex]),this.setAnnotationToWidgets([t])}},t.prototype.getShapes=function(){return[this.paths,this.dragVertex]},t.prototype.getDescription=function(){var e=this.getConfig();return{data:e.data,dir:e.dir,type:e.type,color:e.color,isLock:e.isLock}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane]:[]},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Dt.Us.LeftArrow+"-"+Mt.HD.MOUSE,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){return this.paths.isHover(e,20)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.dragVertex.setAttrs({isVisible:i||t,radius:Qn.e.radius,lineWidth:t?Qn.e.border_width:Qn.e.hover_border_width})},t.prototype.getVertexs=function(){return[this.dragVertex]},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:"",showBg:!1,background:"",isLock:e.isLock,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}},t.prototype.getCacheStyleKey=function(){return this.getAttr("dir")},t.prototype.updateColor=function(e){this.paths.setAttr("strokeStyle",e)},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y};this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover(o))&&this.update()}},t.prototype.getDragVertex=function(e){return this.dragVertex.isHover(e)?this.dragVertex:this.paths.isHover(e)?this.paths:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r instanceof gr?this._dragPaths(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t,t.transformPointToView(e.point))))}}},t.prototype._getDirVector=function(){var e=this.getAttr("dir"),t=new er.Z.Vector2(1,0);return e===Dt.Us.DownArrow&&t.rotate(-90),e===Dt.Us.UpArrow&&t.rotate(90),e===Dt.Us.RightArrow&&t.rotate(180),t},t.prototype._dragVertex=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),l=e.getPosition(a),s=l.x,c=l.y;o.on("mousemove",Dt.Us.LeftArrow+"-"+Mt.HD.MOUSE,(function(t){var o=e.transformPointToView(t.point),a=o.x,l=o.y,u=a-n,d=l-r;i.setData(e.getPlotItemByPosition(s+u,c+d)),i.update()})),o.on("mouseup",Dt.Us.LeftArrow+"-"+Mt.HD.MOUSE,(function(){o.off(Dt.Us.LeftArrow+"-"+Mt.HD.MOUSE),i.recoverDragVertexts(),i.compeleDraw()}))},t.prototype._dragPaths=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),l=e.getPosition(a),s=l.x,c=l.y;o.on("mousemove",Dt.Us.LeftArrow+"-"+Mt.HD.MOUSE,(function(t){var o=e.transformPointToView(t.point),a=o.x,l=o.y,u=a-n,d=l-r;i.setData(e.getPlotItemByPosition(s+u,c+d)),i.update()})),o.on("mouseup",Dt.Us.LeftArrow+"-"+Mt.HD.MOUSE,(function(){o.off(Dt.Us.LeftArrow+"-"+Mt.HD.MOUSE),i.compeleDraw()}))},t}(Qn.Z),yr=function(e){function t(){var t=e.call(this)||this;return t.setAttr("type",Dt.Us.RayLine),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.getParent(),i=e.mainPane,n=e.axisPane,r=e.timeAxisPane,o=e.xAxis,a=n.bound.width,l=r.bound.height,s=this.getData(),c=s.p1,u=s.p2,d=e.getPosition(c),h=d.x,g=d.y,p=e.getPosition(u),f=p.x,v=p.y,m=i.getBound(),y=m.width,x=m.height;if(er.Z.Algorith.isSamePoint(d,p))this.line.setData({p1:{x:h,y:-g},p2:{x:f,y:-v}});else{var b=new er.Z.Bound(0,0,y,x),C=er.Z.Line.getIntersectWidthBound(d,p,b);if(2===C.length){var _=new er.Z.Vector2(f-h,v-g),w=new er.Z.Vector2(C[0].x-h,C[0].y-g),S=new er.Z.Vector2(C[1].x-h,C[1].y-g),L=er.Z.Algorith.getDotMultiply(_,w)>0,E=er.Z.Algorith.getDotMultiply(_,S)>0;if(L&&E){var k=w.getSquareLength()>S.getSquareLength()?C[0]:C[1];this.line.setData({p1:{x:h,y:-g},p2:{x:k.x,y:-k.y}})}else E?this.line.setData({p1:{x:h,y:-g},p2:{x:C[1].x,y:-C[1].y}}):this.line.setData({p1:{x:h,y:-g},p2:{x:C[0].x,y:-C[0].y}})}}var V=(t.getCurrentItemByTime(c.time)||{}).time,A=void 0===V?c.time:V,T=(t.getCurrentItemByTime(u.time)||{}).time,M=void 0===T?u.time:T;this.xLabel1.setAttrs({data:{x:h,y:-l},text:(0,It.XH)(A,o.getOriginTimeScaleType()),fixHeight:l}),this.xLabel2.setAttrs({data:{x:f,y:-l},text:(0,It.XH)(M,o.getOriginTimeScaleType()),fixHeight:l}),this.yLabel1.setAttrs({data:{x:0,y:-g},text:e.formatterValue(c.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-v},text:e.formatterValue(u.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(h,f),y:-l},width:Math.abs(h-f),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(g,v)},width:n.bound.width,height:Math.abs(g-v)}),this.dragVertex1.setAttrs({data:{x:h,y:-g}}),this.dragVertex2.setAttrs({data:{x:f,y:-v}}),this.addWidgetShapes(i,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(n,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,r,n])}},t}(nr),xr=function(e){function t(){var t=e.call(this)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{type:Dt.Us.PriceLine}),t.line=Qn.Z.line.clone(),t.text=Qn.Z.text.clone().setAttrs({textAlign:"left",textBaseline:"bottom"}),t.dragVertex=Qn.Z.dragVertex.clone(["fillStyle","strokeStyle"]),t.setAttr("type",Dt.Us.PriceLine),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=this.getData(),n=e.getPosition(i),r=n.x,o=n.y,a=t.getBound().width;this.line.setData({p1:{x:r,y:-o},p2:{x:a,y:-o}}),this.text.setData({x:r,y:-(o+10)}).setText(""+e.formatterValue(i.value)),this.dragVertex.setData({x:r,y:-o}),this.addWidgetShapes(t,[this.line,this.dragVertex,this.text]),this.setAnnotationToWidgets([t])}},t.prototype.getShapes=function(){return[this.line,this.dragVertex,this.text]},t.prototype.updateColor=function(e){this.line.setAttr("strokeStyle",e),this.text.setAttr("fillStyle",e)},t.prototype.updateLineWidth=function(e){this.line.setAttr("lineWidth",e)},t.prototype.updateLineStyle=function(e){this.line.setAttr("lineDash",e)},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Dt.Us.HorizontalLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){return this.line.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.dragVertex.setAttrs({isVisible:i||t,lineWidth:t?Qn.e.border_width:Qn.e.hover_border_width})},t.prototype.getVertexs=function(){return[this.dragVertex]},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y};this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover(o))&&this.update()}},t.prototype.getDragVertex=function(e){return this.dragVertex.isHover(e)?this.dragVertex:this.line.isHover(e)?this.line:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r instanceof Jn.Z?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t)))}}},t.prototype._dragVertex=function(e){var t=this,i=e.mainPane;i.on("mousemove",Dt.Us.HorizontalLine,(function(i){t.setData(e.transformAbsoluteXYToPlotItem(i.point)),t.update()})),i.on("mouseup",Dt.Us.HorizontalLine,(function(){i.off(Dt.Us.HorizontalLine),t.recoverDragVertexts(),t.compeleDraw()}))},t.prototype._dragLine=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),l=e.getPosition(a),s=l.x,c=l.y;o.on("mousemove",Dt.Us.HorizontalLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,l=o.y,u=a-n,d=l-r;(0,It.Fr)(u)&&(0,It.Fr)(d)||(i.setData(e.getPlotItemByPosition(s+u,c+d)),i.update())})),o.on("mouseup",Dt.Us.HorizontalLine,(function(){o.off(Dt.Us.HorizontalLine),i.compeleDraw()}))},t}(Qn.Z),br=function(e){function t(){var t=e.call(this)||this;return t.path=new ur({strokeStyle:Qn.e.default_line_color,lineWidth:1,fill:!1}),t.setAttr("type",Dt.Us.ArrowLine),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.getParent(),i=e.mainPane,n=e.axisPane,r=e.timeAxisPane,o=e.xAxis,a=n.bound.width,l=r.bound.height,s=this.getData(),c=s.p1,u=s.p2,d=e.getPosition(c),h=d.x,p=d.y,f=e.getPosition(u),v=f.x,m=f.y,y=(0,g.__read)(vr.createArrowPath({x:v,y:m},new er.Z.Vector2(h-v,p-m).normalize(),{arrowAngle:30}),1)[0];this.path.setData(y.map((function(e){return{x:e.x,y:-e.y}}))),this.line.setData({p1:{x:h,y:-p},p2:{x:v,y:-m}});var x=(t.getCurrentItemByTime(c.time)||{}).time,b=void 0===x?c.time:x,C=(t.getCurrentItemByTime(u.time)||{}).time,_=void 0===C?u.time:C;this.xLabel1.setAttrs({data:{x:h,y:-l},text:(0,It.XH)(b,o.getOriginTimeScaleType()),fixHeight:l}),this.xLabel2.setAttrs({data:{x:v,y:-l},text:(0,It.XH)(_,o.getOriginTimeScaleType()),fixHeight:l}),this.yLabel1.setAttrs({data:{x:0,y:-p},text:e.formatterValue(c.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-m},text:e.formatterValue(u.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(h,v),y:-l},width:Math.abs(h-v),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(p,m)},width:n.bound.width,height:Math.abs(p-m)}),this.dragVertex1.setAttrs({data:{x:h,y:-p}}),this.dragVertex2.setAttrs({data:{x:v,y:-m}}),this.addWidgetShapes(i,[this.line,this.path,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(n,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,r,n])}},t.prototype.getShapes=function(){return[this.line,this.path,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.line.isHover(e)||this.path.isHover(e)?this.line:void 0},t.prototype.updateColor=function(e){this.line.setAttr("strokeStyle",e),this.path.setAttr("strokeStyle",e)},t.prototype.updateLineWidth=function(e){this.line.setAttr("lineWidth",e),this.path.setAttr("lineWidth",e)},t.prototype.updateLineStyle=function(e){this.line.setAttr("lineDash",e),this.path.setAttr("lineDash",e)},t}(nr);var Cr=i(51194);const _r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{isTextEdit:!1,type:Dt.Us.Text,text:""}),t.text=Qn.Z.text.clone().setAttrs({fillStyle:"#848E9C",fontSize:16,textBaseline:"top",padding:4,isCustomized:!0,isVisible:!1}),t.xLabel=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Down,fill:!0,padding:[6,2]}),t.yLabel=new tr({background:Dt.E.Blue3,color:Dt.E.White,dir:Dt.Nm.Right,fill:!0,padding:6}),t}return(0,g.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.getParent();!this._textArea&&this.createTextAreaElement();var i=e.mainPane,n=e.axisPane,r=e.timeAxisPane,o=e.xAxis,a=n.bound.width,l=r.bound.height,s=this.getData(),c=e.getPosition(s),u=c.x,d=c.y;this.setTextAreaPosition(e.transformXYToAbsoluteXY({x:u,y:d})),this.text.setData(this.transformYPoint({x:u,y:d}));var h=(t.getCurrentItemByTime(s.time)||{}).time,g=void 0===h?s.time:h;this.xLabel.setAttrs({data:{x:u,y:-l},text:(0,It.XH)(g,o.getOriginTimeScaleType()),fixHeight:l}),this.yLabel.setAttrs({data:{x:0,y:-d},text:e.formatterValue(s.value),fixWidth:a}),this.addWidgetShapes(i,[this.text]),this.setAnnotationToWidgets([i]),this.addWidgetShapes(r,[this.xLabel]),this.addWidgetShapes(n,[this.yLabel]),this.setAnnotationToWidgets([i,r,n])}},t.prototype.getShapes=function(){return[this.text,this.xLabel,this.yLabel]},t.prototype.updateBackground=function(e){this.text.setAttrs({fill:!0,background:e})},t.prototype.updateTextColor=function(e){this.text.setAttr("fillStyle",e)},t.prototype.updateTextSize=function(e){this.text.setAttr("fontSize",e)},t.prototype.updateTextBold=function(e){this.text.setAttr("fontVariant",e)},t.prototype.getDescription=function(){var e=this.getConfig(),t=e.data,i=e.type,n=e.text,r=e.isLock;return{data:t,type:i,text:n,textColor:e.textColor,background:e.background,textFontSize:e.textFontSize,isTextBold:e.isTextBold,isLock:r}},t.prototype.getEditAttribute=function(){var e=this.getConfig(),t=e.textColor,i=e.textFontSize,n=e.isTextBold,r=e.background,o=e.isTextEdit,a=e.isLock;return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:Dt.TD.SOLID,showTextColor:!0,textColor:t,showFontSize:!0,textFontSize:i,showTextBold:!0,isTextBold:n,showBg:!0,background:r,isLock:a,showTextEdit:!0,isTextEdit:o,showLock:!0,showDelete:!0}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane,e.axisPane,e.timeAxisPane]:[]},t.prototype.initCustomEvents=function(){var e=this;this.on("mousedown",this._onmousedown.bind(this)),this.on("dblclick",Dt.Us.Text+"-"+Mt.HD.MOUSE,this._dblclick.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("text",(function(t){var i=t.newVal.split("\n").filter((function(e){return!!e}));e.text.setText(i)})),this.watch("isTextEdit",(function(t){t.newVal&&e._activateEdit(),e.setVisibleShapes()}))},t.prototype.isHover=function(e){return!this.getConfig().isTextEdit&&this.text.isHover(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isTextEdit;this.xLabel.setAttr("isVisible",t),this.yLabel.setAttr("isVisible",t),this.text.setAttr("isVisible",!i),!i&&this._textArea&&this._textArea.remove()},t.prototype.getVertexs=function(){return[]},t.prototype.setTextAreaPosition=function(e){var t=this.getAttr("isTextEdit"),i=this.text.getWidth(),n=this.text.getHeight();(0,It.AS)(this._textArea,{width:Math.max(150,Math.min(200,i))+"px",height:Math.max(100,Math.min(150,n))+"px",transform:"translate("+e.x+"px, "+e.y+"px)",visibility:t?"visible":"hidden",fontVariant:this.getAttr("isTextBold")?"bold":"normal",color:this.getAttr("textColor")})},t.prototype._activateEdit=function(){var e=this.getParent().getParent();(0,It.AS)(this._textArea,{visibility:"visible"}),e.addElement(this._textArea),this._textArea.value=this.getAttr("text"),this.setAttr("isTextEdit",!0),this.setVisibleShapes(),this.update()},t.prototype._dblclick=function(e){var t=this.getParent();if(t){var i=t.transformPointToView(e.point),n=i.x,r=i.y;this.text.isHover({x:n,y:-r})&&!this._textArea.parentNode&&(this.setAttr("isTextEdit",!0),this.setAttr("isEdit",!0))}},t.prototype.getDragVertex=function(e){if(this.text.isHover(e))return this.text},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r instanceof Cr.Z&&this._dragText(t,t.transformPointToView(e.point)))}}},t.prototype._dragText=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),l=e.getPosition(a),s=l.x,c=l.y;o.on("mousemove",Dt.Us.Text+"-"+Mt.HD.MOUSE,(function(t){var o=e.transformPointToView(t.point),a=o.x,l=o.y,u=a-n,d=l-r;i.setData(e.getPlotItemByPosition(s+u,c+d)),i.update()})),o.on("mouseup",Dt.Us.Text+"-"+Mt.HD.MOUSE,(function(){o.off(Dt.Us.Text+"-"+Mt.HD.MOUSE),i.compeleDraw()}))},t.prototype.createTextAreaElement=function(){var e=this,t=this.getParent();this._textArea=(0,It.az)("textarea",{visibility:"hidden"},"text-area-wrap"),t&&t.getParent().addElement(this._textArea),this._textArea.addEventListener("input",(0,It.P2)((function(){var t=e._textArea.value,i=void 0===t?"":t;e.setAttr("text",i)}),10)),jn.on(document,"mousedown",(function(t){var i=e.getAttr("isTextEdit"),n=t.originEvent;i&&n&&!n.target.contains(e._textArea)&&(e._textArea.remove(),e.compeleDraw(),e.update())}),!0)},t.prototype.compeleDraw=function(){this.setAttrs({isTextEdit:!1,isComplete:!0}),this.syncStorage()},t}(Qn.Z),wr=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,g.__assign)((0,g.__assign)({},$n.Z.defaultConfig),{path:"",width:0,height:0,fill:!0,stroke:!0,useCache:!0}),i.setAttrs(t),i.watch(["path","width","height","strokeStyle","fillStyle","fill","stroke"],i.onCacheChange.bind(i)),i.watch(["width","height"],i._onSizeChange.bind(i)),i}return(0,g.__extends)(t,e),t.prototype.onDataChange=function(){this.isDataUpdate=!0},t.prototype.setPath=function(e){this.setAttrs({path:e})},t.prototype.getTransformOrigin=function(){return(0,g.__assign)({},this.getAttr("data"))},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,stroke:e.stroke,fill:e.fill}},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getWidth(),t=this.getHeight(),i=this.overrideSize({width:e,height:t});i&&this.setAttrs({width:e,height:t});var n=this.getContextStyles();if(!Kt()(n,this.preContextStyles)||i){var r=this.getConfig(),o=r.path,a=r.fill,l=r.stroke,s=this.getContext();(0,It.ui)(s,n);var c=new Path2D(o);this.drawPath2D({context:s,path:c,fill:a,stroke:l})}this.isDataUpdate=!1,this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){this.drawCacheScene(),this.drawFromCache(e)},t.prototype.isHover=function(e){if(!this.preDetect())return!1;var t=this.getTransformOrigin(),i=t.x,n=t.y;return new er.Z.Bound(i,n,this.getWidth(),this.getHeight()).contain([e.x,e.y])},t.prototype._onSizeChange=function(){var e={width:this.getWidth(),height:this.getHeight()};this.overrideSize(e)},t.prototype.drawPath2D=function(e){var t=e.context,i=e.path,n=e.fill;e.stroke&&ci.Z.strokePath2D(t,i),n&&ci.Z.fillPath2D(t,i)},t}($n.Z);var Sr;!function(e){e.LINE="line",e.BODY="body"}(Sr||(Sr={}));const Lr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{orderId:"",isTextEdit:!1,type:Dt.Us.OrderLine,price:"",quantity:"",text:"",editable:!0,isNeedStore:!1}),t.dragIcon=new wr({path:bi.Z4,width:6,height:12,fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1}),t.dragIconBorder=new ir.Z({fill:!0,strokeStyle:"#474D57",fillStyle:"#1E2329",lineWidth:1,width:16,height:20,borderRadius:[2,0,0,2]}),t.closeIcon=new wr({path:bi.aE,width:12,height:12,fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1}),t.closeIconBorder=new ir.Z({fill:!0,strokeStyle:"#474D57",fillStyle:"#1E2329",lineWidth:1,width:20,height:20,borderRadius:[0,2,2,0]}),t.priceLabel=new tr({background:"#0ECB81",color:Dt.E.White,borderColor:"#474D57",dir:Dt.Nm.Right,stroke:!0,fill:!0,padding:[12,2],fixHeight:21,lineWidth:1}),t.quantityLabel=new tr({background:"#1E2329",color:Dt.E.White,borderColor:"#474D57",dir:Dt.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1}),t.line=Qn.Z.line.clone().setAttrs({lineDash:[1,1]}),t.yLabel=new tr({color:"#0ECB81",borderColor:"#0ECB81",dir:Dt.Nm.Right,fill:!0,stroke:!0,padding:6,fixHeight:21,lineWidth:1}),t.priceTooltip=new tr({background:"gray",color:Dt.E.White,borderColor:"gray",dir:Dt.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1,isVisible:!1}),t.quantityTooltip=new tr({background:"gray",color:Dt.E.White,borderColor:"gray",dir:Dt.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1,isVisible:!1}),t.closeTooltip=new tr({background:"gray",color:Dt.E.White,borderColor:"gray",dir:Dt.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1,isVisible:!1}),t}return(0,g.__extends)(t,e),t.prototype.isIndependent=function(){return!0},t.prototype.updateImmediate=function(){var e=this.getParent(),t=e,i=t.mainPane,n=t.axisPane;if(e&&e.yAxis){var r=n.bound.width-1,o=this.getConfig(),a=o.price,l=o.quantity,s=o.text,c=o.editable,u=e.getYPos(+a),d=230;this.dragIconBorder.setAttrs({data:c?{x:d,y:-u-.5*this.dragIconBorder.getHeight()}:{x:0,y:0},width:c?16:0,height:c?20:0}),this.dragIcon.setAttrs({data:c?{x:d+.5*(this.dragIconBorder.getWidth()-this.dragIcon.getWidth()),y:-u-.5*this.dragIcon.getHeight()}:{x:0,y:0},width:c?6:0,height:c?12:0}),d+=this.dragIconBorder.getWidth(),this.priceLabel.setAttrs({data:{x:d,y:-u},text:s,borderRadius:c?0:[2,0,0,2]}),d+=this.priceLabel.getWidth(),this.quantityLabel.setAttrs({data:{x:d,y:-u},text:l}),d+=this.quantityLabel.getWidth(),this.closeIconBorder.setAttrs({data:{x:d,y:-u-.5*this.closeIconBorder.getHeight()}}),this.closeIcon.setAttrs({data:{x:d+.5*(this.closeIconBorder.getWidth()-this.closeIcon.getWidth()),y:-u-.5*this.closeIcon.getHeight()}}),d+=this.closeIconBorder.getWidth(),this.line.setAttrs({data:{p1:{x:d,y:-u},p2:{x:i.getBound().width,y:-u}}}),this.yLabel.setAttrs({data:{x:0,y:-u},text:e.formatterValue(+a),fixWidth:r});var h=this.priceLabel.getAttr("data"),g=this.quantityLabel.getAttr("data"),p=this.closeIcon.getAttr("data");this.priceTooltip.setAttrs({data:{x:h.x+(this.priceLabel.getWidth()-this.priceTooltip.getWidth())/2,y:h.y-5-this.priceLabel.getHeight()}}),this.quantityTooltip.setAttrs({data:{x:g.x+(this.quantityLabel.getWidth()-this.quantityTooltip.getWidth())/2,y:g.y-5-this.quantityLabel.getHeight()}}),this.closeTooltip.setAttrs({data:{x:p.x+(this.closeIcon.getWidth()-this.closeTooltip.getWidth())/2,y:p.y-5-this.closeIcon.getHeight()}})}this.addWidgetShapes(i,[this.dragIconBorder,this.dragIcon,this.priceLabel,this.quantityLabel,this.closeIconBorder,this.closeIcon,this.line,this.priceTooltip,this.quantityTooltip,this.closeTooltip]),this.addWidgetShapes(n,[this.yLabel]),this.setAnnotationToWidgets([i,n])},t.prototype.getShapes=function(){return[this.priceLabel,this.quantityLabel,this.line,this.yLabel,this.dragIconBorder,this.dragIcon,this.closeIcon,this.closeIconBorder,this.priceTooltip,this.quantityTooltip,this.closeTooltip]},t.prototype.getDescription=function(){var e=this.getConfig(),t=e.type,i=e.price,n=e.quantity,r=e.isNeedStore;return{id:this.id,type:t,price:i,prevPrice:this._prevPrice,quantity:n,prevQuantity:this._prevQuantity,isNeedStore:r}},t.prototype.getEditAttribute=function(){var e=this.getConfig(),t=e.textColor,i=e.textFontSize,n=e.isTextBold,r=e.background,o=e.isTextEdit,a=e.isLock;return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:Dt.TD.SOLID,showTextColor:!1,textColor:t,showFontSize:!1,textFontSize:i,showTextBold:!1,isTextBold:n,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:o,showLock:!1,showDelete:!1}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane,e.axisPane]:[]},t.prototype.initCustomEvents=function(){var e=this;this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Dt.Us.OrderLine,this._onMousemove.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("quantity",(function(t){var i=t.newVal;e.quantityLabel.setAttr("text",i),e.setAttr("data",[]),e.update()})),this.watch("dragSquareIconColor",(function(t){var i=t.newVal;i&&e.dragIcon.setAttr("fillStyle",i)})),this.watch("price",this.forceUpdate.bind(this)),this.watch("text",this.forceUpdate.bind(this)),this.watch("closeIconColor",(function(t){var i=t.newVal;i&&e.closeIcon.setAttr("fillStyle",i)})),this.watch("priceBackground",(function(t){var i=t.newVal;i&&e.priceLabel.setAttr("background",i)})),this.watch("priceColor",(function(t){var i=t.newVal;i&&e.priceLabel.setAttr("color",i)})),this.watch("priceBorderColor",(function(t){var i=t.newVal;i&&e.priceLabel.setAttr("borderColor",i)})),this.watch("quantityBackground",(function(t){var i=t.newVal;i&&e.quantityLabel.setAttr("background",i)})),this.watch("quantityColor",(function(t){var i=t.newVal;i&&e.quantityLabel.setAttr("color",i)})),this.watch("quantityBorderColor",(function(t){var i=t.newVal;i&&e.quantityLabel.setAttr("borderColor",i)})),this.watch("borderColor",(function(t){var i=t.newVal;i&&(e.dragIconBorder.setAttr("strokeStyle",i),e.closeIconBorder.setAttr("strokeStyle",i))})),this.watch("lineColor",(function(t){var i=t.newVal;i&&e.line.setAttr("strokeStyle",i)})),this.watch("priceLabelBackground",(function(t){var i=t.newVal;i&&e.yLabel.setAttr("background",i)})),this.watch("priceLabelBorderColor",(function(t){var i=t.newVal;i&&e.yLabel.setAttr("borderColor",i)})),this.watch("priceLabelColor",(function(t){var i=t.newVal;i&&e.yLabel.setAttr("color",i)})),this.watch("lineDash",(function(t){var i=t.newVal;i&&e.line.setAttr("lineDash",i)})),this.watch("tooltipBorderColor",(function(t){var i=t.newVal;i&&(e.priceTooltip.setAttr("borderColor",i),e.quantityTooltip.setAttr("borderColor",i),e.closeTooltip.setAttr("borderColor",i))})),this.watch("tooltipBackgroundColor",(function(t){var i=t.newVal;i&&(e.priceTooltip.setAttr("background",i),e.quantityTooltip.setAttr("background",i),e.closeTooltip.setAttr("background",i))})),this.watch("tooltipTextColor",(function(t){var i=t.newVal;i&&(e.priceTooltip.setAttr("color",i),e.quantityTooltip.setAttr("color",i),e.closeTooltip.setAttr("color",i))})),this.watch("priceTooltipText",(function(t){var i=t.newVal;null!=i&&e.priceTooltip.setAttr("text",i)})),this.watch("quantityTooltipText",(function(t){var i=t.newVal;null!=i&&e.quantityTooltip.setAttr("text",i)})),this.watch("closeTooltipText",(function(t){var i=t.newVal;null!=i&&e.closeTooltip.setAttr("text",i)}))},t.prototype.isHover=function(e){var t=this.getConfig().editable;return this.closeIconBorder.isHover(e)||!!t&&(this.dragIconBorder.isHover(e)||this.line.isHover(e)||this.priceLabel.isHover(e)||this.quantityLabel.isHover(e))},t.prototype.updateBackground=function(e){this.dragIconBorder.setAttr("fillStyle",e),this.closeIconBorder.setAttr("fillStyle",e)},t.prototype.setVisibleShapes=function(){this.priceLabel.setAttr("isVisible",!0),this.quantityLabel.setAttr("isVisible",!0)},t.prototype.getVertexs=function(){return[]},t.prototype._onClickClose=function(){var e=this.getConfig().onClose;e&&e(this.getDescription())},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=this.getConfig(),n=i.price,r=i.quantity,o=i.editable;this._prevPrice=n,this._prevQuantity=r;var a=t.transformPointToView(e.point),l={x:a.x,y:-a.y};if(this.closeIconBorder.isHover(l))e.isDealed=!0,this._onClickClose();else if(this.dragIconBorder.isHover(l)||this.priceLabel.isHover(l)||this.line.isHover(l)){if(!o)return;this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0;var s=this.dragIconBorder.isHover(l)?"dragIcon":this.priceLabel.isHover(l)?"price":"line";this._drag(t,s)}else if(this.quantityLabel.isHover(l)){if(!o)return;var c=this.getConfig().onClickQuantity;null==c||c(this.getDescription())}}}},t.prototype._onMousemove=function(e){var t=this.getParent(),i=this.getConfig().editable,n=t.transformPointToView(e.point),r={x:n.x,y:-n.y};i&&(this.priceTooltip.setAttrs({isVisible:!!this.priceTooltip.getAttr("text")&&this.priceLabel.isHover(r)||this.dragIconBorder.isHover(r)}),this.quantityTooltip.setAttrs({isVisible:!!this.quantityTooltip.getAttr("text")&&this.quantityLabel.isHover(r)})),this.closeTooltip.setAttrs({isVisible:!!this.closeTooltip.getAttr("text")&&this.closeIcon.isHover(r)}),this.update()},t.prototype._drag=function(e,t){var i=this,n=e.mainPane,r=this.getConfig(),o=r.price,a=r.onClickDragArea,l=r.onClickPrice,s=r.dragSquareDraggingBackgroundColor,c=r.dragSquareBackgroundColor,u=r.lineDash,d=r.draggingLineDash,h=r.onPriceChange,p=this.getDragType("line"===t),f=o;n.on("mousemove",""+Dt.Us.OrderLine,(function(t){s&&i.dragIconBorder.setAttr("fillStyle",s),d&&i.line.setAttrs({lineDash:d});var n=e.transformPointToView(t.point).y,r=e.formatterValue(e.getPriceOfYPos(n));i.setAttr("price",""+r),f=r})),jn.on(document,"mouseup."+Dt.Us.OrderLine,(function(){c&&i.dragIconBorder.setAttr("fillStyle",c),u&&i.line.setAttrs({lineDash:u}),n.off("mousemove",""+Dt.Us.OrderLine),jn.off(document,"mouseup."+Dt.Us.OrderLine),i.compeleDraw(),f!==o&&(null==h||h((0,g.__assign)((0,g.__assign)({},i.getDescription()),{price:f,triggerType:p}))),null==a||a({triggerType:p,prevPrice:o,currentPrice:f}),"price"===t&&(null==l||l((0,g.__assign)((0,g.__assign)({},i.getDescription()),{prevPrice:o,currentPrice:f})))}))},t.prototype.compeleDraw=function(){this.setAttrs({isTextEdit:!1,isComplete:!0})},t.prototype.forceUpdate=function(){this.setAttr("data",[]),this.update()},t.prototype.getDragType=function(e){return e?Sr.LINE:Sr.BODY},t}(Qn.Z),Er=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{type:Dt.Us.PositionLine,price:"",quantity:"",positionTypeText:"",pnl:"",showTPSL:!1,isNeedStore:!1}),t.priceLabel=new tr({background:"#0ECB81",color:Dt.E.White,borderColor:"#474D57",dir:Dt.Nm.Right,stroke:!0,fill:!0,padding:[12,2],fixHeight:21,lineWidth:1,borderRadius:[2,0,0,2]}),t.quantityLabel=new tr({background:"#1E2329",color:Dt.E.White,borderColor:"#474D57",dir:Dt.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1,borderRadius:[0,2,2,0]}),t.tpslLabel=new tr({background:"#1E2329",color:Dt.E.White,borderColor:"#474D57",dir:Dt.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1,borderRadius:[0,2,2,0],text:"TP/SL"}),t.line=Qn.Z.line.clone().setAttrs({lineDash:[1,1]}),t.yLabel=new tr({color:"#0ECB81",borderColor:"#0ECB81",dir:Dt.Nm.Right,fill:!0,stroke:!0,padding:6,fixHeight:21,lineWidth:1}),t}return(0,g.__extends)(t,e),t.prototype.isIndependent=function(){return!0},t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.axisPane;if(e&&e.yAxis){var n=i.bound.width-1,r=this.getConfig(),o=r.price,a=r.quantity,l=r.positionTypeText,s=r.pnl,c=r.showTPSL,u=e.getYPos(+o),d=0;this.priceLabel.setAttrs({data:{x:d,y:-u},text:""+l+s}),d+=this.priceLabel.getWidth(),this.quantityLabel.setAttrs({data:{x:d,y:-u},text:a.toString()}),d+=this.quantityLabel.getWidth(),this.line.setAttrs({data:{p1:{x:d,y:-u},p2:{x:t.getBound().width,y:-u}}}),c&&(d+=16,this.tpslLabel.setAttrs({data:{x:d,y:-u}})),this.yLabel.setAttrs({data:{x:0,y:-u},text:e.formatterValue(+o),fixWidth:n})}this.addWidgetShapes(t,[this.priceLabel,this.quantityLabel,this.line,this.tpslLabel]),this.addWidgetShapes(i,[this.yLabel]),this.setAnnotationToWidgets([t,i])}},t.prototype.getShapes=function(){return[this.priceLabel,this.quantityLabel,this.line,this.tpslLabel,this.yLabel]},t.prototype.getDescription=function(){var e=this.getConfig(),t=e.type,i=e.price,n=e.quantity,r=e.isNeedStore;return{id:this.id,type:t,price:i,quantity:n,isNeedStore:r}},t.prototype.getEditAttribute=function(){var e=this.getConfig(),t=e.textColor,i=e.textFontSize,n=e.isTextBold,r=e.background,o=e.isTextEdit,a=e.isLock;return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:Dt.TD.SOLID,showTextColor:!1,textColor:t,showFontSize:!1,textFontSize:i,showTextBold:!1,isTextBold:n,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:o,showLock:!1,showDelete:!1}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane,e.axisPane]:[]},t.prototype.initCustomEvents=function(){var e=this;this.on("mousedown",this._onmousedown.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("price",this.forceUpdate.bind(this)),this.watch("quantity",(function(t){var i=t.newVal;e.quantityLabel.setAttr("text",i),e.setAttr("data",[]),e.update()})),this.watch("pnl",this.forceUpdate.bind(this)),this.watch("positionTypeText",this.forceUpdate.bind(this)),this.watch("showTPSL",this.forceUpdate.bind(this)),this.watch("priceColor",(function(t){var i=t.newVal;return i&&e.priceLabel.setAttr("color",i)})),this.watch("priceBackgroundColor",(function(t){var i=t.newVal;return i&&e.priceLabel.setAttr("background",i)})),this.watch("priceBorderColor",(function(t){var i=t.newVal;return i&&e.priceLabel.setAttr("borderColor",i)})),this.watch("quantityColor",(function(t){var i=t.newVal;return i&&e.quantityLabel.setAttr("color",i)})),this.watch("quantityBackgroundColor",(function(t){var i=t.newVal;return i&&e.quantityLabel.setAttr("background",i)})),this.watch("quantityBorderColor",(function(t){var i=t.newVal;return i&&e.quantityLabel.setAttr("borderColor",i)})),this.watch("priceLabelBackgroundColor",(function(t){var i=t.newVal;return i&&e.yLabel.setAttr("background",i)})),this.watch("priceLabelBorderColor",(function(t){var i=t.newVal;return i&&e.yLabel.setAttr("borderColor",i)})),this.watch("priceLabelColor",(function(t){var i=t.newVal;return i&&e.yLabel.setAttr("color",i)})),this.watch("tpslLabelBackgroundColor",(function(t){var i=t.newVal;return i&&e.tpslLabel.setAttr("background",i)})),this.watch("tpslLabelBorderColor",(function(t){var i=t.newVal;return i&&e.tpslLabel.setAttr("borderColor",i)})),this.watch("tpslLabelColor",(function(t){var i=t.newVal;return i&&e.tpslLabel.setAttr("color",i)})),this.watch("lineColor",(function(t){var i=t.newVal;return i&&e.line.setAttr("strokeStyle",i)})),this.watch("lineDash",(function(t){var i=t.newVal;return i&&e.line.setAttr("lineDash",i)}))},t.prototype.isHover=function(e){return this.tpslLabel.isHover(e)},t.prototype.updateBackground=function(e){this.priceLabel.setAttr("fillStyle",e),this.quantityLabel.setAttr("fillStyle",e)},t.prototype.setVisibleShapes=function(){this.quantityLabel.setAttr("isVisible",!0),this.priceLabel.setAttr("isVisible",!0)},t.prototype.getVertexs=function(){return[]},t.prototype.forceUpdate=function(){this.setAttr("data",[]),this.update()},t.prototype._onmousedown=function(e){var t=this.getParent();if(t){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y};this.tpslLabel.isHover(n)&&this._onClickTPSL()}},t.prototype._onClickTPSL=function(){var e=this.getConfig().onClickTPSL;null==e||e()},t}(Qn.Z);var kr=i(3440),Vr=i.n(kr),Ar=i(829),Tr=i.n(Ar),Mr=i(96795),Dr=i.n(Mr);const Ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{type:Dt.Us.ExecutionOrders,isNeedStore:!1,orders:[]}),t.executionOrders=[],t}return(0,g.__extends)(t,e),t.prototype.isIndependent=function(){return!0},t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.xAxis,n=e.yAxis,r=e.getParent(),o=this.determineTolerance(),a=this.executionOrders.map((function(e){var t=r.getCurrentItemByTime(e.time,o)||{},a=t.time,l=void 0===a?e.time:a,s=t.high,c=void 0===s?0:s,u=t.low,d=void 0===u?0:u,h=null==n?void 0:n.getCoordOfValue(c),p=null==n?void 0:n.getCoordOfValue(d),f=null==i?void 0:i.getCoordOfValue(l),v=-(e.isBuy?p:h);return(0,g.__assign)({candlestickTime:l,high:c,low:d,startX:f,startY:v},e)})),l=Vr()(a,"candlestickTime");Object.keys(l).forEach((function(e){Dr()(l[e],"isBuy").forEach((function(e){Tr()(e,"time").forEach((function(e,t){var i=e.startX,n=e.startY,r=e.isBuy,o=e.text,a=e.color,l=e.tooltipBackgroundColor,s=e.tooltipBorderColor,c=e.tooltipTextColor,u=e.arrow,d=e.tooltip,h=e.tooltipArrow,g=i-u.getWidth()/2,p=(5+u.getHeight())*(t+1),f=5*(t+1)+u.getHeight()*t,v=r?n+f:n-p,m=i-d.getWidth()/2,y=v-u.getHeight()-15-5,x=i,b=y+d.getHeight()/2;u.setAttrs({data:{x:g,y:v},path:r?"M4.35355 0.646446C4.15829 0.451184 3.84171 0.451184 3.64645 0.646446L0.464466 3.82843C0.269204 4.02369 0.269204 4.34027 0.464466 4.53553C0.659728 4.7308 0.97631 4.7308 1.17157 4.53553L4 1.70711L6.82843 4.53553C7.02369 4.7308 7.34027 4.7308 7.53553 4.53553C7.7308 4.34027 7.7308 4.02369 7.53553 3.82843L4.35355 0.646446ZM4.5 11L4.5 1L3.5 1L3.5 11L4.5 11Z":"M3.64645 10.3536C3.84171 10.5488 4.15829 10.5488 4.35355 10.3536L7.53553 7.17157C7.7308 6.97631 7.7308 6.65973 7.53553 6.46447C7.34027 6.2692 7.02369 6.2692 6.82843 6.46447L4 9.29289L1.17157 6.46447C0.97631 6.2692 0.659728 6.2692 0.464466 6.46447C0.269204 6.65973 0.269204 6.97631 0.464466 7.17157L3.64645 10.3536ZM3.5 -2.18557e-08L3.5 10L4.5 10L4.5 2.18557e-08L3.5 -2.18557e-08Z",fillStyle:a}),d.setAttrs({data:{x:m,y},text:o,borderColor:s,background:l,color:c}),h.setAttrs({data:[{x:x+5,y:b},{x:x-5,y:b},{x,y:b+5}],fillStyle:s})}))}))})),this.addWidgetShapes(t,this.getShapes()),this.setAnnotationToWidgets([t])}},t.prototype.getShapes=function(){var e=this.executionOrders.map((function(e){return e.arrow})),t=this.executionOrders.map((function(e){return e.tooltip})),i=this.executionOrders.map((function(e){return e.tooltipArrow}));return(0,g.__spreadArray)((0,g.__spreadArray)((0,g.__spreadArray)([],(0,g.__read)(e)),(0,g.__read)(t)),(0,g.__read)(i))},t.prototype.getDescription=function(){var e=this.getConfig(),t=e.data,i=e.type,n=e.isNeedStore;return{id:this.id,data:t,type:i,isNeedStore:n}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane]:[]},t.prototype.initCustomEvents=function(){var e=this;this.on("mousemove",Dt.Us.ExecutionOrders,this._onMousemove.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("orders",(function(t){t.newVal.forEach((function(t){var i,n=e.executionOrders.findIndex((function(e){var i=e.id;return t.id===i}));if(n>-1){var r=e.executionOrders[n];e.executionOrders[n]=(0,g.__assign)((0,g.__assign)({},r),t)}else e.executionOrders.push((i=t,(0,g.__assign)((0,g.__assign)({},i),{arrow:new wr({width:8,height:12,fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1}),tooltip:new tr({background:"gray",color:Dt.E.White,borderColor:"gray",dir:Dt.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fontSize:14,lineWidth:1,borderRadius:[4,4,4,4],isVisible:!1}),tooltipArrow:new ur({fillStyle:"#5E6673",stroke:!1,isVisible:!1})})))})),e.forceUpdate()}))},t.prototype.isHover=function(e){return this.executionOrders.reduce((function(t,i){return t&&i.arrow.isHover(e)}),!1)},t.prototype.setVisibleShapes=function(){this.executionOrders.forEach((function(e){e.arrow.setAttr("isVisible",!0)}))},t.prototype.getVertexs=function(){return[]},t.prototype._onMousemove=function(e){var t=this.getParent();if(t){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y};this.executionOrders.forEach((function(e){var t=!!e.tooltip.getAttr("text")&&e.arrow.isHover(n);e.tooltip.setAttrs({isVisible:t}),e.tooltipArrow.setAttrs({isVisible:t})})),this.update()}},t.prototype.compeleDraw=function(){this.setAttrs({isComplete:!0})},t.prototype.forceUpdate=function(){this.setAttr("data",[]),this.update()},t.prototype.determineTolerance=function(){var e=this.getParent();if(e){var t=e.xAxis;switch(null==t?void 0:t.getOriginTimeScaleType()){case Dt.QX.Hour:case Dt.QX.Minute:case Dt.QX.Second:return null==t?void 0:t.getUnitTimeValue();default:return}}},t}(Qn.Z),Pr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,g.__assign)((0,g.__assign)({},ei()(Qn.Z.defaultConfig)),{isTextEdit:!1,type:Dt.Us.ToolTip,isNeedStore:!1,text:""}),t.tooltipLabel=new tr({background:"#5E6673",color:Dt.E.White,dir:Dt.Nm.Up,fill:!0,borderRadius:4,padding:[12,8],fixHeight:36,fontSize:14}),t.arrowIcon=new ur({fillStyle:"#5E6673",stroke:!1}),t}return(0,g.__extends)(t,e),t.prototype.isIndependent=function(){return!0},t.prototype.updateImmediate=function(){var e=this.getParent(),t=e.getParent(),i=e,n=i.mainPane,r=i.yAxis,o=i.xAxis;if(e&&r){var a=this.getConfig(),l=a.data,s=a.text,c=t.getCloseItemByTime(l);if(c){var u=e.getYPos(+c.high)+4,d=o.getCoordOfValue(c.time),h=o.getOriginTimeScaleType();this.tooltipLabel.setAttrs({data:{x:d,y:-u-5+1},text:s||(0,It.XH)(c.time,h)}),this.arrowIcon.setData([{x:d,y:-u},{x:d+5,y:-u-5},{x:d-5,y:-u-5}])}}this.addWidgetShapes(n,[this.tooltipLabel,this.arrowIcon]),this.setAnnotationToWidgets([n])},t.prototype.getShapes=function(){return[this.tooltipLabel,this.arrowIcon]},t.prototype.getDescription=function(){var e=this.getConfig(),t=e.type,i=e.data,n=e.isNeedStore;return{id:this.id,type:t,data:i,isNeedStore:n}},t.prototype.setVisibleShapes=function(){},t.prototype.getEditAttribute=function(){var e=this.getConfig(),t=e.textColor,i=e.textFontSize,n=e.isTextBold,r=e.background,o=e.isTextEdit,a=e.isLock;return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:Dt.TD.SOLID,showTextColor:!1,textColor:t,showFontSize:!1,textFontSize:i,showTextBold:!1,isTextBold:n,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:o,showLock:!1,showDelete:!1}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane,e.axisPane]:[]},t.prototype.initCustomEvents=function(){var e=this;this.watch("data",this.updateImmediate.bind(this)),jn.on(document,"mousedown."+Dt.Us.ToolTip,(function(){e.remove()}))},t.prototype.afterDestroy=function(){jn.off(document,"mousedown."+Dt.Us.ToolTip)},t.prototype.isHover=function(e){return!this.getConfig().isTextEdit&&this.tooltipLabel.isHover(e)},t.prototype.getVertexs=function(){return[]},t.prototype.compeleDraw=function(){this.setAttrs({isTextEdit:!1,isComplete:!0})},t}(Qn.Z);var Br="DRAW_EVENT";const Wr=function(e){function t(t){var i=e.call(this)||this;return i.config=(0,g.__assign)((0,g.__assign)({},ei()(Ut.Z.defaultConfig)),{isKeepDrawing:!1,nextAction:Dt.Us.KeepDrawing}),i._actionsMapping=new Map,i._isAbort=!1,i._candleInstance=t,i.initHotkeys(),i.registerActions(),i}return(0,g.__extends)(t,e),t.prototype.setCompleteDrawCallback=function(e){this._completeDrawCallback=e},t.prototype.reset=function(){if(this._isAbort){var e=this.getSelectAnnotation();e&&!e.getAttr("isComplete")&&e.remove(),this._candleInstance.setAnnotationLockStatus(!1)}this.clearEvents()},t.prototype.disAbleDragAnnotations=function(){this._isAbort=!0,this._candleInstance.setAnnotationLockStatus(!0)},t.prototype.completeCallbackHook=function(e){if(this._isAbort=!1,this._candleInstance.setAnnotationLockStatus(!1),e&&this._candleInstance.selectAnnotation(e,e.getAttr("type")),this._completeDrawCallback&&this._completeDrawCallback(),this.getAttr("isKeepDrawing")){var t=this.getAttr("nextAction"),i=this.getActionByType(t);i&&i()}else this._completeDrawCallback=null},t.prototype.transformJSONToAnnotation=function(e,t){var i,n=e.type,r=((i={})[Dt.Us.TrendLine]=nr,i[Dt.Us.StraightLine]=lr,i[Dt.Us.Arrow]=mr,i[Dt.Us.ExtendTrendLine]=rr,i[Dt.Us.RayLine]=yr,i[Dt.Us.FibonacciLine]=hr,i[Dt.Us.InfoLine]=ar,i[Dt.Us.ParallelLine]=dr,i[Dt.Us.Rectangle]=cr,i[Dt.Us.Text]=_r,i[Dt.Us.PriceLine]=xr,i[Dt.Us.ArrowLine]=br,i[Dt.Us.OrderLine]=Lr,i[Dt.Us.PositionLine]=Er,i[Dt.Us.ExecutionOrders]=Ir,i[Dt.Us.ToolTip]=Pr,i);if(n&&r[n]){var o=new r[n];return n===Dt.Us.Arrow&&e.background&&(e.color=e.color||e.background),o.setParent(t||this._getEditorPanel()).setAttrs((0,g.__assign)((0,g.__assign)({isComplete:!0},e),{isEdit:!1})).setAttr("isDawing",!1),o}},t.prototype.initHotkeys=function(){var e=this;(0,qn.Z)("backspace, del",(function(){e.deleteCurrentAnnotation()})),(0,qn.Z)("esc",(function(){e.clear()}))},t.prototype.clear=function(){this.clearEvents(),this.makeAnnotationsDestroy(),this.completeCallbackHook()},t.prototype.clearEvents=function(){var e=this._getEditorPanel();if(e){var t=e.mainPane;t.off("mousedown",Br),t.off("mousemove",Br),t.off("mouseup",Br),t.off("click",Br),t.off("dbclick",Br)}},t.prototype.registerActions=function(){var e,t=this,i=this._getEditorPanel();if(i){var n=((e={})[Dt.Us.TrendLine]=this._drawExtendLine.bind(this,i,nr,Dt.Us.TrendLine),e[Dt.Us.ExtendTrendLine]=this._drawExtendLine.bind(this,i,rr,Dt.Us.ExtendTrendLine),e[Dt.Us.RayLine]=this._drawExtendLine.bind(this,i,yr,Dt.Us.RayLine),e[Dt.Us.InfoLine]=this._drawExtendLine.bind(this,i,ar,Dt.Us.InfoLine),e[Dt.Us.ArrowLine]=this._drawExtendLine.bind(this,i,br,Dt.Us.ArrowLine),e[Dt.Us.HorizontalLine]=this._drawStraightLine.bind(this,i,Dt.Us.HorizontalLine),e[Dt.Us.VerticalLine]=this._drawStraightLine.bind(this,i,Dt.Us.VerticalLine),e[Dt.Us.CrossLine]=this._drawStraightLine.bind(this,i,Dt.Us.CrossLine),e[Dt.Us.Rectangle]=this._drawRectangle.bind(this,i),e[Dt.Us.ParallelLine]=this._drawParallelChannel.bind(this,i),e[Dt.Us.FibonacciLine]=this._drawFibLine.bind(this,i),e[Dt.Us.LeftArrow]=this._drawArrow.bind(this,i,Dt.Us.LeftArrow),e[Dt.Us.RightArrow]=this._drawArrow.bind(this,i,Dt.Us.RightArrow),e[Dt.Us.UpArrow]=this._drawArrow.bind(this,i,Dt.Us.UpArrow),e[Dt.Us.DownArrow]=this._drawArrow.bind(this,i,Dt.Us.DownArrow),e[Dt.Us.Text]=this._drawText.bind(this,i),e[Dt.Us.PriceLine]=this._drawPriceLine.bind(this,i),e);Object.keys(n).forEach((function(e){t._actionsMapping.set(e,(function(){e!==Dt.Us.KeepDrawing&&(t.clearEvents(),t.disAbleDragAnnotations()),n[e]()}))}))}},t.prototype.getActionByType=function(e){return this._actionsMapping.get(e)},t.prototype.setNextAction=function(e){this.setAttr("nextAction",e)},t.prototype.getShapeById=function(e){return this._getEditorPanel().getAnnotations().find((function(t){return t.id===e}))},t.prototype.manageOrders=function(e){var t=this,i=this._getEditorPanel(),n=i.getAnnotations().filter((function(e){return e.getAttr("type")===Dt.Us.OrderLine})),r=n.map((function(t){return[t,e.find((function(e){return t.getAttr("orderId")===e.orderId}))]})),o=r.filter((function(e){return!(0,g.__read)(e,2)[1]})),a=r.filter((function(e){return!!(0,g.__read)(e,2)[1]})),l=e.filter((function(e){return!n.find((function(t){return t.getAttr("orderId")===e.orderId}))}));o.forEach((function(e){return(0,g.__read)(e,1)[0].remove(!1)})),a.forEach((function(e){var t=(0,g.__read)(e,2),i=t[0],n=t[1];return i.setAttrs(n)})),l.forEach((function(e){return t.transformJSONToAnnotation((0,g.__assign)((0,g.__assign)({},e),{type:Dt.Us.OrderLine}))})),i.update(Dt.mB.Marks)},t.prototype.manageExecutionOrders=function(e){var t=this._getEditorPanel();this.deleteAnnotationBy((function(e){return e.getAttr("type")===Dt.Us.ExecutionOrders})),this.transformJSONToAnnotation((0,g.__assign)((0,g.__assign)({},e),{type:Dt.Us.ExecutionOrders})),t.update(Dt.mB.Marks)},t.prototype.deleteAllOrderShape=function(e){void 0===e&&(e=function(e){return e.getAttr("type")===Dt.Us.OrderLine});var t=this._getEditorPanel();this.deleteAnnotationBy(e)&&t.update(Dt.mB.Marks)},t.prototype.deleteAllPositionShape=function(e){void 0===e&&(e=function(e){return e.getAttr("type")===Dt.Us.PositionLine});var t=this._getEditorPanel();this.deleteAnnotationBy(e)&&t.update(Dt.mB.Marks)},t.prototype.deleteAnnotationBy=function(e){return this._getEditorPanel().getAnnotations().reduce((function(t,i){return e(i)?(i.remove(!1),!0):t}),!1)},t.prototype.getSelectAnnotation=function(){for(var e=this._getEditorPanel().getAnnotations(),t=0,i=e.length;t<i;t++)if(e[t].getAttr("isEdit"))return e[t]},t.prototype.clearSelectAnnotation=function(){for(var e=this._getEditorPanel().getAnnotations(),t=0,i=e.length;t<i;t++)e[t].getConfig().isEdit&&e[t].setAttr("isEdit",!1)},t.prototype.deleteAllAnnotation=function(){for(var e=this._getEditorPanel(),t=e.getAnnotations(),i=0,n=t.length;i<n;i++)t[i].isIndependent()||t[i].remove(!1);t.length>0&&e.update(Dt.mB.Marks)},t.prototype.deleteCurrentAnnotation=function(){var e=this._getEditorPanel().getAnnotations().find((function(e){return e.getAttr("isEdit")}));e&&e.remove()},t.prototype.makeAnnotationsDestroy=function(){for(var e=this._getEditorPanel().getAnnotations(),t=0,i=e.length;t<i;t++)e[t].destroy()},t.prototype.keepDraw=function(){var e=this.getAttr("isKeepDrawing");this.setAttr("isKeepDrawing",!e)},t.prototype._drawExtendLine=function(e,t,i){var n=this,r=(new t).setParent(e),o=null,a=null,l=e.mainPane;l.on("mousedown",Br,(function(t){t.isDealed=!0,o||(r.setAttrs({color:Qn.Z.getCacheStyle(i,"color"),lineWidth:Qn.Z.getCacheStyle(i,"lineWidth"),lineStyle:Qn.Z.getCacheStyle(i,"lineStyle")}),o=e.transformAbsoluteXYToPlotItem(t.point)),l.off("mousemove",Br),l.on("mousemove",Br,(function(t){t.isDealed=!0,a=e.transformAbsoluteXYToPlotItem(t.point),r.setData({p1:o,p2:a}),r.update()})),l.once("mouseup",Br,(function(){!o||!a||(0,It.Fr)(o.time-a.time)&&(0,It.Fr)(o.value-a.value)||(l.off(Br),r.compeleDraw(),r.recoverDragVertexts(),n.completeCallbackHook(r))}))}),!0)},t.prototype._drawStraightLine=function(e,t){var i=this,n=(new lr).setParent(e);e.mainPane.once("click",Br,(function(r){n.setAttrs({lineType:t,color:Qn.Z.getCacheStyle(t,"color"),lineWidth:Qn.Z.getCacheStyle(t,"lineWidth"),lineStyle:Qn.Z.getCacheStyle(t,"lineStyle")}),n.setData(e.transformAbsoluteXYToPlotItem(r.point)),n.compeleDraw(),i.completeCallbackHook(n)}))},t.prototype._drawPriceLine=function(e){var t=this,i=(new xr).setParent(e);e.mainPane.once("click",Br,(function(n){i.setAttrs({color:Qn.Z.getCacheStyle(Dt.Us.PriceLine,"color"),lineWidth:Qn.Z.getCacheStyle(Dt.Us.PriceLine,"lineWidth"),lineStyle:Qn.Z.getCacheStyle(Dt.Us.PriceLine,"lineStyle")}),i.setData(e.transformAbsoluteXYToPlotItem(n.point)),i.compeleDraw(),t.completeCallbackHook(i)}))},t.prototype._drawRectangle=function(e){var t=this,i=(new cr).setParent(e),n=null,r=null,o=e.mainPane;o.on("mousedown",Br,(function(a){a.isDealed=!0,n||(i.setAttrs({color:Qn.Z.getCacheStyle(Dt.Us.Rectangle,"color"),lineWidth:Qn.Z.getCacheStyle(Dt.Us.Rectangle,"lineWidth"),lineStyle:Qn.Z.getCacheStyle(Dt.Us.Rectangle,"lineStyle"),background:Qn.Z.getCacheStyle(Dt.Us.Rectangle,"background")}),n=e.transformAbsoluteXYToPlotItem(a.point)),r||(r=e.transformAbsoluteXYToPlotItem(a.point)),o.off("mousemove",Br),o.on("mousemove",Br,(function(t){t.isDealed=!0,r=e.transformAbsoluteXYToPlotItem(t.point),i.setData({p1:n,p2:r}),i.update()})),o.once("mouseup",Br,(function(){!n||!r||(0,It.Fr)(n.time-r.time)&&(0,It.Fr)(n.value-r.value)||(o.off(Br),i.compeleDraw(),i.recoverDragVertexts(),t.completeCallbackHook(i))}))}),!0)},t.prototype._drawParallelChannel=function(e){var t=this,i=(new dr).setParent(e),n=null,r=null,o=null,a=e.mainPane;a.on("mousedown",Br,(function(l){l.isDealed=!0;var s=e.transformAbsoluteXYToPlotItem(l.point);n?r?o||(o=s):r=s:(i.setAttrs({color:Qn.Z.getCacheStyle(Dt.Us.ParallelLine,"color"),lineWidth:Qn.Z.getCacheStyle(Dt.Us.ParallelLine,"lineWidth"),lineStyle:Qn.Z.getCacheStyle(Dt.Us.ParallelLine,"lineStyle"),background:Qn.Z.getCacheStyle(Dt.Us.ParallelLine,"background")}),n=s),a.off("mousemove",Br),a.on("mousemove",Br,(function(t){t.isDealed=!0;var a=e.transformAbsoluteXYToPlotItem(t.point);r?o||i.setData({p1:n,p2:r,p3:a}):i.setData({p1:n,p2:a,p3:a}),i.update()})),a.once("mouseup",Br,(function(){n&&r&&o&&(a.off(Br),i.compeleDraw(),i.recoverDragVertexts(),t.completeCallbackHook(i))}))}),!0)},t.prototype._drawFibLine=function(e){var t=this,i=(new hr).setParent(e),n=null,r=null,o=e.mainPane;o.on("mousedown",Br,(function(a){a.isDealed=!0,n||(i.setAttrs({color:Qn.Z.getCacheStyle(Dt.Us.FibonacciLine,"color"),lineWidth:Qn.Z.getCacheStyle(Dt.Us.FibonacciLine,"lineWidth"),lineStyle:Qn.Z.getCacheStyle(Dt.Us.FibonacciLine,"lineStyle"),background:Qn.Z.getCacheStyle(Dt.Us.FibonacciLine,"background")}),n=e.transformAbsoluteXYToPlotItem(a.point)),o.off("mousemove",Br),o.on("mousemove",Br,(function(t){t.isDealed=!0,r=e.transformAbsoluteXYToPlotItem(t.point),i.setData({p1:n,p2:r}),i.update()})),o.once("mouseup",Br,(function(){!n||!r||(0,It.Fr)(n.time-r.time)&&(0,It.Fr)(n.value-r.value)||(o.off(Br),i.compeleDraw(),i.recoverDragVertexts(),t.completeCallbackHook(i))}))}),!0)},t.prototype._drawArrow=function(e,t){var i=this,n=(new mr).setParent(e);e.mainPane.once("mousedown",Br,(function(r){n.setAttrs({dir:t,color:Qn.Z.getCacheStyle(t,"color")}),n.setData(e.transformAbsoluteXYToPlotItem(r.point)),n.compeleDraw(),i.completeCallbackHook(n)}))},t.prototype._drawText=function(e){var t=this,i=(new _r).setParent(e);i.createTextAreaElement(),e.mainPane.once("click",Br,(function(n){i.setAttrs({textColor:Qn.Z.getCacheStyle(Dt.Us.Text,"textColor"),textFontSize:Qn.Z.getCacheStyle(Dt.Us.Text,"textFontSize"),isTextBold:Qn.Z.getCacheStyle(Dt.Us.Text,"isTextBold"),background:Qn.Z.getCacheStyle(Dt.Us.Text,"background")}),i.setAttr("isTextEdit",!0).setData(e.transformAbsoluteXYToPlotItem(n.point)),n.originEvent.stopPropagation(),t.completeCallbackHook(i),n.isDealed=!0}))},t.prototype._getEditorPanel=function(){return this._candleInstance.getPanel((function(e){return e instanceof Ii&&e.panelType===Dt.wh.BASE}))},t}(Ut.Z);var Rr=i(23716);const Hr=function(e){function t(i){var n=e.call(this)||this;return n._visibleViewHeight=0,n._maxTimestamp=0,n._isFirstRender=!0,n._oldDevicePixelRatio=n.devicePixelRatio,n._regContetxt={baseAsset:"",quoteAsset:""},n.setCursor=(0,It.R4)((function(e,t){return e.isClear&&e.key===(null==t?void 0:t.key)?{config:{},weight:0}:t&&t.weight>e.weight?t:e}),(function(e){var t=e.config,i=e.isRecord,r=void 0===i||i,o=n.getAttr("container"),a=n.getAttr("crossHair"),l=t.style||a.style;o&&(0,It.AS)(o,{cursor:l}),r&&l!==a.style&&(l===Mt.Li.DEFAULT&&ci.Z.clearRect(n.getHitContext()),n.setAttr("crossHair",(0,g.__assign)((0,g.__assign)({},a),t)))})),n.unSelectAnnotation=(0,It.Ds)((function(){for(var e=n.getIPanels(),t=0;t<e.length;t++)for(var i=e[t].getAnnotations(),r=0,o=i.length;r<o;r++)if(i[r].getAttr("isEdit"))return;n.fire("unSelectAnnotation")}),100),n.saveChart=(0,It.Ds)((function(){try{n.fire("saveChartNeeded",{data:n.getStoreData()})}catch(e){Rr.warn("save annotations occured error: "+e.message)}})),n.config=(0,It.PM)(ut()(t.defaultConfig),(0,g.__assign)((0,g.__assign)({},i),{indicatorHelper:Xn()})),n.initStates(),n.initContainer(),n.initPanels(),n.initEvents(),n.initialData(),n._editor=new Wr(n),n}return(0,g.__extends)(t,e),Object.defineProperty(t.prototype,"lastDataTime",{get:function(){return this._lastDataTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleViewHeight",{get:function(){return this._visibleViewHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gapWidgetsLength",{get:function(){return this.filterPanels((function(e){return e instanceof Wi})).length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iPanels",{get:function(){return this.filterPanels((function(e){return e instanceof Ii}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleContainer",{get:function(){return this._titleContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){return this._editor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"regContetxt",{get:function(){return this._regContetxt},enumerable:!1,configurable:!0}),t.prototype.getEditor=function(){return this._editor},t.prototype.getCanvasCollection=function(){return[this._canvas,this._hitCanvas,this._frameCanvas,this._markCanvas,this._countdownCanvas]},t.prototype.getCanvas=function(){return this._canvas},t.prototype.setCanvas=function(e){return this._canvas=e,this},t.prototype.getHitCanvas=function(){return this._hitCanvas},t.prototype.setHitCanvas=function(e){return this._hitCanvas=e,this},t.prototype.getMarkCanvas=function(){return this._markCanvas},t.prototype.setMarkCanvas=function(e){return this._markCanvas=e,this},t.prototype.getCountdownCanvas=function(){return this._countdownCanvas},t.prototype.setCountdownCanvas=function(e){return this._countdownCanvas=e,this},t.prototype.getFrameCanvas=function(){return this._frameCanvas},t.prototype.setFrameCanvas=function(e){return this._frameCanvas=e,this},t.prototype.getContext=function(){return this._ctx||this.setContext(this._canvas.getContext("2d")),this._ctx},t.prototype.setContext=function(e){return this._ctx=e,this},t.prototype.getHitContext=function(){return this._hitCtx||this.setHitContext(this._hitCanvas.getContext("2d")),this._hitCtx},t.prototype.setHitContext=function(e){return this._hitCtx=e,this},t.prototype.getMarkContext=function(){return this._markCtx||this.setMarkContext(this._markCanvas.getContext("2d")),this._markCtx},t.prototype.setMarkContext=function(e){return this._markCtx=e,this},t.prototype.getCountdownContext=function(){return this._countdownCtx||this.setCountdownContext(this._countdownCanvas.getContext("2d")),this._countdownCtx},t.prototype.setCountdownContext=function(e){return this._countdownCtx=e,this},t.prototype.getFrameContext=function(){return this._frameCtx||this.setFrameContext(this._frameCanvas.getContext("2d")),this._frameCtx},t.prototype.setFrameContext=function(e){return this._frameCtx=e,this},t.prototype.getXAxis=function(){return this._xAxis},t.prototype.getTimeAxisWidget=function(){return this._timeAxisWidget},t.prototype.getMaxTimestamp=function(){return this._maxTimestamp},t.prototype.getSeriesData=function(){var e=this.getConfig().seriesData;return void 0===e?[]:e},t.prototype.getVisibleSeriesData=function(){return this.getAttr("visibleSeriesData")||[]},t.prototype.setCurrentItemByTime=function(e){var t=this.getCurrentItemByTime(e);t&&this.setAttr("currentItem",t)},t.prototype.getCurrentItemByTime=function(e,t){if(!isNaN(e)){var i=this.getAttr("seriesData"),n=this.getVisibleSeriesData();if(i&&i.length>0){var r=i[0].time,o=n[n.length-1];if(e<r)return{time:e,open:NaN,high:NaN,low:NaN,close:NaN,volume:NaN,change:"NaN",amplitude:"NaN"};if(o&&e>=o.time){var a=i[i.length-1],l=i[i.length-2],s=a&&l?(0,It.gt)((a.close-l.close)/l.close):"",c=a&&l?(0,It.gt)((a.high-a.low)/l.close):"";return(0,g.__assign)((0,g.__assign)({},a),{change:s,amplitude:c})}var u=t||this._xAxis.getUnitTimeValue()/2,d=(0,It.ry)(i,(function(t){return Math.abs(e-t.time)<u?0:e-t.time})),h=i[d],p=i[d-1],f=h&&p?(0,It.gt)((h.close-p.close)/p.close):"",v=h&&p?(0,It.gt)((h.high-h.low)/p.close):"";return(0,g.__assign)((0,g.__assign)({},h),{change:f,amplitude:v})}}},t.prototype.getIndicatorHelperByName=function(e){var t,i=null===(t=this.getAttr("indicatorHelper"))||void 0===t?void 0:t[e];return"function"==typeof i&&(i=i()),i},t.prototype.resize=function(){var e=this.getAttr("container");if(e){var t=this.getConfig(),i=t.width,n=t.height,r=e.clientWidth,o=e.clientHeight;if(0!==r&&0!==o&&(this.setAttrs({width:r,height:o}),i!==r||n!==o||this._oldDevicePixelRatio!==this.devicePixelRatio)){if(this._oldDevicePixelRatio=this.devicePixelRatio,this.updateContainerSize(),!this._xAxis)return;this.setTimeAxis(!0),this.setVisibleViewHeight(),this.resizeAllPanelBound(),this.renderImmediate(Dt.mB.Resize)}}},t.prototype.clearPanel=function(){var e=this.getContext(),t=this.getMarkContext();ci.Z.clearRect(e),ci.Z.clearRect(t)},t.prototype.setWidgetParent=function(e){e.setParent(this),e.afterSetParent()},t.prototype.getYExtent=function(){var e=this.getVisibleSeriesData().reduce((function(e,t){return e.push.apply(e,[t.high,t.low]),e}),[]);return[Rt()(e),Bt()(e)]},t.prototype.getVisibleTimeExtent=function(){var e=this.getVisibleSeriesData().map((function(e){return e.time}));return[Rt()(e),Bt()(e)]},t.prototype.getTimeExtent=function(){var e,t,i=this.getSeriesData();return[null===(e=i[0])||void 0===e?void 0:e.time,null===(t=i[i.length-1])||void 0===t?void 0:t.time]},t.prototype.setTimeAxis=function(e){void 0===e&&(e=!1);var t=this.getConfig(),i=t.margin,n=t.width-i.left-i.right,r=this.getTimeExtent(),o=(0,g.__read)(r,2)[1];this._maxTimestamp=o;var a=this.getSeriesData(),l=this._xAxis;if(this._xAxis=new Oi(r,[0,n],a,null==l?void 0:l.getCurrentScaleCoeff()),this._xAxis.updateSliceTimeInterval(a),e&&(null==l?void 0:l.isValid()))this.setRightTime(l.domainRange.getMaxValue());else if(this.isLoaded()&&(null==l?void 0:l.isValid())&&l.getUnitTimeValue()===this._xAxis.getUnitTimeValue()){var s=this._xAxis.getDomainInterval(),c=this._xAxis.getEasedSliceTime(l.domainRange.getMaxValue(),.5*-s).time;this.setTimeAxisCenter(c);var u=this.getAttr("currentItem");u&&this.setCurrentItemByTime(u.time)}else n>0&&(s=this._xAxis.getDomainInterval(),c=this._xAxis.getEasedSliceTime(this._xAxis.domainRange.getMaxValue(),-s*(.95-.5)).time,this.setTimeAxisCenter(c),this.setCurrentItemByTime(this._maxTimestamp));this.setVisibleSeriesData()},t.prototype.setVisibleSeriesData=function(){var e=this._xAxis.domainRange,t=new ni(e.getMinValue(),e.getMaxValue()).sliceArray(this.getSeriesData(),(function(e){return e.time}));this.setAttr("visibleSeriesData",t)},t.prototype.initContainer=function(){var e=this.getAttr("container");if(e){var t=e.clientWidth,i=e.clientHeight;this.setAttrs({width:t,height:i});var n={position:"absolute",left:"0",top:"0",width:"100%",height:"100%"};this.setHitCanvas((0,It.O5)(t,i,{className:"hit",style:(0,g.__assign)((0,g.__assign)({},n),{zIndex:"1000"})})),this.setMarkCanvas((0,It.O5)(t,i,{className:"mark",style:(0,g.__assign)((0,g.__assign)({},n),{zIndex:"900"})})),this.setCanvas((0,It.O5)(t,i,{className:"scene",style:(0,g.__assign)((0,g.__assign)({},n),{zIndex:"200"})})),this.setFrameCanvas((0,It.O5)(t,i,{className:"frame",style:(0,g.__assign)((0,g.__assign)({},n),{zIndex:"100"})})),this.setCountdownCanvas((0,It.O5)(t,i,{className:"countdown",style:(0,g.__assign)((0,g.__assign)({},n),{zIndex:"905"})})),this._titleContainer=(0,It.az)("div",(0,g.__assign)((0,g.__assign)({},n),{height:"0",zIndex:"2000"}),"kline-title-wrap"),this.addElemens([this.getCanvas(),this.getFrameCanvas(),this.getMarkCanvas(),this.getCountdownCanvas(),this.getHitCanvas(),this._titleContainer])}},t.prototype.initPanels=function(){this.setVisibleViewHeight(),this.initIndicatorViews();var e=new Ii(Dt.wh.BASE,{id:Dt.A.CANDLE,indicatorType:Dt.A.CANDLE,isScaleCenter:!0});this._timeAxisWidget=new Zi;var t=this.getIndicatorPanels(e);this.addPanels((0,g.__spreadArray)([this._timeAxisWidget,e],(0,g.__read)(t))),this.initPanelBound()},t.prototype.initIndicatorViews=function(){var e=this;(this.getAttr("indicators")||[]).forEach((function(t){var i=t.type,n=e.getIndicatorHelperByName(i);if(n){var r=n.defaultProps,o=(0,It.az)("div",{},"chart-title-row"),a=(0,g.__assign)((0,g.__assign)((0,g.__assign)((0,g.__assign)({params:{},styles:{}},t),{indicatorType:i}),r),{visible:!0,subElement:o});e.setIndicatorView(t.type,a)}}))},t.prototype.getIndicatorPanels=function(e){var t=[],i=e;return this.indicatorViews.forEach((function(e){if(!e.isHistBase){var n=new Ii(Dt.wh.EXT,e),r=new Wi(i,n);t.push(r,n),i=n}})),t},t.prototype.updateContainerSize=function(){var e=this,t=this.getCanvasCollection(),i=this.getConfig(),n=i.width,r=i.height;this.setAttrs({width:n,height:r});var o={width:n+"px",height:r+"px"};t.forEach((function(t){t.width=n*e.devicePixelRatio,t.height=r*e.devicePixelRatio,(0,It.AS)(t,o)}))},t.prototype.shiftTimeLine=function(e){var t=this.getXAxis();if(0!==e&&t){var i=e/t.unitWidth*t.getUnitTimeValue();this.shiftTimeLineByTime(i)}},t.prototype.shiftTimeLineByTime=function(e){var t=this.getXAxis(),i=(0,g.__read)(this.getTimeExtent(),2),n=i[0],r=i[1],o=t.getDomainInterval(),a=6*t.getUnitTimeValue(),l=t.domainRange.getMinValue(),s=t.getEasedSliceTime(l,e+o).time;r<t.getEasedSliceTime(l,e).time+a&&e>0||n+a>s&&e<0||(t.shiftTime(e),this.updateTimeExtent(),this.endShiftTime(),this.update())},t.prototype.endShiftTime=function(){var e=(0,g.__read)(this.getTimeExtent(),2),t=e[0],i=e[1],n=this.getXAxis(),r=n.domainRange,o=(0,g.__read)([r.getMinValue(),r.getMaxValue()],2),a=o[0],l=o[1],s={minTime:t,maxTime:i,shiftedMinTime:Math.floor(a),shiftedMaxTime:Math.floor(l),interval:n.getDomainInterval()};this.fire("afterTimeShifted",s)},t.prototype.zoom=function(e,t){if(!(isNaN(e)||e<=0||isNaN(t))){var i=this.getAttr("xAxis").scaleRatio,n=Math.pow(2,t*i);this.zoomByCoeff(n,e)}},t.prototype.zoomIn=function(e){void 0===e&&(e=300),this.zoomAroundRight(e)},t.prototype.zoomOut=function(e){void 0===e&&(e=-300),this.zoomAroundRight(e)},t.prototype.zoomAroundRight=function(e){var t=this.getAttr("xAxis").scaleRatio,i=Math.pow(2.5,-e*t);this.zoomByCoeff(i),this.updateCurrentItem()},t.prototype.zoomByCoeff=function(e,t){var i=this._xAxis,n=i.getCurrentScaleCoeff();void 0!==t?i.scaleAroundTimestamp(t,e):i.scaleAroundRight(e);var r=this.getTimeExtent(),o=i.domainRange,a=6*i.getUnitTimeValue(),l=i.getDomainInterval();if(o.getMinValue()>r[1]){var s=i.getEasedSliceTime(r[1],.5*-l).time,c=i.getEasedSliceTime(r[1],.5*l).time;o.setMinValue(s).setMaxValue(c)}r[1]<o.getMinValue()+a&&(s=i.getEasedSliceTime(r[1],-a).time,c=i.getEasedSliceTime(r[1],l-a).time,o.setMinValue(s).setMaxValue(c)),o.getMaxValue()<r[0]&&(s=i.getEasedSliceTime(r[0],-l).time,o.setMinValue(s).setMaxValue(r[0]));var u=i.getCurrentScaleCoeff();(0,It.Fr)(n-u)||(this.updateTimeExtent(),this.endShiftTime(),this.update())},t.prototype.addOrUpdateLastData=function(e){var t,i=this.getSeriesData();if(0!==i.length){this._checkValid(e),this.formatItem(e),this.setAttr("lastUpdateItem",(0,g.__assign)({},e));var n=i[i.length-1],r=n.time;if(r<e.time){if(i.push(e),2===i.length)return void this.setAttr("seriesData",(0,g.__spreadArray)([],(0,g.__read)(i)));this.updateCacheResult(i.length-1);var o=this._xAxis.getUnitTimeValue();this._xAxis.domainRange.contain(r-.5*o)&&this._xAxis.shiftTime(o),this.updateTimeExtent()}else n.time===e.time&&(Object.assign(n||{},e),i.length>=2&&this.updateCacheResult(i.length-1),this.updateYExtend());this.update();var a=this.getAttr("currentItem");if(a&&a.time===this._maxTimestamp){var l=(u=i[i.length-2])?(0,It.gt)((a.close-u.close)/u.close):"",s=u?(0,It.gt)((e.high-e.low)/u.close):"";this.setAttr("currentItem",(0,g.__assign)((0,g.__assign)({},e),{change:l,amplitude:s}))}var c=null===(t=this._xAxis)||void 0===t?void 0:t.getUnitTimeValue();if(c&&Math.abs(e.time-r)>=2*c&&(this._xAxis.updateSliceTimeInterval(i),e.time>this._lastDataTime+c)){var u=i[i.length-2],d=e;this.fire("dispatchErrorData",{data:{type:"disConnect",payload:{prevItem:u,nextItem:d}}})}this._maxTimestamp=e.time}},t.prototype.setTimeAxisCenter=function(e){var t=this.getXAxis(),i=t.getDomainInterval(),n=t.getEasedSliceTime(e,-i/2).time,r=t.getEasedSliceTime(e,i/2).time;t.domainRange.setMinValue(n).setMaxValue(r)},t.prototype.setRightTime=function(e){var t=this.getXAxis(),i=t.getDomainInterval(),n=t.getEasedSliceTime(e,-i).time;t.domainRange.setMinValue(n).setMaxValue(e)},t.prototype.executeActionByType=function(e){var t,i=this._editor.getActionByType(e);if(i)return this.clearSelectAnnotation(),this._editor.setNextAction(e),void i();var n=((t={})[Dt.Us.DefaultCursor]=this.setCursor.bind(this,{config:{show:!1,style:Mt.Li.DEFAULT},weight:100}),t[Dt.Us.CrossHairCursor]=this.setCursor.bind(this,{config:{show:!0,style:Mt.Li.CROSSHAIR},weight:100}),t[Dt.Us.ToggleVisible]=this.toggleAnnotationsVisible.bind(this),t[Dt.Us.Delete]=this._editor.deleteAllAnnotation.bind(this._editor),t[Dt.Us.KeepDrawing]=this._editor.keepDraw.bind(this._editor),t[Dt.Us.LockDraw]=this.setAnnotationLockStatus.bind(this),t)[e];n&&n()},t.prototype.updateTimeExtent=function(){this.setVisibleSeriesData(),this.updateYExtend()},t.prototype.updateYExtend=function(){this.eachPanels((function(e){e instanceof Ii&&e.updateYExtend()}))},t.prototype.closeIndicatorByName=function(e){var t,i,n=this.getIndicatorViewByName(e);if(n){var r=this.indicatorViews.find((function(e){return e.isHistBase}));if(this.deleteIndicatorViewByName(e),null===(t=n.subElement)||void 0===t||t.remove(),n.isHistBase)this._removeIndicatorFromBaseView(n.id,(null==r?void 0:r.id)===n.id);else{var o=this.getPanel((function(t){return t instanceof Ii&&t.getPanelId()===e}));o&&(this._removeIndicatorView(o),this.renderImmediate(Dt.mB.Resize))}null===(i=n.subElement)||void 0===i||i.remove(),this.fire("selectIndicatorsChange",{data:this.getSelectIndicators()})}},t.prototype.addIndicatorByName=function(e,t){var i=void 0===t?{}:t,n=i.params,r=void 0===n?{}:n,o=i.styles,a=void 0===o?{}:o,l=i.visible,s=void 0===l||l,c=i.isTriggeredByClick,u=void 0!==c&&c,d=i.weight,h=void 0===d?0:d,p=this.getIndicatorHelperByName(e);if(p&&!this._indicatorViews.has(e)&&p.getResult){var f=p.defaultProps,v=(0,It.az)("div",{},"chart-title-row"),m=(0,g.__assign)((0,g.__assign)({indicatorType:e,id:e,params:this.getIndicatorParams(e)||r,styles:a},f),{visible:s,subElement:v,isTriggeredByClick:u,weight:h});this.setIndicatorView(e,m),m.isHistBase?this._addIndicatorFromBaseView(m):this._addIndicatorView(m),this.fire("selectIndicatorsChange",{data:this.getSelectIndicators()})}},t.prototype.setIndicatorVisibleByName=function(e,t){if(this._indicatorViews.has(e))for(var i=this.getIPanels(),n=0;n<i.length;n++){var r=i[n];if(r.hasIndicator(e))return void r.setIndicatorVisible(e,t)}},t.prototype.showIndicatorsDialog=function(){this.fire("showParamsSettingPanel",{id:""})},t.prototype.resetChart=function(){this.clearData(),this.editor.clear()},t.prototype.clearData=function(){this.clearPanel(),this.setIsLoaded(!1),this.setAttr("lastUpdateItem",null)},t.prototype.setSymbolInfo=function(e,t){(0,ii.Kn)(e)?this._regContetxt=(0,g.__assign)((0,g.__assign)({},this._regContetxt),e):t&&(this._regContetxt[e]=t)},t.prototype.appendVolIndicators=function(e){var t,i=this,n=this.getAttr("indicatorHelper"),r=(t=Xn(),zn.reduce((function(e,i){return e[i]=t[i],e}),{}));zn.forEach((function(t){n[t]=r[t],e.forEach((function(e){var n=e.indicators,r=void 0===n?[]:n,o=e.weight;r.forEach((function(e){var n=e.id,r=e.styles,a=e.visible,l=e.isTriggeredByClick;n===t&&i.addIndicatorByName(n,{styles:r,visible:a,isTriggeredByClick:l,weight:o})}))}))})),this.fire("allIndicatorsChange",{data:this.getAllIndicators()})},t.prototype.removeVolIndicators=function(){var e=this,t=this.getAttr("indicatorHelper");zn.forEach((function(i){delete t[i],e.closeIndicatorByName(i)})),this.fire("allIndicatorsChange",{data:this.getAllIndicators()})},t.prototype.getAllIndicators=function(){for(var e=this.getAttr("indicatorHelper")||{},t=Object.keys(e),i=[],n={},r=0,o=t.length;r<o;r++){var a=this.getIndicatorHelperByName(t[r]);if(a){var l=a.defaultProps,s=l.id,c=void 0===s?"":s,u=l.title,d=l.isHistBase,h=l.isCustom,g=l.isBacktest;n[c]||(i.push({id:c,name:u,isMain:d,isCustom:!!h,isBacktest:!!g}),n[c]=1)}}return i},t.prototype.getSelectIndicators=function(){return this.indicatorViews.map((function(e){return{id:e.id,name:e.indicatorType,isMain:!!e.isHistBase,isCustom:!!e.isCustom}}))},t.prototype.hasIndicatorByName=function(e){return this._indicatorViews.has(e)},t.prototype.updateIndicatorParams=function(e){var t=this.getIndicatorViewByName(e);if(t){var i=(0,g.__assign)({},t);i.params=this.getIndicatorParams(e),this.setIndicatorView(e,i);var n=t.isHistBase,r=this.getPanel((function(t){return t instanceof Ii&&(n?t.panelType===Dt.wh.BASE:t.getPanelId()===e)}));r.updateParams(e,i.params,(function(){r.save(),r.update()}))}},t.prototype.registerCustomIndicator=function(e,t){void 0===t&&(t={});var i=this.getAttr("indicatorHelper");t.defaultProps.isDiffSource&&(t=function(e){var t,i=[],n=null,r="",o="",a=[],l=!1,s=(0,It.Ds)((function(t){void 0===t&&(t={}),c(t,!0),function(){n&&n();var t={symbol:r,interval:o},i=d(t);n=e.subscribe(t,(function(e){var t;if(i({symbol:r,interval:o})){var n=a.length;if(n>0){var l=null===(t=a[n-1])||void 0===t?void 0:t.time;e.time>l?a.push(e):a.splice(n-1,1,e),u()}}}))}()}),100);function c(i,n){if(void 0===i&&(i={}),void 0===n&&(n=!1),!l){if(i.endTime){if(i.startTime=i.startTime||i.endTime-500*(0,Mt.Sz)(o),i.endTime=t?Math.min(t,i.endTime):i.endTime,t=Math.min(i.startTime,t),i.endTime<i.startTime)throw new Error("custom indicator fetch data occured time error");i.limit=Math.ceil((i.endTime-i.startTime)/(0,Mt.Sz)(o)+1)}var s=(0,g.__assign)((0,g.__assign)({},i),{symbol:r,interval:o}),c=d(s);e.getData(s,(function(e){var t=e.data,i=e.isLoadAll;c((0,g.__assign)((0,g.__assign)({},s),{symbol:r,interval:o}))&&(a=n?t:function(e){var t={};return e.filter((function(e){var i=e.time;return!t[i]&&(t[i]=1,!0)})).sort((function(e,t){return e.time-t.time}))}(a.concat(t)),l=i,u())}))}}function u(){i.forEach((function(e){e()}))}function d(e){return function(t){return Kt()(e,t)}}return(0,g.__assign)((0,g.__assign)({},e),{init:function(e,i,c){r=e,o=i,a.length=0,t=0,l=!1,n&&n(),s(c)},getResult:function(t,i,n){e.getResult(a,{},(function(e){n(e)}))},subscribe:function(e){-1===i.indexOf(e)&&i.push(e)},unSusbcribe:function(){n&&n(),n=null,i.length=0},loadData:function(e){return void 0===e&&(e={}),c(e)}})}(t)),i[e]=t,this.fire("allIndicatorsChange",{data:this.getAllIndicators()})},t.prototype.removeCustomIndicatorByName=function(e){var t=this.getAttr("indicatorHelper");this.hasIndicatorByName(e)&&this.closeIndicatorByName(e),delete t[e],this.fire("allIndicatorsChange",{data:this.getAllIndicators()})},t.prototype.registerCustomIndicatorCallback=function(e){var t=e.onAdd,i=e.onEdit,n=e.onRemove;t&&this.setAttr("onAddCustomIndicator",t),i&&this.setAttr("onEditCustomIndicator",i),n&&this.setAttr("onRemoveCustomIndicator",n)},t.prototype.getColorFromColorTable=function(e,t){return this.getSettingValues(e)||this._colorTable[e]||t||e},t.prototype.selectAnnotation=function(e,t){this.fire("selectAnnotation",{data:e,action:t})},t.prototype.getStoreData=function(){var e=[];return this.eachPanels((function(t){t instanceof Ii&&e.push((0,g.__assign)({type:t.getAttr("indicatorType")},t.getSavedData()))})),e},t.prototype.loadChart=function(e){this._editor.deleteAllAnnotation();var t=this.getAttr("needToReloadIndicator");t&&this._clearAllIndicators();try{if(t)for(var i=0;i<e.length;i++)for(var n=e[i],r=n.indicators,o=void 0===r?[]:r,a=n.weight,l=0;l<o.length;l++){var s=o[l]||{},c=s.id,u=s.styles,d=s.visible,h=s.isTriggeredByClick;c&&this.addIndicatorByName(c,{styles:u,visible:d,isTriggeredByClick:h,weight:a})}var g=this.filterPanels((function(e){return e instanceof Ii}));for(i=0;i<g.length;i++){var p=g[i];if(e[i]&&p)for(var f=e[i].annotations,v=void 0===f?[]:f,m=(l=0,v.length);l<m;l++)this.editor.transformJSONToAnnotation(v[l],p)}return this.fire("chartLoaded"),Promise.resolve({})}catch(e){return Rr.error("basicKline loadChart occured error: "+e.message),Promise.reject({error:e.message})}},t.prototype.setAnnotationLockStatus=function(e){if(void 0===e){var t=this.getAttr("annotationLock");this.setAttr("annotationLock",!t)}else this.setAttr("annotationLock",e)},t.prototype.toggleAnnotationsVisible=function(){var e=this.getAttr("annotationVisible");this.setAttr("annotationVisible",!e),e&&this.editor.clearEvents(),this.update()},t.prototype.clearSelectAnnotation=function(){this.eachPanels((function(e){for(var t=e.getAnnotations(),i=0,n=t.length;i<n;i++)t[i].setAttr("isEdit",!1)}))},t.prototype.createOrderLine=function(e){return this._editor.transformJSONToAnnotation((0,g.__assign)({type:Dt.Us.OrderLine},e))},t.prototype.manageOrderLines=function(e){this._editor.manageOrders(e)},t.prototype.manageExecutionOrders=function(e){this._editor.manageExecutionOrders(e)},t.prototype.createPositionLine=function(e){return this._editor.transformJSONToAnnotation((0,g.__assign)({type:Dt.Us.PositionLine},e))},t.prototype.createTooltip=function(e){return this._editor.transformJSONToAnnotation((0,g.__assign)({type:Dt.Us.ToolTip},e))},t.prototype.getShapeById=function(e){return this._editor.getShapeById(e)},t.prototype.deleteShapeById=function(e){this._editor.deleteAllOrderShape((function(t){return t.id===e})),this._editor.deleteAllPositionShape((function(t){return t.id===e}))},t.prototype.deleteAllOrderShape=function(){this._editor.deleteAllOrderShape()},t.prototype.deleteAllPositionShape=function(){this._editor.deleteAllPositionShape()},t.prototype.updateCurrentItem=function(){var e=this.getPanel((function(e){return e instanceof Ii&&e.mainPane.getAttr("isMouseover")}));e&&e.mainPane.drawCrossHairByTime()},t.prototype.updateTitle=function(e){if(e){var t=this.getPanel((function(e){return e instanceof Ii&&e.panelType===Dt.wh.BASE})),i=this.getPanel((function(t){return t instanceof Ii&&t.getPanelId()===e}))||t;null==i||i.updateTitleLabel()}else this.getIPanels().forEach((function(e){e.updateTitleLabel()}))},t.prototype.goForward=function(){var e=this._xAxis.unitWidth;this.shiftTimeLine(-e);var t=this.getAttr("currentItem");if(t){var i=this._xAxis.getUnitTimeValue();this.setCurrentItemByTime(t.time-i),this.updateCurrentItem()}},t.prototype.goNext=function(){var e=this._xAxis.unitWidth;this.shiftTimeLine(e);var t=this.getAttr("currentItem");if(t){var i=this._xAxis.getUnitTimeValue();this.setCurrentItemByTime(t.time+i),this.updateCurrentItem()}},t.prototype.getCloseItemByTime=function(e){var t=this._xAxis.getUnitTimeValue()/2,i=this.getAttr("seriesData")||[];return i[(0,It.ry)(i,(function(i){return Math.abs(e-i.time)<t?0:e-i.time}))]},t.prototype.goDate=function(e,t){var i=this,n=(0,g.__read)(this.getTimeExtent(),2),r=n[0],o=n[1],a=function(e){var t=i.getCloseItemByTime(e);if(t){var n=t.time===r?i.getI18n("last-available-bar","Last available bar"):"";i.setTimeAxisCenter(t.time),i.updateTimeExtent(),i.createTooltip({data:t.time,text:n}),i.update()}};if(e>=r)a(e),null==t||t();else{var l=this.getXAxis(),s=l.domainRange,c=l.getDomainInterval(),u=l.getEasedSliceTime(e,-c/2).time,d=(0,g.__read)([s.getMinValue(),s.getMaxValue()],2)[1],h={minTime:r,maxTime:o,shiftedMinTime:Math.floor(u),shiftedMaxTime:Math.floor(d),interval:l.getDomainInterval(),cb:function(){a(e),null==t||t()}};this.fire("afterTimeShifted",h)}},t.prototype._clearAllIndicators=function(){var e=this;this._indicatorViews.forEach((function(t,i){e.closeIndicatorByName(i)}))},t.prototype._addIndicatorFromBaseView=function(e){var t=this.getPanel((function(e){return e instanceof Ii&&e.panelType===Dt.wh.BASE}));t&&this.isLoaded()&&(t.updateChartData(0,(function(){t.setYAxis(),t.updateTitleLabel(),t.update(Dt.mB.Resize)})),(0,ii.hj)(e.weight)&&e.weight>0&&t.weight!==e.weight&&(t.updateWeight(e.weight),this.updatePanelBound()),t.save())},t.prototype._checkValid=function(e){for(var t=["time","open","high","low","close","volume","quantity"],i=0;i<t.length;i++)isNaN(parseFloat(e[t[i]]))&&this.fire("dispatchErrorData",{data:{type:"invalidData",payload:{data:e}}})},t.prototype._addIndicatorView=function(e){for(var t,i=this,n=this.panels.length-1;n>=0;n--){var r=this.panels[n];if(r instanceof Ii){t=r;break}}var o=new Ii(Dt.wh.EXT,e),a=new Wi(t,o);this.addPanels([a,o]),o.save(),this.isLoaded()&&(this.updatePanelBound(),o.updateChartData(0,(function(){o.setYAxis(),o.updateTitleLabel(),i.renderImmediate(Dt.mB.Resize)})))},t.prototype._removeIndicatorFromBaseView=function(e,t){var i=this.getPanel((function(e){return e instanceof Ii&&e.panelType===Dt.wh.BASE})),n=this.indicatorViews.find((function(e){return e.isHistBase})),r=null==n?void 0:n.subElement;i&&(i.setYAxis(),t&&r&&i.addFoldIcon(r,"main-indicators-fold"),i.removeIndicator(e),i.save(),i.update())},t.prototype._removeIndicatorView=function(e){for(var t,i,n=new Set([e]),r=this.filterPanels((function(e){return e instanceof Wi})),o=0;o<r.length;o++){var a=r[o];a.nextPanel===e&&(t=a),a.frontPanel===e&&(i=a)}i?(n.add(i),t.nextPanel=i.nextPanel):n.add(t),e.save(),this.removePanels(n),this.updatePanelBound()},t.prototype.updateCacheResult=function(e){this.eachPanels((function(t){t instanceof Ii&&!t.isDiffPanel&&t.updateChartData(e,(function(){t.setYAxis(),t.updateTitleLabel(),t.update()}))}))},t.prototype.setVisibleViewHeight=function(){var e=this.getConfig(),t=e.margin,i=e.xAxis,n=e.height;this._visibleViewHeight=n-t.top-t.bottom-i.height},t.prototype.getYAxisWidth=function(e){for(var t=1,i=0,n=this.getAttr("candlestick").tickSize,r=0;r<e.length;r++){var o=e[r],a=[o.open,o.high,o.low,o.close].reduce((function(e,t){var i=e.strLen,r=e.precision,o=(0,ii.hj)(n)?t.toFixed(n):""+(0,It.Hf)(t),a=(""+o).split("."),l=a[1]?a[1].length:0;return r=Math.max(r,l),{strLen:i=Math.max(i,(""+o).length),precision:r}}),{strLen:1,precision:0});t=Math.max(t,a.strLen),i=Math.max(i,a.precision)}i=(0,ii.hj)(n)?Math.max(n,0):Math.max(i,0),this.setAttr("precision",i);var l="a".repeat(t+2);return ci.Z.measureTextWidth(l)},t.prototype.initialData=function(){var e=this.isLoaded(),t=this.getSeriesData();t.length<=0||(this.setYAxisWidth(t),this.setTimeAxis(),this.updateCacheResult(),this.initPanelYAxis(),this.setIsLoaded(!0),!e&&this.fire("chartReady"),this._isFirstRender=!1,this._lastDataTime=t[t.length-1].time)},t.prototype.setYAxisWidth=function(e){var t=this.getAttr("tick"),i=t.width,n=void 0===i?5:i,r=t.textMargin,o=void 0===r?5:r,a=this.getYAxisWidth(e)+n+o,l=this.getAttr("margin"),s=l.right;l.right=Math.max(30,a),this.setVisibleViewHeight();var c=this._isFirstRender?Dt.Vt.All:s!==a&&Dt.Vt.Width;c&&this.initPanelBound(c)},t.prototype.setThemeColorTable=function(e){this._colorTable=this.getColorTableByTheme(e)},t.prototype.initStates=function(){var e=this.getAttr("theme");this.setThemeColorTable(e)},t.prototype.initEvents=function(){var e=this;this.watch("candlestick",(function(t){var i=t.newVal,n=t.oldVal;Zt()(i,n)||e.initialData()})),this.watch("seriesData",(function(){e.initialData()})),this.watch("nextData",(function(t){var i=t.newVal;(void 0===i?[]:i).forEach(e.addOrUpdateLastData.bind(e))})),this.watch("currentItem",(0,It.P2)((function(){e.updateTitle()}),0)),this.watch("theme",(function(t){var i=t.newVal;e.setThemeColorTable(i)}));var t=this.getHitCanvas();t&&Mt.X8.forEach((function(i){jn.on(t,i,e.eventHandler.bind(e,i),!0)}));var i=this.getAttr("container");i&&jn.on(i,"mouseout",(function(t){var n=t.originEvent.target;i.contains(n)||e.setCurrentItemByTime(e._maxTimestamp)}));var n=this.getAttr("container");n&&(0,It.Xp)(n,(function(){e.resize()}))},t.prototype.eventHandler=function(e,t){if(this._xAxis){var i={click:this.onclick,dblclick:this.ondblclick,mousedown:this.onmousedown,mousemove:this.onmousemove,wheel:this.onmousewheel,mouseup:this.onmouseup,mouseout:this.onmouseout,gesturestart:this.ongesturestart,gesturechange:this.ongesturechange,gestureend:this.ongestureend,contextmenu:this.oncontextmenu},n=t.originEvent;void 0!==t.clientX&&void 0!==t.clientY&&(t.point=(0,It.CN)((0,g.__assign)((0,g.__assign)({},t),{target:n.target}))),i[e]&&(t.isDealed=!1,i[e].call(this,t))}},t.prototype.onclick=function(e){var t=function(i){i.contain(e.point)&&(i instanceof Ii&&i.eachWidgets(t),i instanceof si&&i.eachAnnotations(t),i.fire("click",e))};this.eachPanels(t),this.fire("click",e)},t.prototype.ondblclick=function(e){var t=function(i){i.contain(e.point)&&(i instanceof Ii&&i.eachWidgets(t),i instanceof si&&i.eachAnnotations(t),i.fire("dblclick",e))};this.eachPanels(t)},t.prototype.onmousedown=function(e){var t=function(i){var n=i.contain(e.point);n&&(i instanceof Ii&&i.eachWidgets(t),i instanceof si&&i.eachAnnotations(t),i.fire("mousedown",e)),i.setAttr("isMousedown",n)};this.eachPanels(t),this.fire("mousedown",e)},t.prototype.onmousemove=function(e){var t=!1,i=function(n){n instanceof Ii&&n.eachWidgets(i),n instanceof si&&n.eachAnnotations(i);var r=n.getAttr("isMouseover"),o=n.contain(e.point);o&&n.fire("mousemove",e),!t&&o?(t=n instanceof si||n instanceof Ii,!r&&n.fire("mouseover",e),n.setAttr("isMouseover",!0)):r&&(n.fire("mouseout",e),n.setAttr("isMouseover",!1))};this.eachPanels(i,!0),this.fire("mousemove",e)},t.prototype.onmouseup=function(e){var t=function(i){i.contain(e.point)&&(i instanceof Ii&&i.eachWidgets(t),i instanceof si&&i.eachAnnotations(t),i.fire("mouseup",e))};this.eachPanels(t),this.fire("mouseup",e)},t.prototype.onmouseout=function(){var e=function(t){t instanceof Ii&&t.eachWidgets(e),t.getAttr("isMouseover")&&(t.fire("mouseout"),t.setAttr("isMouseover",!1))};this.eachPanels(e),this.setCurrentItemByTime(this._maxTimestamp)},t.prototype.onmousewheel=function(e){var t=function(i){i.contain(e.point)&&(i instanceof Ii&&i.eachWidgets(t),i.fire("mousewheel",e))};this.eachPanels(t),this.fire("mousewheel",e)},t.prototype.ongesturestart=function(e){var t=function(i){i.contain(e.point)&&(i instanceof Ii&&i.eachWidgets(t),i.fire("gesturestart",e))};this.eachPanels(t),this.fire("gesturestart",e)},t.prototype.ongesturechange=function(e){var t=function(i){i.contain(e.point)&&(i instanceof Ii&&i.eachWidgets(t),i.fire("gesturechange",e))};this.eachPanels(t),this.fire("gesturechange",e)},t.prototype.ongestureend=function(e){var t=function(i){i.contain(e.point)&&(i instanceof Ii&&i.eachWidgets(t),i.fire("gestureend",e))};this.eachPanels(t),this.fire("gestureend",e)},t.prototype.oncontextmenu=function(e){var t=function(i){i.contain(e.point)&&(i instanceof Ii&&i.eachWidgets(t),i instanceof si&&i.eachAnnotations(t),i.fire("contextmenu",e))};this.eachPanels(t),this.fire("contextmenu",e),e.originEvent.preventDefault()},t.prototype.formatItem=function(e){["time","open","high","low","close","volume","quantity"].forEach((function(t){e[t]=parseFloat(e[t])}))},t.defaultConfig=(0,g.__assign)((0,g.__assign)((0,g.__assign)({},Ut.Z.defaultConfig),Ni),{precision:2,margin:{left:0,top:0,right:30,bottom:0},tick:{width:5,textMargin:2},width:0,height:0,symbol:"",interval:"",indicators:[],askBid:{ask:0,bid:0},lastUpdateItem:null,annotationVisible:!0,annotationLock:!1,onAddCustomIndicator:function(){return!1},onEditCustomIndicator:function(){return!1},onRemoveCustomIndicator:function(){return!1},needToReloadIndicator:!0,isHiddenLogo:!1,needToHiddenAnnotationTool:!0}),t}(Ri);var Zr=i(27472),Or=i(56308);Dt.E.White,Dt.E.Dark2,Dt.E.Dark4,Dt.E.Dark2,Dt.E.White,Dt.E.GrayE,Dt.E.Gray200,Dt.E.YellowF,Dt.E.Gray50,Dt.E.Gray800,Dt.E.White,Dt.E.Gray8,Dt.E.White,Dt.E.Gray800,Dt.E.Dark2,Dt.E.Gray500,Dt.E.YellowF,Dt.E.Gray600;var Nr=function(e,t){if(!e.startsWith("#"))return e;var i=e.replace("#","");return"rgba("+parseInt(i.substring(0,2),16)+","+parseInt(i.substring(2,4),16)+","+parseInt(i.substring(4,6),16)+","+t+")"},Fr=function(e){return{background:e.colors.moduleBg,"candle.upBarColor":e.colors.buy,"candle.downBarColor":e.colors.sell,"volume.upBarColor":Nr(e.colors.buy,.5),"volume.downBarColor":Nr(e.colors.sell,.5),"volume.upTextColor":e.colors.t.buy,"volume.downTextColor":e.colors.t.sell,"cross.upLabelBgColor":e.colors.buy,"cross.upLabelBorderColor":e.colors.buy,"cross.downLabelBgColor":e.colors.sell,"cross.downLabelBorderColor":e.colors.sell,"cross.defaultLabelTextColor":e.colors.t.primary,"cross.defaultLabelBgColor":e.colors.bg3,"cross.defaultLabelBorderColor":e.colors.bg3,"cross.borderLineColor":e.colors.t.third,"frame.borderLineColor":e.colors.overallBg,"vertGridLine.color":Nr(e.colors.newLine,.5),"horzGridLine.color":Nr(e.colors.newLine,.5),"countdown.upTextColor":e.colors.t.white,"countdown.upBgColor":e.colors.buyHover,"countdown.upBorderColor":e.colors.buyHover,"countdown.downTextColor":e.colors.t.white,"countdown.downBgColor":e.colors.sellHover,"countdown.downBorderColor":e.colors.sellHover,"LSratio.outline":e.colors.buy,"LSratio.area":Nr(e.colors.buy,.2),"oi.bar":Nr(e.colors.buy,.5),"BS.buy":Nr(e.colors.buy,.65),"BS.sell":Nr(e.colors.sell,.65),"basis.area":Nr(e.colors.sell,.2)}},Kr=i(18991),Ur=function(e,t){var i=(0,p.useRef)(1),n=(0,p.useRef)(t);Tt()(n.current,t)||(i.current*=-1),(0,p.useLayoutEffect)(e,[i.current])};const zr=function(e){return p.createElement(te.Z,(0,g.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),p.createElement("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM6.883 12.705a.998.998 0 011.412-1.41l2.115 2.115 4.833-4.833a1.003 1.003 0 011.419 1.42l-5.544 5.536a1 1 0 01-1.415-.001l-2.82-2.827z",clipRule:"evenodd"}))};var Xr=p.createContext({hotUpdateTrigger:!1,getI18n:function(){return""},updateValue:function(){return null},reset:function(){return null},closeDialog:function(){return null}}),Gr=function(e){var t=e.toggled,i=(0,g.__rest)(e,["toggled"]);return p.createElement(f.Z,(0,g.__assign)({},i,{sx:{width:"100%",fontSize:"sm",px:"sm",py:"10px",cursor:"pointer",alignItems:"center",justifyContent:"space-between",borderLeftWidth:"2px",borderLeftStyle:"solid",borderLeftColor:t?"primary":"transparent",color:t?"t.primary":"t.third","&:hover":{bg:"bg3"}}}),i.children)},Yr=function(e){var t=e.title,i=e.options;return p.createElement(f.Z,{sx:{flexDirection:"column",width:"100%"}},t,i.map((function(e){var t=e.value,i=e.children;return p.createElement(p.Fragment,{key:""+t},i)})))},jr=function(e){var t=e.options,i=e.children;return p.createElement(S.Z,{sx:{display:"grid",gridTemplateColumns:"156px auto",gridTemplateRows:"auto"}},p.createElement(S.Z,{sx:{paddingTop:"15px",borderRight:function(e){return"1px solid "+e.colors.line}}},p.createElement(Yr,{options:t})),i)},qr=i(39378);const Qr=function(e){var t=e.header,i=e.children,n=e.onClose,r=(0,g.__rest)(e,["header","children","onClose"]);return p.createElement(qe.ZP.Modal,(0,g.__assign)({},r,{sx:(0,g.__assign)({px:0,width:["auto","640px"],height:["100vh","560px"]},r.sx)}),p.createElement(S.Z,{sx:{bg:"modalBg",display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"min-content auto",borderRadius:"6px",height:"100%"}},p.createElement(f.Z,{sx:{justifyContent:"space-between",paddingTop:"20px",px:"25px",lineHeight:"1em",borderBottom:function(e){return"1px solid "+e.colors.line}}},t,p.createElement(qr.Z,{size:24,color:"t.third",sx:{"&:hover":{color:"primary",cursor:"pointer"}},onClick:n})),i))};var Jr=i(79847),$r=function(e){var t=e.colorPickerProps,i=(0,g.__rest)(e,["colorPickerProps"]);return p.createElement(W.ZP,(0,g.__assign)({enablePortal:!0,trigger:"click",placement:"bottom",overlay:p.createElement(Jr.Z,(0,g.__assign)({},t)),overlayProps:{sx:{mt:"minor",zIndex:1e4}},sx:{height:"100%",cursor:"pointer"}},i),p.createElement(S.Z,{sx:{width:"32px",height:"32px",borderRadius:"4px",borderWidth:"1px",borderStyle:"solid",borderColor:"t.third",backgroundImage:"url("+xi(bi.Je)+")"}},p.createElement(S.Z,{height:"100%",bg:t.color,sx:{borderRadius:"4px"}})))},eo=i(23438),to=i(27866);const io=function(e){return p.createElement(te.Z,(0,g.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),p.createElement("path",{d:"M16.5 15.51v-2.25L12 8.49l-4.5 4.77v2.25h9z",fill:"currentColor"}))};var no=i(37407),ro=function(e){var t=e.value,i=e.options,n=e.onValueChange,r=(0,g.__rest)(e,["value","options","onValueChange"]),o=(0,g.__read)((0,eo.Z)(),2),a=o[0],l=o[1].width,s=(0,p.useRef)(null),c=(0,p.useRef)(null),u=(0,g.__read)((0,p.useState)(!1),2),d=u[0],h=u[1],v=i.map((function(e){var i=e.value,r=e.children;return p.createElement(f.Z,{key:""+i,onClick:function(){return n(i)},sx:{width:"100%",height:"100%",minHeight:"40px",py:"s",px:"sm",bg:"bg3",color:i===t?"t.yellow":"t.primary",textTransform:"capitalize",fontSize:"sm",cursor:"pointer",alignItems:"center",":hover":{bg:"line"},":first-of-type":{borderTopLeftRadius:"default",borderTopRightRadius:"default"},":last-of-type":{borderBottomLeftRadius:"default",borderBottomRightRadius:"default"}}},r)})),m=(i.find((function(e){return e.value===t}))||{}).children,y=d?io:no.Z;return(0,to.Z)(c,(function(e){var t;(null===(t=s.current)||void 0===t?void 0:t.contains(e.target))||h(!1)})),p.createElement(W.ZP,(0,g.__assign)({},r,{ref:a,enablePortal:!0,open:d,onClick:function(){return h((function(e){return!e}))},overlay:p.createElement(S.Z,{ref:c,sx:{minWidth:l}},v),overlayProps:{sx:{zIndex:1e5}}}),p.createElement(f.Z,{ref:s,sx:{bg:"bg3",width:"100%",height:"100%",alignItems:"center",cursor:"pointer",color:r.disabled?"t.disabled":"t.primary",textTransform:"capitalize",fontSize:"sm",borderRadius:"default",p:"xs"}},p.createElement(S.Z,{sx:{flex:"1"}},m),p.createElement(y,{size:16,sx:{color:"t.third"}})))},oo=function(e){var t=e.children,i=e.wrapWithLabel,n=void 0===i||i,r=(0,g.__rest)(e,["children","wrapWithLabel"]);return n?p.createElement(w.Z,null,p.createElement(de.Z,(0,g.__assign)({},r)),t):p.createElement(f.Z,null,p.createElement(w.Z,{sx:{width:"auto"}},p.createElement(de.Z,(0,g.__assign)({},r))),t)};const ao=function(e){return p.createElement(te.Z,(0,g.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),p.createElement("path",{d:"M16 18.172a1 1 0 01-1.414 1.414L8 13a1 1 0 010-1.414L14.586 5A1 1 0 1116 6.414l-5.879 5.879 5.88 5.879z"}))};var lo,so=function(e){var t=e.title,i=e.description,n=e.children,r=e.footer,o=e.headerHeight,a=void 0===o?"66px":o,l=e.showBack,s=e.onBack,c=void 0===s?function(){return null}:s;return p.createElement(S.Z,{sx:{display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"auto min-content",maxHeight:"calc(100vh - "+a+")",width:"100%",overflow:"hidden"}},p.createElement(S.Z,{sx:{overflow:"hidden"}},p.createElement(S.Z,{sx:{display:"grid",px:"25px",py:"20px",gap:"20px",gridAutoFlow:"row",gridAutoRows:"min-content",height:"100%",overflow:"auto"}},p.createElement(f.Z,{sx:{flexDirection:"row",alignItems:"center"}},l&&p.createElement(ao,{size:15,color:"t.third",onClick:c,sx:{mr:"10px",cursor:"pointer"}}),p.createElement(C.Z,{sx:{fontSize:"md",lineHeight:"24px",color:"t.primary"}},t)),i?p.createElement(C.Z,{sx:{fontSize:"sm",lineHeight:"20px",color:"t.third"}},i):null,n)),p.createElement(S.Z,{sx:{p:"25px"}},r))},co=function(e){var t=e.resetField,i=e.saveField;return p.createElement(S.Z,{sx:{display:"grid",gap:"10px",justifyContent:["center","end"],gridAutoColumns:["1fr","auto"],gridAutoFlow:"column"}},p.createElement(A.Z,(0,g.__assign)({sz:"normal",variant:"default",colorStyle:"secondary",sx:{width:["100%","128px"]}},t)),p.createElement(A.Z,(0,g.__assign)({sz:"normal",variant:"default",sx:{width:["100%","128px"]}},i)))},uo=function(e){var t=e.fields,i=e.wrapperProps,n=void 0===i?{}:i,r=e.headProps,o=void 0===r?{}:r,a=e.bodyProps,l=void 0===a?{}:a;return p.createElement(S.Z,(0,g.__assign)({},n,{sx:(0,g.__assign)({display:"grid",gridTemplateColumns:"1fr 1fr",rowGap:"20px",columnGap:"10px"},null==n?void 0:n.sx)}),t.map((function(e,t){var i=e.head,n=e.children;return[p.createElement(f.Z,(0,g.__assign)({key:"head-"+t},o,{sx:(0,g.__assign)({display:"grid",gridAutoRows:"30px",alignItems:"center"},null==o?void 0:o.sx)}),i),p.createElement(S.Z,(0,g.__assign)({key:"children-"+t},l,{sx:(0,g.__assign)({display:["grid","flex"],gap:["10px","20px"],gridTemplateColumns:"1fr 1fr",gridAutoRows:"30px"},null==l?void 0:l.sx)}),n)]})))},ho=function(e){var t=e.title,i=e.colorLabel,n=e.resetField,r=e.saveField,o=e.colorField,a=e.vertGridLinesField,l=e.vertGridLinesWidthField,s=e.vertGridLinesColorField,c=e.horzGridLinesField,u=e.horzGridLinesWidthField,d=e.horzGridLinesColorField,h=[{head:p.createElement(C.Z,{sx:{fontSize:"sm",color:"t.primary"}},i),children:p.createElement($r,{colorPickerProps:o})},{head:p.createElement(oo,(0,g.__assign)({},a)),children:[p.createElement(ro,(0,g.__assign)({key:"1"},l)),p.createElement($r,{key:"2",colorPickerProps:s})]},{head:p.createElement(oo,(0,g.__assign)({},c)),children:[p.createElement(ro,(0,g.__assign)({key:"1"},u)),p.createElement($r,{key:"2",colorPickerProps:d})]}];return p.createElement(so,{title:t,footer:p.createElement(co,{resetField:n,saveField:r})},p.createElement(uo,{fields:h}))};!function(e){e.CandleBar="CANDLEBAR",e.HollowCandleBar="HOLLOW_CANDLEBAR"}(lo||(lo={}));var go=Object.values(Ti),po=Object.values(Mi),fo=["0.5","1","2","3"],vo=fo.map((function(e){return{value:e,children:p.createElement(S.Z,{sx:{bg:"t.third",width:"100%",height:Math.ceil(+e)+"px"}})}})),mo=[{value:Vi.High,i18nKey:"indicator-high-label"},{value:Vi.Low,i18nKey:"indicator-low-label"},{value:Vi.Open,i18nKey:"indicator-open-label"},{value:Vi.Close,i18nKey:"indicator-close-label"}],yo=function(e){return mo.map((function(t){var i=t.value,n=t.i18nKey;return{value:i,children:e(n,(0,It.kC)(i))}}))},xo=[{value:lo.CandleBar,defaultText:"Solid",i18nKey:"chartSetting-solid"},{value:lo.HollowCandleBar,defaultText:"Hollow",i18nKey:"chartSetting-hollow"}],bo=function(e){return xo.map((function(t){var i=t.value,n=t.defaultText,r=t.i18nKey;return{value:i,children:e(r,n)}}))},Co=[{value:Ai.Hollow,defaultText:"Hollow",i18nKey:"chartSetting-hollow"},{value:Ai.Solid,defaultText:"Solid",i18nKey:"chartSetting-solid"}],_o=function(e){var t=e.settingManager,i=(0,p.useContext)(Xr),n=i.getI18n,r=i.updateValue,o=i.reset,a=i.closeDialog,l=t.getBackgroundDescription(),s=(0,p.useCallback)((function(){return o("@background")}),[o]),c=(0,p.useCallback)((function(e){return r(l.colorKey,e,l.pristineKey)}),[r,l.colorKey]),u=(0,p.useCallback)((function(e){return r(l.vertGridLineShowKey,!!e.currentTarget.checked,l.pristineKey)}),[r,l.vertGridLineShowKey]),d=(0,p.useCallback)((function(e){return r(l.vertGridLineLineWidthKey,e,l.pristineKey)}),[r,l.vertGridLineLineWidthKey]),h=(0,p.useCallback)((function(e){return r(l.vertGridLineColorKey,e,l.pristineKey)}),[r,l.vertGridLineColorKey]),g=(0,p.useCallback)((function(e){return r(l.horzGridLineShowKey,!!e.currentTarget.checked,l.pristineKey)}),[r,l.horzGridLineShowKey]),f=(0,p.useCallback)((function(e){return r(l.horzGridLineLineWidthKey,e,l.pristineKey)}),[r,l.horzGridLineLineWidthKey]),v=(0,p.useCallback)((function(e){return r(l.horzGridLineColorKey,e,l.pristineKey)}),[r,l.horzGridLineColorKey]);return p.createElement(ho,{title:n("chartSetting-background","Background"),colorLabel:n("chartSetting-color","Color"),resetField:{children:n("chartSetting-reset","Reset"),onClick:s},saveField:{children:n("chartSetting-save","Save"),onClick:a},colorField:{color:l.color,onChange:c,getI18n:n},vertGridLinesField:{checked:l.vertGridLineShow,onChange:u,children:p.createElement(C.Z,{variant:"formLabel"},n("chartSetting-vertGridLines","Vert Grid Lines"))},vertGridLinesWidthField:{value:l.vertGridLineLineWidth,options:vo,onValueChange:d,sx:{width:"100px"}},vertGridLinesColorField:{color:l.vertGridLineColor,onChange:h,getI18n:n},horzGridLinesField:{checked:l.horzGridLineShow,onChange:g,children:p.createElement(C.Z,{variant:"formLabel"},n("chartSetting-horzGridLines","Horz Grid Lines"))},horzGridLinesWidthField:{value:l.horzGridLineLineWidth,options:vo,onValueChange:f,sx:{width:"100px"}},horzGridLinesColorField:{color:l.horzGridLineColor,onChange:v,getI18n:n}})},wo=function(e){var t=e.title,i=e.candlestickStyleLabel,n=e.candlestickColorLabel,r=e.candlestickBorderLabel,o=e.candlestickWickLabel,a=e.resetField,l=e.saveField,s=e.candletsickStyleField,c=e.candlestickUpColorField,u=e.candlestickDownColorField,d=e.candlestickBorderUpColorField,h=e.candlestickBorderDownColorField,f=e.candlestickWickUpColorField,v=e.candlestickWickDownColorField,m=[{head:p.createElement(C.Z,{sx:{fontSize:"sm",color:"t.primary"}},i),children:p.createElement(ro,(0,g.__assign)({},s))},{head:p.createElement(C.Z,{sx:{fontSize:"sm",color:"t.primary"}},n),children:[p.createElement($r,{key:"1",colorPickerProps:c}),p.createElement($r,{key:"2",colorPickerProps:u})]},{head:p.createElement(C.Z,{sx:{fontSize:"sm",color:"t.primary"}},r),children:[p.createElement($r,{key:"1",colorPickerProps:d}),p.createElement($r,{key:"2",colorPickerProps:h})]},{head:p.createElement(C.Z,{sx:{fontSize:"sm",color:"t.primary"}},o),children:[p.createElement($r,{key:"1",colorPickerProps:f}),p.createElement($r,{key:"2",colorPickerProps:v})]}];return p.createElement(so,{title:t,footer:p.createElement(co,{resetField:a,saveField:l})},p.createElement(uo,{fields:m}))},So=function(e){var t=e.settingManager,i=(0,p.useContext)(Xr),n=i.getI18n,r=i.reset,o=i.updateValue,a=i.closeDialog,l=t.getSymbolDescription(),s=(0,p.useCallback)((function(){return r("@symbol")}),[r]),c=(0,p.useCallback)((function(e){return o(l.styleKey,e,l.pristineKey)}),[o,l.styleKey]),u=(0,p.useCallback)((function(e){return o(l.upColorKey,e,l.pristineKey)}),[o,l.upColorKey]),d=(0,p.useCallback)((function(e){return o(l.downColorKey,e,l.pristineKey)}),[o,l.downColorKey]),h=(0,p.useCallback)((function(e){return o(l.upBorderColorKey,e,l.pristineKey)}),[o,l.upBorderColorKey]),g=(0,p.useCallback)((function(e){return o(l.downBorderColorKey,e,l.pristineKey)}),[o,l.downBorderColorKey]),f=(0,p.useCallback)((function(e){return o(l.upWickColorKey,e,l.pristineKey)}),[o,l.upWickColorKey]),v=(0,p.useCallback)((function(e){return o(l.downWickColorKey,e,l.pristineKey)}),[o,l.downWickColorKey]);return p.createElement(wo,{title:n("chartSetting-symbol","Symbol"),candlestickStyleLabel:n("chartSetting-candlestick-style","Bullish Candle Stick"),candlestickColorLabel:n("chartSetting-candlestick","Candle Stick"),candlestickBorderLabel:n("chartSetting-candlestick-borders","Borders"),candlestickWickLabel:n("chartSetting-candlestick-wick","Wick"),resetField:{children:n("chartSetting-reset","Reset"),onClick:s},saveField:{children:n("chartSetting-save","Save"),onClick:a},candletsickStyleField:{value:l.style,options:bo(n),onValueChange:c,sx:{width:"100px"}},candlestickUpColorField:{color:l.upColor,onChange:u,getI18n:n},candlestickDownColorField:{color:l.downColor,onChange:d,getI18n:n},candlestickBorderUpColorField:{color:l.upBorderColor,onChange:h,getI18n:n},candlestickBorderDownColorField:{color:l.downBorderColor,onChange:g,getI18n:n},candlestickWickUpColorField:{color:l.upWickColor,onChange:f,getI18n:n},candlestickWickDownColorField:{color:l.downWickColor,onChange:v,getI18n:n}})},Lo=["symbol","background"],Eo=function(e){var t=e.visible,i=e.setVisible,n=e.getI18n,r=e.settingManager,o=e.candlestickInstance,a=e.forceUpdate,l=e.onSettingChanged,s=e.onSettingReseted,c=(0,g.__read)((0,p.useState)(!1),2),u=c[0],d=c[1],h=(0,p.useCallback)((function(){return d((function(e){return!e}))}),[d]),f=(0,p.useCallback)((function(e,t,i){r.setValue(e,t),i&&r.setValue(i,!1),null==o||o.update(),l(e,t),h(),a()}),[r,h,a]),v=(0,p.useCallback)((function(e){var t,i=r.getDefaultValue(e);r.setValues(((t={})[e]=i,t)),null==o||o.update(),s(e),h(),a()}),[r,h,a]),m=(0,p.useCallback)((function(){return i(!1)}),[i]),y=(0,g.__read)((0,p.useState)(Lo[0]),2),x=y[0],b=y[1],_=(0,p.useMemo)((function(){return[{value:Lo[0],children:p.createElement(Gr,{toggled:x===Lo[0],onClick:function(){return b(Lo[0])}},n("chartSetting-symbol","Symbol"))},{value:Lo[1],children:p.createElement(Gr,{toggled:x===Lo[1],onClick:function(){return b(Lo[1])}},n("chartSetting-background","Background"))}]}),[n,x]),w=(0,p.useMemo)((function(){switch(x){case Lo[0]:return p.createElement(So,{settingManager:r});case Lo[1]:return p.createElement(_o,{settingManager:r});default:return null}}),[x]);return p.createElement(Xr.Provider,{value:{getI18n:n,updateValue:f,reset:v,closeDialog:m,hotUpdateTrigger:u}},p.createElement(Qr,{header:p.createElement(C.Z,{sx:{color:"t.primary",fontSize:"20px"}},n("chartSetting-title","Chart Setting")),visible:t,onClose:m},p.createElement(jr,{options:_},w)))},ko=i(21209);const Vo=function(e){return p.createElement(te.Z,(0,g.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),p.createElement("path",{d:"M12 10.586l5.95-5.95a1 1 0 111.414 1.414L13.414 12l5.95 5.95a1 1 0 01-1.414 1.414L12 13.414l-5.95 5.95a1 1 0 01-1.414-1.414l5.95-5.95-5.95-5.95A1 1 0 116.05 4.636l5.95 5.95z"}))};var Ao=i(19034),To=i.n(Ao),Mo=i(72779),Do=i.n(Mo),Io=i(74895),Po=i(12383),Bo=i(20573),Wo=i(43352),Ro=i(81448),Ho=i(15799),Zo=i(20581),Oo=i(15275),No=i(67469),Fo=i(41065),Ko=(0,p.forwardRef)((function(e,t){var i=e.containerSx,n=e.locale,r=e.dropdownClassName,o=e.direction,a=void 0===o?"ltr":o,l=e.allowClear,s=void 0===l||l,c=(0,g.__rest)(e,["containerSx","locale","dropdownClassName","direction","allowClear"]),u=function(e){var t={};if("value"in e&&/^\d+$/.test(""+e.value)){var i=To()(+e.value);""+ +i==""+e.value&&(t.value=i)}return t}(e),d=(0,Wo.Fg)(),h=(0,Oo.N)(d),f=(0,p.useState)(!1),v=f[0],m=f[1],y=(0,No.bU)(n),x=Do()(r,"bn-single-picker-dropdown"),b={generateConfig:Po.Z};return p.createElement(S.Z,{sx:i,__css:{display:"inline-flex",width:"184px",height:"32px",border:"1px solid "+(v?d.colors.primary:d.colors.line),borderRadius:"small",".rc-picker .rc-picker-input > input":{pl:"xs",py:"0px",outline:"none",border:"none",color:"t.primary",bg:"inherit",fontSize:"sm","&::placeholder":{color:"t.placeholder"}},".rc-picker":{width:"100%",paddingRight:"xs",".rc-picker-input":{justifyContent:"space-between"},"&:hover":{".rc-picker-clear":{opacity:1}}},".rc-picker-clear":{position:"absolute",display:"flex",alignItems:"center",right:0,top:"50%",transform:"translateY(-50%)",color:"t.third",opacity:0,transition:".3s opacity linear",cursor:"pointer"},".rc-picker-suffix":{display:"flex",alignItems:"center",color:"t.third"}}},p.createElement(Io.Z,(0,g.__assign)({dropdownClassName:x,ref:t},b,{locale:y.content,"data-bn-type":"picker",placeholder:"YYYY-MM-DD",allowClear:s,open:v,direction:a,onOpenChange:function(e){m(e)},clearIcon:p.createElement(Ro.Z,{size:16}),suffixIcon:p.createElement(Ho.Z,{size:16})},Fo.m[a],c,u)),p.createElement(Bo.xB,{styles:(0,Bo.iv)(zo||(zo=(0,g.__makeTemplateObject)(["\n          ","\n        "],["\n          ","\n        "])),Zo.Z)}),p.createElement(Bo.xB,{styles:h}))}));Ko.displayName="Picker";const Uo=Ko;var zo,Xo={width:"100%",".rc-picker .rc-picker-input > input":{cursor:"not-allowed",color:"t.disabled",borderColor:"line"},"> .bn-picker-input-suffix > svg":{color:"t.disabled"}},Go={width:"100%",".rc-picker .rc-picker-input > input":{cursor:"pointer"}};const Yo=function(e){var t=e.visible,i=void 0===t||t,n=e.querying,r=void 0!==n&&n,o=e.getI18n,a=void 0===o?function(e){return e}:o,l=e.onClose,s=e.onDateChange,c=(0,p.useRef)(Date.now()),u=(0,g.__read)((0,p.useState)(!1),2),d=u[0],h=u[1],v=(0,p.useMemo)((function(){return r?Xo:Go}),[r]),m=(0,p.useMemo)((function(){return a("go-to-date-querying","Querying...")||""}),[a]),y=(0,p.useCallback)((function(e){null==s||s(e.valueOf()),h(!1)}),[s]);return(0,p.useLayoutEffect)((function(){r||setTimeout((function(){h(!0)}),500)}),[]),p.createElement(ko.Z,{visible:i,sx:{width:"552px",borderRadius:"6px",overflow:"hidden"}},p.createElement(f.Z,{sx:{bg:"modalBg",height:"100%",p:"md",flexDirection:"column"}},p.createElement(f.Z,{sx:{justifyContent:"space-between",mb:"22px"}},p.createElement(C.Z,{sx:{color:"t.primary",fontSize:"20px"}},a("contextMenu-goDate","Go to date")),p.createElement(Vo,{size:16,color:"t.third",sx:{cursor:"pointer",":hover":{color:"t.primary"}},onClick:l})),p.createElement(C.Z,{sx:{color:"t.yellow",fontSize:"12px",lineHeight:"16px",mb:"6px",whiteSpace:"no-wrap"}},r?m:p.createElement("span",null,"")),p.createElement(Uo,{dropdownAlign:{overflow:{alwaysByViewport:!1}},showTime:!0,mVisible:!0,allowClear:!1,containerSx:v,onChange:y,open:d,defaultValue:To()(),disabled:!d,disabledDate:function(e){return e.valueOf()>c.current}})))};var jo,qo;!function(e){e.GoDate="goDate",e.CountDown="countDown",e.BidAsk="bidAsk",e.Setting="setting",e.PriceLine="priceLine"}(qo||(qo={}));var Qo=[qo.GoDate,qo.CountDown,qo.BidAsk,qo.PriceLine,qo.Setting],Jo=((jo={})[qo.GoDate]={id:qo.GoDate,label:"Go to Date",i18nKey:"contextMenu-goDate",showToggleIcon:!1},jo[qo.CountDown]={id:qo.CountDown,label:"Count Down",i18nKey:"contextMenu-countdown",showToggleIcon:!0},jo[qo.BidAsk]={id:qo.BidAsk,label:"Bid & Ask Price",i18nKey:"contextMenu-bidAndAskPrice",showToggleIcon:!0},jo[qo.PriceLine]={id:qo.PriceLine,label:"Market Price Line",i18nKey:"contextMenu-priceLine",showToggleIcon:!0},jo[qo.Setting]={id:qo.Setting,label:"Setting",i18nKey:"contextMenu-setting",showToggleIcon:!1},jo),$o={cursor:"pointer",px:"xs",justifyContent:"space-between",lineHeight:"40px",fontSize:"xs",alignItems:"center","&:hover":{bg:"search.hoverBg"}},ea=function(e){var t=e.id,i=e.label,n=e.isActive,r=void 0!==n&&n,o=e.isShowSelectIcon,a=void 0!==o&&o,l=e.onClick;return p.createElement(f.Z,{onClick:function(){return l(t)},color:"t.primary",sx:$o},i,a&&r&&p.createElement(zr,{size:16,ml:"sm",color:"primary"}))};const ta=function(e){var t=e.wrapRef,i=e.visible,n=e.candlestickInstance,r=e.left,o=e.top,a=e.close,l=e.getI18n,s=e.settingManager,c=e.forceUpdate,u=e.onSettingChanged,d=e.onSettingReseted,h=e.menuItems,f=void 0===h?Qo:h,v=(0,p.useRef)(),m=(0,g.__read)((0,p.useState)(!1),2),y=m[0],x=m[1],b=(0,g.__read)((0,p.useState)(!1),2),C=b[0],_=b[1],w=(0,g.__read)((0,p.useState)(!1),2),L=w[0],E=w[1],k=(0,g.__read)((0,p.useState)({}),2),V=k[0],A=k[1],T=(0,p.useCallback)((function(e,t){A((function(i){var n;return(0,g.__assign)((0,g.__assign)({},i),((n={})[e]=t,n))}))}),[]);(0,p.useEffect)((function(){if(s.isLoaded()){var e=s.getValue("@contextMenu.countDown")||s.getDefaultValue("@contextMenu.countDown"),t=s.getValue("@contextMenu.bidAsk")||s.getDefaultValue("@contextMenu.bidAsk"),i=s.getValue("@contextMenu.priceLine")||s.getDefaultValue("@contextMenu.priceLine");T(qo.CountDown,e),T(qo.BidAsk,t),T(qo.PriceLine,i)}}),[s.isLoaded()]);var M,D,I=(0,p.useCallback)((function(e){switch(e){case qo.GoDate:x(!0);break;case qo.Setting:_(!0);break;case qo.CountDown:var t=null==n?void 0:n.getSettingValues("@contextMenu.countDown");T(qo.CountDown,!t),null==n||n.setSettingValues("@contextMenu.countDown",!t),null==n||n.update(),a();break;case qo.BidAsk:t=null==n?void 0:n.getSettingValues("@contextMenu.bidAsk"),T(qo.BidAsk,!t),null==n||n.setSettingValues("@contextMenu.bidAsk",!t),null==n||n.update(),a();break;case qo.PriceLine:t=null==n?void 0:n.getSettingValues("@contextMenu.priceLine"),T(qo.PriceLine,!t),null==n||n.setSettingValues("@contextMenu.priceLine",!t),null==n||n.update(),a()}}),[a,n,T]),P=(0,p.useCallback)((function(){a&&a()}),[a]),B=(0,p.useCallback)((function(){x(!1),a&&a()}),[a]),W=(0,p.useCallback)((function(e){_(e),a&&a()}),[a]);M=v,D=P,(0,p.useEffect)((function(){var e=function(e){M.current&&!M.current.contains(e.target)&&D(e)};return document.addEventListener("click",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("click",e),document.removeEventListener("touchstart",e)}}),[M,D]);var R=(0,p.useCallback)((function(e){E(!0),null==n||n.goDate(e,(function(){B(),E(!1)}))}),[n,E,B]);return(0,p.useEffect)((function(){T(qo.CountDown,null==n?void 0:n.getSettingValues("@contextMenu.countDown"))}),[T,n]),(0,p.useEffect)((function(){if(i&&v.current){var e=t.getBoundingClientRect(),n=v.current.getBoundingClientRect(),a=e.left+r,l=e.top+o,s=e.right-(a+n.width),c=e.bottom-(l+n.height),u=s<0?r+s:r,d=c<0?o+c:o;v.current.style.left=u+"px",v.current.style.top=d+"px"}}),[i,r,o]),i?y?p.createElement(Yo,{visible:y,querying:L,getI18n:l,onClose:B,onDateChange:R}):C?p.createElement(Eo,{visible:C,setVisible:W,getI18n:l,settingManager:s,candlestickInstance:n,forceUpdate:c,onSettingChanged:u,onSettingReseted:d}):p.createElement(S.Z,{ref:v,sx:{position:"absolute",borderRadius:"4px",py:"minor",zIndex:9999,whiteSpace:"nowrap"},bg:"popupBg"},f.map((function(e){var t=Jo[e],i=t.id,n=t.i18nKey,r=t.label,o=t.showToggleIcon;return p.createElement(ea,{key:i,label:l(n,r),id:i,isActive:!!V[i],isShowSelectIcon:o,onClick:I})}))):null};var ia=i(55521),na=function(e){var t;return p.createElement(Qe.Z,(0,g.__assign)({},e,{variant:"filled",sx:(0,g.__assign)({bg:"inputBg",height:"auto"},e.sx),boxProps:{sx:(0,g.__assign)({height:"auto"},null===(t=null==e?void 0:e.boxProps)||void 0===t?void 0:t.sx)}}))},ra={wrapperProps:{sx:{gridTemplateColumns:["auto 1fr","175px 1fr"]}},bodyProps:{sx:{display:"grid",gridTemplateColumns:["1fr 1fr","repeat(auto-fit, minmax(50px, 1fr))"],gridAutoFlow:["dense","column"],gap:"10px"}}},oa=function(e){var t=e.id,i=e.key,n=e.needReload,r=void 0===n||n,o=e.updateValue;return function(e){isNaN(+e.target.value)||o({id:t,key:i,value:e.target.value,needReload:r})}},aa=function(e){var t=e.id,i=e.key,n=e.needReload,r=void 0!==n&&n,o=e.updateValue;return function(e){return o({id:t,key:i,value:!!e.currentTarget.checked,needReload:r})}},la=function(e){var t=e.id,i=e.key,n=e.needReload,r=void 0===n||n,o=e.updateValue;return function(e){return o({id:t,key:i,value:e,needReload:r})}},sa=function(e){var t=e.id,i=e.key,n=e.needReload,r=void 0!==n&&n,o=e.updateValue;return function(e){return o({id:t,key:i,value:e,needReload:r})}},ca=function(e){var t=e.title,i=e.id,n=e.name,r=e.settingManager,o=e.getI18n,a=e.updateValue,l=r.getMADescriptions(n).map((function(e){var t=e.label,n=e.visible,r=e.source,l=e.period,s=e.lineWidth,c=e.color,u=e.periodsKey,d=e.sourcesKey,h=e.colorsKey,g=e.lineWidthsKey,f=e.visiblesKey;return{head:p.createElement(oo,{checked:n,onChange:aa({id:i,key:f,updateValue:a})},p.createElement(C.Z,{variant:"formLabel"},t)),children:[p.createElement(na,{key:u,defaultValue:""+l,onBlur:oa({id:i,key:u,updateValue:a})}),p.createElement(ro,{key:d,options:yo(o),value:""+r,onValueChange:la({id:i,key:d,updateValue:a})}),p.createElement(ro,{key:g,options:vo,value:""+s,onValueChange:la({id:i,key:g,needReload:!1,updateValue:a})}),p.createElement($r,{key:h,colorPickerProps:{color:c,onChange:sa({id:i,key:h,updateValue:a}),getI18n:o}})]}}));return{title:t,description:"",component:p.createElement(uo,(0,g.__assign)({fields:l},ra,{wrapperProps:{sx:{gridTemplateColumns:"auto 1fr"}}}))}},ua=i(8335),da=function(e){var t=e.bg;return p.createElement(S.Z,{sx:{width:"32px",height:"32px",borderRadius:"4px",borderWidth:"1px",borderStyle:"solid",borderColor:"line"}},p.createElement(S.Z,{sx:{height:"100%",borderRadius:"4px",bg:t}}))},ha=function(e){var t=e.checked,i=e.onClick,n=(0,g.__rest)(e,["checked","onClick"]);return p.createElement(S.Z,{onClick:function(){return i(n.bg)},sx:{position:"relative",cursor:"pointer"}},p.createElement(da,(0,g.__assign)({},n)),t&&p.createElement(ua.Z,{color:"line",size:32,sx:{pointerEvents:"none",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}))},ga=function(e){var t=e.value,i=e.options,n=e.onChange;return p.createElement(f.Z,{sx:{bg:"modalBg",flexDirection:"row",borderRadius:"4px",py:"10px",px:"16px","& > *:not(:last-child)":{mr:"16px"}}},i.map((function(e,i){return p.createElement(ha,{key:i,bg:e,checked:t===e,onClick:n})})))},pa=function(e){var t=e.value,i=e.options,n=e.onChange;return p.createElement(W.ZP,{enablePortal:!0,trigger:"click",placement:"bottom",overlay:p.createElement(ga,{value:t,options:i,onChange:n}),overlayProps:{sx:{mt:"minor",zIndex:1e4}},sx:{height:"100%",cursor:"pointer"}},p.createElement(da,{bg:t}))},fa=function(e){switch(e.id){case Ti.MA:return t=e,ca((0,g.__assign)((0,g.__assign)({},t),{title:"MA - "+t.getI18n("indicator-MA-title","Moving Average"),name:"MA"}));case Ti.EMA:return function(e){return ca((0,g.__assign)((0,g.__assign)({},e),{title:"EMA - "+e.getI18n("indicator-EMA-title","Exponential Moving Average"),name:"EMA"}))}(e);case Ti.WMA:return function(e){return ca((0,g.__assign)((0,g.__assign)({},e),{title:"WMA - "+e.getI18n("indicator-WMA-title","Weighted Moving Average"),name:"WMA"}))}(e);case Ti.BOLL:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getBOLLDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.stdDevLabel),children:[p.createElement(na,{key:o.stdDevKey,defaultValue:""+o.stdDev,onBlur:oa({id:t,key:o.stdDevKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(oo,{key:o.upVisibleKey,checked:o.upVisible,onChange:aa({id:t,key:o.upVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.upLabel)),children:[p.createElement(ro,{key:o.upLineWidthKey,options:vo,value:""+o.upLineWidth,onValueChange:la({id:t,key:o.upLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.upColorKey,colorPickerProps:{color:o.upColor,onChange:sa({id:t,key:o.upColorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(oo,{key:o.mbVisibleKey,checked:o.mbVisible,onChange:aa({id:t,key:o.mbVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.mbLabel)),children:[p.createElement(ro,{key:o.mbLineWidthKey,options:vo,value:""+o.mbLineWidth,onValueChange:la({id:t,key:o.mbLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.mbColorKey,colorPickerProps:{color:o.mbColor,onChange:sa({id:t,key:o.mbColorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(oo,{key:o.dnVisibleKey,checked:o.dnVisible,onChange:aa({id:t,key:o.dnVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.dnLabel)),children:[p.createElement(ro,{key:o.dnLineWidthKey,options:vo,value:""+o.dnLineWidth,onValueChange:la({id:t,key:o.dnLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.dnColorKey,colorPickerProps:{color:o.dnColor,onChange:sa({id:t,key:o.dnColorKey,updateValue:n}),getI18n:r}})]}];return{title:"BOLL - "+r("indicator-BOLL-title","Bollinger Bands"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Ti.VWAP:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getVWAPDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:n})}),p.createElement(ro,{key:o.lineWidthKey,options:vo,value:""+o.lineWidth,onValueChange:la({id:t,key:o.lineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:n}),getI18n:r}})]}];return{title:"VWAP - "+r("indicator-VWAP-title","Volume Weighted Average Price"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Ti.AVL:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getAVLDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.label),children:[p.createElement(ro,{key:o.lineWidthKey,options:vo,value:""+o.lineWidth,onValueChange:la({id:t,key:o.lineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:n}),getI18n:r}})]}];return{title:"AVL - "+r("indicator-AVL-title","Average Value Line"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Ti.TRIX:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getTRIXDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:n})}),p.createElement(ro,{key:o.lineWidthKey,options:vo,value:""+o.lineWidth,onValueChange:la({id:t,key:o.lineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:n}),getI18n:r}})]}];return{title:"TRIX - "+r("indicator-TRIX-title","Triple Exponentially Smoothed Average"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Ti.SAR:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getSARDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.startLabel),children:[p.createElement(na,{key:o.startKey,defaultValue:""+o.start,onBlur:oa({id:t,key:o.startKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.maxLabel),children:[p.createElement(na,{key:o.maxKey,defaultValue:""+o.max,onBlur:oa({id:t,key:o.maxKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.colorLabel),children:[p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:n}),getI18n:r}})]}];return{title:"SAR - "+r("indicator-SAR-title","Stop and Reverse"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.VOL:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getVOLDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:n})}),p.createElement($r,{key:o.maColorKey,colorPickerProps:{color:o.maColor,onChange:sa({id:t,key:o.maColorKey,updateValue:n}),getI18n:r}})]}];return{title:"Vol - "+r("indicator-Vol-title","Volume"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.MACD:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getMACDDescriptions(),a=function(e){return Co.map((function(t){var i=t.value,n=t.defaultText,r=t.i18nKey;return{value:i,children:e(r,n)}}))}(r),l=[i.getDefaultValue(o.longGrowthColorKey),i.getDefaultValue(o.shortGrowthColorKey)],s=[{head:p.createElement(C.Z,{variant:"formLabel"},o.fastLabel),children:[p.createElement(na,{key:o.fastKey,defaultValue:""+o.fastLength,onBlur:oa({id:t,key:o.fastKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.slowLabel),children:[p.createElement(na,{key:o.slowKey,defaultValue:""+o.slowLength,onBlur:oa({id:t,key:o.slowKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.signalLabel),children:[p.createElement(na,{key:o.signalKey,defaultValue:""+o.signalLength,onBlur:oa({id:t,key:o.signalKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(oo,{key:o.deaVisibleKey,checked:o.deaVisible,onChange:aa({id:t,key:o.deaVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.deaLabel)),children:[p.createElement(ro,{key:o.deaLineWidthKey,options:vo,value:""+o.deaLineWidth,onValueChange:la({id:t,key:o.deaLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.deaColorKey,colorPickerProps:{color:o.deaColor,onChange:sa({id:t,key:o.deaColorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(oo,{key:o.difVisibleKey,checked:o.difVisible,onChange:aa({id:t,key:o.difVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.difLabel)),children:[p.createElement(ro,{key:o.difLineWidthKey,options:vo,value:""+o.difLineWidth,onValueChange:la({id:t,key:o.difLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.difColorKey,colorPickerProps:{color:o.difColor,onChange:sa({id:t,key:o.difColorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(oo,{key:o.macdVisibleKey,checked:o.macdVisible,onChange:aa({id:t,key:o.macdVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.macdLabel)),children:[p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.longGrowthLabel),children:[p.createElement(ro,{key:o.longGrowthStyleKey,options:a,value:o.longGrowthStyle,onValueChange:la({id:t,key:o.longGrowthStyleKey,needReload:!1,updateValue:n})}),p.createElement(pa,{key:o.longGrowthColorKey,options:l,value:o.longGrowthColor,onChange:la({id:t,key:o.longGrowthColorKey,needReload:!1,updateValue:n})})]},{head:p.createElement(C.Z,{variant:"formLabel"},o.longFallLabel),children:[p.createElement(ro,{key:o.longFallStyleKey,options:a,value:o.longFallStyle,onValueChange:la({id:t,key:o.longFallStyleKey,needReload:!1,updateValue:n})}),p.createElement(pa,{key:o.longFallColorKey,options:l,value:o.longFallColor,onChange:la({id:t,key:o.longFallColorKey,needReload:!1,updateValue:n})})]},{head:p.createElement(C.Z,{variant:"formLabel"},o.shortGrowthLabel),children:[p.createElement(ro,{key:o.shortGrowthStyleKey,options:a,value:o.shortGrowthStyle,onValueChange:la({id:t,key:o.shortGrowthStyleKey,needReload:!1,updateValue:n})}),p.createElement(pa,{key:o.shortGrowthColorKey,options:l,value:o.shortGrowthColor,onChange:la({id:t,key:o.shortGrowthColorKey,needReload:!1,updateValue:n})})]},{head:p.createElement(C.Z,{variant:"formLabel"},o.shortFallLabel),children:[p.createElement(ro,{key:o.shortFallStyleKey,options:a,value:o.shortFallStyle,onValueChange:la({id:t,key:o.shortFallStyleKey,needReload:!1,updateValue:n})}),p.createElement(pa,{key:o.shortFallColorKey,options:l,value:o.shortFallColor,onChange:la({id:t,key:o.shortFallColorKey,needReload:!1,updateValue:n})})]}];return{title:r("indicator-MACD-title","Moving Average Convergence Divergence"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:s},ra))}}(e);case Mi.RSI:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getRSIDescriptions().map((function(e){var i=e.label,o=e.periodsKey,a=e.lineWidthsKey,l=e.colorsKey,s=e.visiblesKey,c=e.period,u=e.lineWidth,d=e.color,h=e.visible;return{head:p.createElement(oo,{key:s,checked:h,onChange:aa({id:t,key:s,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},i)),children:[p.createElement(na,{key:o,defaultValue:""+c,onBlur:oa({id:t,key:o,updateValue:n})}),p.createElement(ro,{key:a,options:vo,value:""+u,onValueChange:la({id:t,key:a,needReload:!1,updateValue:n})}),p.createElement($r,{key:l,colorPickerProps:{color:d,onChange:sa({id:t,key:l,updateValue:n}),getI18n:r}})]}}));return{title:"RSI - "+r("indicator-RSI-title","Relative Strength Index"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:o},ra))}}(e);case Mi.KDJ:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getKDJDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.ma1Label),children:[p.createElement(na,{key:o.ma1Key,defaultValue:""+o.ma1,onBlur:oa({id:t,key:o.ma1Key,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.ma2Label),children:[p.createElement(na,{key:o.ma2Key,defaultValue:""+o.ma2,onBlur:oa({id:t,key:o.ma2Key,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(oo,{key:o.kVisibleKey,checked:o.kVisible,onChange:aa({id:t,key:o.kVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.kLabel)),children:[p.createElement(ro,{key:o.kLineWidthKey,options:vo,value:""+o.kLineWidth,onValueChange:la({id:t,key:o.kLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.kColorKey,colorPickerProps:{color:o.kColor,onChange:sa({id:t,key:o.kColorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(oo,{key:o.dVisibleKey,checked:o.dVisible,onChange:aa({id:t,key:o.dVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.dLabel)),children:[p.createElement(ro,{key:o.dLineWidthKey,options:vo,value:""+o.dLineWidth,onValueChange:la({id:t,key:o.dLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.dColorKey,colorPickerProps:{color:o.dColor,onChange:sa({id:t,key:o.dColorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(oo,{key:o.jVisibleKey,checked:o.jVisible,onChange:aa({id:t,key:o.jVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.jLabel)),children:[p.createElement(ro,{key:o.jLineWidthKey,options:vo,value:""+o.jLineWidth,onValueChange:la({id:t,key:o.jLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.jColorKey,colorPickerProps:{color:o.jColor,onChange:sa({id:t,key:o.jColorKey,updateValue:n}),getI18n:r}})]}];return{title:"KDJ - "+r("indicator-KDJ-title","Stochastic Indicator"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.OBV:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getOBVDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.label),children:[p.createElement(ro,{key:o.lineWidthKey,options:vo,value:""+o.lineWidth,onValueChange:la({id:t,key:o.lineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:n}),getI18n:r}})]}];return{title:"OBV - "+r("indicator-OBV-title","On Balance Volume"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.CCI:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getCCIDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:n})}),p.createElement(ro,{key:o.lineWidthKey,options:vo,value:""+o.lineWidth,onValueChange:la({id:t,key:o.lineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:n}),getI18n:r}})]}];return{title:"CCI - "+r("indicator-CCI-title","Commodity Channel Index"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.StochRSI:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getStochRSIDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.rsiPeriodLabel),children:[p.createElement(na,{key:o.rsiPeriodKey,defaultValue:""+o.rsiPeriod,onBlur:oa({id:t,key:o.rsiPeriodKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.stochasticPeriodLabel),children:[p.createElement(na,{key:o.stochasticPeriodKey,defaultValue:""+o.stochasticPeriod,onBlur:oa({id:t,key:o.stochasticPeriodKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.smoothKPeriodLabel),children:[p.createElement(na,{key:o.smoothKPeriodKey,defaultValue:""+o.smoothKPeriod,onBlur:oa({id:t,key:o.smoothKPeriodKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.smoothDPeriodLabel),children:[p.createElement(na,{key:o.smoothDPeriodKey,defaultValue:""+o.smoothDPeriod,onBlur:oa({id:t,key:o.smoothDPeriodKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(oo,{key:o.smoothKVisibleKey,checked:o.smoothKVisible,onChange:aa({id:t,key:o.smoothKVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.smoothKLabel)),children:[p.createElement(ro,{key:o.smoothKLineWidthKey,options:vo,value:""+o.smoothKLineWidth,onValueChange:la({id:t,key:o.smoothKLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.smoothKColorKey,colorPickerProps:{color:o.smoothKColor,onChange:sa({id:t,key:o.smoothKColorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(oo,{key:o.smoothDVisibleKey,checked:o.smoothDVisible,onChange:aa({id:t,key:o.smoothDVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.smoothDLabel)),children:[p.createElement(ro,{key:o.smoothDLineWidthKey,options:vo,value:""+o.smoothDLineWidth,onValueChange:la({id:t,key:o.smoothDLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.smoothDColorKey,colorPickerProps:{color:o.smoothDColor,onChange:sa({id:t,key:o.smoothDColorKey,updateValue:n}),getI18n:r}})]}];return{title:"StochRSI - "+r("indicator-StochRSI-title","Stochastic RSI"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.WR:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getWRDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:n})}),p.createElement(ro,{key:o.lineWidthKey,options:vo,value:""+o.lineWidth,onValueChange:la({id:t,key:o.lineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:n}),getI18n:r}})]}];return{title:"WR - "+r("indicator-WR-title","Wm%R"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.DMI:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getDMIDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:n})}),p.createElement("span",{key:""},"")]},{head:p.createElement(oo,{key:o.pDIVisibleKey,checked:o.pDIVisible,onChange:aa({id:t,key:o.pDIVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.pDILabel)),children:[p.createElement(ro,{key:o.pDILineWidthKey,options:vo,value:""+o.pDILineWidth,onValueChange:la({id:t,key:o.pDILineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.pDIColorKey,colorPickerProps:{color:o.pDIColor,onChange:sa({id:t,key:o.pDIColorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(oo,{key:o.nDIVisibleKey,checked:o.nDIVisible,onChange:aa({id:t,key:o.nDIVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.nDILabel)),children:[p.createElement(ro,{key:o.nDILineWidthKey,options:vo,value:""+o.nDILineWidth,onValueChange:la({id:t,key:o.nDILineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.nDIColorKey,colorPickerProps:{color:o.nDIColor,onChange:sa({id:t,key:o.nDIColorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(oo,{key:o.dxVisibleKey,checked:o.dxVisible,onChange:aa({id:t,key:o.dxVisibleKey,updateValue:n})},p.createElement(C.Z,{variant:"formLabel"},o.dxLabel)),children:[p.createElement(ro,{key:o.dxLineWidthKey,options:vo,value:""+o.dxLineWidth,onValueChange:la({id:t,key:o.dxLineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.dxColorKey,colorPickerProps:{color:o.dxColor,onChange:sa({id:t,key:o.dxColorKey,updateValue:n}),getI18n:r}})]}];return{title:"DMI - "+r("indicator-DMI-title","Directional Movement Index"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.MTM:return function(e){var t=e.id,i=e.settingManager,n=e.getI18n,r=e.updateValue,o=i.getMTMDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:r})}),p.createElement(ro,{key:o.sourceKey,options:yo(n),value:""+o.source,onValueChange:la({id:t,key:o.sourceKey,updateValue:r})}),p.createElement(ro,{key:o.lineWidthKey,options:vo,value:""+o.lineWidth,onValueChange:la({id:t,key:o.lineWidthKey,needReload:!1,updateValue:r})}),p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:r}),getI18n:n}})]}];return{title:"MTM - "+n("indicator-MTM-title","Momentum Index"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.EMV:return function(e){var t=e.id,i=e.settingManager,n=e.updateValue,r=e.getI18n,o=i.getEMVDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.periodLabel),children:[p.createElement(na,{key:o.periodKey,defaultValue:""+o.period,onBlur:oa({id:t,key:o.periodKey,updateValue:n})}),p.createElement(ro,{key:o.lineWidthKey,options:vo,value:""+o.lineWidth,onValueChange:la({id:t,key:o.lineWidthKey,needReload:!1,updateValue:n})}),p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:n}),getI18n:r}})]},{head:p.createElement(C.Z,{variant:"formLabel"},o.divisorLabel),children:[p.createElement(na,{key:o.divisorKey,defaultValue:""+o.divisor,onBlur:oa({id:t,key:o.divisorKey,updateValue:n})}),p.createElement("span",{key:"1"},""),p.createElement("span",{key:"2"},"")]}];return{title:"EMV - "+r("indicator-EMV-title","Ease of Movement Value"),description:"",component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.OI_UM:return function(e){var t=e.id,i=e.settingManager,n=e.getI18n,r=e.updateValue,o=i.getOIUMDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.oiLabel),children:[p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:r}),getI18n:n}})]},{head:p.createElement(C.Z,{variant:"formLabel"},o.nvLabel),children:[p.createElement(ro,{key:o.nvLineWidthKey,options:vo,value:""+o.nvLineWidth,onValueChange:la({id:t,key:o.nvLineWidthKey,needReload:!1,updateValue:r})}),p.createElement($r,{key:o.nvColorKey,colorPickerProps:{color:o.nvColor,onChange:sa({id:t,key:o.nvColorKey,updateValue:r}),getI18n:n}})]}];return{title:"O.I. - "+n("indicator-OI-title","Open Interest"),description:n("indicator-OI-description","Open Interest, Notional Value of Open Interest"),component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.OI_CM:return function(e){var t=e.id,i=e.settingManager,n=e.getI18n,r=e.updateValue,o=i.getOIUMDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.oiLabel),children:[p.createElement($r,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:sa({id:t,key:o.colorKey,updateValue:r}),getI18n:n}})]}];return{title:"O.I. - "+n("indicator-OI-title","Open Interest"),description:n("indicator-OI-description","Open Interest, Notional Value of Open Interest"),component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.LS_ACCO:return function(e){var t=e.id,i=e.settingManager,n=e.getI18n,r=e.updateValue,o=i.getLSAccoDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.barLabel),children:[p.createElement($r,{key:o.barBuyColorKey,colorPickerProps:{color:o.barBuyColor,onChange:sa({id:t,key:o.barBuyColorKey,updateValue:r}),getI18n:n}}),p.createElement($r,{key:o.barSellColorKey,colorPickerProps:{color:o.barSellColor,onChange:sa({id:t,key:o.barSellColorKey,updateValue:r}),getI18n:n}}),p.createElement("span",{key:"1"},""),p.createElement("span",{key:"2"},""),p.createElement("span",{key:"3"},""),p.createElement("span",{key:"4"},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.ratioLabel),children:[p.createElement(ro,{key:o.ratioLineWidthKey,options:vo,value:""+o.ratioLineWidth,onValueChange:la({id:t,key:o.ratioLineWidthKey,needReload:!1,updateValue:r})}),p.createElement($r,{key:o.ratioColorKey,colorPickerProps:{color:o.ratioColor,onChange:sa({id:t,key:o.ratioColorKey,updateValue:r}),getI18n:n}})]}];return{title:"L.S Acco. - "+n("indicator-LSAcco-title","Long/Short Account Ratio"),description:n("indicator-LSAcco-description","The proportion of net long and net short positions to total open positions of the top 20% users with the\n    highest margin balance. Long Position % = Long positions of top traders / Total open positions of top traders\n    Short Position % = Short positions of top traders / Total open positions of top traders Long/Short Ratio\n    (Positions) = Long Position % / Short Position %"),component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.LS_POSIT:return function(e){var t=e.id,i=e.settingManager,n=e.getI18n,r=e.updateValue,o=i.getLSPositDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.barLabel),children:[p.createElement($r,{key:o.barBuyColorKey,colorPickerProps:{color:o.barBuyColor,onChange:sa({id:t,key:o.barBuyColorKey,updateValue:r}),getI18n:n}}),p.createElement($r,{key:o.barSellColorKey,colorPickerProps:{color:o.barSellColor,onChange:sa({id:t,key:o.barSellColorKey,updateValue:r}),getI18n:n}}),p.createElement("span",{key:"1"},""),p.createElement("span",{key:"2"},""),p.createElement("span",{key:"3"},""),p.createElement("span",{key:"4"},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.ratioLabel),children:[p.createElement(ro,{key:o.ratioLineWidthKey,options:vo,value:""+o.ratioLineWidth,onValueChange:la({id:t,key:o.ratioLineWidthKey,needReload:!1,updateValue:r})}),p.createElement($r,{key:o.ratioColorKey,colorPickerProps:{color:o.ratioColor,onChange:sa({id:t,key:o.ratioColorKey,updateValue:r}),getI18n:n}})]}];return{title:"L.S Posit. - "+n("indicator-LSPosit-title","Long/Short Position Ratio"),description:n("indicator-LSPosit-description","The proportion of net long and net short positions to total open positions of the top 20% users with the\n    highest margin balance. Long Position % = Long positions of top traders / Total open positions of top traders\n    Short Position % = Short positions of top traders / Total open positions of top traders Long/Short Ratio\n    (Positions) = Long Position % / Short Position %"),component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.LS_RATIO:return function(e){var t=e.id,i=e.settingManager,n=e.getI18n,r=e.updateValue,o=i.getLSRatioDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.barLabel),children:[p.createElement($r,{key:o.barBuyColorKey,colorPickerProps:{color:o.barBuyColor,onChange:sa({id:t,key:o.barBuyColorKey,updateValue:r}),getI18n:n}}),p.createElement($r,{key:o.barSellColorKey,colorPickerProps:{color:o.barSellColor,onChange:sa({id:t,key:o.barSellColorKey,updateValue:r}),getI18n:n}}),p.createElement("span",{key:"1"},""),p.createElement("span",{key:"2"},""),p.createElement("span",{key:"3"},""),p.createElement("span",{key:"4"},"")]},{head:p.createElement(C.Z,{variant:"formLabel"},o.ratioLabel),children:[p.createElement(ro,{key:o.ratioLineWidthKey,options:vo,value:""+o.ratioLineWidth,onValueChange:la({id:t,key:o.ratioLineWidthKey,needReload:!1,updateValue:r})}),p.createElement($r,{key:o.ratioColorKey,colorPickerProps:{color:o.ratioColor,onChange:sa({id:t,key:o.ratioColorKey,updateValue:r}),getI18n:n}})]}];return{title:"L.S Ratio - "+n("indicator-LSRatio-title","Long/Short Ratio"),description:n("indicator-LSRatio-description","The proportion of net long and net short accounts to total accounts with positions. Each account is counted\n    once only. Long Account % =Accounts with net long positions / Total Accounts with positions Short Account %\n    =Accounts with net short positions / Total Accounts with positions Long/Short Ratio = Long Account % / Short\n    Account %"),component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.BS_VOL:return function(e){var t=e.id,i=e.settingManager,n=e.getI18n,r=e.updateValue,o=i.getBSVolDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.label),children:[p.createElement($r,{key:o.buyColorKey,colorPickerProps:{color:o.buyColor,onChange:sa({id:t,key:o.buyColorKey,updateValue:r}),getI18n:n}}),p.createElement($r,{key:o.sellColorKey,colorPickerProps:{color:o.sellColor,onChange:sa({id:t,key:o.sellColorKey,updateValue:r}),getI18n:n}}),p.createElement("span",{key:"1"},""),p.createElement("span",{key:"2"},""),p.createElement("span",{key:"3"},""),p.createElement("span",{key:"4"},"")]}];return{title:"B.S Vol. - "+n("indicator-BSVol-title","Buyer Seller Volume"),description:n("indicator-BSVol-description","Taker Buy Volume: the total volume of buy orders filled by takers within the period. Taker Sell Volume: the\n    total volume of sell orders filled by takers within the period."),component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);case Mi.BASIS:return function(e){var t=e.id,i=e.settingManager,n=e.getI18n,r=e.updateValue,o=i.getBasisDescriptions(),a=[{head:p.createElement(C.Z,{variant:"formLabel"},o.basisLabel),children:[p.createElement($r,{key:o.basisColorKey,colorPickerProps:{color:o.basisColor,onChange:sa({id:t,key:o.basisColorKey,updateValue:r}),getI18n:n}})]},{head:p.createElement(C.Z,{variant:"formLabel"},o.futurePriceLabel),children:[p.createElement($r,{key:o.futurePriceColorKey,colorPickerProps:{color:o.futurePriceColor,onChange:sa({id:t,key:o.futurePriceColorKey,updateValue:r}),getI18n:n}})]},{head:p.createElement(C.Z,{variant:"formLabel"},o.priceIndexLabel),children:[p.createElement($r,{key:o.priceIndexColorKey,colorPickerProps:{color:o.priceIndexColor,onChange:sa({id:t,key:o.priceIndexColorKey,updateValue:r}),getI18n:n}})]}];return{title:n("indicator-Basis-title","Basis"),description:n("indicator-Basis-description","The difference between the futures price and the price index at a given time. Basis = Futures Price - Price\n    Index Basis Rate = ( Futures Price - Price Index ) / Price Index"),component:p.createElement(uo,(0,g.__assign)({fields:a},ra))}}(e);default:return{title:"",description:"",component:null}}var t},va=function(e){var t=e.addText,i=e.onAdd;return p.createElement(C.Z,{id:"electron_add_now_empty",sx:{color:"primary",cursor:"pointer",textDecoration:"underline"},onClick:i},t)};const ma=function(e){return p.createElement(te.Z,(0,g.__assign)({width:"1em",height:"1em",viewBox:"0 0 96 96",fill:"none"},e),p.createElement("g",{clipPath:"url(#page-blank-b96_svg__clip0)"},p.createElement("path",{d:"M18 88h-2.5v-2.53H18V88zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5V74.4H18v2.54zm0-5.53h-2.5v-2.54H18v2.54zm0-5.54h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.54H18v2.54zm0-5.53h-2.5v-2.54H18v2.54zm0-5.54h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.54H18v2.54zm0-5.53h-2.5v-2.54H18v2.54zm0-5.54h-2.5v-2.53H18v2.53zm0-5.53h-2.5V8H18v2.55zM18 2.5h-2.5V5H18V2.5zM63.08 5h-2.57V2.5h2.57V5zm5.6 0h-2.56V2.5h2.56V5zM57.44 5h-2.56V2.5h2.56V5zm-5.63 0h-2.56V2.5h2.56V5zm-5.64 0h-2.56V2.5h2.56V5zm-5.63 0H38V2.5h2.56L40.54 5zM34.9 5h-2.56V2.5h2.56V5zm-5.63 0h-2.56V2.5h2.56V5zm-5.63 0h-2.57V2.5h2.57V5zM76.32 12.44l-1.8-1.8 1.77-1.77 1.8 1.8-1.77 1.77zm-4-4l-1.8-1.8 1.77-1.77 1.8 1.8-1.77 1.77zM68.65 14.36h-2.5v2.5h2.5v-2.5zM68.65 8.84h-2.5v2.5h2.5v-2.5zM74.36 14.36h-2.5v2.5h2.5v-2.5z",fill:"currentColor"}),p.createElement("path",{d:"M65.46 94.5c8.864 0 16.05-7.186 16.05-16.05S74.324 62.4 65.46 62.4s-16.05 7.186-16.05 16.05S56.596 94.5 65.46 94.5z",fill:"url(#page-blank-b96_svg__paint0_linear)"}),p.createElement("path",{d:"M78 63.78v-2.51h2.5v2.5l-2.5.01zM78 58.58v-2.52h2.5v2.5l-2.5.02zm0-5.22v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.22V30h2.5v2.5l-2.5.01zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zM78 16.87v-2.51h2.5v2.5l-2.5.01zM50.46 93.5h-2.51V91h2.5l.01 2.5zM45.06 93.5h-2.52V91H45l.06 2.5zm-5.41 0h-2.52V91h2.5l.02 2.5zm-5.41 0h-2.52V91h2.5l.02 2.5zm-5.41 0h-2.52V91h2.5l.02 2.5zm-5.41 0H20.9V91h2.5l.02 2.5zM18.01 93.5H15.5V91H18l.01 2.5zM66.71 85.5h-2.5V88h2.5v-2.5zM66.71 69h-2.5v14.1h2.5V69z",fill:"currentColor"})),p.createElement("defs",null,p.createElement("linearGradient",{id:"page-blank-b96_svg__paint0_linear",x1:54.111,y1:89.799,x2:76.809,y2:67.1,gradientUnits:"userSpaceOnUse"},p.createElement("stop",{stopColor:"#F0B90B"}),p.createElement("stop",{offset:.28,stopColor:"#F1BC0F"}),p.createElement("stop",{offset:.569,stopColor:"#F4C41C"}),p.createElement("stop",{offset:.862,stopColor:"#F8D230"}),p.createElement("stop",{offset:.993,stopColor:"#FBDA3C"})),p.createElement("clipPath",{id:"page-blank-b96_svg__clip0"},p.createElement("path",{fill:"#fff",d:"M0 0h96v96H0z"}))))};var ya=function(e){var t=e.children;return p.createElement(f.Z,{sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"md"}},p.createElement(ma,{color:"t.third",size:60}),t)};const xa=function(e){return p.createElement(te.Z,(0,g.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),p.createElement("path",{fillRule:"evenodd",d:"M3 16.814a1 1 0 01.293-.707l13.4-13.4a1 1 0 011.414 0l3.186 3.186a1 1 0 010 1.414L9.6 19H20a1 1 0 110 2H4a1 1 0 01-1-1v-3.186zM5 19h1.388a1 1 0 00.704-.29l8.976-8.914-1.782-1.782-8.993 8.993a1 1 0 00-.293.707V19zM15.7 6.6l1.79 1.79L19.3 6.6l-1.8-1.8-1.8 1.8z",clipRule:"evenodd"}))};var ba,Ca,_a=function(e){var t=e.isActive,i=e.children,n=(0,g.__rest)(e,["isActive","children"]);return p.createElement(f.Z,(0,g.__assign)({},n,{sx:(0,g.__assign)({width:"100%",height:"24px",color:t?"primary":"t.primary",cursor:"pointer",px:"sm",justifyContent:"space-between",alignItems:"center",lineHeight:"12px","&:hover":{color:"primary",bg:"line"},"&:hover .icon-wrap":{display:"flex"}},n.sx)}),i)},wa=function(e){var t=e.title,i=e.indicators,n=e.activePredicate,r=e.addText,o=e.onAdd,a=e.onSelect,l=e.onEdit,s=e.onRemove;return p.createElement(f.Z,{sx:{py:"sm",gap:"xs",flexDirection:"column"}},p.createElement(f.Z,{sx:{px:"sm",height:"24px",fontSize:"12px",alignItems:"center",justifyContent:"space-between"}},p.createElement(C.Z,{sx:{color:"t.third"}},t),p.createElement(va,{addText:r,onAdd:o})),p.createElement(f.Z,{sx:{flexWrap:"wrap",flexDirection:"column"}},i.map((function(e){return p.createElement(_a,{isActive:n(e),key:e.id},p.createElement(S.Z,{sx:{fontSize:0,width:"calc(100% - 52px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},onClick:function(){return a(e)}},e.name),p.createElement(S.Z,{className:"icon-wrap",sx:{gap:"xs",display:"none",color:"t.third"}},p.createElement(xa,{size:16,sx:{"&:hover":{color:"t.primary"}},onClick:function(){return l(e)}}),p.createElement(Vo,{size:16,sx:{"&:hover":{color:"t.primary"}},onClick:function(){return s(e)}})))}))))},Sa=function(e){return 0===e.indicators.length?p.createElement(ya,null,p.createElement(va,{addText:e.addText,onAdd:e.onAdd})):p.createElement(wa,(0,g.__assign)({},e))},La=i(16505),Ea=function(e){var t=e.children,i=e.withArrow,n=void 0!==i&&i,r=e.isActive,o=void 0!==r&&r,a=e.onClick,l=void 0===a?function(){return null}:a;return p.createElement(f.Z,{onClick:l,sx:{width:"100%",justifyContent:"space-between",alignItems:"center",cursor:"pointer",ml:"8px"}},p.createElement(C.Z,{variant:"formLabel",sx:{color:o?"t.primary":"t.third"}},t),n?p.createElement(La.Z,{size:13,color:"t.third"}):null)},ka=function(e){var t=e.label,i=e.checked,n=e.isActive,r=e.disabled,o=e.onChange,a=e.onClick;return p.createElement(S.Z,{sx:{pl:"13px",pr:"15px",py:"10px",borderLeftStyle:"solid",borderLeftWidth:"2px",borderLeftColor:n?"primary":"transparent"}},p.createElement(oo,{checked:i,disabled:r,wrapWithLabel:!1,onChange:o},p.createElement(Ea,{withArrow:!0,isActive:n,onClick:a},t)))},Va=function(e){var t=e.children;return p.createElement(C.Z,{sx:{color:"t.secondary",fontSize:"xs",lineHeight:"16px",mb:["20px","5px"],px:"15px"}},t)},Aa=function(e){var t=e.menus;return p.createElement(S.Z,{sx:{width:["100%","156px"],minWidth:["100%","156px"],overflow:"auto",py:"20px",flexDirection:"column","& > *:not(:last-of-type)":{mb:"15px"}}},t.map((function(e,t){var i=e.title,n=e.options,r=p.createElement(Va,null,i),o=n.map((function(e){return{value:e.value,children:p.createElement(ka,{label:e.label,checked:e.checked,disabled:e.disabled,isActive:e.isActive,onChange:function(){return e.onChangeCheckbox(e.value)},onClick:function(){return e.onClickLabel(e.value)}})}}));return p.createElement(Yr,{key:t,title:r,options:o})})))},Ta=function(e){var t=e.index,i=e.children;return t>-1?p.createElement(p.Fragment,null,i[t]):p.createElement(f.Z,{sx:{overflow:"hidden","& > *:not(:last-child)":{borderRightWidth:"1px",borderRightStyle:"solid",borderRightColor:"line"}}},i.map((function(e){return e})))},Ma=i(30898),Da=i.n(Ma),Ia=i(77536),Pa=i(25181);!function(e){e.Main="Main",e.Sub="Sub",e.SubTradingData="SubTradingData",e.All="All"}(ba||(ba={})),function(e){e.Main="Main",e.Sub="Sub",e.SubTradingData="SubTradingData",e.Customized="Customized",e.Backtest="Backtest"}(Ca||(Ca={}));var Ba=[[Ti.MA,"MA"],[Ti.EMA,"EMA"],[Ti.WMA,"WMA"],[Ti.BOLL,"BOLL"],[Ti.VWAP,"VWAP"],[Ti.AVL,"AVL"],[Ti.TRIX,"TRIX"],[Ti.SAR,"SAR"]],Wa=[[Mi.VOL,"VOL"],[Mi.MACD,"MACD"],[Mi.RSI,"RSI"],[Mi.KDJ,"KDJ"],[Mi.OBV,"OBV"],[Mi.CCI,"CCI"],[Mi.StochRSI,"StochRSI"],[Mi.WR,"WR"],[Mi.DMI,"DMI"],[Mi.MTM,"MTM"],[Mi.EMV,"EMV"]],Ra=[[Mi.OI_UM,"O.I."],[Mi.OI_CM,"O.I."],[Mi.LS_ACCO,"L.S Acco."],[Mi.LS_POSIT,"L.S Posit."],[Mi.LS_RATIO,"L.S Ratio"],[Mi.BS_VOL,"B.S Vol."],[Mi.BASIS,"Basis"]],Ha=(0,g.__spreadArray)((0,g.__spreadArray)([],(0,g.__read)(Wa)),(0,g.__read)(Ra)),Za=[Mi.OI_UM,Mi.OI_CM,Mi.LS_ACCO,Mi.LS_POSIT,Mi.LS_RATIO,Mi.BS_VOL,Mi.BASIS],Oa=function(e){var t=e.getI18n,i=e.activeKey,n=e.onChange,r=e.indicators,o=e.showCustomIndicator,a=e.showBacktest,l=(0,ia.F)().isMobile,s=(0,p.useMemo)((function(){var e=r.map((function(e){return e.id}));return Da()(Za,e).length>0}),[r]),c=(0,p.useMemo)((function(){return t("indicator-default-title","Indicators")}),[t]),u=(0,p.useMemo)((function(){return t("indicator-main-title","Main")}),[t]),d=(0,p.useMemo)((function(){return t("indicator-sub-title","Sub")}),[t]),h=(0,p.useMemo)((function(){return t("indicator-sub-trading-data-title","Sub - Trading Data")}),[t]),v=(0,p.useMemo)((function(){return t("indicator-customized-title","Customized")}),[t]),m=(0,p.useMemo)((function(){return t("indicator-backtest-title","Backtest")}),[t]),y=(0,g.__spreadArray)((0,g.__spreadArray)((0,g.__spreadArray)([p.createElement(Ia.Z,{key:Ca.Main,tab:u,tabKey:Ca.Main}),p.createElement(Ia.Z,{key:Ca.Sub,tab:d,tabKey:Ca.Sub})],(0,g.__read)(s?[p.createElement(Ia.Z,{key:Ca.SubTradingData,tab:h,tabKey:Ca.SubTradingData})]:[])),(0,g.__read)(o?[p.createElement(Ia.Z,{key:Ca.Customized,tab:v,tabKey:Ca.Customized})]:[])),(0,g.__read)(a?[p.createElement(Ia.Z,{key:Ca.Backtest,tab:m,tabKey:Ca.Backtest})]:[]));return p.createElement(f.Z,{sx:{flexDirection:"column"}},p.createElement(C.Z,{sx:{color:"t.primary",fontSize:"20px",marginBottom:"20px"}},c),l?null:p.createElement(Pa.Z,{tabDefaultNodeSx:{py:"20px"},size:"small",variant:"standard",defaultActiveKey:i,onChange:n},y))},Na=i(98783),Fa=i.n(Na),Ka=function(e){var t=e.addText,i=e.onAdd;return p.createElement(C.Z,{id:"electron_add_now_empty",sx:{color:"primary",cursor:"pointer",textDecoration:"underline"},onClick:i},t)},Ua=function(e){var t=e.children;return p.createElement(f.Z,{sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"md"}},p.createElement(ma,{color:"t.third",size:60}),t)},za=function(e){var t=e.isActive,i=e.children,n=(0,g.__rest)(e,["isActive","children"]);return p.createElement(f.Z,(0,g.__assign)({},n,{sx:(0,g.__assign)({width:"100%",height:"24px",color:t?"primary":"t.primary",cursor:"pointer",px:"sm",justifyContent:"space-between",alignItems:"center",lineHeight:"12px","&:hover":{color:"primary",bg:"line"},"&:hover .icon-wrap":{display:"flex"}},n.sx)}),i)},Xa=function(e){var t=e.title,i=e.indicators,n=e.activePredicate,r=e.addText,o=e.onAdd,a=e.onSelect,l=e.onEdit,s=e.onRemove;return p.createElement(f.Z,{sx:{py:"sm",gap:"xs",flexDirection:"column"}},p.createElement(f.Z,{sx:{px:"sm",height:"24px",fontSize:"12px",alignItems:"center",justifyContent:"space-between"}},p.createElement(C.Z,{sx:{color:"t.third"}},t),p.createElement(Ka,{addText:r,onAdd:o})),p.createElement(f.Z,{sx:{flexWrap:"wrap",flexDirection:"column"}},i.map((function(e){return p.createElement(za,{isActive:n(e),key:e.id},p.createElement(S.Z,{sx:{fontSize:0,width:"calc(100% - 52px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},onClick:function(){return a(e)}},e.name),p.createElement(S.Z,{className:"icon-wrap",sx:{gap:"xs",display:"none",color:"t.third"}},p.createElement(xa,{size:16,sx:{"&:hover":{color:"t.primary"}},onClick:function(){return l(e)}}),p.createElement(Vo,{size:16,sx:{"&:hover":{color:"t.primary"}},onClick:function(){return s(e)}})))}))))},Ga=function(e){return 0===e.indicators.length?p.createElement(Ua,null,p.createElement(Ka,{addText:e.addText,onAdd:e.onAdd})):p.createElement(Xa,(0,g.__assign)({},e))},Ya=function(e){var t=e.visible,i=e.onClose,n=void 0===i?function(){return null}:i,r=e.allIndicators,o=e.activeIndicatorId,a=e.setActiveIndicatorId,l=e.selectedIndicators,s=e.selectIndicator,c=e.updateIndicator,u=e.handleIndicator,d=e.settingManager,h=e.getI18n,f=e.isShowCustomIndicator,v=e.isShowBacktest,m=e.candlestickInstance,y=(0,ia.F)().isMobile,x=(0,g.__read)((0,p.useState)(2),2),b=x[0],C=x[1],_=(0,g.__read)((0,p.useState)(-1),2),w=_[0],S=_[1],L=(0,g.__read)((0,p.useState)(Ca.Main),2),E=L[0],k=L[1],V=(0,g.__read)((0,p.useState)(!1),2)[1],A=(0,p.useCallback)((function(){return V((function(e){return!e}))}),[V]),T=(0,p.useMemo)((function(){return r.filter((function(e){var t=e.isCustom,i=e.isBacktest;return t&&!i}))}),[r]),M=(0,p.useMemo)((function(){return r.filter((function(e){var t=e.isCustom,i=e.isBacktest;return t&&i}))}),[r]),D=(0,p.useMemo)((function(){return o||Ti.MA}),[o]),I=(0,p.useCallback)((function(){return C((function(e){return-1*e}))}),[C]),P=(0,p.useCallback)((function(e){var t=e.id,i=e.key,n=e.value,r=e.needReload,o=void 0!==r&&r;d.setValue(i,n),c(t,o),I()}),[d,c,I]);(0,p.useEffect)((function(){S(y?""===o?0:1:-1)}),[o,y]);var B=(0,p.useCallback)((function(e){a(e),y&&S(1)}),[a,S,y]),W=(0,p.useCallback)((function(){S(0)}),[S]),R=(0,p.useCallback)((function(){var e,t=d.getDefaultValue(D);d.setValues(((e={})[D]=t,e)),c(D,!0),A(),I(),null==m||m.fire("indicatorReset")}),[d,D]),H=(0,p.useCallback)((function(e){n(e),A(),null==m||m.fire("indicatorSaved")}),[n]),Z=(0,p.useCallback)((function(e){return l.includes(e.id)}),[l]),O=(0,p.useCallback)((function(){return u(Dt.Bf.ADD)}),[u]),N=(0,p.useCallback)((function(e){return s(e)}),[s]),F=(0,p.useCallback)((function(e){return u(Dt.Bf.EDIT,e)}),[u]),K=(0,p.useCallback)((function(e){return u(Dt.Bf.REMOVE,e.id)}),[u]),U=(0,p.useCallback)((function(){return u(Dt.Bf.ADD,{isBacktest:!0})}),[u]),z=(0,p.useCallback)((function(e){return u(Dt.Bf.EDIT,e,{isBacktest:!0})}),[u]),X=(0,p.useCallback)((function(e){return u(Dt.Bf.REMOVE,e.id,{isBacktest:!0})}),[u]),G=(0,p.useMemo)((function(){if(y)return ba.All;switch(E){case Ca.Main:return ba.Main;case Ca.Sub:return ba.Sub;case Ca.SubTradingData:return ba.SubTradingData;default:return ba.All}}),[y,E]),Y=function(e){var t=e.allIndicators,i=e.displayMode,n=e.values,r=e.activeIndicatorId,o=e.onClickLabel,a=e.getI18n,l=e.selectIndicator,s=e.maxMainIndicatorLimit,c=void 0===s?5:s,u=e.maxSubIndicatorLimit,d=void 0===u?5:u,h=(0,p.useMemo)((function(){return t.map((function(e){return e.id}))}),[t]),f=(0,p.useMemo)((function(){return Da()(h,go)}),[h]),v=(0,p.useMemo)((function(){return Da()(h,po)}),[h]),m=(0,p.useCallback)((function(e){var i=Fa()(n,[e]);if(Da()(i,f).length<=c&&Da()(i,v).length<=d){var r=t.find((function(t){return t.id===e}));r&&l(r)}}),[l,n,f,v,t,c,d]),y=(0,p.useMemo)((function(){return Ba.filter((function(e){var t=(0,g.__read)(e,1)[0];return f.includes(t)}))}),[f]),x=(0,p.useMemo)((function(){return Ha.filter((function(e){var t=(0,g.__read)(e,1)[0];return v.includes(t)}))}),[v]),b=(0,p.useMemo)((function(){return Da()(n,f)}),[n]),C=(0,p.useMemo)((function(){return Da()(n,v)}),[n]),_=(0,p.useMemo)((function(){return y.map((function(e){var t=(0,g.__read)(e,2),i=t[0],n=t[1],a=b.includes(i);return{value:i,label:n,checked:a,disabled:!a&&b.length>=c,isActive:i===r,onChangeCheckbox:m,onClickLabel:o}}))}),[y,b,r,m,o]),w=(0,p.useMemo)((function(){return x.map((function(e){var t=(0,g.__read)(e,2),i=t[0],n=t[1],a=C.includes(i);return{value:i,label:n,checked:a,disabled:!a&&C.length>=d,isActive:i===r,onChangeCheckbox:m,onClickLabel:o}}))}),[x,C,r,m,o]),S=(0,g.__read)((0,p.useMemo)((function(){return Dr()(w,(function(e){var t=e.value;return Za.some((function(e){return e===t}))}))}),[w]),2),L=S[0],E=S[1],k=(0,p.useMemo)((function(){return a("indicator-main-title","Main")+" ("+b.length+"/"+c+")"}),[a,b]),V=(0,p.useMemo)((function(){return a("indicator-sub-title","Sub")+" ("+C.length+"/"+d+")"}),[a,C]);return{menus:(0,p.useMemo)((function(){switch(i){case ba.Main:return[{title:k,options:_}];case ba.Sub:return[{title:V,options:E}];case ba.SubTradingData:return[{title:V,options:L}];case ba.All:default:return[{title:k,options:_},{title:V,options:w}]}}),[i,k,V,_,E,L,w]),mainOptions:_,subOptions:w,subCommonOptions:E,subTradingDataOptions:L}}({allIndicators:r,displayMode:G,values:l,activeIndicatorId:D,onClickLabel:B,getI18n:h,selectIndicator:s}),j=Y.menus,q=Y.subTradingDataOptions,Q=(0,p.useCallback)((function(e){switch(null==m||m.fire("indicatorTabChanged",{data:e}),k(e),e){case Ca.Main:return a(Ti.MA);case Ca.Sub:return a(Mi.VOL);case Ca.SubTradingData:return a(q[0].value)}}),[k]),J=fa({id:D,settingManager:d,getI18n:h,updateValue:P}),$=J.title,ee=J.description,te=J.component;return p.createElement(Qr,{header:p.createElement(Oa,{getI18n:h,activeKey:E,onChange:Q,indicators:r,showCustomIndicator:f,showBacktest:v}),visible:t,onClose:n},function(){switch(E){case Ca.Customized:return p.createElement(Sa,{key:"custom",indicators:T,activePredicate:Z,title:h("indicator-custom-title","Customized Indicator"),addText:h("indicator-add","Add"),onAdd:O,onSelect:N,onEdit:F,onRemove:K});case Ca.Backtest:return p.createElement(Ga,{key:"custom",indicators:M,activePredicate:Z,title:h("indicator-backtest-title","Backtest"),addText:h("indicator-add","Add"),onAdd:U,onSelect:N,onEdit:z,onRemove:X});default:return p.createElement(Ta,{key:"default",index:w},[p.createElement(Aa,{key:"1",menus:j}),p.createElement(so,{key:b,title:$,description:ee,showBack:y,onBack:W,footer:p.createElement(co,{resetField:{children:h("indicator-btn-reset","Reset"),onClick:R},saveField:{children:h("indicator-btn-save","Save"),onClick:H}})},te)])}}())},ja=["seriesData","candlestick","nextData","grid","theme","getI18n","symbol","interval","css","isHiddenLogo","askBid"];const qa=(0,p.forwardRef)((function(e,t){var i=e.seriesData,n=e.candlestick,r=e.nextData,o=e.grid,a=e.theme,l=void 0===a?Dt.hY.LIGHT:a,s=e.isShowDrawPanel,c=void 0!==s&&s,u=e.isShowAnnotationPanel,d=void 0===u||u,h=e.isShowCustomIndicator,v=void 0!==h&&h,m=e.isShowBacktest,y=void 0!==m&&m,x=e.isHiddenLogo,b=void 0!==x&&x,C=e.symbol,_=e.interval,w=e.getI18n,L=void 0===w?function(){return""}:w,E=e.sensorsManager,k=e.css,V=e.settingStore,A=e.forceUpdate,T=void 0===A?function(){return null}:A,M=e.background,D=void 0===M?"":M,I=e.onModalClose,P=e.onSettingChanged,B=void 0===P?function(){return null}:P,W=e.onSettingReseted,R=void 0===W?function(){return null}:W,H=e.enableContextMenu,Z=void 0===H||H,O=e.askBid,N=(0,g.__read)((0,p.useState)(!1),2),F=N[0],K=N[1],U=(0,g.__read)((0,p.useState)(Ti.MA),2),z=U[0],X=U[1],G=(0,g.__read)((0,p.useState)({show:!1,left:0,top:0}),2),Y=G[0],j=G[1],q=(0,g.__read)((0,p.useState)(null),2),Q=q[0],J=q[1],$=(0,g.__read)((0,p.useState)(""),2),ee=$[0],te=$[1],ie=(0,g.__read)((0,Kr.O)({visible:!1,allIndicators:[],selectIndicators:[]}),2),ne=ie[0],re=ie[1],oe=re.updateValue,ae=re.getValue,le=(0,p.useRef)(null),se=(0,p.useRef)(),ce=(0,p.useRef)(E);ce.current=E,(0,p.useImperativeHandle)(t,(function(){return{getCandlestick:function(){return se.current},registerColorTable:de}}));var ue=(0,p.useCallback)((function(){te("\n  .kline-container {\n    position: relative;\n    height: 100%;\n    flex: 1;\n    z-index: 0;\n  }\n  .pointer:hover {\n    cursor: pointer;\n  }\n  .kline-wrap .kline-wrap-mask {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: 201;\n  }\n  .kline-wrap .kline-title-wrap {\n    color: #76808F;\n  }\n  .kline-wrap .kline-title-wrap .default-label-box {\n    font-size: 12px\n  }\n  .kline-wrap.light .indicator-title-toolbox svg path {\n    fill: #d8d8d8;\n    fill-opacity: 0.5;\n  }\n  .kline-wrap.dark .indicator-title-toolbox svg path {\n    fill: #3A3F46;\n    fill-opacity: 0.5;\n  }\n  .kline-wrap.dark .kline-title-wrap .indicator-title-toolbox svg:hover > path {\n    fill: #848E9C;\n  }\n  .kline-wrap.light .kline-title-wrap .indicator-title-toolbox svg:hover > path {\n    fill: #707A8A;\n  }\n  .kline-title-wrap .tooltip-wrap {\n    position: absolute;\n    z-index: 10;\n  }\n  .tooltip-wrap.up {\n    left: 50%;\n    top: -6px;\n    transform: translate(-50%, -100%);\n  }\n  .tooltip-wrap.right {\n    left: 100%;\n    top: -6px;\n    transform: translate(0%, 0%);\n  }\n  .kline-title-wrap .tooltip-arrow {\n    position: absolute;\n    width: 6px;\n    height: 6px;\n    top: 100%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(45deg);\n  }\n  .kline-title-wrap .tooltip-text {\n    padding: 6px 8px;\n    white-space: nowrap;\n    border-radius: 2px;\n  }\n\n  .right .tooltip-text {\n    margin-left: 6px;\n  }\n  .right .tooltip-arrow {\n    top: 50%;\n    left: 0;\n    transform: translate(50%, 0%) rotate(45deg);\n  }\n  .kline-wrap .tooltip-wrap {\n    background: #5E6673;\n    color: #ffffff\n  }\n  .kline-wrap .tooltip-arrow {\n    background: #5E6673;\n  }\n  .kline-wrap .title-wrapper-container {\n    height: 0;\n  }\n  .kline-wrap .chart-title-row {\n    display: flex;\n    font-size: 12px;\n    flex-wrap: wrap;\n    align-items: center;\n    width: fit-content;\n    width: -moz-max-content;\n    line-height: 18px;\n    margin-left: 16px;\n  }\n  .kline-wrap .chart-title-row .chart-title-indicator-container {\n    display: inline-flex;\n    flex-wrap: wrap;\n  }\n  .kline-wrap .chart-title-row .icon-box {\n    display: inline-flex;\n    position: relative;\n    font-size: 12px;\n    line-height: 14px;\n    cursor: pointer;\n  }\n  .kline-wrap .chart-title-row .icon-box {\n    margin-right: 6px;\n  }\n  div.chart-title-row:nth-child(2) ~ div > .chart-title-indicator-container {\n    margin-left: 22px;\n  }\n  div.chart-title-row.fold:nth-child(2) ~ div {\n    display: none;\n  }\n  .chart-title-row.fold > .chart-title-indicator-container, .chart-title-row.fold > .indicator-title-toolbox{\n    display: none;\n  }\n  .icon-box svg {\n    transition: transform 0.5s ease-out;\n  }\n  .chart-title-row.fold svg {\n    transform: rotate(-90deg);\n  }\n  .indicator-title-toolbox {\n    display: flex;\n    align-items: center;\n  }\n  .kline-wrap .text-area-wrap {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 150px;\n    height: 80px;\n    z-index: 10001;\n    background: #ddd;\n    outline: none;\n    padding: 4px;\n    border-radius: 4px;\n    border: 1px solid #328DFD;\n  }\n  .kline-wrap.dark .text-area-wrap {\n    color: #E6E8EA;\n    background: rgb(0, 0, 0);\n  }\n  .kline-wrap.light .text-area-wrap {\n    color: #1E2026;\n    background: rgba(0, 0, 0, 0.2);\n  }\n  .kline-draw-menu-container {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    scroll-behavior: smooth;\n    ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  .kline-draw-menu-container::-webkit-scrollbar {\n    display: none;\n  }\n  .draw-tool-item {\n    cursor: pointer;\n  }\n  .draw-tool-item.active svg path {\n    fill: #F0B90B;\n  }\n  .kline-wrap .kline-draw-menu-divider {\n    margin: 4px 0;\n    border-top: 1px solid #ddd;\n  }\n  @media screen and (max-width: 767px) {\n    .kline-draw-panel {\n      display: none;\n    }\n  }\n\n    .kline-wrap {\n      height: 100%;\n      position: relative;\n      line-height: 1;\n      z-index: 0;\n      user-select: none;\n    }")}),[D,l]),de=(0,p.useCallback)((function(e,t){var i=se.current;i&&i.registerColorTable(e,t),l===e&&ue()}),[l,ue]),he=(0,p.useCallback)((function(e,t){return void 0===t&&(t=""),L(e,{defaultValue:t||e})||t}),[L]),ge=(0,p.useMemo)((function(){return{seriesData:i,candlestick:n,nextData:r,grid:o,symbol:C,interval:_,theme:l.toLowerCase(),isHiddenLogo:b,askBid:O}}),[i,n,r,l,o,C,_,b,O]),pe=(0,p.useCallback)((function(){j((function(e){return(0,g.__assign)((0,g.__assign)({},e),{show:!1})}))}),[]),fe=(0,p.useCallback)((function(e,t){void 0===t&&(t=!1);var i=se.current;t?null==i||i.updateIndicatorParams(e):(null==i||i.updateTitle(e),null==i||i.update())}),[]),ve=(0,p.useCallback)((function(e){if(ae("visible")!==e){var t=se.current;t&&t.fire("indicatorDialogVisibleChange",{data:e})}oe({visible:e})}),[]),me=(0,p.useCallback)((function(e){var t=e.id,i=e.name,n=e.isCustom,r=e.isMain,o=void 0!==r&&r,a=se.current;a&&(a.fire("indicatorAddedOrRemoved",{data:i}),a.hasIndicatorByName(t)?a.closeIndicatorByName(t):n?a.fire("customIndicatorClick",{data:{id:t,name:i,isMain:o}}):a.addIndicatorByName(t))}),[]),ye=(0,p.useCallback)((function(e){for(var t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r=se.current;if(r){var o=((t={})[Dt.Bf.ADD]=r.getAttr("onAddCustomIndicator"),t[Dt.Bf.EDIT]=r.getAttr("onEditCustomIndicator"),t[Dt.Bf.REMOVE]=r.getAttr("onRemoveCustomIndicator"),t),a=o[e];a&&a.apply(null,i)}}),[]);Ur((function(){ue(),Qn.Z.dragVertex.setAttr("fillStyle",(0,Mt.dt)(l)),Qn.Z.dragRect.setAttr("fillStyle",(0,Mt.dt)(l)),Qn.Z.text.setAttr("fillStyle",(0,Mt.oO)(l,"text.defaultColor"))}),[l,ue]),(0,p.useEffect)((function(){var e=se.current;e&&e.registerI18n(he)}),[he]),(0,p.useEffect)((function(){var e=se.current;setTimeout((function(){e&&e.resize()}))}),[]),Ur((function(){var e={};if(ja.forEach((function(t){void 0!==ge[t]&&(e[t]=ge[t])})),se.current)!function(e,t){var i=e.getConfig(),n={},r={},o=!1;Object.keys(t||{}).forEach((function(e){if(ja.includes(e)&&!Tt()(t[e],i[e])){if((0,ii.Kn)(t[e])&&(0,ii.Kn)(i[e])&&(0,It.r3)(i[e],t[e]))return;o=!0,n[e]=t[e],r[e]=i[e]}})),o&&(e.setAttrs((0,It.PM)({},r,n)),e.update())}(se.current,e);else{se.current=new Hr((0,g.__assign)({container:le.current},e));var t=se.current;t.registerModule(Mt.Jj.settingManager,V),t.on("showParamsSettingPanel",(function(e){var t=e.id;X(t),K(!0)})),t.on("showIndicatorDialog",(function(){ve(!ae("visible"))})),t.on("allIndicatorsChange",(function(e){var t=e.data;oe({allIndicators:t})})),t.on("selectIndicatorsChange",(function(e){var t=e.data.map((function(e){return e.id}));oe({selectIndicators:t})})),t.on("dispatchErrorData",(function(e){var t,i,n=e.data;null===(i=null===(t=ce.current)||void 0===t?void 0:t.logOnErrorData)||void 0===i||i.call(t,n)})),oe({allIndicators:t.getAllIndicators(),selectIndicators:t.getSelectIndicators().map((function(e){return e.name}))}),e.seriesData&&e.seriesData.length>0&&t.update()}}),[ge,V]),(0,p.useEffect)((function(){var e,t,i=function(e){var t=e.point;Z&&j((function(e){return e.show?e:{show:!0,left:t.x,top:t.y}}))};return null===(t=null===(e=se.current)||void 0===e?void 0:e.on)||void 0===t||t.call(e,"contextmenu",i),function(){var e,t;return null===(t=null===(e=se.current)||void 0===e?void 0:e.off)||void 0===t?void 0:t.call(e,"contextmenu",i)}}),[Z]);var xe=(0,p.useMemo)((function(){return O?Qo:[qo.GoDate,qo.CountDown,qo.PriceLine,qo.Setting]}),[O]);return p.createElement(p.Fragment,null,p.createElement("style",null,ee+"\n"+k),p.createElement(f.Z,{ref:J,className:"kline-wrap "+l,style:(0,g.__assign)({},e.style),sx:{background:(0,It.Vq)(D),".chart-title-row":{background:(0,It.Vq)(D,.5)}},dir:"ltr"},c&&Q&&p.createElement(Zr.Z,{wrapRef:Q,candlestickInstance:se.current}),p.createElement(S.Z,{ref:le,className:"kline-container"},F&&!!V&&p.createElement(Ya,{candlestickInstance:se.current,visible:F,onClose:function(){null==I||I(ne.selectIndicators.join("_")),K(!1)},getI18n:he,activeIndicatorId:z,setActiveIndicatorId:X,selectedIndicators:ne.selectIndicators,allIndicators:ne.allIndicators,settingManager:V,selectIndicator:me,updateIndicator:fe,handleIndicator:ye,isShowCustomIndicator:v,isShowBacktest:y})),d&&p.createElement(Or.Z,{wrapRef:le,candlestickInstance:se.current}),!!V&&Q&&p.createElement(ta,{wrapRef:Q,visible:Y.show,candlestickInstance:se.current,left:Y.left,top:Y.top,close:pe,getI18n:he,settingManager:V,forceUpdate:T,onSettingChanged:B,onSettingReseted:R,menuItems:xe})))}));var Qa=i(23716),Ja=function(){function e(){this._seriesData=[],this.interval="",this.isLoadAll=!1}return e.prototype.setDataProvider=function(e){return this._dataProvider=e,this},e.prototype.setInterval=function(e){return e&&!Zt()(this.interval,e)&&(this.interval=e,this._clearData()),this},e.prototype.setSymbol=function(e){return e&&!Zt()(this.symbol,e)&&(this.symbol=e,this._clearData()),this},e.prototype.setLoadCallback=function(e){this._loadCallbak=e},e.prototype.triggerLoading=function(e){this._loadCallbak&&this._loadCallbak(e)},e.prototype.getCleanDatas=function(e){var t={};return e.filter((function(e){var i=e.time;return!t[i]&&(t[i]=1,!0)})).sort((function(e,t){return e.time-t.time}))},e.prototype.getData=function(e,t,i){return void 0===e&&(e={}),void 0===i&&(i=!1),(0,g.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,l,s,c,u=this;return(0,g.__generator)(this,(function(d){n=this._dataProvider,o=(r=this).interval,a=r.symbol,l=e.startTime,s=e.endTime,c=this._getSyncParams(),l&&s&&s>l&&(c=(0,g.__assign)((0,g.__assign)({},c),{startTime:l,endTime:s,limit:Math.ceil((s-l)/(0,Mt.Sz)(o))}));try{o&&a&&(n.getData||n.getBarDatas).call(n,c,(function(e){var n=e.data,r=void 0===n?[]:n,l=e.isLoadAll;u._isSync({interval:o,symbol:a})&&(u.isLoadAll=u.isLoadAll||l,r.length>0?(u._seriesData=i?u.getCleanDatas(r):u.getCleanDatas(u._seriesData.concat(r)),t(u._seriesData)):t([]))}))}catch(e){Qa.error("basicKline getData occured error: "+e.message)}return[2]}))}))},e.prototype.subcribe=function(e){var t=this,i=this._dataProvider,n=this.interval,r=this.symbol;n&&r&&(i.subscribe||i.subcribe).call(i,this._getSyncParams(),(function(i){t._isSync({interval:n,symbol:r})&&e(i)}))},e.prototype.unSubcribe=function(){(this._dataProvider.unsubscribe||this._dataProvider.unSubcribe).call(this._dataProvider,this._getSyncParams())},e.prototype._clearData=function(){this._seriesData.length=0,this.isLoadAll=!1},e.prototype._getSyncParams=function(){return{interval:this.interval,symbol:this.symbol}},e.prototype._isSync=function(e){var t=e.interval,i=e.symbol;return Zt()(t,this.interval)&&Zt()(i,this.symbol)},e}(),$a=i(63211),el=i.n($a),tl=i(54073),il=i.n(tl);const nl=function(){function e(e,t){var i=this;this._namespace="",this._storeKey="CANDLESTICK_SETTING_INDICATOR",this._isLoaded=!1,this._pendingList=new Set,this._i18n=function(e,t){return t},this._restoreValue=il()((function(){return(0,g.__awaiter)(i,void 0,void 0,(function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,Vt().createInstance({name:this._namespace}).setItem(this._storeKey,this._storeValue)];case 1:return e.sent(),[2]}}))}))})),this._namespace=e,this.setDefaultValue(t)}return e.prototype.setDefaultValue=function(e){this._defaultValue=e},e.prototype.isLoaded=function(){return this._isLoaded},e.prototype.loadStoreValue=function(){return(0,g.__awaiter)(this,void 0,void 0,(function(){var e;return(0,g.__generator)(this,(function(t){switch(t.label){case 0:return[4,Vt().createInstance({name:this._namespace}).getItem(this._storeKey)];case 1:return(e=t.sent())?(this._storeValue=e,[3,4]):[3,2];case 2:return this._storeValue=ut()(this._defaultValue),[4,this._restoreValue()];case 3:t.sent(),t.label=4;case 4:return this._isLoaded=!0,this._clearPendingist(),[2]}}))}))},e.prototype.addPenddingList=function(e){this._pendingList.add(e)},e.prototype.registerI18n=function(e){this._i18n=e},e.prototype._clearPendingist=function(){(0,g.__spreadArray)([],(0,g.__read)(this._pendingList)).forEach((function(e){e()})),this._pendingList.clear()},e.prototype.getValues=function(){return this._storeValue},e.prototype.hasValue=function(e){return el()(this._storeValue,e)||el()(this._defaultValue,e)},e.prototype.getValue=function(e){return el()(this._storeValue,e)?zi()(this._storeValue,e):zi()(this._defaultValue,e)},e.prototype.getDefaultValue=function(e){return zi()(this._defaultValue,e)},e.prototype.setValue=function(e,t){return(0,g.__awaiter)(this,void 0,void 0,(function(){return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return Ki()(this._storeValue,e,t),[4,this._restoreValue()];case 1:return i.sent(),[2]}}))}))},e.prototype.setValues=function(e){return(0,g.__awaiter)(this,void 0,void 0,(function(){var t,i=this;return(0,g.__generator)(this,(function(n){switch(n.label){case 0:return(0,ii.Kn)(e)?(t=ut()(e),Object.keys(t).forEach((function(e){Ki()(i._storeValue,e,t[e])})),[4,this._restoreValue()]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e.prototype.getSymbolDescription=function(){return{candlestickKey:"@symbol.candlestick",style:this.getValue("@symbol.candlestick.style"),styleKey:"@symbol.candlestick.style",upColor:this.getValue("@symbol.candlestick.up.color"),upColorKey:"@symbol.candlestick.up.color",upBorderColor:this.getValue("@symbol.candlestick.up.borderColor"),upBorderColorKey:"@symbol.candlestick.up.borderColor",upWickColor:this.getValue("@symbol.candlestick.up.wickColor"),upWickColorKey:"@symbol.candlestick.up.wickColor",downColor:this.getValue("@symbol.candlestick.down.color"),downColorKey:"@symbol.candlestick.down.color",downBorderColor:this.getValue("@symbol.candlestick.down.borderColor"),downBorderColorKey:"@symbol.candlestick.down.borderColor",downWickColor:this.getValue("@symbol.candlestick.down.wickColor"),downWickColorKey:"@symbol.candlestick.down.wickColor",pristine:this.getValue("@symbol.pristine"),pristineKey:"@symbol.pristine"}},e.prototype.getBackgroundDescription=function(){return{color:this.getValue("@background.color"),colorKey:"@background.color",vertGridLineShow:this.getValue("@background.vertGridLine.show"),vertGridLineShowKey:"@background.vertGridLine.show",vertGridLineLineWidth:this.getValue("@background.vertGridLine.lineWidth"),vertGridLineLineWidthKey:"@background.vertGridLine.lineWidth",vertGridLineColor:this.getValue("@background.vertGridLine.color"),vertGridLineColorKey:"@background.vertGridLine.color",horzGridLineShow:this.getValue("@background.horzGridLine.show"),horzGridLineShowKey:"@background.horzGridLine.show",horzGridLineLineWidth:this.getValue("@background.horzGridLine.lineWidth"),horzGridLineLineWidthKey:"@background.horzGridLine.lineWidth",horzGridLineColor:this.getValue("@background.horzGridLine.color"),horzGridLineColorKey:"@background.horzGridLine.color",pristine:this.getValue("@background.pristine"),pristineKey:"@background.pristine"}},e.prototype.getCountdonwDescription=function(){return{upTextColor:this.getValue("@countdown.upTextColor"),upTextColorKey:"@countdown.upTextColor",upBgColor:this.getValue("@countdown.upBgColor"),upBgColorKey:"@countdown.upBgColor",upBorderColor:this.getValue("@countdown.upBorderColor"),upBorderColorKey:"@countdown.upBorderColor",downTextColor:this.getValue("@countdown.downTextColor"),downTextColorKey:"@countdown.downTextColor",downBgColor:this.getValue("@countdown.downBgColor"),downBgColorKey:"@countdown.downBgColor",downBorderColor:this.getValue("@countdown.downBorderColor"),downBorderColorKey:"@countdown.downBorderColor"}},e.prototype.getMADescriptions=function(e){var t=this;return void 0===e&&(e="MA"),(0,g.__spreadArray)([],(0,g.__read)(Array(10).keys())).map((function(i){return{label:""+e+(i+1),periodsKey:"@"+e+".periods["+i+"]",sourcesKey:"@"+e+".sources["+i+"]",colorsKey:"@"+e+".colors["+i+"]",lineWidthsKey:"@"+e+".lineWidths["+i+"]",visiblesKey:"@"+e+".visibles["+i+"]",period:t.getValue("@"+e+".periods["+i+"]"),source:t.getValue("@"+e+".sources["+i+"]"),color:t.getValue("@"+e+".colors["+i+"]"),lineWidth:t.getValue("@"+e+".lineWidths["+i+"]"),visible:!!t.getValue("@"+e+".visibles["+i+"]")}}))},e.prototype.getMACDDescriptions=function(){return{fastLabel:this._i18n("macd-fast-label","Fast Length"),slowLabel:this._i18n("macd-short-label","Slow Length"),signalLabel:this._i18n("macd-signal-label","Signal Length"),fastKey:"@MACD.fastPeriod",slowKey:"@MACD.slowPeriod",signalKey:"@MACD.signalPeriod",fastLength:this.getValue("@MACD.fastPeriod"),slowLength:this.getValue("@MACD.slowPeriod"),signalLength:this.getValue("@MACD.signalPeriod"),deaLabel:"DEA",difLabel:"DIF",macdLabel:"MACD",deaVisibleKey:"@MACD.visibles.DEA",deaVisible:this.getValue("@MACD.visibles.DEA"),difVisibleKey:"@MACD.visibles.DIF",difVisible:this.getValue("@MACD.visibles.DIF"),macdVisibleKey:"@MACD.visibles.MACD",macdVisible:this.getValue("@MACD.visibles.MACD"),deaColorKey:"@MACD.colors.DEA",deaColor:this.getValue("@MACD.colors.DEA"),difColorKey:"@MACD.colors.DIF",difColor:this.getValue("@MACD.colors.DIF"),deaLineWidthKey:"@MACD.lineWidths.DEA",deaLineWidth:this.getValue("@MACD.lineWidths.DEA"),difLineWidthKey:"@MACD.lineWidths.DIF",difLineWidth:this.getValue("@MACD.lineWidths.DIF"),longGrowthLabel:this._i18n("macd-long-growth-label","Long (Grow)"),longGrowthStyleKey:"@MACD.longGrowth.style",longGrowthStyle:this.getValue("@MACD.longGrowth.style"),longGrowthColorKey:"@MACD.longGrowth.color",longGrowthColor:this.getValue("@MACD.longGrowth.color"),longFallLabel:this._i18n("macd-long-fall-label","Long (Fall)"),longFallStyleKey:"@MACD.longFall.style",longFallStyle:this.getValue("@MACD.longFall.style"),longFallColorKey:"@MACD.longFall.color",longFallColor:this.getValue("@MACD.longFall.color"),shortGrowthLabel:this._i18n("macd-short-growth-label","Short (Grow)"),shortGrowthStyleKey:"@MACD.shortGrowth.style",shortGrowthStyle:this.getValue("@MACD.shortGrowth.style"),shortGrowthColorKey:"@MACD.shortGrowth.color",shortGrowthColor:this.getValue("@MACD.shortGrowth.color"),shortFallLabel:this._i18n("macd-short-fall-label","Short (Fall)"),shortFallStyleKey:"@MACD.shortFall.style",shortFallStyle:this.getValue("@MACD.shortFall.style"),shortFallColorKey:"@MACD.shortFall.color",shortFallColor:this.getValue("@MACD.shortFall.color")}},e.prototype.getVOLDescriptions=function(){return{periodLabel:this._i18n("vol-period-label","Period"),periodKey:"@VOL.period",period:this.getValue("@VOL.period"),maColorKey:"@VOL.maColor",maColor:this.getValue("@VOL.maColor")}},e.prototype.getTRIXDescriptions=function(e){return void 0===e&&(e="@TRIX"),{periodLabel:this._i18n("trix-length-label","Length"),periodKey:e+".period",period:this.getValue(e+".period"),colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getStochRSIDescriptions=function(){return{rsiPeriodLabel:this._i18n("stochRSI-rsi-label","Length RSI"),rsiPeriodKey:"@Stoch RSI.rsiPeriod",rsiPeriod:this.getValue("@Stoch RSI.rsiPeriod"),stochasticPeriodLabel:this._i18n("stochRSI-stoch-label","Length Stoch"),stochasticPeriodKey:"@Stoch RSI.stochasticPeriod",stochasticPeriod:this.getValue("@Stoch RSI.stochasticPeriod"),smoothKPeriodLabel:this._i18n("stochRSI-k-label","Smooth K"),smoothKLabel:"K%",smoothKPeriod:this.getValue("@Stoch RSI.kPeriod"),smoothKPeriodKey:"@Stoch RSI.kPeriod",smoothKVisible:this.getValue("@Stoch RSI.visibles.smoothK"),smoothKVisibleKey:"@Stoch RSI.visibles.smoothK",smoothKLineWidth:this.getValue("@Stoch RSI.lineWidths.smoothK"),smoothKLineWidthKey:"@Stoch RSI.lineWidths.smoothK",smoothKColor:this.getValue("@Stoch RSI.colors.smoothK"),smoothKColorKey:"@Stoch RSI.colors.smoothK",smoothDPeriodLabel:this._i18n("stochRSI-d-label","Smooth D"),smoothDLabel:"D%",smoothDPeriod:this.getValue("@Stoch RSI.dPeriod"),smoothDPeriodKey:"@Stoch RSI.dPeriod",smoothDVisible:this.getValue("@Stoch RSI.visibles.smoothD"),smoothDVisibleKey:"@Stoch RSI.visibles.smoothD",smoothDLineWidth:this.getValue("@Stoch RSI.lineWidths.smoothD"),smoothDLineWidthKey:"@Stoch RSI.lineWidths.smoothD",smoothDColor:this.getValue("@Stoch RSI.colors.smoothD"),smoothDColorKey:"@Stoch RSI.colors.smoothD"}},e.prototype.getWRDescriptions=function(){return(0,g.__assign)((0,g.__assign)({},this.getTRIXDescriptions("@Wm %R")),{periodLabel:this._i18n("wr-length-label","Length")})},e.prototype.getMTMDescriptions=function(e){return void 0===e&&(e="@MTM"),{periodLabel:this._i18n("mtm-length-label","Length"),periodKey:e+".period",period:this.getValue(e+".period"),sourceKey:e+".source",source:this.getValue(e+".source"),colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getDMIDescriptions=function(e){return void 0===e&&(e="@DMI"),{periodLabel:this._i18n("dmi-length-label","Length"),periodKey:e+".period",period:this.getValue(e+".period"),pDILabel:"+DI",pDIVisibleKey:e+".visibles.pDI",pDILineWidthKey:e+".lineWidths.pDI",pDIColorKey:e+".colors.pDI",pDIVisible:this.getValue(e+".visibles.pDI"),pDILineWidth:this.getValue(e+".lineWidths.pDI"),pDIColor:this.getValue(e+".colors.pDI"),nDILabel:"-DI",nDIVisibleKey:e+".visibles.nDI",nDILineWidthKey:e+".lineWidths.nDI",nDIColorKey:e+".colors.nDI",nDIVisible:this.getValue(e+".visibles.nDI"),nDILineWidth:this.getValue(e+".lineWidths.nDI"),nDIColor:this.getValue(e+".colors.nDI"),dxLabel:"ADX",dxVisibleKey:e+".visibles.dx",dxLineWidthKey:e+".lineWidths.dx",dxColorKey:e+".colors.dx",dxVisible:this.getValue(e+".visibles.dx"),dxLineWidth:this.getValue(e+".lineWidths.dx"),dxColor:this.getValue(e+".colors.dx")}},e.prototype.getEMVDescriptions=function(e){return void 0===e&&(e="@EMV"),{periodLabel:this._i18n("emv-length-label","Length"),periodKey:e+".period",period:this.getValue(e+".period"),colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth"),divisorLabel:this._i18n("emv-divisor-label","Divisor"),divisor:this.getValue(e+".x"),divisorKey:e+".x"}},e.prototype.getSARDescriptions=function(e){return void 0===e&&(e="@SAR"),{startLabel:this._i18n("sar-start-label","Start"),startKey:e+".step",start:this.getValue(e+".step"),colorKey:e+".color",color:this.getValue(e+".color"),colorLabel:"SAR",maxLabel:this._i18n("sar-max-label","Maximum"),max:this.getValue(e+".x"),maxKey:e+".x"}},e.prototype.getRSIDescriptions=function(e){var t=this;return void 0===e&&(e="RSI"),(0,g.__spreadArray)([],(0,g.__read)(Array(3).keys())).map((function(i){return{label:e,periodsKey:"@"+e+".periods["+i+"]",colorsKey:"@"+e+".colors["+i+"]",lineWidthsKey:"@"+e+".lineWidths["+i+"]",visiblesKey:"@"+e+".visibles["+i+"]",period:t.getValue("@"+e+".periods["+i+"]"),color:t.getValue("@"+e+".colors["+i+"]"),lineWidth:t.getValue("@"+e+".lineWidths["+i+"]"),visible:!!t.getValue("@"+e+".visibles["+i+"]")}}))},e.prototype.getCCIDescriptions=function(){return(0,g.__assign)((0,g.__assign)({},this.getTRIXDescriptions("@CCI")),{periodLabel:this._i18n("cci-length-label","Length")})},e.prototype.getKDJDescriptions=function(e){return void 0===e&&(e="@KDJ"),{periodLabel:this._i18n("kdj-k-label","Calculating Period"),periodKey:e+".period[0]",period:this.getValue(e+".period[0]"),ma1Label:this._i18n("kdj-d-label","MA Period 1"),ma1Key:e+".period[1]",ma1:this.getValue(e+".period[1]"),ma2Label:this._i18n("kdj-j-label","MA Period 2"),ma2Key:e+".period[2]",ma2:this.getValue(e+".period[2]"),kLabel:"K",kVisible:this.getValue(e+".visibles[0]"),kVisibleKey:e+".visibles[0]",kLineWidth:this.getValue(e+".lineWidths[0]"),kLineWidthKey:e+".lineWidths[0]",kColor:this.getValue(e+".colors[0]"),kColorKey:e+".colors[0]",dLabel:"D",dVisible:this.getValue(e+".visibles[1]"),dVisibleKey:e+".visibles[1]",dLineWidth:this.getValue(e+".lineWidths[1]"),dLineWidthKey:e+".lineWidths[1]",dColor:this.getValue(e+".colors[1]"),dColorKey:e+".colors[1]",jLabel:"J",jVisible:this.getValue(e+".visibles[2]"),jVisibleKey:e+".visibles[2]",jLineWidth:this.getValue(e+".lineWidths[2]"),jLineWidthKey:e+".lineWidths[2]",jColor:this.getValue(e+".colors[2]"),jColorKey:e+".colors[2]"}},e.prototype.getOBVDescriptions=function(e){return void 0===e&&(e="@OBV"),{label:"OBV",colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getBOLLDescriptions=function(e){return void 0===e&&(e="@BOLL"),{periodLabel:this._i18n("boll-length-label","Length"),periodKey:e+".period",period:this.getValue(e+".period"),stdDevLabel:this._i18n("boll-multiplier-label","Multiplier"),stdDevKey:e+".stdDev",stdDev:this.getValue(e+".stdDev"),upLabel:"UP",upVisible:this.getValue(e+".visibles[0]"),upVisibleKey:e+".visibles[0]",upLineWidth:this.getValue(e+".lineWidths[0]"),upLineWidthKey:e+".lineWidths[0]",upColor:this.getValue(e+".colors[0]"),upColorKey:e+".colors[0]",mbLabel:"MB",mbVisible:this.getValue(e+".visibles[1]"),mbVisibleKey:e+".visibles[1]",mbLineWidth:this.getValue(e+".lineWidths[1]"),mbLineWidthKey:e+".lineWidths[1]",mbColor:this.getValue(e+".colors[1]"),mbColorKey:e+".colors[1]",dnLabel:"DN",dnVisible:this.getValue(e+".visibles[2]"),dnVisibleKey:e+".visibles[2]",dnLineWidth:this.getValue(e+".lineWidths[2]"),dnLineWidthKey:e+".lineWidths[2]",dnColor:this.getValue(e+".colors[2]"),dnColorKey:e+".colors[2]"}},e.prototype.getVWAPDescriptions=function(){return(0,g.__assign)((0,g.__assign)({},this.getTRIXDescriptions("@VWAP")),{periodLabel:this._i18n("vwap-length-label","Length")})},e.prototype.getAVLDescriptions=function(e){return void 0===e&&(e="@AVL"),{label:"AVL",colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getOIUMDescriptions=function(e){return void 0===e&&(e="@OI-UM"),{oiLabel:"OI",colorKey:e+".bar.color",color:this.getValue(e+".bar.color"),nvLabel:"Notional Value of O.I.",nvLineWidthKey:e+".nv.lineWidth",nvLineWidth:this.getValue(e+".nv.lineWidth"),nvColorKey:e+".nv.color",nvColor:this.getValue(e+".nv.color")}},e.prototype.getOICMDescriptions=function(e){return void 0===e&&(e="@OI-CM"),{oiLabel:"OI",colorKey:e+".bar.color",color:this.getValue(e+".bar.color")}},e.prototype.getLSAccoDescriptions=function(e){return void 0===e&&(e="@LS-Acco"),{barLabel:"L.S Acco.",barBuyColorKey:e+".bar.buyColor",barBuyColor:this.getValue(e+".bar.buyColor"),barSellColorKey:e+".bar.sellColor",barSellColor:this.getValue(e+".bar.sellColor"),ratioLabel:"L/S Ratio (Acco.)",ratioColorKey:e+".ratio.color",ratioColor:this.getValue(e+".ratio.color"),ratioLineWidthKey:e+".ratio.lineWidth",ratioLineWidth:this.getValue(e+".ratio.lineWidth")}},e.prototype.getLSPositDescriptions=function(e){return void 0===e&&(e="@LS-Posit"),{barLabel:"L.S Posit.",barBuyColorKey:e+".bar.buyColor",barBuyColor:this.getValue(e+".bar.buyColor"),barSellColorKey:e+".bar.sellColor",barSellColor:this.getValue(e+".bar.sellColor"),ratioLabel:"L/S Ratio (Posit.)",ratioColorKey:e+".ratio.color",ratioColor:this.getValue(e+".ratio.color"),ratioLineWidthKey:e+".ratio.lineWidth",ratioLineWidth:this.getValue(e+".ratio.lineWidth")}},e.prototype.getLSRatioDescriptions=function(e){return void 0===e&&(e="@LS-Ratio"),{barLabel:"L.S Acco.",barBuyColorKey:e+".bar.buyColor",barBuyColor:this.getValue(e+".bar.buyColor"),barSellColorKey:e+".bar.sellColor",barSellColor:this.getValue(e+".bar.sellColor"),ratioLabel:"L/S Ratio",ratioColorKey:e+".ratio.color",ratioColor:this.getValue(e+".ratio.color"),ratioLineWidthKey:e+".ratio.lineWidth",ratioLineWidth:this.getValue(e+".ratio.lineWidth")}},e.prototype.getBSVolDescriptions=function(e){return void 0===e&&(e="@BSVol"),{label:"B.S Vol.",buyColorKey:e+".buyColor",buyColor:this.getValue(e+".buyColor"),sellColorKey:e+".sellColor",sellColor:this.getValue(e+".sellColor")}},e.prototype.getBasisDescriptions=function(e){return void 0===e&&(e="@Basis"),{basisLabel:"Basis",basisColorKey:e+".basisColor",basisColor:this.getValue(e+".basisColor"),futurePriceLabel:"Future Price",futurePriceColorKey:e+".futurePriceColor",futurePriceColor:this.getValue(e+".futurePriceColor"),priceIndexLabel:"Price Index",priceIndexColorKey:e+".priceIndexColor",priceIndexColor:this.getValue(e+".priceIndexColor")}},e}();var rl=i(23716),ol="BASIC-KLINE";const al=(0,p.forwardRef)((function(e,t){var i,n,r,o,a,l=e.dataProvider,s=e.interval,c=e.symbol,u=e.theme,d=e.themeKey,h=void 0===d?u:d,f=e.setLoading,v=e.baseAsset,m=void 0===v?"":v,y=e.quoteAsset,x=void 0===y?"":y,b=e.namespace,C=e.isStock,_=void 0!==C&&C,w=e.customTheme,S=e.defaultSettings,L=e.sensorsManager,E=e.storeSymbol,k=void 0===E?"":E,V=e.onDataArrived,A=e.needStore,T=void 0===A||A,M=e.beforeChartReady,D=void 0===M?function(){return Promise.resolve()}:M,I=(0,g.__rest)(e,["dataProvider","interval","symbol","theme","themeKey","setLoading","baseAsset","quoteAsset","namespace","isStock","customTheme","defaultSettings","sensorsManager","storeSymbol","onDataArrived","needStore","beforeChartReady"]),P=(0,g.__read)((0,p.useState)(!1),2)[1],B=(0,g.__read)((0,p.useState)(new Ja),1)[0],W=(0,g.__read)((0,p.useState)([]),2),R=W[0],H=W[1],Z=(0,g.__read)((0,p.useState)([]),2),O=Z[0],N=Z[1],F=(0,g.__read)((0,p.useState)(""),2),K=F[0],U=F[1],z=(0,p.useRef)(null),X=(0,p.useRef)(c),G=(0,p.useRef)(L),Y=(0,p.useRef)(),j=(0,p.useRef)(),q=(0,p.useRef)(!1);q.current=(null===(n=null===(i=z.current)||void 0===i?void 0:i.getCandlestick())||void 0===n?void 0:n.isLoaded())||!1,G.current=L;var Q=(0,p.useCallback)((function(){return P((function(e){return!e}))}),[P]),J=(0,p.useMemo)((function(){var t,i;return null===(i=null===(t=e.candlestick)||void 0===t?void 0:t.type)||void 0===i?void 0:i.toUpperCase()}),[e.candlestick]),$=(0,p.useMemo)((function(){return w?Object.keys(w).reduce((function(e,t){return e[t]=(i=w[t],(0,g.__assign)((0,g.__assign)({},i),{kline:Fr(i)})).kline,e;var i}),{}):{}}),[w]),ee=(0,p.useMemo)((function(){return $[u||"dark"]}),[$,u,h]),te=(0,p.useMemo)((function(){return function(e){var t=e.symbol,i=void 0===t?{candlestickStyle:lo.CandleBar}:t,n=e.customTheme,r=void 0===n?Mt.kn:n,o={periods:[7,25,99,0,0,0,0,0,0,0],sources:[Vi.Close,Vi.Close,Vi.Close,Vi.Close,Vi.Close,Vi.Close,Vi.Close,Vi.Close,Vi.Close,Vi.Close],lineWidths:["1","1","1","1","1","1","1","1","1","1"],colors:["rgba(241, 156, 56, 0.7)","rgba(234, 61, 247, 0.7)","rgba(116, 252, 253, 0.7)","rgba(139, 43, 246, 0.7)","rgba(0, 32, 245, 0.7)","rgba(234, 51, 35, 0.7)","rgba(87, 134, 224, 0.7)","rgba(255, 254, 85, 0.7)","rgba(117, 250, 76, 0.7)","rgba(138, 26, 16, 0.7)"],visibles:[!0,!0,!0,!1,!1,!1,!1,!1,!1,!1]};return{"@symbol":{candlestick:{style:i.candlestickStyle,up:{color:r["candle.upBarColor"],borderColor:r["candle.upBarColor"],wickColor:r["candle.upBarColor"]},down:{color:r["candle.downBarColor"],borderColor:r["candle.downBarColor"],wickColor:r["candle.downBarColor"]}},pristine:!0},"@background":{color:r.background,vertGridLine:{show:!0,lineWidth:fo[1],color:r["vertGridLine.color"]},horzGridLine:{show:!0,lineWidth:fo[1],color:r["horzGridLine.color"]},crosshairCursorLabel:{backgroundColor:r["cross.defaultLabelBgColor"],borderColor:r["cross.defaultLabelBorderColor"],textColor:r["cross.defaultLabelTextColor"]},crosshairBorderLine:{color:r["cross.borderLineColor"]},grid:{show:!0,color:r["grid.borderLineColor"]},frame:{color:r["frame.borderLineColor"]},pristine:!0},"@countdown":{upTextColor:r["countdown.upTextColor"],upBgColor:r["countdown.upBgColor"],upBorderColor:r["countdown.upBorderColor"],downTextColor:r["countdown.downTextColor"],downBgColor:r["countdown.downBgColor"],downBorderColor:r["countdown.downBorderColor"]},"@contextMenu":{countDown:!1,bidAsk:!1,priceLine:!1},"@drawTool":{currentAction:Dt.Us.CrossHairCursor},"@MA":o,"@EMA":ut()(o),"@WMA":ut()(o),"@MACD":{fastPeriod:12,slowPeriod:26,signalPeriod:9,visibles:{DEA:!0,DIF:!0,MACD:!0},lineWidths:{DEA:fo[1],DIF:fo[1]},colors:{DEA:"rgba(234, 61, 247, 0.7)",DIF:"rgba(116, 252, 253, 0.7)"},longGrowth:{style:Ai.Hollow,color:r["volume.upBarColor"]},longFall:{style:Ai.Solid,color:r["volume.upBarColor"]},shortGrowth:{style:Ai.Hollow,color:r["volume.downBarColor"]},shortFall:{style:Ai.Solid,color:r["volume.downBarColor"]}},"@VOL":{period:0,maColor:"rgba(14, 203, 129, 0.5)",visibles:[!1]},"@TRIX":{period:9,color:"rgba(241, 156, 56, 0.7)",lineWidth:fo[1]},"@Stoch RSI":{rsiPeriod:14,stochasticPeriod:14,kPeriod:3,dPeriod:3,visibles:{smoothK:!0,smoothD:!0},lineWidths:{smoothK:fo[1],smoothD:fo[1]},colors:{smoothK:"rgba(234, 61, 247, 0.7)",smoothD:"rgba(116, 252, 253, 0.7)"}},"@Wm %R":{period:14,color:"rgba(241, 156, 56, 0.7)",lineWidth:fo[1]},"@MTM":{period:14,source:Vi.Close,color:"rgba(241, 156, 56, 0.7)",lineWidth:fo[1]},"@DMI":{period:14,visibles:{pDI:!0,nDI:!0,dx:!0},lineWidths:{pDI:fo[1],nDI:fo[1],dx:fo[1]},colors:{pDI:"rgba(234, 61, 247, 0.7)",nDI:"rgba(116, 252, 253, 0.7)",dx:"rgba(241, 156, 56, 0.7)"}},"@EMV":{period:14,x:1e4,color:"rgba(241, 156, 56, 0.7)",lineWidth:fo[1]},"@SAR":{step:.02,x:.2,color:"rgba(241, 156, 56, 0.7)"},"@RSI":{periods:[6,12,24],lineWidths:[fo[1],fo[1],fo[1]],colors:["rgba(234, 61, 247, 0.7)","rgba(116, 252, 253, 0.7)","rgba(241, 156, 56, 0.7)"],visibles:[!0,!0,!0]},"@CCI":{period:9,color:"rgba(241, 156, 56, 0.7)",lineWidth:fo[1]},"@KDJ":{period:[9,3,3],lineWidths:[fo[1],fo[1],fo[1]],colors:["rgba(234, 61, 247, 0.7)","rgba(116, 252, 253, 0.7)","rgba(241, 156, 56, 0.7)"],visibles:[!0,!0,!0]},"@OBV":{color:"rgba(241, 156, 56, 0.7)",lineWidth:fo[1]},"@BOLL":{period:21,stdDev:2,lineWidths:[fo[1],fo[1],fo[1]],colors:["rgba(116, 252, 253, 0.7)","rgba(234, 61, 247, 0.7)","rgba(116, 252, 253, 0.7)"],visibles:[!0,!0,!0]},"@VWAP":{period:14,color:"rgba(241, 156, 56, 0.7)",lineWidth:fo[1]},"@AVL":{color:"rgba(241, 156, 56, 0.7)",lineWidth:fo[1]},"@OI-UM":{bar:{color:"rgba(14, 203, 129, 0.7)"},nv:{color:"rgba(234, 51, 35, 0.7)",lineWidth:fo[2]}},"@OI-CM":{bar:{color:"rgba(14, 203, 129, 0.7)"}},"@LS-Acco":{bar:{buyColor:"rgba(117, 250, 76, 0.7)",sellColor:"rgba(234, 51, 35, 0.7)"},ratio:{color:"rgba(234, 61, 247, 0.7)",lineWidth:fo[2]}},"@LS-Posit":{bar:{buyColor:"rgba(117, 250, 76, 0.7)",sellColor:"rgba(234, 51, 35, 0.7)"},ratio:{color:"rgba(234, 61, 247, 0.7)",lineWidth:fo[2]}},"@LS-Ratio":{bar:{buyColor:"rgba(117, 250, 76, 0.7)",sellColor:"rgba(234, 51, 35, 0.7)"},ratio:{color:"rgba(234, 61, 247, 0.7)",lineWidth:fo[2]}},"@BSVol":{buyColor:"rgba(117, 250, 76, 0.7)",sellColor:"rgba(234, 51, 35, 0.7)"},"@Basis":{basisColor:"rgba(241, 156, 56, 0.7)",futurePriceColor:"rgba(234, 51, 35, 0.7)",priceIndexColor:"rgba(117, 250, 76, 0.7)"}}}({symbol:null==S?void 0:S.symbol,customTheme:ee})}),[S,ee]),ie=(0,p.useMemo)((function(){if(b){var e=Vt().createInstance({name:b}),t="BASIC_KLINE_INDICATOR",i=(0,ii.Kn)(c)?"BASIC_KLINE_"+(0,It.T)(c):"BASIC_KLINE_"+c;return{getValue:function(){return Promise.all([e.getItem(t),e.getItem(i)]).then((function(e){var t=(0,g.__read)(e,2),i=t[0],n=void 0===i?[]:i,r=t[1],o=void 0===r?[]:r;try{return(n=n||[{type:"CANDLE",indicators:[{type:"MA",id:"@MA"}]},{type:"VOL",indicators:[{type:"VOL",id:"@VOL"}]}]).map((function(e,t){var i,n=e.type,r=e.indicators,a=void 0===r?[]:r,l=e.weight,s=void 0===l?0:l;return{annotations:(null===(i=null==o?void 0:o[t])||void 0===i?void 0:i.annotations)||[],type:n,indicators:a,weight:s}}))}catch(e){return rl.error("get previous data occured error: "+e.message),[]}}))},setValue:function(n){var r=n.reduce((function(e,t){return e.indicators.push({type:t.type,indicators:t.indicators,weight:null==t?void 0:t.weight}),e.annotations.push({type:t.type,annotations:(null==t?void 0:t.annotations)||[]}),e}),{indicators:[],annotations:[]}),o=r.indicators,a=r.annotations;!function(i){e.setItem(t,i)}(o),function(t){e.setItem(i,t)}(a)},clear:function(){return e.clear()}}}}),[b,c,k]);(0,p.useLayoutEffect)((function(){var e,t=null===(e=z.current)||void 0===e?void 0:e.getCandlestick();Y.current!==b&&(null==t||t.setAttr("needToReloadIndicator",!0),Y.current=b),b&&(j.current=new nl(b,te),null==t||t.registerModule(Mt.Jj.settingManager,j.current),(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return[4,null===(e=j.current)||void 0===e?void 0:e.loadStoreValue()];case 1:return i.sent(),null==t||t.update(),[2]}}))})))}),[b]),(0,p.useImperativeHandle)(t,(function(){return{getCandlestick:function(){var e;return null===(e=z.current)||void 0===e?void 0:e.getCandlestick()}}})),(0,p.useEffect)((function(){(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,t,i;return(0,g.__generator)(this,(function(n){switch(n.label){case 0:return e=null===(i=z.current)||void 0===i?void 0:i.getCandlestick(),_?(null==e||e.removeVolIndicators(),[3,3]):[3,1];case 1:return ie?[4,ie.getValue()]:[2];case 2:t=n.sent(),null==e||e.appendVolIndicators(t),n.label=3;case 3:return[2]}}))}))}),[_]),(0,p.useEffect)((function(){var e,t=null===(e=z.current)||void 0===e?void 0:e.registerColorTable;t&&$&&Object.keys($).forEach((function(e){t(e,$[e])}))}),[$]),(0,p.useEffect)((function(){f&&(0,ii.mf)(f)?B.setLoadCallback(f):B.setLoadCallback((function(){}))}),[f]),(0,p.useEffect)((function(){var e,t,i=!1,n=G.current;B.setDataProvider(l).setInterval(s).setSymbol(c);var r=!Tt()(X.current,c);try{B.triggerLoading(!0),null===(e=null==n?void 0:n.logOnFetchStart)||void 0===e||e.call(n),B.getData({},(function(e){var t;null===(t=null==n?void 0:n.logOnFetchEnd)||void 0===t||t.call(n),i||(H(e),r||B.triggerLoading(!1))}),!0)}catch(e){rl.error("basic kline fetch data occured error: "+e.message),r||B.triggerLoading(!1)}B.subcribe((function(e){i||(null==V||V(e),N([(0,g.__assign)({},e)]))}));var o=null===(t=z.current)||void 0===t?void 0:t.getCandlestick();return r&&(null==o||o.resetChart()),X.current=c,function(){i=!0,B.unSubcribe()}}),[s,c,l]),(0,p.useEffect)((function(){var e,t=!1,i=G.current,n=null===(e=z.current)||void 0===e?void 0:e.getCandlestick();return null==n||n.on("afterTimeShifted",ol,(0,It.Ds)((function(e){var t=e.minTime,i=e.shiftedMinTime,n=e.cb;B.isLoadAll?n&&n():t-i>(0,Mt.Sz)(B.interval)&&B.getData({startTime:i,endTime:t-1},(function(e){e.length>0&&H(e),n&&n()}))}),100)),ie&&(null==n||n.on("saveChartNeeded",ol,(function(e){var i=e.data,r=void 0===i?[]:i;n.isLoaded()&&!t&&ie.setValue(r)}))),null==n||n.on("chartReady",ol,(function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,r,o,a;return(0,g.__generator)(this,(function(l){switch(l.label){case 0:return null===(o=null==i?void 0:i.logOnKlineReady)||void 0===o||o.call(i),!t&&ie&&T?[4,ie.getValue()]:[2];case 1:return e=l.sent(),[4,D({storedData:e})];case 2:if(l.sent(),t)return[2];l.label=3;case 3:return l.trys.push([3,5,,6]),j.current&&n.registerModule(Mt.Jj.settingManager,j.current),[4,null==n?void 0:n.loadChart(e||[])];case 4:return r=l.sent(),null===(a=null==i?void 0:i.logOnCatchChart)||void 0===a||a.call(i,r),null==n||n.setAttr("needToReloadIndicator",!1),[3,6];case 5:return l.sent(),rl.error("kline load chart occured error"),ie.clear(),[3,6];case 6:return B.triggerLoading(!1),[2]}}))}))})),function(){null==n||n.off("afterTimeShifted",ol),null==n||n.off("saveChartNeeded",ol),null==n||n.off("chartReady",ol),t=!0}}),[ie,T]),(0,p.useEffect)((function(){var e=!1;return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var t,i,n,r,o;return(0,g.__generator)(this,(function(a){switch(a.label){case 0:return ie&&J&&q?(t=null===(n=z.current)||void 0===n?void 0:n.getCandlestick(),[4,ie.getValue()]):[2];case 1:return i=a.sent()||[],e||(J.toUpperCase()===Dt.oX.Line?null===(r=i[0])||void 0===r||r.indicators.forEach((function(e){var i=e.type,n=e.isTriggeredByClick,r=e.visible;null==t||t.setIndicatorVisibleByName(i,!(!n||!r))})):null===(o=i[0])||void 0===o||o.indicators.forEach((function(e){var i=e.type,n=e.isTriggeredByClick,r=e.visible;null==t||t.setIndicatorVisibleByName(i,!n||!!r)}))),[2]}}))})),function(){e=!0}}),[J,ie,q]),(0,p.useEffect)((function(){var e,t=null===(e=z.current)||void 0===e?void 0:e.getCandlestick();null==t||t.setSymbolInfo({baseAsset:m,quoteAsset:x})}),[m,x]);var ne=null===(r=j.current)||void 0===r?void 0:r.isLoaded(),re=null===(a=null===(o=z.current)||void 0===o?void 0:o.getCandlestick())||void 0===a?void 0:a.getSettingValues("@background.color");(0,p.useEffect)((function(){U(re)}),[re]);var oe=(0,p.useCallback)((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,t,i,n,r,o,a;return(0,g.__generator)(this,(function(l){switch(l.label){case 0:return e=j.current,t=null===(a=z.current)||void 0===a?void 0:a.getCandlestick(),ne&&e&&t?(i=e.getValues(),e.setDefaultValue(te),n=(null==i?void 0:i["@symbol"])||{},r=(null==i?void 0:i["@background"])||{},o=(null==i?void 0:i["@countdown"])||{},[4,e.setValues((0,g.__assign)((0,g.__assign)((0,g.__assign)({},te),i),{"@symbol":(0,g.__assign)((0,g.__assign)((0,g.__assign)({},te["@symbol"]),{candlestick:{style:n.candlestick.style}}),!n.pristine&&n),"@background":(0,g.__assign)((0,g.__assign)({},te["@background"]),!r.pristine&&r),"@countdown":(0,g.__assign)((0,g.__assign)({},te["@coutndown"]),!r.pristine&&o),"@drawTool":(0,g.__assign)((0,g.__assign)({},te["@drawTool"]),i["@drawTool"]),"@MACD":(0,g.__assign)((0,g.__assign)({},i["@MACD"]),{longGrowth:(0,g.__assign)((0,g.__assign)({},i["@MACD"].longGrowth),{color:te["@MACD"].longGrowth.color}),longFall:(0,g.__assign)((0,g.__assign)({},i["@MACD"].longFall),{color:te["@MACD"].longFall.color}),shortGrowth:(0,g.__assign)((0,g.__assign)({},i["@MACD"].shortGrowth),{color:te["@MACD"].shortGrowth.color}),shortFall:(0,g.__assign)((0,g.__assign)({},i["@MACD"].shortFall),{color:te["@MACD"].shortFall.color})})}))]):[2];case 1:return l.sent(),t.update(),Q(),U(e.getValues()["@background"].color),[2]}}))}))}),[ne,te]);return(0,p.useEffect)((function(){oe()}),[oe]),(0,yt.Z)((function(){var e=j.current;if(e){var t=e.getSymbolDescription();e.setValue(t.styleKey,J)}}),[J]),(0,p.useEffect)((function(){var e;null===(e=j.current)||void 0===e||e.registerI18n((function(e,t){var i;return(null===(i=I.getI18n)||void 0===i?void 0:i.call(I,e,{defaultValue:t}))||t}))}),[I.getI18n]),p.createElement(qa,(0,g.__assign)({},I,{ref:z,seriesData:R,nextData:O,symbol:c,interval:s,settingStore:j.current,sensorsManager:L,theme:u,forceUpdate:Q,background:K,defaultSettings:S}))}));var ll={line:"LINE",histogram:"BAR",area:"AREA",point:"POINT",cross:"CROSSLINE"},sl={int:"INT",float:"FLOAT",source:"SOURCE"},cl=i(23716),ul=function(e){return{defaultProps:{id:"",title:"",isCustom:!0,isHistBase:!1,isScaleCenter:!1},paramMetas:[],getResult:function(t,i,n){var r=this,o=-1;this.paramMetas=[],e.ChartInterface.Chart.input=function(e){return-1===o&&(r.paramMetas=[]),o++,r.paramMetas.push({key:"params"+o,label:e.title,type:sl[e.type],defaultValue:e.defval}),i["params"+o]||e.defval};try{e.runSync(t)}catch(e){cl.warn(e.message)}var a=[],l=ut()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{},s=ut()(e.ChartInterface.Chart&&e.ChartInterface.Chart.fills)||[];Object.keys(l).forEach((function(e){var i=l[e],n=i.series||[],r=(0,g.__read)(function(e,t){return t.map((function(t){var i=e.length-t.length;return t.map((function(t,n){return{time:e[n+i].time,value:t}}))}))}(t,[n]),1)[0],o=ll[i.style];switch(o){case"POINT":case"AREA":case"BAR":case"LINE":Object.keys(s).forEach((function(e){var t=s[e];-1!==t.data.indexOf(i.id)&&(t.source||(t.source=[]),t.source.push(r))}));case"CROSSLINE":a.push({data:r,colors:i.color,transp:i.transp||0,chartType:o,lineWidth:i.linewidth,histBase:i.histbase,zIndex:1})}})),Object.keys(s).forEach((function(e){var t=s[e];a.push({data:t.source[0],borderData:t.source[1],colors:t.color,transp:t.transp||0,type:"nolabel",chartType:"AREA",zIndex:1})})),n(a)},updateResult:function(t,i,n,r){if(r){try{e.update(r)}catch(e){cl.warn(e)}var o=ut()(i),a=ut()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{};try{Object.keys(a).forEach((function(e,i){var n=a[e];o[i].data[t]=o[i].data[t]||{},o[i].data[t].time=r.time,o[i].data[t].value=n.series[t],o[i].colors=n.color}))}catch(e){cl.warn(e)}return o}},getLabel:function(e,t,i){var n=this,r=[];return 0===this.paramMetas.length?r.push({label:(this.defaultProps.title||"")+"()",key:"title",styles:{paddingRight:"0px"}}):r.push({label:(this.defaultProps.title||"")+"(",key:"title",styles:{paddingRight:"0px"}}),this.paramMetas.forEach((function(e,t){var o,a=null===(o=n.paramMetas.find((function(e){return e.key==="params"+t})))||void 0===o?void 0:o.defaultValue;r.push({label:t===n.paramMetas.length-1?(i["params"+t]||a)+")":""+(i["params"+t]||a),key:""+t})})),t.forEach((function(t,n){var o,a,l=t.data,s=t.colors,c=t.type,u=l.findIndex((function(t){return t.time===e})),d=function(e,t){var i=function(e,i){for(var n,r=0,o=e.length;r<o;){var a=(l=void 0,l=e[n=Math.floor((o+r)/2)].time,t-l);if(a<0&&(o=n),0===a)return n;a>0&&(r=n+1)}var l;return Math.floor((o+r)/2)}(e);return e[i]&&e[i].time===t?e[i]:void 0}(l,e);if(d&&"nolabel"!==c){var h=""+(o=d.value,void 0!==(a=i.precision)?Number(isNaN(o)?NaN:null==o?void 0:o.toFixed(a)):o);r.push({label:h,key:"CUSTOM"+n,styles:{color:null==s?void 0:s[u]}})}})),r},getMobileLabel:function(){return[]}}},dl=function(e){var t=e.bizType,i=e.symbolDisplay;window.open("binance://customindicator/"+t+"/workspace/"+i)},hl=function(e){var t,i=e.checker,n=e.interval,r=void 0===n?1e3:n,o=e.timeout,a=void 0===o?1e4:o;return Promise.race([new Promise((function(e){t=setInterval((function(){return i()&&e()}),r)})),new Promise((function(e,t){setTimeout((function(){return t(new Error("timeout"))}),a)}))]).finally((function(){return clearInterval(t)}))},gl=i(23716),pl=function(e,t){try{return JSON.parse(e)}catch(i){return t||e}},fl=i(34406),vl=(0,p.forwardRef)((function(e,t){var n,r=e.klineOptions,o=e.showIndicatorMenu,a=e.customIndicators,l=void 0===a?[]:a,s=e.electronShortcutOptions,c=void 0===s?{symbol:"",value:"",options:[],setInterval:function(){return null},setChartType:function(){return null},enabled:!1}:s,u=e.userDefinedIndicatorOptions,d=void 0===u?{getNextChartTick:function(){return null},setMessageInfo:function(){return null},symbolDisplay:"",bizType:"",enabled:!1,compiler:null,electron:{}}:u,h=(0,p.useRef)(null),f=(0,p.useRef)(null),v=(0,p.useRef)(null==d?void 0:d.symbolDisplay);v.current=null==d?void 0:d.symbolDisplay,(0,p.useEffect)((function(){fl.electron&&(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,g.__generator)(this,(function(t){switch(t.label){case 0:return[4,Promise.all([i.e(7562),i.e(1994)]).then(i.bind(i,87562))];case 1:return e=t.sent(),f.current=e.Compiler,[2]}}))}))}),[]),(0,p.useImperativeHandle)(t,(function(){return{getCandlestick:function(){var e;return null===(e=h.current)||void 0===e?void 0:e.getCandlestick()},registerColorTable:function(){return null}}})),(0,yt.Z)((function(){var e,t,i;null===(i=null===(t=null===(e=h.current)||void 0===e?void 0:e.getCandlestick)||void 0===t?void 0:t.call(e))||void 0===i||i.showIndicatorsDialog()}),[o]),function(e){var t=e.candlestick,i=e.options,n=e.symbol,r=e.value,o=e.setInterval,a=e.setChartType,l=e.electron,s=e.enabled,c=(0,g.__read)((0,p.useState)(!1),2),u=c[0],d=c[1],h=(0,p.useCallback)((function(e){e.preventDefault(),e.stopPropagation()}),[]),f=(0,p.useCallback)((function(){return d(!0)}),[d]),v=(0,p.useCallback)((function(e){return function(t){var i;(null===(i=t.target)||void 0===i?void 0:i.matches(".focus-area"))||t.composedPath().some((function(t){return e.includes(t)}))||d(!1)}}),[d]),m=(0,p.useCallback)((function(e){if(u)switch(e.key){case"+":case"ArrowUp":null==t||t.zoomIn(),h(e);break;case"-":case"ArrowDown":null==t||t.zoomOut(),h(e);break;case"ArrowLeft":null==t||t.goForward(),h(e);break;case"ArrowRight":null==t||t.goNext(),h(e)}}),[h,u,t]),y=(0,p.useCallback)((function(){var e=i.indexOf(r)+1,t=i[e%i.length];o("Time"===t?"1m":t),a("Time"===t?Dt.oX.Line:Dt.oX.CandleBar)}),[r,i,o,a]);(0,p.useEffect)((function(){if(s&&l){var e=document.querySelectorAll(".focus-area"),t=v(Array.from(e));e.forEach((function(e){return e.addEventListener("click",f)})),document.addEventListener("click",t),document.addEventListener("keydown",m);var i=l.registerActionHandle((function(e){var t=e.name;u&&t===l.constants.ACTION_K_LINE_SWITCH_PERIOD&&y()}));return function(){i(),null==e||e.forEach((function(e){return e.removeEventListener("click",f)})),document.removeEventListener("click",t),document.removeEventListener("keydown",m)}}}),[u,n,h,f,v,m,y,l,s])}((0,g.__assign)((0,g.__assign)({},c),{candlestick:null===(n=h.current)||void 0===n?void 0:n.getCandlestick()}));var m=r.beforeChartReady,y=(0,p.useCallback)((function(){return function(e){var t=e.candleRef;e.customIndicators.forEach((function(e){var i,n,r,o=e.name,a=e.indicator;null===(r=null===(n=null===(i=t.current)||void 0===i?void 0:i.getCandlestick)||void 0===n?void 0:n.call(i))||void 0===r||r.registerCustomIndicator(o,a)}))}({candleRef:h,customIndicators:l})}),[l]),x=(0,p.useCallback)((function(e){return function(e){var t=e.candleRef,i=e.symbolDisplayRef,n=e.bizType,r=e.setMessageInfo,o=e.storedData,a=e.electron,l=e.enabled,s=e.compiler;return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,c,u,d,h,p,f,v,m,y,x,b,C,_,w,S,L,E,k,V;return(0,g.__generator)(this,(function(A){switch(A.label){case 0:if(!l||!a||!t.current)return[2];A.label=1;case 1:return A.trys.push([1,3,,4]),[4,hl({checker:function(){return!!s}})];case 2:return A.sent(),[3,4];case 3:return e=A.sent(),gl.error("Compiler module not found "+e.message),[3,4];case 4:return s?(c=new s,u=null===(k=t.current)||void 0===k?void 0:k.getCandlestick(),p=function(){var e;(null===(e=c.Errors)||void 0===e?void 0:e.length)<=0||r({message:"Failed to compile custom indicator, please check your code!",variant:"error",autoHideDuration:3500})},f=function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,t,r,o;return(0,g.__generator)(this,(function(l){switch(l.label){case 0:return[4,null==a?void 0:a.storage.getItem("customIndicatorPassFiles")];case 1:return e=l.sent(),t=pl(e,{}),(r=Object.keys(t)).find((function(e){return e.startsWith("untitled-")}))?(o=Math.max.apply(null,r.filter((function(e){return e.startsWith("untitled-")})).map((function(e){return+e.split("-")[1]}))),[4,null==a?void 0:a.storage.setItem("customIndicatorCurFileName","untitled-"+(o+1))]):[3,3];case 2:return l.sent(),[3,7];case 3:return r.find((function(e){return e.startsWith("untitled")}))?[4,null==a?void 0:a.storage.setItem("customIndicatorCurFileName","untitled-1")]:[3,5];case 4:return l.sent(),[3,7];case 5:return[4,null==a?void 0:a.storage.setItem("customIndicatorCurFileName","untitled")];case 6:l.sent(),l.label=7;case 7:return dl({symbolDisplay:i.current,bizType:n}),[2]}}))}))},v=function(e){var t=e.name;return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,null==a?void 0:a.storage.setItem("customIndicatorCurFileName",t)];case 1:return e.sent(),dl({symbolDisplay:i.current,bizType:n}),[2]}}))}))},[4,null==a?void 0:a.storage.getItem("customIndicatorPassFiles")]):[2];case 5:if(m=A.sent(),(y=pl(m))&&(d=y,Object.entries(d).forEach((function(e){var t=(0,g.__read)(e,2),i=t[0],n=t[1].id||"@"+i+"_v1";null==u||u.registerCustomIndicator(n,{defaultProps:{isCustom:!0,id:n,title:i}})}))),M=(T=o||[]).length,(x=function e(t){if(t>=M)return null;var i=T[t].indicators;return(null==i?void 0:i.find((function(e){return e.isCustom})))||e(t+1)}(0))&&(b=x.id,C=x.name,_=x.type,w=y[_]||y[C])){S=w.code;try{c.compile(S),p(),c.runOnce(),L=ul(c),(E=null===(V=c.ChartInterface)||void 0===V?void 0:V.Chart).study&&(L.defaultProps=(0,g.__assign)((0,g.__assign)({},L.defaultProps),{isHistBase:E.study.overlay||!1,title:C||E.study.title||"",isScaleCenter:!0,isCustom:!0,id:b})),null==u||u.registerCustomIndicator(b,L),null==u||u.addIndicatorByName(b),h=b}catch(e){gl.error(e)}}return null==u||u.registerCustomIndicatorCallback({onAdd:f,onEdit:v,onRemove:function(e){return(0,g.__awaiter)(this,void 0,void 0,(function(){var t,i,n;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:return u.removeCustomIndicatorByName(e),[4,null==a?void 0:a.storage.getItem("customIndicatorPassFiles")];case 1:return t=r.sent(),i=pl(t,{}),n=Object.fromEntries(Object.entries(i).filter((function(t){var i=(0,g.__read)(t,2),n=i[0];return(i[1].id||"@"+n+"_v1")!==e}))),[4,null==a?void 0:a.storage.setItem("customIndicatorPassFiles",JSON.stringify(n))];case 2:return r.sent(),[2]}}))}))}}),null==u||u.on("customIndicatorClick",(function(e){var t=e.data,i=t.name,n=t.id;u.closeIndicatorByName(h);var r=((null==d?void 0:d[i])||(null==d?void 0:d[n])||{}).code,o=void 0===r?"":r;try{c.compile(o),p(),c.runOnce();var a=ul(c),l=c.ChartInterface.Chart;l.study&&(a.defaultProps=(0,g.__assign)((0,g.__assign)({},a.defaultProps),{isHistBase:l.study.overlay||!1,title:i||l.study.title||"",isScaleCenter:!0,isCustom:!0,id:n})),u.registerCustomIndicator(n,a),u.addIndicatorByName(n),h=n}catch(e){gl.error(e)}})),[2]}var T,M}))}))}((0,g.__assign)((0,g.__assign)({},d),{symbolDisplayRef:v,compiler:f.current,enabled:!!fl.electron,storedData:e.storedData,candleRef:h}))}),[d]),b=(0,p.useCallback)((function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(t){switch(t.label){case 0:return[4,null==m?void 0:m(e)];case 1:return t.sent(),y(),[4,x(e)];case 2:return t.sent(),[2]}}))}))}),[y,x,m]),C=(0,p.useMemo)((function(){return Et()(b)}),[]);return p.createElement(al,(0,g.__assign)({style:{width:"100%",height:"100%",position:"relative"}},r,{beforeChartReady:C,ref:h}))})),ml=function(e){var t=e.promptText,i=e.buttonText,n=e.onClick;return p.createElement(f.Z,{sx:{flexDirection:"column",px:"4px",py:"4px"}},p.createElement(C.Z,{sx:{color:"bg5",fontSize:"14px"}},t),p.createElement(f.Z,{sx:{justifyContent:"flex-end",marginTop:"10px"}},p.createElement(A.Z,{onClick:n,sx:{borderRadius:"12px",bg:"t.white",backgroundImage:"none",color:"bg5",minWidth:"62px",height:"24px"}},i)))},yl=i(72540),xl=i(23749),bl=i(92424),Cl=i(86368),_l=i(34406);const wl=function(e){var t=e.basicKline,i=e.tradingView,n=e.depth,r=e.symbol,o=e.namespace,a=e.unmountTime,l=void 0===a?6e5:a,s=e.electron,c=(0,bl.createStore)(o),u=(0,Cl.createStore)(o),d=(0,g.__read)((0,p.useState)(!1),2),h=d[0],f=d[1],v=(0,g.__read)((0,p.useState)(!1),2),m=v[0],y=v[1],x=(0,g.__read)((0,p.useState)(!1),2),b=x[0],C=x[1],_=(0,p.useRef)(),w=(0,p.useRef)(!0),S=(0,g.__read)(c(bl.getActiveTab),1)[0],L=(0,g.__read)(c(bl.getInterval),1)[0],E=(0,g.__read)(c(bl.getPriceType),1)[0],k=(0,g.__read)(u(Cl.getTvKey),2),V=k[0],A=k[1],T=(0,g.__read)(u(Cl.getCandlestickKey),2),M=T[0],D=T[1];(0,p.useEffect)((function(){var e=function(){A(),D()};return window.addEventListener("online",e),function(){return window.removeEventListener("online",e)}}),[D,A]);var I=(0,p.useCallback)((function(e){var t=e.key,i=e.newValue,n=e.oldValue;"customIndicatorPassFilesTime"!==t&&"customIndicatorPassFiles"!==t&&"backtestFiles"!==t||i===n||D()}),[D]);return(0,p.useEffect)((function(){return _l.electron?null==s||s.storage.onStorageEvent(I):window.addEventListener("storage",I),function(){return window.removeEventListener("storage",I)}}),[null==s?void 0:s.storage,I]),(0,p.useEffect)((function(){if(S===bl.Tabs.TradingView&&w.current&&(w.current=!1),S===bl.Tabs.TradingView){if(y(!1),clearTimeout(_.current),_.current=window.setTimeout(f,l,!0),!b)return;D(),C(!1)}else if(S===bl.Tabs.Origin){if(f(!1),clearTimeout(_.current),_.current=window.setTimeout(y,l,!0),!b)return;D(),C(!1)}else S===bl.Tabs.Depth&&(clearTimeout(_.current),_.current=window.setTimeout((function(){f(!0),y(!0),C(!0)}),l));return function(){return clearTimeout(_.current)}}),[S]),(0,p.useEffect)((function(){switch(S){case bl.Tabs.TradingView:f(!0);break;case bl.Tabs.Origin:y(!0)}}),[r,L,E]),p.createElement(p.Fragment,null,h?null:p.createElement(p.Fragment,{key:"bk-"+M},t({symbol:r,namespace:o})),m||w.current&&S!==bl.Tabs.TradingView?null:p.createElement(p.Fragment,{key:"tv-"+V},i({symbol:r,namespace:o})),S===bl.Tabs.Depth?n({symbol:r,namespace:o}):null)};var Sl=i(23793),Ll=i(50909),El=function(e,t){var i=localStorage.getItem(e);if(""!==i&&null!=i){var n=i;try{n=JSON.parse(i)}catch(e){}""!==n&&null!=n&&(t(n),localStorage.removeItem(e))}},kl=i(34406),Vl=Object.values(bl.DisplayIntervals),Al=p.lazy((function(){return i.e(6961).then(i.bind(i,46961))}));var Tl=i(34274),Ml=i(33941),Dl={hasError:!1,error:null,info:null};const Il=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=Dl,t.resetErrorBoundary=function(){for(var e,i,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];null===(i=null===(e=t.props)||void 0===e?void 0:e.onReset)||void 0===i||i.apply(t,n),t.setState(Dl)},t}return(0,g.__extends)(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}},t.prototype.componentDidCatch=function(e,t){var i,n,r=this,o=this.props.track;"undefined"!=typeof Sentry&&Sentry.configureScope((function(t){t.setTag("widget",r.props.name),t.setExtra("widget",r.props.name),Sentry.captureException(e)})),null===(n=(i=this.props).onError)||void 0===n||n.call(i,e,null==t?void 0:t.componentStack),o&&o("widget_error",{widget:this.props.name}),this.setState({error:e,info:t,hasError:!0})},t.prototype.componentDidMount=function(){var e=this.props.onComponentMounting;e&&e()},t.prototype.render=function(){var e=this.state,t=e.error,i=e.info,n=e.hasError,r=this.props,o=r.fallbackRender,a=r.FallbackComponent,l=r.fallback;if(n){var s={componentStack:null==i?void 0:i.componentStack,error:t,resetErrorBoundary:this.resetErrorBoundary};return p.isValidElement(l)?l:"function"==typeof o?o(s):"function"==typeof a?p.createElement(a,(0,g.__assign)({},s)):p.createElement(C.Z,{fontSize:3,color:"t.primary",p:3},(this.props.name||"Something")+" went wrong.")}return this.props.children},t}(p.Component);var Pl={line:"LINE",histogram:"BAR",area:"AREA",point:"POINT",cross:"CROSSLINE"},Bl={int:"INT",float:"FLOAT",source:"SOURCE"},Wl=i(23716),Rl=function(e){return{defaultProps:{id:"",title:"",isCustom:!0,isHistBase:!1,isScaleCenter:!1},paramMetas:[],getResult:function(t,i,n){var r=this,o=-1;this.paramMetas=[],e.ChartInterface.Chart.input=function(e){return-1===o&&(r.paramMetas=[]),o++,r.paramMetas.push({key:"params"+o,label:e.title,type:Bl[e.type],defaultValue:e.defval}),i["params"+o]||e.defval};try{e.runSync(t)}catch(e){Wl.warn(e.message)}var a=[],l=ut()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{},s=ut()(e.ChartInterface.Chart&&e.ChartInterface.Chart.fills)||[];Object.keys(l).forEach((function(e){var i=l[e],n=i.series||[],r=(0,g.__read)(function(e,t){return t.map((function(t){var i=e.length-t.length;return t.map((function(t,n){return{time:e[n+i].time,value:t}}))}))}(t,[n]),1)[0],o=Pl[i.style];switch(o){case"POINT":case"AREA":case"BAR":case"LINE":Object.keys(s).forEach((function(e){var t=s[e];-1!==t.data.indexOf(i.id)&&(t.source||(t.source=[]),t.source.push(r))}));case"CROSSLINE":a.push({data:r,colors:i.color,transp:i.transp||0,chartType:o,lineWidth:i.linewidth,histBase:i.histbase,zIndex:1})}})),Object.keys(s).forEach((function(e){var t=s[e];a.push({data:t.source[0],borderData:t.source[1],colors:t.color,transp:t.transp||0,type:"nolabel",chartType:"AREA",zIndex:1})})),n(a)},updateResult:function(t,i,n,r){if(r){try{e.update(r)}catch(e){Wl.warn(e)}var o=ut()(i),a=ut()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{};try{Object.keys(a).forEach((function(e,i){var n=a[e];o[i].data[t]=o[i].data[t]||{},o[i].data[t].time=r.time,o[i].data[t].value=n.series[t],o[i].colors=n.color}))}catch(e){Wl.warn(e)}return o}},getLabel:function(e,t,i){var n=this,r=[];return 0===this.paramMetas.length?r.push({label:(this.defaultProps.title||"")+"()",key:"title",styles:{paddingRight:"0px"}}):r.push({label:(this.defaultProps.title||"")+"(",key:"title",styles:{paddingRight:"0px"}}),this.paramMetas.forEach((function(e,t){var o,a=null===(o=n.paramMetas.find((function(e){return e.key==="params"+t})))||void 0===o?void 0:o.defaultValue;r.push({label:t===n.paramMetas.length-1?(i["params"+t]||a)+")":""+(i["params"+t]||a),key:""+t})})),t.forEach((function(t,n){var o,a,l=t.data,s=t.colors,c=t.type,u=l.findIndex((function(t){return t.time===e})),d=function(e,t){var i=function(e,i){for(var n,r=0,o=e.length;r<o;){var a=(l=void 0,l=e[n=Math.floor((o+r)/2)].time,t-l);if(a<0&&(o=n),0===a)return n;a>0&&(r=n+1)}var l;return Math.floor((o+r)/2)}(e);return e[i]&&e[i].time===t?e[i]:void 0}(l,e);if(d&&"nolabel"!==c){var h=""+(o=d.value,void 0!==(a=i.precision)?Number(isNaN(o)?NaN:null==o?void 0:o.toFixed(a)):o);r.push({label:h,key:"CUSTOM"+n,styles:{color:null==s?void 0:s[u]}})}})),r},getMobileLabel:function(){return[]}}},Hl=i(34406),Zl=function(e){var t=e.bizType,i=e.symbolDisplay,n=e.isBacktest,r=(void 0!==n&&n?"backtest":"customindicator")+"/"+t+"/workspace/"+i,o=(null===window||void 0===window?void 0:window.location.pathname.split("/")[1])||"en";Hl.electron?window.open("binance://"+r):function(e){var t,i,n=e.url,r=e.width,o=e.height,a=(null===window||void 0===window?void 0:window.screenLeft)||window.screenX,l=(null===window||void 0===window?void 0:window.screenTop)||window.screenY,s=(null===window||void 0===window?void 0:window.innerWidth)||(null===(t=document.documentElement)||void 0===t?void 0:t.clientWidth)||screen.width,c=(null===window||void 0===window?void 0:window.innerHeight)||(null===(i=document.documentElement)||void 0===i?void 0:i.clientHeight)||screen.height,u=s/window.screen.availWidth,d=(c-o)/2/u+l,h=(s-r)/2/u+a,g=window.open(n,"_blank","\n    popup=true,\n    width="+r+",\n    height="+o+",\n    top="+d+",\n    left="+h);null==g||g.focus()}({url:"/"+o+"/"+r,width:1e3,height:600})},Ol=i(23716),Nl=function(e,t){try{return JSON.parse(e)}catch(i){return t||e}},Fl=function(e){return(void 0===e?{}:e).isBacktest?"backtestFiles":"customIndicatorPassFiles"},Kl=function(e){return(void 0===e?{}:e).isBacktest?"backtestCurFileName":"customIndicatorCurFileName"},Ul=i(34406),zl=function(e){var t=e.klineOptions,n=e.customIndicators,r=void 0===n?[]:n,o=e.setMessageInfo,a=void 0===o?function(){return null}:o,l=e.symbolDisplay,s=void 0===l?"":l,c=e.bizType,u=void 0===c?"":c,d=e.orders,h=void 0===d?[]:d,f=e.positions,v=void 0===f?[]:f,m=e.executionOrders,y=void 0===m?[]:m,x=e.theme,b=e.enableCustomIndicator,C=void 0===b?!!Ul.electron:b,_=e.enableBacktest,w=void 0===_?!!Ul.electron:_,L=e.electron,E=void 0===L?{}:L,k=(0,bl.createStore)(t.namespace),V=(0,Cl.createStore)(t.namespace),A=(0,g.__read)(k(bl.getChartMode),1)[0],T=(0,g.__read)(k(bl.getInterval),1)[0],M=k(bl.getTrueInterval),D=(0,g.__read)(k(bl.getOriginalChartStyle),2),I=D[0],P=D[1],B=(0,g.__read)(k(bl.getPriceType),1)[0],W=(0,g.__read)(k(bl.getActiveTab),1)[0],R=(0,g.__read)(V(Cl.getLoading),2)[1],H=(0,ia.F)(),Z=H.isMobile,O=H.isIPad,N=(0,g.__read)(V(Cl.getCandlestickReference),2),F=N[0],K=N[1],U=T===bl.DisplayIntervals.Time?Dt.oX.Line:I,z=(0,p.useMemo)((function(){return C&&!Z&&!O}),[C,O,Z]),X=(0,p.useMemo)((function(){return w&&!Z&&!O}),[w,O,Z]),G=(0,p.useCallback)((function(e,t){switch(e){case"@symbol.candlestick.style":P(t)}}),[P]),Y=(0,Tl.Z)("","kline-ui").getI18n,j=(0,g.__read)((0,p.useState)(1),2),q=j[0],Q=j[1],J=(0,p.useMemo)((function(){return""+t.symbol+q}),[t.symbol,q]),$=(0,p.useCallback)((function(e){return W===bl.Tabs.Origin&&R(e)}),[W,R]),ee=(0,p.useCallback)((function(){return Q((function(e){return e+1}))}),[Q]),te=(0,Ml.z)((function(){M!==bl.DisplayIntervals["1M"]&&M!==bl.DisplayIntervals["1s"]&&ee()}),1e3),ie=(0,p.useRef)(null),ne=(0,p.useRef)(null),re=(0,p.useRef)(s);(0,p.useEffect)((function(){re.current=s}),[s]),(0,p.useEffect)((function(){var e;K(null===(e=ie.current)||void 0===e?void 0:e.getCandlestick())}),[K,t.symbol]),(0,p.useEffect)((function(){F&&F.on("dispatchErrorData",te)}),[F,te]),(0,p.useEffect)((function(){z&&(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,g.__generator)(this,(function(t){switch(t.label){case 0:return[4,Promise.all([i.e(7562),i.e(1994)]).then(i.bind(i,87562))];case 1:return e=t.sent(),ne.current=e.Compiler,[2]}}))}))}),[z]);var oe=(0,p.useCallback)((function(){return function(e){var t=e.candleRef;e.customIndicators.forEach((function(e){var i,n,r,o=e.name,a=e.indicator;null===(r=null===(n=null===(i=t.current)||void 0===i?void 0:i.getCandlestick)||void 0===n?void 0:n.call(i))||void 0===r||r.registerCustomIndicator(o,a)}))}({candleRef:ie,customIndicators:r})}),[r]),ae=(0,p.useCallback)((function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(t){return Ul.electron?[2,null==E?void 0:E.storage.getItem(e)]:[2,window.localStorage.getItem(e)||""]}))}))}),[null==E?void 0:E.storage]),le=(0,p.useCallback)((function(e,t){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(i){return Ul.electron?null==E||E.storage.setItem(e,t):window.localStorage.setItem(e,t),[2]}))}))}),[null==E?void 0:E.storage]),se=(0,p.useCallback)((function(e){return function(e){var t=e.candleRef,i=e.symbolDisplayRef,n=e.bizType,r=e.setMessageInfo,o=e.storedData,a=e.enabled,l=e.compiler,s=e.onGetStorageItem,c=e.onSetStorageItem;return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,u,d,h,p,f,v,m,y,x,b,C,_,w,S,L,E,k,V,A,T,M,D,I;return(0,g.__generator)(this,(function(P){switch(P.label){case 0:if(!a||!t.current)return[2];P.label=1;case 1:return P.trys.push([1,3,,4]),[4,hl({checker:function(){return!!l}})];case 2:return P.sent(),[3,4];case 3:return e=P.sent(),Ol.error("Compiler module not found "+e.message),[3,4];case 4:return l?(u=new l,d=null===(D=t.current)||void 0===D?void 0:D.getCandlestick(),v=function(){var e;(null===(e=u.Errors)||void 0===e?void 0:e.length)<=0||r({message:"Failed to compile custom indicator, please check your code!",variant:"error",autoHideDuration:3500})},m=function(e){return void 0===e&&(e={}),(0,g.__awaiter)(void 0,void 0,void 0,(function(){var t,r,o,a,l;return(0,g.__generator)(this,(function(u){switch(u.label){case 0:return[4,s(Fl(e))];case 1:return t=u.sent(),r=Nl(t,{}),o=Object.keys(r),a=Kl(e),o.find((function(e){return e.startsWith("untitled-")}))?(l=Math.max.apply(null,o.filter((function(e){return e.startsWith("untitled-")})).map((function(e){return+e.split("-")[1]}))),[4,c(a,"untitled-"+(l+1))]):[3,3];case 2:return u.sent(),[3,7];case 3:return o.find((function(e){return e.startsWith("untitled")}))?[4,c(a,"untitled-1")]:[3,5];case 4:return u.sent(),[3,7];case 5:return[4,c(a,"untitled")];case 6:u.sent(),u.label=7;case 7:return Zl({symbolDisplay:i.current,bizType:n,isBacktest:e.isBacktest}),[2]}}))}))},y=function(e,t){var r=e.name;return void 0===t&&(t={}),(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,g.__generator)(this,(function(o){switch(o.label){case 0:return e=Kl(t),[4,c(e,r)];case 1:return o.sent(),Zl({symbolDisplay:i.current,bizType:n,isBacktest:t.isBacktest}),[2]}}))}))},[4,(x=function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var t,i,n;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:return t=Fl({isBacktest:e}),[4,s(t)];case 1:return i=r.sent(),(n=Nl(i))&&Object.entries(n).forEach((function(t){var i=(0,g.__read)(t,2),n=i[0],r=i[1].id||"@"+n+"_v1";null==d||d.registerCustomIndicator(r,{defaultProps:{isCustom:!0,isBacktest:e,id:r,title:n}})})),[2,n]}}))}))})(!1)]):[2];case 5:return b=P.sent(),h=b,[4,x(!0)];case 6:if(C=P.sent(),p=C,W=(B=o||[]).length,(_=function e(t){if(t>=W)return null;var i=B[t].indicators;return(null==i?void 0:i.find((function(e){return e.isCustom})))||e(t+1)}(0))&&(w=_.id,S=_.name,L=_.type,E=b[L]||b[S]||C[L]||C[S],k=Boolean((null==p?void 0:p[S])||(null==p?void 0:p[w])),E)){V=E.code;try{u.compile(V),v(),u.runOnce(),A=Rl(u),(T=null===(I=u.ChartInterface)||void 0===I?void 0:I.Chart).study&&!k?A.defaultProps=(0,g.__assign)((0,g.__assign)({},A.defaultProps),{isHistBase:T.study.overlay||!1,title:S||T.study.title||"",isScaleCenter:!0,isCustom:!0,isBacktest:Boolean(C[L]||C[S]),id:w}):k&&(M=(u.scriptParams||{}).overlay,A.defaultProps=(0,g.__assign)((0,g.__assign)({},A.defaultProps),{title:S||"",isHistBase:M||!1,isScaleCenter:!0,isCustom:!0,isBacktest:!0,id:w})),null==d||d.registerCustomIndicator(w,A),null==d||d.addIndicatorByName(w),f=w}catch(e){Ol.error(e)}}return null==d||d.registerCustomIndicatorCallback({onAdd:m,onEdit:y,onRemove:function(e,t){return(0,g.__awaiter)(this,void 0,void 0,(function(){var i,n,r;return(0,g.__generator)(this,(function(o){switch(o.label){case 0:return d.removeCustomIndicatorByName(e),[4,s(Fl(t))];case 1:return i=o.sent(),n=Nl(i,{}),r=Object.fromEntries(Object.entries(n).filter((function(t){var i=(0,g.__read)(t,2),n=i[0];return(i[1].id||"@"+n+"_v1")!==e}))),[4,c(Fl(t),JSON.stringify(r))];case 2:return o.sent(),[2]}}))}))}}),null==d||d.on("customIndicatorClick",(function(e){var t=e.data,i=t.name,n=t.id;d.closeIndicatorByName(f);var r=((null==h?void 0:h[i])||(null==h?void 0:h[n])||(null==p?void 0:p[i])||(null==p?void 0:p[n])).code,o=void 0===r?"":r,a=Boolean((null==p?void 0:p[i])||(null==p?void 0:p[n]));try{u.compile(o),v(),u.runOnce();var l=Rl(u),s=u.ChartInterface.Chart;if(s.study&&!a)l.defaultProps=(0,g.__assign)((0,g.__assign)({},l.defaultProps),{isHistBase:s.study.overlay||!1,title:i||s.study.title||"",isScaleCenter:!0,isCustom:!0,id:n});else if(a){var c=(u.scriptParams||{}).overlay;l.defaultProps=(0,g.__assign)((0,g.__assign)({},l.defaultProps),{title:i||"",isHistBase:c||!1,isScaleCenter:!0,isCustom:!0,isBacktest:!0,id:n})}Ol.log({id:n,customIndicator:l}),d.registerCustomIndicator(n,l),d.addIndicatorByName(n),f=n}catch(e){Ol.error(e)}})),[2]}var B,W}))}))}({setMessageInfo:a,bizType:u,symbolDisplayRef:re,compiler:ne.current,enabled:z,storedData:e.storedData,candleRef:ie,onGetStorageItem:ae,onSetStorageItem:le})}),[u,ae,le,a,z]),ce=(0,p.useCallback)((function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var i;return(0,g.__generator)(this,(function(n){switch(n.label){case 0:return[4,null===(i=t.beforeChartReady)||void 0===i?void 0:i.call(t,e)];case 1:return n.sent(),oe(),[4,se(e)];case 2:return n.sent(),[2]}}))}))}),[oe,se,t]),ue=(0,p.useMemo)((function(){return Et()(ce)}),[]);return function(e){var t=e.namespace,i=e.orders,n=e.theme,r=(0,bl.createStore)(t),o=(0,Cl.createStore)(t),a=(0,g.__read)(r(bl.getShowLimitOrder),1)[0],l=(0,g.__read)(o(Cl.getCandlestickReference),1)[0],s=(0,Tl.Z)("","kline-ui").getI18n,c=(0,p.useMemo)((function(){return s("order-drag-tooltip",{defaultValue:"Drag for price modify"})}),[s]),u=(0,p.useMemo)((function(){return s("order-modify-tooltip",{defaultValue:"Click for modify"})}),[s]),d=(0,p.useMemo)((function(){return s("order-cancel-tooltip",{defaultValue:"Click for cancel"})}),[s]),h=(0,p.useMemo)((function(){return i.map((function(e){var t=e.isBuy,i=(0,g.__rest)(e,["isBuy"]);return(0,g.__assign)((0,g.__assign)((0,g.__assign)({},i),function(e){var t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m,y,x,b=e.theme,C=e.isBuy?null===(t=null==b?void 0:b.colors)||void 0===t?void 0:t.buy:null===(i=null==b?void 0:b.colors)||void 0===i?void 0:i.sell;return{dragSquareIconColor:C,dragSquareBackgroundColor:null===(n=null==b?void 0:b.colors)||void 0===n?void 0:n.popupBg,dragSquareDraggingBackgroundColor:null===(r=null==b?void 0:b.colors)||void 0===r?void 0:r.line,closeIconColor:null===(a=null===(o=null==b?void 0:b.colors)||void 0===o?void 0:o.t)||void 0===a?void 0:a.secondary,priceBackground:C,priceColor:null===(s=null===(l=null==b?void 0:b.colors)||void 0===l?void 0:l.t)||void 0===s?void 0:s.primary,priceBorderColor:C,quantityBackground:null===(c=null==b?void 0:b.colors)||void 0===c?void 0:c.popupBg,quantityColor:null===(d=null===(u=null==b?void 0:b.colors)||void 0===u?void 0:u.t)||void 0===d?void 0:d.primary,quantityBorderColor:null===(h=null==b?void 0:b.colors)||void 0===h?void 0:h.line,borderColor:null===(g=null==b?void 0:b.colors)||void 0===g?void 0:g.line,priceLabelBackground:null===(p=null==b?void 0:b.colors)||void 0===p?void 0:p.moduleBg,priceLabelBorderColor:C,priceLabelColor:C,background:null===(f=null==b?void 0:b.colors)||void 0===f?void 0:f.popupBg,lineColor:C,lineDash:[2,2],draggingLineDash:[0,0],tooltipBorderColor:null===(v=null==b?void 0:b.colors)||void 0===v?void 0:v.tooltipBg,tooltipBackgroundColor:null===(m=null==b?void 0:b.colors)||void 0===m?void 0:m.tooltipBg,tooltipTextColor:null===(x=null===(y=null==b?void 0:b.colors)||void 0===y?void 0:y.t)||void 0===x?void 0:x.primary}}({isBuy:t,theme:n})),{priceTooltipText:c,quantityTooltipText:u,closeTooltipText:d})}))}),[d,i,c,u,n]);(0,p.useEffect)((function(){var e=t&&a?h:[];null==l||l.manageOrderLines(e)}),[l,t,h,a])}({namespace:t.namespace,orders:h,theme:x}),function(e){var t=e.namespace,i=e.positions,n=e.theme,r=(0,bl.createStore)(t),o=(0,Cl.createStore)(t),a=(0,g.__read)(r(bl.getShowPositionOrder),1)[0],l=(0,g.__read)(o(Cl.getCandlestickReference),1)[0];(0,p.useEffect)((function(){return t&&a&&i.forEach((function(e){var t=e.isBuy,i=(0,g.__rest)(e,["isBuy"]);null==l||l.createPositionLine((0,g.__assign)((0,g.__assign)({},i),function(e){var t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m=e.pnl,y=e.theme,x=e.isBuy?null===(t=null==y?void 0:y.colors)||void 0===t?void 0:t.buy:null===(i=null==y?void 0:y.colors)||void 0===i?void 0:i.sell,b=m>0?null===(n=null==y?void 0:y.colors)||void 0===n?void 0:n.buy:m<0?null===(r=null==y?void 0:y.colors)||void 0===r?void 0:r.sell:x;return{priceColor:null===(a=null===(o=null==y?void 0:y.colors)||void 0===o?void 0:o.t)||void 0===a?void 0:a.primary,priceBackgroundColor:b,priceBorderColor:b,quantityColor:null===(s=null===(l=null==y?void 0:y.colors)||void 0===l?void 0:l.t)||void 0===s?void 0:s.primary,quantityBackgroundColor:null===(c=null==y?void 0:y.colors)||void 0===c?void 0:c.popupBg,quantityBorderColor:x,priceLabelColor:null===(d=null===(u=null==y?void 0:y.colors)||void 0===u?void 0:u.t)||void 0===d?void 0:d.white,priceLabelBackgroundColor:x,priceLabelBorderColor:x,tpslLabelColor:null===(g=null===(h=null==y?void 0:y.colors)||void 0===h?void 0:h.t)||void 0===g?void 0:g.primary,tpslLabelBackgroundColor:null===(p=null==y?void 0:y.colors)||void 0===p?void 0:p.control,tpslLabelBorderColor:null===(v=null===(f=null==y?void 0:y.colors)||void 0===f?void 0:f.t)||void 0===v?void 0:v.disabled,lineColor:x,lineDash:[2,2]}}({isBuy:t,pnl:+((null==i?void 0:i.pnl)||0),theme:n})))})),function(){return null==l?void 0:l.deleteAllPositionShape()}}),[l,t,i,a,n])}({namespace:t.namespace,positions:v,theme:x}),function(e){var t=e.namespace,i=e.executionOrders,n=e.theme,r=(0,bl.createStore)(t),o=(0,Cl.createStore)(t),a=(0,g.__read)(r(bl.getShowExecutionOrder),1)[0],l=(0,g.__read)(o(Cl.getCandlestickReference),1)[0],s=(0,p.useMemo)((function(){return i.map((function(e){return(0,g.__assign)((0,g.__assign)({},e),function(e){var t,i,n,r,o,a,l=e.theme;return{color:e.isBuy?null===(t=null==l?void 0:l.colors)||void 0===t?void 0:t.buy:null===(i=null==l?void 0:l.colors)||void 0===i?void 0:i.sell,tooltipBorderColor:null===(n=null==l?void 0:l.colors)||void 0===n?void 0:n.bg4,tooltipBackgroundColor:null===(r=null==l?void 0:l.colors)||void 0===r?void 0:r.bg4,tooltipTextColor:null===(a=null===(o=null==l?void 0:l.colors)||void 0===o?void 0:o.t)||void 0===a?void 0:a.white}}({isBuy:e.isBuy,theme:n}))}))}),[i,n]);(0,p.useEffect)((function(){var e=t&&a?s:[];null==l||l.manageExecutionOrders({orders:e})}),[l,t,s,a])}({namespace:t.namespace,executionOrders:y,theme:x}),p.createElement(S.Z,{key:J,className:"focus-area","data-testid":"kline",sx:{flex:1,overflow:"hidden",height:"100%",display:W!==bl.Tabs.Origin?"none":"block"}},p.createElement(al,(0,g.__assign)({},t,{style:{width:"100%",height:"100%",position:"relative"},beforeChartReady:ue,ref:ie,getI18n:Y,interval:M,candlestick:(0,g.__assign)({type:U,isFloor:!0},t.candlestick),isStock:B!==bl.PriceType.Last,setLoading:$,isShowDrawPanel:A===bl.ChartMode.Single,isShowAnnotationPanel:A===bl.ChartMode.Single,isShowCustomIndicator:z,isShowBacktest:X,onSettingChanged:G})))};var Xl,Gl=i(97918),Yl=i(76635),jl=["1S","1","3","5","15","30","60","120","240","360","480","720","1D","3D","1W","1M"],ql=function(e){var t=e.symbol,i=e.params;return t+"@"+new URLSearchParams(i).toString()},Ql=function(e){var t=(0,g.__read)(e.split("@"),2),i=t[0],n=t[1],r=new URLSearchParams(n).entries();return{symbol:i,params:(0,Yl.fromPairs)(Array.from(r))}},Jl={createDatafeed:vt,createDatafeedTP:function(){var e=new Map,t={},i=[];return function(n){var r=n.config,o=n.onSymbolResolved,a=n.onFetchSymbolsInfo,l=n.onFetchBars,s=n.onSubscribeBars,c=n.onUnsubscribeBars,u=n.onFetchServerTimeApi,d=n.onTransformSymbolInfo,h=void 0===d?function(e){return e.template}:d;return{datafeed:{onReady:function(e){setTimeout((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var n,o;return(0,g.__generator)(this,(function(l){switch(l.label){case 0:return[4,a()];case 1:return n=l.sent(),o=n.map((function(e){return(0,g.__assign)((0,g.__assign)({},e),{ticker:ql({symbol:e.symbol,params:e.params||{}})})})),i=o.map((function(e){var t=e.ticker,i=e.symbol,n=e.fullName,r=e.description,o=void 0===r?"":r,a=e.exchange,l=void 0===a?"":a,s=e.type;return{symbol:i,ticker:t,full_name:n,description:o,exchange:l,type:void 0===s?"":s}})),t=(0,Yl.keyBy)(o,"ticker"),e((0,g.__assign)({exchanges:[],symbols_types:[],supported_resolutions:jl,supports_marks:!1,supports_timescale_marks:!1,supports_time:!0},r)),[2]}}))}))}))},resolveSymbol:function(e,i,n){var r=t[e];if(r){var a=h({info:r,template:{description:r.description||"",fractional:!1,has_seconds:!0,seconds_multipliers:["1"],has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,minmov:1,minmove2:0,name:r.symbol,full_name:r.fullName,ticker:r.ticker,timezone:"Etc/UTC",pricescale:r.tickSize,session:"24x7",type:r.type||"",exchange:r.exchange||"",listed_exchange:r.exchange||"",format:"price",supported_resolutions:r.supportedResolutions||jl}});setTimeout((function(){i(a),null==o||o(a)}))}else n("cannot resolve symbol - "+e)},searchSymbols:function(e,t,n,r){var o=new RegExp(e,"i"),a=new RegExp(t,"i"),l=new RegExp(n,"i");r(i.filter((function(e){var t=e.symbol,i=e.ticker,n=e.full_name,r=e.description,s=void 0===r?"":r,c=e.exchange,u=void 0===c?"":c,d=e.type,h=void 0===d?"":d;return[t,i,n,s].some((function(e){return o.test(e)}))&&a.test(u)&&l.test(h)})))},getBars:function(e,t,i,n,r){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var o,a,s,c,u;return(0,g.__generator)(this,(function(d){switch(d.label){case 0:o=i.from,a=i.to,s=[],d.label=1;case 1:return d.trys.push([1,4,,5]),a>=0?(c=Ql(e.ticker||""),[4,l({symbolInfo:e,resolution:t,rangeStartDate:o,rangeEndDate:a,tickerInfo:c})]):[3,3];case 2:s=d.sent(),d.label=3;case 3:return n(s,{noData:0===s.length}),[3,5];case 4:return u=d.sent(),r(u.toString()),[3,5];case 5:return[2]}}))}))},subscribeBars:function(t,i,n,r,o){var a=Ql(t.ticker||""),l=s({symbolInfo:t,resolution:i,callback:n,onResetCacheNeededCallback:o,tickerInfo:a});e.set(r,l)},unsubscribeBars:function(t){var i;null===(i=null==e?void 0:e.get(t))||void 0===i||i(),null==e||e.delete(t),null==c||c(t)},getServerTime:function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,u()];case 1:return t=i.sent(),e(t),[3,3];case 2:return i.sent(),e(Date.now()/1e3),[3,3];case 3:return[2]}}))}))}},observers:e,symbolsInfo:t}}}},$l=((Xl={})[bl.DisplayIntervals["1s"]]="1S",Xl[bl.DisplayIntervals["1m"]]="1",Xl[bl.DisplayIntervals["3m"]]="3",Xl[bl.DisplayIntervals["5m"]]="5",Xl[bl.DisplayIntervals["15m"]]="15",Xl[bl.DisplayIntervals["30m"]]="30",Xl[bl.DisplayIntervals["1h"]]="60",Xl[bl.DisplayIntervals["2h"]]="120",Xl[bl.DisplayIntervals["4h"]]="240",Xl[bl.DisplayIntervals["6h"]]="360",Xl[bl.DisplayIntervals["8h"]]="480",Xl[bl.DisplayIntervals["12h"]]="720",Xl[bl.DisplayIntervals["1d"]]="1D",Xl[bl.DisplayIntervals["3d"]]="3D",Xl[bl.DisplayIntervals["1w"]]="1W",Xl[bl.DisplayIntervals["1M"]]="1M",Xl),es={"1S":bl.DisplayIntervals["1s"],1:bl.DisplayIntervals["1m"],3:bl.DisplayIntervals["3m"],5:bl.DisplayIntervals["5m"],15:bl.DisplayIntervals["15m"],30:bl.DisplayIntervals["30m"],60:bl.DisplayIntervals["1h"],120:bl.DisplayIntervals["2h"],240:bl.DisplayIntervals["4h"],360:bl.DisplayIntervals["6h"],480:bl.DisplayIntervals["8h"],720:bl.DisplayIntervals["12h"],"1D":bl.DisplayIntervals["1d"],"3D":bl.DisplayIntervals["3d"],"1W":bl.DisplayIntervals["1w"],"1M":bl.DisplayIntervals["1M"]},ts=function(e){var t=(0,g.__read)(/^(\d+)(\w)$/.exec(e)||[],3),i=+t[1];switch(t[2]){case"M":return 1e3*i*60*60*24*30;case"w":return 1e3*i*60*60*24*7;case"d":return 1e3*i*60*60*24;case"h":return 1e3*i*60*60;case"m":return 1e3*i*60;case"s":default:return 1e3*i}},is=function(e,t){for(var i=ts(t),n=0;n<e.length;n++){var r=e[n];if(ts(r)%i==0)return r}return null},ns=function(e){return(0,g.__read)(e.reduce((function(e,t){var i=ts(t);return i>(0,g.__read)(e,2)[1]?[t,i]:e}),["",Number.MIN_SAFE_INTEGER]),1)[0]},rs=i(76940),os=i(70268),as=i(85527),ls="myTradingView",ss=function(e){return(0,p.useMemo)((function(){return Vt().createInstance({name:e})}),[e])},cs=function(e){var t=e.tradingViewProps,i=e.namespace,n=e.theme,r=e.storageName,o=void 0===r?ls:r,a=e.containerId,l=void 0===a?i+"-tradingview":a,s=(0,bl.createStore)(i),c=(0,Cl.createStore)(i),u=(0,p.useRef)(),d=ss(i),h=(0,g.__read)(s(bl.getInterval),1)[0],f=s(bl.getTrueInterval),v=(0,g.__read)(s(bl.getActiveTab),1)[0],m=(0,g.__read)(s(bl.getTvChartStyle),1)[0],y=(0,g.__read)(s(bl.getShowLimitOrder),1)[0],x=(0,g.__read)(s(bl.getShowPositionOrder),1)[0],b=(0,g.__read)(s(bl.getShowExecutionOrder),1)[0],C=(0,g.__read)(c(Cl.getLoading),2)[1],_=(0,g.__read)(c(Cl.getTradingViewReference),2)[1],w=(0,Tl.Z)("","kline-ui").getI18n,L=(0,Gl.tZ)(),E=(0,p.useMemo)((function(){return function(e){switch(e){case"zh-CN":case"cn":return"zh";case"zh-HK":case"zh-TW":case"zh-TC":case"tw":return"zh_TW";case"ja":return"ja";case"ko":return"ko";case"th":return"th";case"he":return"he_IL";case"ru":return"ru";case"cs":return"cs";case"sv":return"sv";case"vi":case"vn":return"vi";case"tr":return"tr";case"ro":return"ro";case"pt-PT":case"pt-BR":case"pt":return"pt";case"pl":return"pl";case"nl":return"nl_NL";case"it":return"it";case"fr":return"fr";case"es":case"es-LA":return"es";case"de":return"de";case"id":return"id_ID";case"ur":case"ph":case"bg":case"lv":case"uk-UA":case"ar":case"bn":case"en":case"en-AU":case"in":case"ng":default:return"en"}}(L)}),[L]),k=(0,p.useMemo)((function(){return w("order-drag-tooltip",{defaultValue:"Drag for price modify"})||""}),[w]),V=(0,p.useMemo)((function(){return w("order-modify-tooltip",{defaultValue:"Click for modify"})||""}),[w]),A=(0,p.useMemo)((function(){return w("order-cancel-tooltip",{defaultValue:"Click for cancel"})||""}),[w]),T=(0,p.useMemo)((function(){return t.limitOrders.map((function(e){return(0,g.__assign)((0,g.__assign)({},e),{tooltip:e.tooltip||k,modifyTooltip:e.modifyTooltip||V,cancelTooltip:e.cancelTooltip||A})}))}),[A,k,V,t.limitOrders]),M=function(e){var t=e.namespace,i=(0,as.Fg)().getThemeCounter,n=(0,g.__read)((0,rs.Z)(t+"_tvThemeCounter",0),2),r=n[0],o=n[1],a=(0,g.__read)((0,p.useState)(-1),2),l=a[0],s=a[1],c=(0,p.useCallback)((function(){return s(i())}),[i]);(0,os.Z)((function(){return c()})),(0,yt.Z)((function(){return c()}));var u=(0,p.useCallback)((function(){o(i())}),[i,o]),d=(0,p.useMemo)((function(){return-1!==l}),[l]);return{onSetThemeDone:u,overwritingThemeOnLoaded:(0,p.useMemo)((function(){return d&&l!==r}),[d,l,r])}}({namespace:i}),D=M.onSetThemeDone,I=M.overwritingThemeOnLoaded,P=(0,p.useMemo)((function(){return pt(n)}),[n]),B=(0,p.useMemo)((function(){return i+"-"+l}),[l,i]),W=(0,p.useMemo)((function(){return h===bl.DisplayIntervals.Time?bl.SeriesStyle.Line:m}),[h,m]),R=(0,p.useMemo)((function(){return $l[f]}),[f]),H=(0,p.useCallback)((function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var i,n;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:return[4,d.setItem(o,e)];case 1:return r.sent(),[4,null===(n=(i=t.initialConfig).onSave)||void 0===n?void 0:n.call(i,e)];case 2:return r.sent(),[2]}}))}))}),[d,o,t.initialConfig]),Z=(0,p.useCallback)((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,i,n;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:return[4,d.getItem(o)];case 1:return e=r.sent(),null===(n=(i=t.initialConfig).onLoadConfig)||void 0===n||n.call(i),[2,e]}}))}))}),[d,o,t.initialConfig]),O=(0,p.useCallback)((function(e){var i,n;C(e),null===(n=(i=t.initialConfig).onLoading)||void 0===n||n.call(i,e)}),[C,t.initialConfig]),N=(0,p.useCallback)((function(){var e,i;_(u.current),null===(i=(e=t.initialConfig).onChartReadyDone)||void 0===i||i.call(e)}),[_,t.initialConfig]),F=(0,p.useCallback)((function(){var e,i;D(),null===(i=(e=t.initialConfig).onSetThemeDone)||void 0===i||i.call(e)}),[D,t.initialConfig]),K=(0,p.useCallback)((function(){var e,i;D(),null===(i=(e=t.initialConfig).onFirstTimeSetThemeDone)||void 0===i||i.call(e)}),[D,t.initialConfig]),U=(0,p.useCallback)((function(e){var t=e.widget;e.tradingViewSave||(t.chart().createStudy("Moving Average",!1,!1,[7],{"plot.linewidth":1,"plot.color":"rgba(241, 156, 56, 0.7)",precision:8}),t.chart().createStudy("Moving Average",!1,!1,[25],{"plot.linewidth":1,"plot.color":"rgba(234, 61, 247, 0.7)",precision:8}),t.chart().createStudy("Moving Average",!1,!1,[99],{"plot.linewidth":1,"plot.color":"rgba(116, 252, 253, 0.7)",precision:8}))}),[]),z=(0,p.useMemo)((function(){return t.initialConfig.onInitStudies||U}),[U,t.initialConfig.onInitStudies]),X=function(e){var t=e.storage,i=e.storageName,n=(0,Tl.Z)("","trade-ui").getI18n,r=(0,p.useMemo)((function(){return n("trd-chart-tv-load-timeout",{defaultValue:"Failed to load TradingView due to network issues."})||""}),[n]),o=(0,p.useMemo)((function(){return n("trd-chart-tv-initialization-error",{defaultValue:"Something went wrong while initializing TradingView."})||""}),[n]),a=(0,p.useMemo)((function(){return n("trd-chart-crash-reload",{defaultValue:"Refresh"})||""}),[n]),l=(0,p.useMemo)((function(){return n("trd-chart-init-error",{defaultValue:"Failed to initialize TradingView due to malformed config, please try to refresh"})||""}),[n]),s=(0,p.useCallback)((function(){return window.location.reload()}),[]),c=(0,p.useCallback)((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,t.removeItem(i)];case 1:return e.sent(),s(),[2]}}))}))}),[s,t,i]),u=(0,g.__read)((0,p.useState)(!1),2),d=u[0],h=u[1],f=(0,g.__read)((0,p.useState)(""),2),v=f[0],m=f[1],y=(0,g.__read)((0,p.useState)(""),2),x=y[0],b=y[1],C=(0,p.useRef)((function(){return Promise.resolve()})),_=(0,p.useCallback)((function(){h(!0),m(r),b(a),C.current=s}),[r,a,s]),w=(0,p.useCallback)((function(){h(!0),m(l),b(a),C.current=c}),[c,a,l]),S=(0,p.useCallback)((function(){h(!0),m(o),b(a),C.current=s}),[o,a,s]);return{showError:d,mainText:v,buttonText:x,buttonCallback:C.current,onScriptLoadingError:_,onTradingViewInitError:w,onChartReadyError:S}}({storage:d,storageName:o}),G=X.showError,Y=X.mainText,j=X.buttonText,q=X.buttonCallback,Q=X.onScriptLoadingError,J=X.onTradingViewInitError,$=X.onChartReadyError;return G?p.createElement(ee,{mainText:Y,btnText:j,resetErrorBoundary:q}):p.createElement(S.Z,{sx:{height:"100%",display:v!==bl.Tabs.TradingView?"none":"block"}},p.createElement(St,(0,g.__assign)({},t,{interval:R,styles:P,limitOrders:y?T:[],positionOrders:x?t.positionOrders:[],executionOrders:b?t.executionOrders:[],seriesStyle:W,widget:u,overwritingThemeOnLoaded:I,initialConfig:(0,g.__assign)((0,g.__assign)({},t.initialConfig),{tvConfig:(0,g.__assign)((0,g.__assign)({},t.initialConfig.tvConfig),{container_id:B,interval:R,locale:E}),onSave:H,onLoadConfig:Z,onLoading:O,onChartReadyDone:N,onChartReadyError:$,onScriptLoadingError:Q,onTradingViewInitError:J,onFirstTimeSetThemeDone:K,onSetThemeDone:F,onInitStudies:z})})))};var us=function(e){var t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m,y,x,b,C,_,w,S,L,E,k,V,A,T,M,D,I,P,B,W,R,H,Z,O,N,F,K,U,z,X,G,Y,j,q,Q,J,$,ee,te,ie,ne,re,oe,ae,le,se,ce,ue,de,he,ge,pe,fe,ve,me,ye,xe,be,Ce;return{volumePaneSize:"medium","symbolWatermarkProperties.transparency":85,"symbolWatermarkProperties.color":"rgba(0, 0, 0, 0)","scalesProperties.textColor":null===(i=null===(t=null==e?void 0:e.colors)||void 0===t?void 0:t.t)||void 0===i?void 0:i.third,"scalesProperties.lineColor":null===(n=null==e?void 0:e.colors)||void 0===n?void 0:n.line,"scalesProperties.backgroundColor":null===(r=null==e?void 0:e.colors)||void 0===r?void 0:r.background,"paneProperties.background":null===(o=null==e?void 0:e.colors)||void 0===o?void 0:o.moduleBg,"paneProperties.horzGridProperties.color":null===(a=null==e?void 0:e.colors)||void 0===a?void 0:a.lineForK,"paneProperties.vertGridProperties.color":null===(l=null==e?void 0:e.colors)||void 0===l?void 0:l.lineForK,"paneProperties.crossHairProperties.color":null===(c=null===(s=null==e?void 0:e.colors)||void 0===s?void 0:s.t)||void 0===c?void 0:c.secondary,"candleStyle.upColor":null===(u=null==e?void 0:e.colors)||void 0===u?void 0:u.buy,"candleStyle.downColor":null===(d=null==e?void 0:e.colors)||void 0===d?void 0:d.sell,"candleStyle.drawWick":!0,"candleStyle.drawBorder":!0,"candleStyle.borderColor":"transparent","candleStyle.borderUpColor":null===(h=null==e?void 0:e.colors)||void 0===h?void 0:h.buy,"candleStyle.borderDownColor":null===(g=null==e?void 0:e.colors)||void 0===g?void 0:g.sell,"candleStyle.wickUpColor":null===(p=null==e?void 0:e.colors)||void 0===p?void 0:p.buy,"candleStyle.wickDownColor":null===(f=null==e?void 0:e.colors)||void 0===f?void 0:f.sell,"hollowCandleStyle.upColor":null===(v=null==e?void 0:e.colors)||void 0===v?void 0:v.buy,"hollowCandleStyle.downColor":null===(m=null==e?void 0:e.colors)||void 0===m?void 0:m.sell,"hollowCandleStyle.drawWick":!0,"hollowCandleStyle.drawBorder":!0,"hollowCandleStyle.borderColor":"transparent","hollowCandleStyle.borderUpColor":null===(y=null==e?void 0:e.colors)||void 0===y?void 0:y.buy,"hollowCandleStyle.borderDownColor":null===(x=null==e?void 0:e.colors)||void 0===x?void 0:x.sell,"hollowCandleStyle.wickUpColor":null===(b=null==e?void 0:e.colors)||void 0===b?void 0:b.buy,"hollowCandleStyle.wickDownColor":null===(C=null==e?void 0:e.colors)||void 0===C?void 0:C.sell,"hollowCandleStyle.drawBody":!0,"haStyle.upColor":null===(_=null==e?void 0:e.colors)||void 0===_?void 0:_.buy,"haStyle.downColor":null===(w=null==e?void 0:e.colors)||void 0===w?void 0:w.sell,"haStyle.drawWick":!0,"haStyle.drawBorder":!0,"haStyle.borderColor":"transparent","haStyle.borderUpColor":null===(S=null==e?void 0:e.colors)||void 0===S?void 0:S.buy,"haStyle.borderDownColor":null===(L=null==e?void 0:e.colors)||void 0===L?void 0:L.sell,"haStyle.wickUpColor":null===(E=null==e?void 0:e.colors)||void 0===E?void 0:E.buy,"haStyle.wickDownColor":null===(k=null==e?void 0:e.colors)||void 0===k?void 0:k.sell,"haStyle.barColorsOnPrevClose":!1,"haStyle.drawBody":!0,"barStyle.upColor":null===(V=null==e?void 0:e.colors)||void 0===V?void 0:V.buy,"barStyle.downColor":null===(A=null==e?void 0:e.colors)||void 0===A?void 0:A.sell,"barStyle.barColorsOnPrevClose":!1,"barStyle.dontDrawOpen":!1,"barStyle.thinBars":!0,"columnStyle.upColor":null===(T=null==e?void 0:e.colors)||void 0===T?void 0:T.buy,"columnStyle.downColor":null===(M=null==e?void 0:e.colors)||void 0===M?void 0:M.sell,"columnStyle.barColorsOnPrevClose":!0,"columnStyle.priceSource":"close","lineStyle.color":null===(D=null==e?void 0:e.colors)||void 0===D?void 0:D.buy,"lineStyle.linewidth":2,"lineStyle.priceSource":"close","areaStyle.color1":null===(I=null==e?void 0:e.colors)||void 0===I?void 0:I.buy,"areaStyle.color2":null===(P=null==e?void 0:e.colors)||void 0===P?void 0:P.sell,"areaStyle.linecolor":null===(B=null==e?void 0:e.colors)||void 0===B?void 0:B.sell,"areaStyle.linewidth":2,"areaStyle.priceSource":"close","areaStyle.transparency":100,"baselineStyle.baselineColor":null===(W=null==e?void 0:e.colors)||void 0===W?void 0:W.buy,"baselineStyle.topFillColor1":null===(R=null==e?void 0:e.colors)||void 0===R?void 0:R.buy,"baselineStyle.topFillColor2":null===(H=null==e?void 0:e.colors)||void 0===H?void 0:H.sell,"baselineStyle.bottomFillColor1":null===(Z=null==e?void 0:e.colors)||void 0===Z?void 0:Z.buy,"baselineStyle.bottomFillColor2":null===(O=null==e?void 0:e.colors)||void 0===O?void 0:O.sell,"baselineStyle.topLineColor":null===(N=null==e?void 0:e.colors)||void 0===N?void 0:N.buy,"baselineStyle.bottomLineColor":null===(F=null==e?void 0:e.colors)||void 0===F?void 0:F.sell,"baselineStyle.topLineWidth":2,"baselineStyle.bottomLineWidth":2,"baselineStyle.priceSource":"close","baselineStyle.transparency":50,"baselineStyle.baseLevelPercentage":50,"hiloStyle.color":null===(K=null==e?void 0:e.colors)||void 0===K?void 0:K.buy,"hiloStyle.showBorders":!0,"hiloStyle.borderColor":null===(U=null==e?void 0:e.colors)||void 0===U?void 0:U.buy,"hiloStyle.showLabels":!0,"hiloStyle.labelColor":null===(z=null==e?void 0:e.colors)||void 0===z?void 0:z.buy,"hiloStyle.fontSize":7,"pbStyle.upColor":null===(X=null==e?void 0:e.colors)||void 0===X?void 0:X.buy,"pbStyle.downColor":null===(G=null==e?void 0:e.colors)||void 0===G?void 0:G.sell,"pbStyle.borderUpColor":null===(Y=null==e?void 0:e.colors)||void 0===Y?void 0:Y.buy,"pbStyle.borderDownColor":null===(j=null==e?void 0:e.colors)||void 0===j?void 0:j.sell,"pbStyle.upColorProjection":null===(q=null==e?void 0:e.colors)||void 0===q?void 0:q.buy,"pbStyle.downColorProjection":null===(Q=null==e?void 0:e.colors)||void 0===Q?void 0:Q.sell,"pbStyle.borderUpColorProjection":null===(J=null==e?void 0:e.colors)||void 0===J?void 0:J.buy,"pbStyle.borderDownColorProjection":null===($=null==e?void 0:e.colors)||void 0===$?void 0:$.sell,"renkoStyle.upColor":null===(ee=null==e?void 0:e.colors)||void 0===ee?void 0:ee.buy,"renkoStyle.downColor":null===(te=null==e?void 0:e.colors)||void 0===te?void 0:te.sell,"renkoStyle.borderUpColor":null===(ie=null==e?void 0:e.colors)||void 0===ie?void 0:ie.buy,"renkoStyle.borderDownColor":null===(ne=null==e?void 0:e.colors)||void 0===ne?void 0:ne.sell,"renkoStyle.upColorProjection":null===(re=null==e?void 0:e.colors)||void 0===re?void 0:re.buy,"renkoStyle.downColorProjection":null===(oe=null==e?void 0:e.colors)||void 0===oe?void 0:oe.sell,"renkoStyle.borderUpColorProjection":null===(ae=null==e?void 0:e.colors)||void 0===ae?void 0:ae.buy,"renkoStyle.borderDownColorProjection":null===(le=null==e?void 0:e.colors)||void 0===le?void 0:le.sell,"renkoStyle.wickUpColor":null===(se=null==e?void 0:e.colors)||void 0===se?void 0:se.buy,"renkoStyle.wickDownColor":null===(ce=null==e?void 0:e.colors)||void 0===ce?void 0:ce.sell,"kagiStyle.upColor":null===(ue=null==e?void 0:e.colors)||void 0===ue?void 0:ue.buy,"kagiStyle.downColor":null===(de=null==e?void 0:e.colors)||void 0===de?void 0:de.sell,"kagiStyle.upColorProjection":null===(he=null==e?void 0:e.colors)||void 0===he?void 0:he.buy,"kagiStyle.downColorProjection":null===(ge=null==e?void 0:e.colors)||void 0===ge?void 0:ge.sell,"pnfStyle.upColor":null===(pe=null==e?void 0:e.colors)||void 0===pe?void 0:pe.buy,"pnfStyle.downColor":null===(fe=null==e?void 0:e.colors)||void 0===fe?void 0:fe.sell,"pnfStyle.upColorProjection":null===(ve=null==e?void 0:e.colors)||void 0===ve?void 0:ve.buy,"pnfStyle.downColorProjection":null===(me=null==e?void 0:e.colors)||void 0===me?void 0:me.sell,"rangeStyle.upColor":null===(ye=null==e?void 0:e.colors)||void 0===ye?void 0:ye.buy,"rangeStyle.downColor":null===(xe=null==e?void 0:e.colors)||void 0===xe?void 0:xe.sell,"rangeStyle.thinBars":"true","rangeStyle.upColorProjection":null===(be=null==e?void 0:e.colors)||void 0===be?void 0:be.buy,"rangeStyle.downColorProjection":null===(Ce=null==e?void 0:e.colors)||void 0===Ce?void 0:Ce.sell}},ds=["dont_show_boolean_study_arguments","hide_last_na_study_output","snapshot_trading_drawings"],hs=["drawing_templates","display_market_status","border_around_the_chart","remove_library_container_border","volume_force_overlay","legend_context_menu","right_toolbar","trading_account_manager","order_panel","header_widget","header_symbol_search","header_interval_dialog_button","header_fullscreen_button","header_layouttoggle","header_undo_redo","symbol_search_hot_key","symbol_info","show_interval_dialog_on_key_press"],gs=function(e){var t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m,y,x,b,C,_=e.instance,w=e.shape,S=w.id,L=w.text,E=w.price,k=w.quantity,V=w.isBuy,A=w.tooltip,T=void 0===A?"":A,M=w.modifyTooltip,D=void 0===M?"":M,I=w.cancelTooltip,P=void 0===I?"":I,B=w.editable,W=w.onMove,R=w.onModify,H=w.onCancel,Z=e.styles,O=V?null===(i=null===(t=Z.originalTheme)||void 0===t?void 0:t.colors)||void 0===i?void 0:i.buy:null===(r=null===(n=Z.originalTheme)||void 0===n?void 0:n.colors)||void 0===r?void 0:r.sell;_.setText(L).setPrice(E).setQuantity(k).setTooltip(T).setModifyTooltip(D).setCancelTooltip(P).setEditable(B).setExtendLeft(!1).setLineLength(65).setLineStyle(2).setLineColor(O).setBodyFont("normal 14pt Verdana").setQuantityFont("normal 14pt Verdana").setBodyBorderColor(O).setBodyBackgroundColor(O).setBodyTextColor(null===(l=null===(a=null===(o=Z.originalTheme)||void 0===o?void 0:o.colors)||void 0===a?void 0:a.t)||void 0===l?void 0:l.primary).setQuantityBorderColor(null===(c=null===(s=Z.originalTheme)||void 0===s?void 0:s.colors)||void 0===c?void 0:c.line).setQuantityBackgroundColor(null===(d=null===(u=Z.originalTheme)||void 0===u?void 0:u.colors)||void 0===d?void 0:d.popupBg).setQuantityTextColor(null===(p=null===(g=null===(h=Z.originalTheme)||void 0===h?void 0:h.colors)||void 0===g?void 0:g.t)||void 0===p?void 0:p.secondary).setCancelButtonBorderColor(null===(v=null===(f=Z.originalTheme)||void 0===f?void 0:f.colors)||void 0===v?void 0:v.line).setCancelButtonBackgroundColor(null===(y=null===(m=Z.originalTheme)||void 0===m?void 0:m.colors)||void 0===y?void 0:y.popupBg).setCancelButtonIconColor(null===(C=null===(b=null===(x=Z.originalTheme)||void 0===x?void 0:x.colors)||void 0===b?void 0:b.t)||void 0===C?void 0:C.secondary),_.onModify((function(){return R({id:S,text:_.getText(),price:_.getPrice(),quantity:_.getQuantity()})})).onMove((function(){return W({id:S,text:_.getText(),price:_.getPrice(),quantity:_.getQuantity()})})).onCancel((function(){return H({id:S,text:_.getText(),price:_.getPrice(),quantity:_.getQuantity()})}))},ps=function(e){var t=e.chart,i=e.shape,n=e.styles,r=t.createOrderLine({});return gs({instance:r,shape:i,styles:n}),r},fs=function(e){var t,i,n,r,o,a,l,s,c,u,d,h,g,p,f,v,m=e.instance,y=e.shape,x=y.text,b=y.price,C=y.PNL,_=y.quantity,w=y.tooltip,S=e.styles,L=+_>0?null===(i=null===(t=S.originalTheme)||void 0===t?void 0:t.colors)||void 0===i?void 0:i.buy:null===(r=null===(n=S.originalTheme)||void 0===n?void 0:n.colors)||void 0===r?void 0:r.sell,E=C>0?null===(a=null===(o=S.originalTheme)||void 0===o?void 0:o.colors)||void 0===a?void 0:a.buy:C<0?null===(s=null===(l=S.originalTheme)||void 0===l?void 0:l.colors)||void 0===s?void 0:s.sell:L;m.setText(x).setPrice(b).setQuantity(_).setTooltip(w).setExtendLeft(!1).setLineLength(100).setLineStyle(2).setLineColor(E).setBodyFont("normal 14pt Verdana").setQuantityFont("normal 14pt Verdana").setBodyBorderColor(E).setBodyBackgroundColor(E).setBodyTextColor(null===(d=null===(u=null===(c=S.originalTheme)||void 0===c?void 0:c.colors)||void 0===u?void 0:u.t)||void 0===d?void 0:d.primary).setQuantityBorderColor(L).setQuantityBackgroundColor(null===(g=null===(h=S.originalTheme)||void 0===h?void 0:h.colors)||void 0===g?void 0:g.popupBg).setQuantityTextColor(null===(v=null===(f=null===(p=S.originalTheme)||void 0===p?void 0:p.colors)||void 0===f?void 0:f.t)||void 0===v?void 0:v.primary)},vs=function(e){var t=e.chart,i=e.shape,n=e.styles,r=t.createPositionLine({});return fs({instance:r,shape:i,styles:n}),r},ms=function(e){var t,i,n,r,o,a,l,s=e.instance,c=e.shape,u=c.price,d=c.time,h=c.text,g=c.tooltip,p=c.isBuy,f=e.styles,v=p?null===(i=null===(t=f.originalTheme)||void 0===t?void 0:t.colors)||void 0===i?void 0:i.buy:null===(r=null===(n=f.originalTheme)||void 0===n?void 0:n.colors)||void 0===r?void 0:r.sell;return s.setPrice(u).setTime(d).setDirection(p?"buy":"sell").setText(h).setTooltip(g).setArrowHeight(8).setArrowSpacing(1).setArrowColor(v).setTextColor(null===(l=null===(a=null===(o=f.originalTheme)||void 0===o?void 0:o.colors)||void 0===a?void 0:a.t)||void 0===l?void 0:l.primary).setFont("normal 14pt Verdana")},ys=function(e){var t=e.chart,i=e.shape,n=e.styles,r=t.createExecutionShape({});return ms({instance:r,shape:i,styles:n}),r},xs=function(e){var t=e.shapes,i=e.styles,n=e.createShapeFunc,r=e.updateShapeFunc,o=e.onError,a=void 0===o?function(){return null}:o,l=(0,p.useRef)({});return{clear:(0,p.useCallback)((function(){try{Object.keys(l.current).forEach((function(e){return l.current[e].remove()}))}catch(e){a(e)}}),[a]),update:(0,p.useCallback)((function(e){var o=e.chart,s=t.reduce((function(e,t){return e[t.id]=t,e}),{}),c=Object.keys(l.current),u=t.map((function(e){return e.id})),d=(0,Yl.intersection)(c,u),h=(0,Yl.xor)(d,c),g=(0,Yl.xor)(d,u);try{d.forEach((function(e){return r({instance:l.current[e],shape:s[e],styles:i})}))}catch(e){a(e)}try{h.forEach((function(e){l.current[e].remove(),delete l.current[e]}))}catch(e){a(e)}try{g.forEach((function(e){var t=n({chart:o,shape:s[e],styles:i});l.current[e]=t}))}catch(e){a(e)}}),[n,a,t,i,r])}},bs=function(e){var t=e.chart,i=e.styles,n=t.getAllStudies().find((function(e){var t;return"volume"===(null===(t=null==e?void 0:e.name)||void 0===t?void 0:t.toLowerCase())}));n&&t.getStudyById(n.id).applyOverrides({"volume.color.0":(0,k.D)(i.overrides["candleStyle.downColor"],.5),"volume.color.1":(0,k.D)(i.overrides["candleStyle.upColor"],.5)})},Cs=function(e){var t=e.widget,i=e.theme,n=e.styles,r=e.onSave,o=void 0===r?function(){return null}:r,a=e.onSetThemeDone;return function(e){for(var t=e.widget,i=e.theme,n=[],r=0;r<t.chartsCount();r++)n.push(t.chart(r).getCheckableActionState("showCountdown"));t.changeTheme(i);var o=[],a=function(e){n[e]&&o.push(new Promise((function(i){setTimeout((function(){t.chart(e).executeActionById("showCountdown"),i()}),0)})))};for(r=0;r<t.chartsCount();r++)a(r);Promise.all(o)}({widget:t,theme:i}),new Promise((function(e){setTimeout((function(){t.applyOverrides(n.overrides),function(e){for(var t=e.widget,i=e.styles,n=0;n<t.chartsCount();n++)bs({chart:t.chart(n),styles:i})}({widget:t,styles:n}),t.save(o),null==a||a(),e()}),0)}))},_s=function(e){var t=e.tradingViewSave,i=e.widget,n=e.theme,r=e.styles;return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return t?[2,Promise.resolve()]:[4,Cs({widget:i,theme:n,styles:r})];case 1:return e.sent(),[2]}}))}))},ws=function(e){var t=e.tradingViewSave,i=e.theme,n=e.styles,r=e.widget;return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,_s({widget:r,tradingViewSave:t,theme:i,styles:n})];case 1:return e.sent(),[2]}}))}))},Ss=function(e){var t=e.symbol,i=e.interval,n=e.theme,r=e.styles,o=e.limitOrders,a=void 0===o?[]:o,l=e.positionOrders,s=void 0===l?[]:l,c=e.executionOrders,u=void 0===c?[]:c,d=e.isChartReady,h=e.overwritingThemeOnLoaded,f=void 0!==h&&h,v=e.widget,m=e.initialConfig,y=m.tvConfig,x=m.onSave,b=m.onCreateOrderShapesError,C=m.onLoadConfig,_=void 0===C?function(){return Promise.resolve(null)}:C,w=m.onWidgetInitialized,L=m.onChartReadyDone,E=m.onChartReadyError,k=m.onWillUnmount,V=m.onWidgetRefNotFoundError,A=m.onScriptLoaded,T=m.onScriptLoadingError,M=m.onFirstTimeSetThemeDone,D=m.onSetThemeDone,I=m.onFirstTimeDataLoadedDone,P=m.onDataLoadedDone,B=m.onTradingViewInitError,W=m.onSymbolChanged,R=m.onIntervalChanged,H=m.onInitChart,Z=m.onActiveChartChanged,O=m.onAddStudy,N=m.onLayoutWillChange,F=m.onLayoutChanged,K=m.onScreenshotReady,U=(0,p.useRef)(),z=(0,p.useRef)(n),X=(0,p.useRef)(r),G=(0,p.useRef)(f);(0,p.useEffect)((function(){z.current=n}),[n]),(0,p.useEffect)((function(){X.current=r}),[r]),(0,p.useEffect)((function(){G.current=f}),[f]);var Y=(0,g.__read)((0,p.useState)(a),2),j=Y[0],q=Y[1],Q=(0,g.__read)((0,p.useState)(s),2),J=Q[0],$=Q[1],ee=(0,g.__read)((0,p.useState)(u),2),te=ee[0],ie=ee[1];(0,p.useEffect)((function(){q(a)}),[a]),(0,p.useEffect)((function(){$(s)}),[s]),(0,p.useEffect)((function(){ie(u)}),[u]);var ne=(0,p.useCallback)((function(){U.current&&function(e){var t=e.onSave,i=void 0===t?function(){return Promise.resolve()}:t;e.widget.save(i)}({widget:U.current,onSave:x})}),[x]),re=(0,p.useCallback)((function(e){setTimeout((function(){null==O||O(e),ne()}),0)}),[ne,O]),oe=function(e){return xs({shapes:e.shapes,styles:e.styles,onError:e.onError,createShapeFunc:ps,updateShapeFunc:gs})}({shapes:j,styles:r,onError:b}).update,ae=function(e){return xs({shapes:e.shapes,styles:e.styles,onError:e.onError,createShapeFunc:vs,updateShapeFunc:fs})}({shapes:J,styles:r,onError:b}).update,le=function(e){return xs({shapes:e.shapes,styles:e.styles,onError:e.onError,createShapeFunc:ys,updateShapeFunc:ms})}({shapes:te,styles:r,onError:b}).update,se=(0,p.useCallback)((function(e){if(U.current){var t=U.current.chart(e),i=t.onDataLoaded(),n=t.onSymbolChanged(),r=t.onIntervalChanged();i.unsubscribeAll(null),n.unsubscribeAll(null),r.unsubscribeAll(null),i.subscribe(null,(function(){null==I||I(t)}),!0),i.subscribe(null,(function(){null==P||P(t)})),n.subscribe(null,(function(){q([]),$([]),ie([]),null==W||W(t)})),r.subscribe(null,(function(){null==R||R(t)}))}}),[P,I,R,W]),ce=(0,p.useCallback)((function(e){var t=e.tradingViewSave,i=e.startIndex;if(U.current)for(var n=i;n<U.current.chartsCount();n++)se(n),null==H||H({index:n,chart:U.current.chart(n),tradingViewSave:t})}),[se,H]),ue=(0,p.useCallback)((function(e){null==N||N(e)}),[N]),de=(0,p.useCallback)((function(){null==F||F()}),[F]),he=(0,p.useCallback)((function(e){if(U.current){var t=U.current.chart(e);null==Z||Z({index:e,chart:t})}}),[Z]),ge=(0,p.useCallback)((function(e){null==K||K(e)}),[K]),pe=(0,p.useCallback)((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,t,i;return(0,g.__generator)(this,(function(o){switch(o.label){case 0:return null==A||A(),[4,_()];case 1:e=o.sent(),t=function(e,t){var i=e.tradingViewSave,n=e.styles,r=t.symbol,o=t.interval,a=t.theme,l=void 0===a?"Dark":a,s=t.library_path,c=t.custom_css_url,u=void 0===c?"./themed.css":c,d=t.locale,h=void 0===d?"en":d,p=t.overrides,f=t.debug,v=void 0!==f&&f,m=t.time_frames,y=void 0===m?[]:m,x=t.autosize,b=void 0===x||x,C=t.toolbar_bg,_=void 0===C?"transparent":C,w=t.studies_overrides,S=t.loading_screen,L=t.enabled_features,E=void 0===L?ds:L,k=t.disabled_features,V=void 0===k?hs:k,A=(0,g.__rest)(t,["symbol","interval","theme","library_path","custom_css_url","locale","overrides","debug","time_frames","autosize","toolbar_bg","studies_overrides","loading_screen","enabled_features","disabled_features"]),T="Asia/Shanghai";try{T=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}var M=ut()(i);if(M)for(var D=0;D<M.charts[0].panes.length;D++)M.charts[0].panes[D].sources[0].state.symbol=r,M.charts[0].panes[D].sources[0].state.interval=o;return(0,g.__assign)((0,g.__assign)({},A),{symbol:r,interval:o,timezone:T,theme:l,library_path:s,custom_css_url:u,locale:h,overrides:p,debug:v,time_frames:y,autosize:b,toolbar_bg:_,studies_overrides:w,loading_screen:S||{backgroundColor:n.overrides["paneProperties.background"]},enabled_features:E,disabled_features:V,saved_data:M||void 0})}({tradingViewSave:e,styles:r},y);try{U.current=new window.TradingView.widget(t),null==w||w(),null===(i=U.current)||void 0===i||i.onChartReady((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:if(!U.current)return[2,null==V?void 0:V()];i.label=1;case 1:return i.trys.push([1,5,,6]),U.current.subscribe("onAutoSaveNeeded",ne),U.current.subscribe("study",re),U.current.subscribe("layout_about_to_be_changed",ue),U.current.subscribe("layout_changed",de),U.current.subscribe("activeChartChanged",he),U.current.subscribe("onScreenshotReady",ge),ce({tradingViewSave:e,startIndex:0}),[4,ws({tradingViewSave:e,theme:n,styles:r,widget:U.current})];case 2:return i.sent(),G.current?[4,Cs({widget:U.current,theme:z.current,styles:X.current,onSave:x,onSetThemeDone:M})]:[3,4];case 3:i.sent(),i.label=4;case 4:return null==L||L(),[3,6];case 5:return t=i.sent(),null==E||E(t),[3,6];case 6:return[2]}}))}))}))}catch(e){null==B||B(e)}return[2]}}))}))}),[]);return(0,p.useLayoutEffect)((function(){if(window.TradingView)pe();else{var e=document.createElement("script");e.src=y.library_path+"charting_library.js",e.async=!1,e.addEventListener("load",pe),e.addEventListener("error",(function(e){return null==T?void 0:T(e)})),document.head.appendChild(e)}}),[]),(0,mt.Z)((function(){var e;U.current&&(null===(e=U.current)||void 0===e||e.remove(),U.current=void 0,null==k||k())})),(0,p.useEffect)((function(){if(U.current&&d){var e=U.current.chart(0);"s"===U.current.layout()&&e.dataReady((function(){return null}))&&oe({chart:e})}}),[d,oe]),(0,p.useEffect)((function(){if(U.current&&d){var e=U.current.chart(0);"s"===U.current.layout()&&e.dataReady((function(){return null}))&&ae({chart:e})}}),[d,ae]),(0,p.useEffect)((function(){if(U.current&&d){var e=U.current.chart(0);"s"===U.current.layout()&&e.dataReady((function(){return null}))&&le({chart:e})}}),[d,le]),(0,yt.Z)((function(){d&&U.current&&function(e){var t=e.symbol;e.widget.activeChart().setSymbol(t,(function(){}))}({widget:U.current,symbol:t})}),[t]),(0,yt.Z)((function(){d&&U.current&&function(e){var t=e.interval,i=e.onDone;e.widget.activeChart().setResolution(t,i)}({widget:U.current,interval:i})}),[i]),(0,yt.Z)((function(){d&&U.current&&Cs({widget:U.current,theme:n,styles:r,onSetThemeDone:D,onSave:x})}),[n,r,x]),(0,p.useImperativeHandle)(v,(function(){return U.current})),p.createElement(S.Z,{id:y.container_id,style:{height:"100%"}})},Ls=function(e){var t=(0,g.__read)((0,p.useState)(!1),2),i=t[0],n=t[1],r=(0,p.useMemo)((function(){return ut()(e.initialConfig)}),[]),o=(0,p.useCallback)((function(){var e;n(!0),null===(e=r.onChartReadyDone)||void 0===e||e.call(r)}),[r]),a=(0,g.__assign)((0,g.__assign)({},e),{isChartReady:i,initialConfig:(0,g.__assign)((0,g.__assign)({},r),{onChartReadyDone:o})});return p.createElement(S.Z,{sx:{height:"100%",position:"relative"}},p.createElement(Ss,(0,g.__assign)({},a)),!i&&p.createElement(S.Z,{sx:{height:"100%",width:"100%",background:e.styles.overrides["paneProperties.background"],position:"absolute",left:0,top:0}},p.createElement(Y,null)))},Es=function(e){return(0,p.useMemo)((function(){return Vt().createInstance({name:e})}),[e])},ks=function(e){var t=e.study,i=e.precision,n=Math.log10(i);null==t||t.applyOverrides({precision:n})},Vs=function(e){var t=e.chart,i=e.precision;t.getAllStudies().filter((function(e){return"Volume"!==e.name})).forEach((function(e){var n=e.id;return ks({study:t.getStudyById(n),precision:i})}))},As=function(e){var t=e.key,i=e.layout;switch(i){case"s":return t;default:return t+"-"+i}},Ts=function(e){switch(e){case bl.ChartMode.Four:return"4";case bl.ChartMode.Single:default:return"s"}},Ms=function(e){var t=e.tradingViewProps,i=e.namespace,n=e.theme,r=e.storageName,o=void 0===r?"myTradingView":r,a=e.containerId,l=void 0===a?"tradingview":a,s=e.symbolsInfo,c=void 0===s?{}:s,u=(0,bl.createStore)(i),d=(0,Cl.createStore)(i),h=(0,g.__read)(u(bl.getInterval),2),f=h[0],v=h[1],m=u(bl.getTrueInterval),y=(0,g.__read)(u(bl.getActiveTab),1)[0],x=(0,g.__read)(u(bl.getPriceType),2),b=x[0],C=x[1],_=(0,g.__read)(u(bl.getTvChartStyle),2),w=_[0],L=_[1],E=(0,g.__read)(u(bl.getChartMode),1)[0],k=(0,g.__read)(u(bl.getShowLimitOrder),1)[0],V=(0,g.__read)(u(bl.getShowPositionOrder),1)[0],A=(0,g.__read)(u(bl.getShowExecutionOrder),1)[0],T=(0,g.__read)(d(Cl.getLoading),2)[1],M=(0,g.__read)(d(Cl.getTradingViewReference),2)[1],D=(0,g.__read)((0,p.useState)(!1),2),I=D[0],P=D[1],B=(0,Tl.Z)("","kline-ui").getI18n,W=(0,Gl.tZ)(),R=(0,p.useMemo)((function(){return function(e){switch(e){case"zh-CN":case"cn":return"zh";case"zh-HK":case"zh-TW":case"zh-TC":case"tw":return"zh_TW";case"ja":return"ja";case"ko":return"ko";case"th":return"th";case"he":return"he_IL";case"ru":return"ru";case"cs":return"cs";case"sv":return"sv";case"vi":case"vn":return"vi";case"tr":return"tr";case"ro":return"ro";case"pt-PT":case"pt-BR":case"pt":return"pt";case"pl":return"pl";case"nl":return"nl_NL";case"it":return"it";case"fr":return"fr";case"es":case"es-LA":return"es";case"de":return"de";case"id":return"id_ID";case"ur":case"ph":case"bg":case"lv":case"uk-UA":case"ar":case"bn":case"en":case"en-AU":case"in":case"ng":default:return"en"}}(W)}),[W]),H=Es(i),Z=(0,p.useRef)(),O=(0,p.useRef)(f),N=(0,p.useRef)(w),F=(0,p.useRef)(c),K=(0,p.useRef)(E),U=(0,p.useRef)(H),z=(0,p.useRef)(o);(0,p.useEffect)((function(){O.current=f}),[f]),(0,p.useEffect)((function(){N.current=w}),[w]),(0,p.useEffect)((function(){F.current=c}),[c]),(0,p.useEffect)((function(){K.current=E}),[E]),(0,p.useEffect)((function(){U.current=H}),[H]),(0,p.useEffect)((function(){z.current=o}),[o]);var X=(0,p.useMemo)((function(){return B("order-drag-tooltip",{defaultValue:"Drag for price modify"})||""}),[B]),G=(0,p.useMemo)((function(){return B("order-modify-tooltip",{defaultValue:"Click for modify"})||""}),[B]),Y=(0,p.useMemo)((function(){return B("order-cancel-tooltip",{defaultValue:"Click for cancel"})||""}),[B]),j=(0,p.useMemo)((function(){return t.limitOrders.map((function(e){return(0,g.__assign)((0,g.__assign)({},e),{tooltip:e.tooltip||X,modifyTooltip:e.modifyTooltip||G,cancelTooltip:e.cancelTooltip||Y})}))}),[Y,X,G,t.limitOrders]),q=function(e){var t=e.namespace,i=(0,as.Fg)().getThemeCounter,n=(0,g.__read)((0,rs.Z)(t+"_tvThemeCounter",0),2),r=n[0],o=n[1],a=(0,g.__read)((0,p.useState)(-1),2),l=a[0],s=a[1],c=(0,p.useCallback)((function(){return s(i())}),[i]);(0,os.Z)((function(){return c()})),(0,yt.Z)((function(){return c()}));var u=(0,p.useCallback)((function(){o(i())}),[i,o]),d=(0,p.useMemo)((function(){return-1!==l}),[l]);return{onSetThemeDone:u,overwritingThemeOnLoaded:(0,p.useMemo)((function(){return d&&l!==r}),[d,l,r])}}({namespace:i}),Q=q.onSetThemeDone,J=q.overwritingThemeOnLoaded,$=(0,p.useMemo)((function(){return function(e){return{originalTheme:e,overrides:us(e)}}(n)}),[n]),te=(0,p.useMemo)((function(){return i+"-"+l}),[l,i]),ie=(0,p.useMemo)((function(){return $l[m]}),[m]),ne=(0,p.useMemo)((function(){return ql({symbol:t.symbol,params:{priceType:b}})}),[b,t.symbol]),re=(0,p.useCallback)((function(e){var t=e.resolution,i=e.chartType,n=es[t],r=2===i;v(n===bl.DisplayIntervals["1m"]&&r?bl.DisplayIntervals.Time:n)}),[v]),oe=(0,p.useCallback)((function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return Z.current?(t=As({key:z.current,layout:Z.current.layout()}),[4,U.current.setItem(t,e)]):[2];case 1:return i.sent(),[2]}}))}))}),[]),ae=(0,p.useCallback)((function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,g.__generator)(this,(function(i){return t=As({key:z.current,layout:Ts(e)}),[2,U.current.getItem(t)]}))}))}),[]),le=(0,p.useCallback)((function(e){return(0,Yl.find)(F.current,(function(t){return t.fullName===(null==e?void 0:e.full_name)||t.symbol===(null==e?void 0:e.full_name)}))}),[]),se=(0,p.useCallback)((function(e){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var i,n;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:return[4,oe(e)];case 1:return r.sent(),[4,null===(n=(i=t.initialConfig).onSave)||void 0===n?void 0:n.call(i,e)];case 2:return r.sent(),[2]}}))}))}),[oe,t.initialConfig]),ce=(0,p.useCallback)((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,i,n;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:return[4,ae(K.current)];case 1:return e=r.sent(),null===(n=(i=t.initialConfig).onLoadConfig)||void 0===n||n.call(i),[2,e]}}))}))}),[ae,t.initialConfig]),ue=(0,p.useCallback)((function(e){var i,n;T(e),null===(n=(i=t.initialConfig).onLoading)||void 0===n||n.call(i,e)}),[T,t.initialConfig]),de=(0,p.useCallback)((function(){var e,i;M(Z.current),setTimeout((function(){var e;if(Z.current){var t=null===(e=Z.current)||void 0===e?void 0:e.activeChart(),i=(le(t.symbolExt())||{}).tickSize;Vs({chart:t,precision:void 0===i?1e7:i})}}),0),P(!0),null===(i=(e=t.initialConfig).onChartReadyDone)||void 0===i||i.call(e)}),[le,M,t.initialConfig]),he=(0,p.useCallback)((function(){var e,i;Q(),null===(i=(e=t.initialConfig).onSetThemeDone)||void 0===i||i.call(e)}),[Q,t.initialConfig]),ge=(0,p.useCallback)((function(){var e,i;Q(),null===(i=(e=t.initialConfig).onFirstTimeSetThemeDone)||void 0===i||i.call(e)}),[Q,t.initialConfig]),pe=(0,p.useCallback)((function(e){var i,n;e.setChartType(O.current===bl.DisplayIntervals.Time?2:N.current),null===(n=(i=t.initialConfig).onIntervalChanged)||void 0===n||n.call(i,e)}),[t.initialConfig]),fe=(0,p.useCallback)((function(e){var i,n,r=e.chart,o=r.symbolExt();if(o){var a=r.chartType();re({resolution:r.resolution(),chartType:a}),L(a);var l=(le(o)||{}).params,s=(void 0===l?{}:l).priceType,c=void 0===s?"":s;c&&C(c),null===(n=(i=t.initialConfig).onActiveChartChanged)||void 0===n||n.call(i,e)}}),[le,re,C,L,t.initialConfig]),ve=(0,p.useCallback)((function(e){window.open("https://www.tradingview.com/x/"+e,"_blank")}),[]),me=(0,p.useCallback)((function(e){var i,n;setTimeout((function(){if(Z.current){var t=Z.current.activeChart(),i=(le(t.symbolExt())||{}).tickSize,n=void 0===i?1e7:i,r=t.getAllStudies(),o=t.getStudyById(r[0].id),a=t.getStudyById(r[r.length-1].id),l=o._study._properties.name._value===e.value?o:a;ks({study:l,precision:n})}}),0),null===(n=(i=t.initialConfig).onAddStudy)||void 0===n||n.call(i,e)}),[le,t.initialConfig]),ye=(0,p.useCallback)((function(e){var i,n,r=(le(e.symbolExt())||{}).tickSize;Vs({chart:e,precision:void 0===r?1e7:r}),null===(n=(i=t.initialConfig).onSymbolChanged)||void 0===n||n.call(i,e)}),[le,t.initialConfig]),xe=(0,p.useCallback)((function(e){var i,n,r=(le(e.symbolExt())||{}).tickSize;Vs({chart:e,precision:void 0===r?1e7:r}),null===(n=(i=t.initialConfig).onFirstTimeDataLoadedDone)||void 0===n||n.call(i,e)}),[le,t.initialConfig]),be=(0,p.useCallback)((function(e){var i,n,r=(le(e.symbolExt())||{}).tickSize;Vs({chart:e,precision:void 0===r?1e7:r}),null===(n=(i=t.initialConfig).onDataLoadedDone)||void 0===n||n.call(i,e)}),[le,t.initialConfig]),Ce=(0,p.useCallback)((function(e){var t=e.chart;e.tradingViewSave||[{length:7,color:"rgba(241, 156, 56, 0.7)"},{length:25,color:"rgba(234, 61, 247, 0.7)"},{length:99,color:"rgba(116, 252, 253, 0.7)"}].forEach((function(e){var i=e.length,n=e.color;t.createStudy("Moving Average",!1,!1,{length:i},{"plot.linewidth":1,"plot.color":n,precision:8,showLabelsOnPriceScale:!1})}))}),[]),_e=(0,p.useMemo)((function(){return t.initialConfig.onInitChart||Ce}),[Ce,t.initialConfig.onInitChart]);(0,p.useEffect)((function(){I&&Z.current&&Z.current.activeChart().setChartType(w)}),[w,I]),(0,yt.Z)((function(){(0,g.__awaiter)(void 0,void 0,void 0,(function(){var e,t,i,n;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:return Z.current?[4,ae(E)]:[2];case 1:if(e=r.sent()){if(t=Z.current.activeChart(),i=le(t.symbolExt()),n=t.resolution(),Z.current.load(e),!i)return[2];setTimeout((function(){if(Z.current){var e=Z.current.activeChart();e.setSymbol(i.ticker,(function(){e.setResolution(n,(function(){re({resolution:e.resolution(),chartType:e.chartType()})}))}))}}),0)}else E===bl.ChartMode.Four?Z.current.setLayout("4"):E===bl.ChartMode.Single&&Z.current.setLayout("s");return[2]}}))}))}),[E,le,re]);var we=function(e){var t=e.storage,i=e.storageName,n=(0,Tl.Z)("","trade-ui").getI18n,r=(0,p.useMemo)((function(){return n("trd-chart-tv-load-timeout",{defaultValue:"Failed to load TradingView due to network issues."})||""}),[n]),o=(0,p.useMemo)((function(){return n("trd-chart-tv-initialization-error",{defaultValue:"Something went wrong while initializing TradingView."})||""}),[n]),a=(0,p.useMemo)((function(){return n("trd-chart-crash-reload",{defaultValue:"Refresh"})||""}),[n]),l=(0,p.useMemo)((function(){return n("trd-chart-init-error",{defaultValue:"Failed to initialize TradingView due to malformed config, please try to refresh"})||""}),[n]),s=(0,p.useCallback)((function(){return window.location.reload()}),[]),c=(0,p.useCallback)((function(){return(0,g.__awaiter)(void 0,void 0,void 0,(function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,t.removeItem(i)];case 1:return e.sent(),s(),[2]}}))}))}),[s,t,i]),u=(0,g.__read)((0,p.useState)(!1),2),d=u[0],h=u[1],f=(0,g.__read)((0,p.useState)(""),2),v=f[0],m=f[1],y=(0,g.__read)((0,p.useState)(""),2),x=y[0],b=y[1],C=(0,p.useRef)((function(){return Promise.resolve()})),_=(0,p.useCallback)((function(){h(!0),m(r),b(a),C.current=s}),[r,a,s]),w=(0,p.useCallback)((function(){h(!0),m(l),b(a),C.current=c}),[c,a,l]),S=(0,p.useCallback)((function(){h(!0),m(o),b(a),C.current=s}),[o,a,s]);return{showError:d,mainText:v,buttonText:x,buttonCallback:C.current,onScriptLoadingError:_,onTradingViewInitError:w,onChartReadyError:S}}({storage:H,storageName:o}),Se=we.showError,Le=we.mainText,Ee=we.buttonText,ke=we.buttonCallback,Ve=we.onScriptLoadingError,Ae=we.onTradingViewInitError,Te=we.onChartReadyError;return Se?p.createElement(ee,{mainText:Le,btnText:Ee,resetErrorBoundary:ke}):p.createElement(S.Z,{sx:{height:"100%",display:y!==bl.Tabs.TradingView?"none":"block"}},p.createElement(Ls,(0,g.__assign)({},t,{symbol:ne,interval:ie,styles:$,limitOrders:k?j:[],positionOrders:V?t.positionOrders:[],executionOrders:A?t.executionOrders:[],widget:Z,overwritingThemeOnLoaded:J,initialConfig:(0,g.__assign)((0,g.__assign)({},t.initialConfig),{tvConfig:(0,g.__assign)((0,g.__assign)({},t.initialConfig.tvConfig),{symbol:ne,container:te,container_id:te,interval:ie,locale:R}),onSave:se,onLoadConfig:ce,onLoading:ue,onChartReadyDone:de,onChartReadyError:Te,onScriptLoadingError:Ve,onTradingViewInitError:Ae,onIntervalChanged:pe,onFirstTimeSetThemeDone:ge,onSetThemeDone:he,onFirstTimeDataLoadedDone:xe,onDataLoadedDone:be,onInitChart:_e,onActiveChartChanged:fe,onSymbolChanged:ye,onAddStudy:me,onScreenshotReady:ve})})))};var Ds,Is=i(33470),Ps=i(30733),Bs=i.n(Ps),Ws=i(91823),Rs=function(e){return{depthScale:0,setDepthScale:function(t){return e({depthScale:t})}}},Hs=Bs()((function(e){return void 0===e&&(e="unspecific-chart-namespace"),(0,Ws.Z)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,g.__assign)({},Rs.apply(void 0,(0,g.__spreadArray)([],(0,g.__read)(e))))}))})),Zs=function(e){return[e.depthScale,e.setDepthScale]},Os=function(e,t,i,n){return n-e(t)>=e(i)-n?i:t},Ns=function(e,t,i){var n=e.length;if(i<=t(e[0]))return e[0];if(i>=t(e[n-1]))return e[n-1];for(var r=0,o=n,a=0;r<o;){if(t(e[a=(r+o)/2>>>0])===i)return e[a];if(i<t(e[a])){if(a>0&&i>t(e[a-1]))return Os(t,e[a-1],e[a],i);o=a}else{if(a<n-1&&i<t(e[a+1]))return Os(t,e[a],e[a+1],i);r=a+1}}return e[a]},Fs=function(e,t){if(!e.length)return null;var i,n=e.length-1,r=0,o=t(e[r]);if(t(e[n])===o)return null;for(;n>=r;)t(e[i=(n+r)/2>>>0])===o?r=i+1:n=i-1;return r},Ks={desktop:1260,tablet:768,phone:480},Us=function(e){var t=e.xData;return{xData:e.yData,yData:t}},zs=function(e){return"undefined"!=typeof window&&(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=Ks[e]},Xs=function(e){var t=e.symbol,i=e.d1Group,n=e.d2Group,r=e.width,o=e.height,a=e.cursor,l=e.scale,s=e.yAxisScale,c=void 0===s?.6:s,u=r/2,d=(0,p.useRef)(Number.NEGATIVE_INFINITY),h=(0,p.useRef)(Number.NEGATIVE_INFINITY);(0,p.useEffect)((function(){d.current=Number.NEGATIVE_INFINITY,h.current=Number.NEGATIVE_INFINITY}),[t]);var f=function(e,t,i){var n,r,o,a,l,s;return void 0===i&&(i=10),{d1:{low:null===(n=e[0])||void 0===n?void 0:n.xData,high:null===(r=e[e.length-1])||void 0===r?void 0:r.xData,atIndex:null===(o=e[i-1])||void 0===o?void 0:o.xData},d2:{low:null===(a=t[t.length-1])||void 0===a?void 0:a.xData,high:null===(l=t[0])||void 0===l?void 0:l.xData,atIndex:null===(s=t[i-1])||void 0===s?void 0:s.xData}}}(i,n),v=f.d1,m=f.d2,y=(m.high+v.low)/2,x=function(e,t){return{min:1/Math.max(e.high-e.low,t.high-t.low)||-1/0,max:1/Math.max((e.atIndex||e.high)-e.low,t.high-(t.atIndex||t.low))||-1/0}}(v,m),b=x.min,C=x.max;d.current=Math.max(b,d.current),h.current=Math.max(C,h.current);var _=function(e,t,i){return e+(t-e)/1e3*i}(d.current,h.current,l),w=(0,p.useCallback)((function(e){return function(e){var t=e.width;return(e.value-e.midValue)*e.scale*t+t}({value:e,width:u,scale:_,midValue:y})}),[u,_,y]),S=(0,p.useCallback)((function(e){return function(e){var t=e.width;return(e.x-t)/t/e.scale+e.midValue}({x:e,width:u,scale:_,midValue:y})}),[u,_,y]),L=function(e){var t,i,n=e.d1Group,r=e.d2Group,o=e.d2Predicate,a=Fs(n,e.d1Predicate)||n.length,l=Fs(r,o)||r.length,s=null===(t=n[a-1])||void 0===t?void 0:t.yData,c=null===(i=r[l-1])||void 0===i?void 0:i.yData;return{max:Math.max(c,s),maxD1Index:a,maxD2Index:l}}({d1Group:i,d2Group:n,d1Predicate:function(e){return w(e.xData)>r},d2Predicate:function(e){return w(e.xData)<0}}),E=L.max,k=L.maxD1Index,V=L.maxD2Index,A=(0,p.useCallback)((function(e){return function(e){var t=e.height;return t-e.value/e.maxValue*e.scale*t-1}({value:e,height:o,scale:c,maxValue:E})}),[o,E]),T=function(e){var t=e.d1Group,i=e.d2Group,n=e.x,r=e.midValue,o=e.breakpoint,a=e.xToValueFn,l=e.valueToXFn,s=e.valueToYFn,c={xData:NaN,yData:NaN},u={xData:NaN,yData:NaN};if(n&&t.length){var d=void 0;n>o?(d=2*r-(null==(c=Ns(t,(function(e){return null==e?void 0:e.xData}),a(n)))?void 0:c.xData),u=Ns(i,(function(e){return-(null==e?void 0:e.xData)}),-d)):(d=2*r-(null==(u=Ns(i,(function(e){return-(null==e?void 0:e.xData)}),-a(n)))?void 0:u.xData),c=Ns(t,(function(e){return null==e?void 0:e.xData}),d))}return{d1:(0,g.__assign)((0,g.__assign)({},c),{x:l(null==c?void 0:c.xData)||0,y:s(null==c?void 0:c.yData)||0}),d2:(0,g.__assign)((0,g.__assign)({},u),{x:l(null==u?void 0:u.xData)||0,y:s(null==u?void 0:u.yData)||0})}}({d1Group:i.slice(0,k-1),d2Group:n.slice(0,V-1),x:a.x,midValue:y,breakpoint:u,xToValueFn:S,valueToXFn:w,valueToYFn:A}),M=T.d1,D=T.d2,I=E/c,P=function(e,t,i){var n;n=e>=t?zs("mobile")||e<500?3:zs("tablet")||e<800?5:10:t<500?3:t<800?5:10;for(var r=i(0),o=(i(e)-r)/n,a=[],l=r+o/2,s=0;s<n;s++)l&&(l>0&&a.push(l),l+=o);return a}(r,o,S),B=function(e,t,i){var n=[20,50,100],r=(t-0)/Math.floor(i/40),o=Math.floor(Math.log10(r)-1),a=r/(o=Math.pow(10,o)),l=0,s=0;for(s=0;s<n.length;s++)if(n[s]>=a){l=n[s]*o;break}var c,u=0;c=Math.ceil(t/l)*l,u=Math.floor(0/l)*l;for(var d=[];u<c;)d.push(parseFloat((u+l).toPrecision(12))),u+=l;return d}(0,I,o);return{width:r,height:o,halfWidth:u,midValue:y,d1:M,d2:D,xTicks:P,yTicks:B,valueToX:w,valueToY:A}},Gs=function(e){var t=e.initCursorState,i=void 0===t?{x:0,y:0}:t,n=e.scale,r=e.setScale,o=void 0===r?function(){return null}:r,a=(0,g.__read)((0,p.useState)(i),2),l=a[0],s=a[1];return{cursor:l,onMouseMove:function(e){return s({x:e.evt.offsetX,y:e.evt.offsetY})},onMouseLeave:function(){return s(i)},onMouseWheel:(0,p.useCallback)((function(e){var t,i,r=(null===(t=null==e?void 0:e.evt)||void 0===t?void 0:t.deltaY)<0?Math.min(n+5,1e3):Math.max(0,n-5);null==o||o(r),null===(i=null==e?void 0:e.evt)||void 0===i||i.preventDefault()}),[n,o])}},Ys=function(e){var t=e.symbol,i=e.d1Group,n=e.d2Group,r=e.canvas,o=r.width,a=r.height,l=e.scale,s=e.setScale,c=e.styles,u=e.yAxisScale,d=void 0===u?.6:u,h=e.xAxisVerticalOffset,g=void 0===h?22:h,f=e.yAxisHorizontalOffset,v=void 0===f?50:f,m=e.strokeWidth,y=void 0===m?1:m,x=e.graphStrokeWidth,b=void 0===x?1:x,C=e.xTicksFormatter,_=void 0===C?function(e){return e.toString()}:C,w=e.yTicksFormatter,S=void 0===w?function(e){return e.toString()}:w,L=e.d1XValueFormatter,E=void 0===L?function(e){return e.toString()}:L,k=e.d2XValueFormatter,V=void 0===k?function(e){return e.toString()}:k,A=e.d1YValueFormatter,T=void 0===A?function(e){return e.toString()}:A,M=e.d2YValueFormatter,D=void 0===M?function(e){return e.toString()}:M,I=e.d1DeltaXValueFormatter,P=void 0===I?function(e){return e.toString()}:I,B=e.d2DeltaXValueFormatter,W=void 0===B?function(e){return e.toString()}:B,R=Gs({scale:l,setScale:s}),H=R.cursor,Z=R.onMouseMove,O=R.onMouseLeave,N=R.onMouseWheel,F=Xs({symbol:t,d1Group:i,d2Group:n,width:o-v,height:a-g,cursor:H,scale:l,yAxisScale:d}),K=F.width,U=F.height,z=F.halfWidth,X=F.midValue,G=F.d1,Y=F.d2,j=F.xTicks,q=F.yTicks,Q=F.valueToX,J=F.valueToY;return p.createElement(et.Stage,{width:o,height:a,onMouseMove:Z,onMouseOut:O,onWheel:N},p.createElement(et.Layer,{hitGraphEnabled:!1},p.createElement(et.Group,{height:U},p.createElement(et.Line,{points:[z,0,z,U],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:y}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var i=z,r=U,o=!0;n.forEach((function(t){var n=t.xData,a=t.yData;if(!((i=Q(n))<0||i>z)){var l=J(a);o?(e.moveTo(i,r),o=!1):e.lineTo(i,r),r=l,e.lineTo(i,r)}})),e.lineTo(-y,r),e.lineTo(-y,U),e.fillStrokeShape(t)},fill:c.d2.fillColor,stroke:c.d2.lineColor,strokeWidth:b}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var n=z,r=U,o=!1;i.forEach((function(t){var i=t.xData,a=t.yData;if(!((n=Q(i))>K||n<z)){var l=J(a);o?(e.moveTo(n,r),o=!1):e.lineTo(n,r),r=l,e.lineTo(n,r)}})),e.lineTo(K+y,r),e.lineTo(K+y,U),e.fillStrokeShape(t)},fill:c.d1.fillColor}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var n=z,r=U,o=!1;i.forEach((function(t){var i=t.xData,a=t.yData;if(!((n=Q(i))>K||n<z)){var l=J(a);o?(e.moveTo(n,r),o=!1):e.lineTo(n,r),r=l,e.lineTo(n,r)}})),e.lineTo(K+y,r),e.fillStrokeShape(t)},stroke:c.d1.lineColor,strokeWidth:b}),G.x?p.createElement(p.Fragment,null,p.createElement(et.Line,{points:[G.x,0,G.x,U],stroke:c.d1.lineColor,strokeWidth:y,dash:[2,2]}),p.createElement(et.Line,{points:[z,G.y,K,G.y],stroke:c.d1.lineColor,strokeWidth:y,dash:[2,2]}),p.createElement(et.Line,{points:[Y.x,0,Y.x,U],stroke:c.d2.lineColor,strokeWidth:y,dash:[2,2]}),p.createElement(et.Line,{points:[c.tag.width,Y.y,z,Y.y],stroke:c.d2.lineColor,strokeWidth:y,dash:[2,2]}),p.createElement(et.Circle,{x:G.x,y:G.y,radius:3,fill:c.d1.lineColor}),p.createElement(et.Label,{x:.5*(G.x+z),y:G.y+.5*c.tag.height},p.createElement(et.Tag,{pointerDirection:"down",fill:c.background}),p.createElement(et.Text,{text:P(G.xData,X),fill:c.d1.lineColor,padding:3})),p.createElement(et.Circle,{x:Y.x,y:Y.y,radius:3,fill:c.d2.lineColor}),p.createElement(et.Label,{x:.5*(Y.x+z),y:Y.y+.5*c.tag.height},p.createElement(et.Tag,{pointerDirection:"down",fill:c.background}),p.createElement(et.Text,{text:W(Y.xData,X),fill:c.d2.lineColor,padding:3})),p.createElement(et.Label,{x:K,y:G.y},p.createElement(et.Tag,{pointerDirection:"left",pointerWidth:c.tag.width,pointerHeight:c.tag.height,fill:c.background}),p.createElement(et.Text,{text:T(G.yData),fill:c.d1.lineColor,padding:3})),p.createElement(et.Label,{x:0,y:Y.y},p.createElement(et.Tag,{pointerDirection:"left",pointerWidth:c.tag.width,pointerHeight:c.tag.height,fill:c.d2.fillColor}),p.createElement(et.Text,{text:D(Y.yData),fill:c.d2.lineColor,padding:3})),p.createElement(et.Rect,{x:G.x,y:0,width:K-G.x,height:U,fill:c.hoverBgColor}),p.createElement(et.Rect,{x:0,y:0,width:Y.x,height:U,fill:c.hoverBgColor})):null),p.createElement(et.Group,{y:U},j.map((function(e,t){return p.createElement(p.Fragment,{key:t},p.createElement(et.Line,{points:[Q(e),0,Q(e),4],stroke:c.textColor,strokeWidth:y}),p.createElement(et.Text,{x:Q(e)-20,y:3,text:_(e),fill:c.textColor,padding:3}))})),G.x?p.createElement(p.Fragment,null,p.createElement(et.Label,{x:G.x,y:2},p.createElement(et.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:c.background}),p.createElement(et.Text,{text:E(G.xData),fill:c.d1.lineColor,padding:3})),p.createElement(et.Line,{points:[G.x,0,G.x,4],stroke:c.d1.lineColor,strokeWidth:y}),p.createElement(et.Label,{x:Y.x,y:2},p.createElement(et.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:c.background}),p.createElement(et.Text,{text:V(Y.xData),fill:c.d2.lineColor,padding:3})),p.createElement(et.Line,{points:[Y.x,0,Y.x,4],stroke:c.d2.lineColor,strokeWidth:y})):null),p.createElement(et.Group,{x:K},q.map((function(e,t){return p.createElement(p.Fragment,{key:t},p.createElement(et.Line,{points:[0,J(e),4,J(e)],stroke:c.textColor,strokeWidth:y}),p.createElement(et.Text,{x:8,y:J(e)-5,text:S(e),fill:c.textColor}))})))))},js=function(e){var t=e.symbol,i=e.d1Group,n=e.d2Group,r=e.canvas,o=e.scale,a=e.setScale,l=e.styles,s=e.yAxisScale,c=void 0===s?.9:s,u=e.xAxisVerticalOffset,d=void 0===u?0:u,h=e.yAxisHorizontalOffset,g=void 0===h?60:h,f=e.strokeWidth,v=void 0===f?1:f,m=e.graphStrokeWidth,y=void 0===m?2:m,x=e.yTicksFormatter,b=void 0===x?function(e){return e.toString()}:x,C=e.d1XValueFormatter,_=void 0===C?function(e){return e.toString()}:C,w=e.d2XValueFormatter,S=void 0===w?function(e){return e.toString()}:w,L=e.d1YValueFormatter,E=void 0===L?function(e){return e.toString()}:L,k=e.d2YValueFormatter,V=void 0===k?function(e){return e.toString()}:k,A=i.map(Us),T=n.map(Us),M=Gs({scale:o,setScale:a}),D=M.cursor,I=M.onMouseMove,P=M.onMouseLeave,B=M.onMouseWheel,W=Xs({symbol:t,d1Group:A,d2Group:T,width:r.height-d,height:r.width-g,cursor:{x:r.height-D.y,y:D.x},scale:o,yAxisScale:c}),R=W.height,H=W.halfWidth,Z=W.d1,O=W.d2,N=W.xTicks,F=W.valueToX,K=W.valueToY;return p.createElement(et.Stage,{width:r.width,height:r.height,onMouseMove:I,onMouseOut:P,onWheel:B},p.createElement(et.Layer,{hitGraphEnabled:!1},p.createElement(et.Group,{x:g},p.createElement(et.Line,{points:[0,H,R,H],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:v}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var i=R,n=H,o=!0;T.forEach((function(t){var a=t.xData,l=t.yData;if(!((n=r.height-F(a))>r.height||n<H)){var s=K(l);o?(e.moveTo(i,n),o=!1):e.lineTo(i,n),i=s,e.lineTo(i,n)}})),e.lineTo(i,r.height+v),e.lineTo(R+v,r.height+v),e.fillStrokeShape(t)},fill:l.d2.fillColor,stroke:l.d2.lineColor,strokeWidth:y}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var i=R,n=H,o=!1;A.forEach((function(t){var a=t.xData,l=t.yData;if(!((n=r.height-F(a))<0||n>H)){var s=K(l);o?(e.moveTo(i,n),o=!1):e.lineTo(i,n),i=s,e.lineTo(i,n)}})),e.lineTo(i,-v),e.lineTo(R,-v),e.fillStrokeShape(t)},fill:l.d1.fillColor,stroke:l.d1.lineColor,strokeWidth:y}),Z.x?p.createElement(p.Fragment,null,p.createElement(et.Line,{points:[0,r.height-Z.x,R,r.height-Z.x],stroke:l.d1.lineColor,strokeWidth:v,dash:[2,2]}),p.createElement(et.Line,{points:[Z.y,0,Z.y,H],stroke:l.d1.lineColor,strokeWidth:v,dash:[2,2]}),p.createElement(et.Line,{points:[0,r.height-O.x,R,r.height-O.x],stroke:l.d2.lineColor,strokeWidth:v,dash:[2,2]}),p.createElement(et.Line,{points:[O.y,H,O.y,r.height],stroke:l.d2.lineColor,strokeWidth:v,dash:[2,2]}),p.createElement(et.Circle,{x:Z.y,y:r.height-Z.x,radius:3,fill:l.d1.lineColor}),p.createElement(et.Circle,{x:O.y,y:r.height-O.x,radius:3,fill:l.d2.lineColor}),p.createElement(et.Label,{x:Z.y,y:0},p.createElement(et.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:2,fill:l.d1.fillColor}),p.createElement(et.Text,{text:E(Z.yData),fill:l.d1.lineColor,padding:3})),p.createElement(et.Label,{x:O.y,y:r.height},p.createElement(et.Tag,{pointerDirection:"down",pointerWidth:4,pointerHeight:2,fill:l.d2.fillColor}),p.createElement(et.Text,{text:V(Z.yData),fill:l.d2.lineColor,padding:3})),p.createElement(et.Rect,{x:0,y:0,width:R,height:r.height-Z.x,fill:l.hoverBgColor}),p.createElement(et.Rect,{x:0,y:r.height-O.x,width:R,height:O.x,fill:l.hoverBgColor})):null),p.createElement(et.Group,null,p.createElement(et.Line,{points:[g,0,g,r.height],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:v}),N.map((function(e,t){var i=r.height-F(e);return p.createElement(p.Fragment,{key:t},p.createElement(et.Line,{points:[g-4,i,g,i],stroke:l.textColor,strokeWidth:v}),p.createElement(et.Label,{x:g-4,y:i},p.createElement(et.Tag,{pointerDirection:"right",pointerWidth:0,pointerHeight:0,strokeWidth:0}),p.createElement(et.Text,{text:b(e),fill:l.textColor,padding:3})))})),Z.x?p.createElement(p.Fragment,null,p.createElement(et.Label,{x:g-4,y:r.height-Z.x},p.createElement(et.Tag,{pointerDirection:"right",pointerWidth:l.tag.width,pointerHeight:l.tag.height,fill:l.background}),p.createElement(et.Text,{text:_(null==Z?void 0:Z.xData),fill:l.d1.lineColor,padding:3})),p.createElement(et.Line,{points:[g-4,r.height-Z.x,g,r.height-Z.x],stroke:l.d1.lineColor,strokeWidth:v}),p.createElement(et.Label,{x:g-4,y:r.height-O.x},p.createElement(et.Tag,{pointerDirection:"right",pointerWidth:l.tag.width,pointerHeight:l.tag.height,fill:l.background}),p.createElement(et.Text,{text:S(null==O?void 0:O.xData),fill:l.d2.lineColor,padding:3})),p.createElement(et.Line,{points:[g-4,r.height-O.x,g,r.height-O.x],stroke:l.d2.lineColor,strokeWidth:v})):null)))},qs=function(e,t){return void 0===t&&(t=2),isNaN(e)?"0.00%":(100*e).toFixed(t)+"%"},Qs=function(e,t){if(void 0===t&&(t=2),Math.abs(e)<1e-9&&Math.abs(e)>0)return""+e.toExponential(2);if(Math.abs(e)<1e3)return""+e.toFixed(0);var i=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}],n=0;for(n=i.length-1;n>0&&!(Math.abs(e)>=i[n].value);n--);return(e/i[n].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+i[n].symbol},Js=function(e,t){void 0===t&&(t=-1);var i=e&&t>=0?Number(e).toFixed(t):""+e,n=i,r="",o=i.indexOf(".");return o>-1&&(n=i.slice(0,o),r=i.slice(o)),n.replace(/\d{1,3}(?=(\d{3})+$)/g,(function(e){return e+","}))+r};!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(Ds||(Ds={}));var $s=i(79301),ec=i(98346),tc=i(15316),ic=i.n(tc),nc=function(e){return{orderHistory:[],setOrderHistory:function(t){return e({orderHistory:t})},appendOrderHistory:function(t){return e((function(e){return{orderHistory:ic()(t,e.orderHistory,"id")}}))},clearOrderHistory:function(){return e({orderHistory:[]})}}},rc=Bs()((function(e){return void 0===e&&(e="unspecific-chart-namespace"),(0,Ws.Z)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,g.__assign)({},nc.apply(void 0,(0,g.__spreadArray)([],(0,g.__read)(e))))}))})),oc=function(e){return[e.orderHistory,e.setOrderHistory,e.appendOrderHistory,e.clearOrderHistory]},ac={Containers:{Chart:function(e){var t=e.namespace,i=e.hostAddress,n=e.themeName,r=e.getSymbolDisplayName,o=e.checkMiniSymbolAvaliablility,a=e.beforeMiniChartSymbolChange,l=e.hasDoneFetchingSymbols,s=e.generateToolbar,c=e.generateMiniToolbar,u=e.basicKline,d=e.tradingView,h=e.depth,f=e.symbol,v=e.checkTradeStatus,m=e.isHiddenLogo,y=e.electron,x=e.enableTVMultiChart,b=void 0!==x&&x;!function(e){var t=e.namespace;!function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getInterval),2)[1],n=(0,p.useMemo)((function(){return e+"-chart-interval"}),[e]);(0,p.useEffect)((function(){return El(n,(function(e){return i(e)}))}),[n,e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getSelectedIntervals),2)[1];(0,p.useEffect)((function(){return El(e+"-selected-intervals",(function(e){return i(e.map((function(e){return e.value})))}))}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getActiveTab),2)[1];(0,p.useEffect)((function(){return El(e+"-chart-active-tab",i)}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getShowLimitOrder),2)[1];(0,p.useEffect)((function(){return El(e+"-show-limit-orders",i)}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getShowPositionOrder),2)[1];(0,p.useEffect)((function(){return El(e+"-show-position-orders",i)}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getShowExecutionOrder),2)[1];(0,p.useEffect)((function(){return El(e+"-show-execution-orders",i)}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getPriceType),2)[1];(0,p.useEffect)((function(){return El(e+"-chart-priceType",i)}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getOriginalChartStyle),2)[1];(0,p.useEffect)((function(){return El(e+"-chart-type",i)}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getTvChartStyle),2)[1];(0,p.useEffect)((function(){return El(e+"-chart-tvChartStyle",i)}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getChartMode),2)[1];(0,p.useEffect)((function(){return El(e+"-chart-miniMultiChartType",i)}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getLastSelectedMiniMultiChartWindow),2)[1];(0,p.useEffect)((function(){return El(e+"-chart-lastSelectedMiniMultiChartWindow",i)}),[e,i])}(t),function(e){var t=(0,bl.createStore)(e),i=(0,g.__read)(t(bl.getMiniMultiChartWindows),2)[1];(0,p.useEffect)((function(){return El(e+"-chart-miniMultiChartWindows",i)}),[e,i])}(t),function(e){(0,p.useEffect)((function(){localStorage.removeItem(e+"-interval-config-open")}),[e])}(t)}({namespace:t});var C=(0,bl.createStore)(t),_=(0,g.__read)(C(bl.getChartMode),1)[0],w=C(bl.getIsOriginalFourMode),S=function(e){var t=(0,Cl.createStore)(e),i=(0,g.__read)(t(Cl.getLayoutWidth),1)[0],n=(0,ia.F)().isMobile;return(0,p.useMemo)((function(){return n||i<580&&i>0?Ll.l.Small:Ll.l.Medium}),[n,i])}(t),L=function(e){var t=e.namespace,i=e.beforeMiniChartSymbolChange,n=(0,bl.createStore)(t),r=(0,g.__read)(n(bl.getLastSelectedMiniMultiChartWindow),2)[1],o=(0,g.__read)(n(bl.getMiniMultiChartWindows),1)[0];return(0,p.useCallback)((function(e){var t=o[e];i({symbol:t}),r(e)}),[o,i,r])}({namespace:t,beforeMiniChartSymbolChange:a}),E=(0,p.useMemo)((function(){return p.createElement(p.Suspense,{fallback:null},p.createElement(Al,{namespace:t,symbol:f,hostAddress:i,themeName:n,checkMiniSymbolAvaliablility:o,checkTradeStatus:v,onSymbolChange:L,getSymbolDisplayName:r,basicKline:u,generateToolbar:c,isHiddenLogo:m,hasDoneFetchingSymbols:l}))}),[u,o,v,c,r,l,i,m,t,L,f,n]),k=(0,p.useMemo)((function(){return p.createElement(wl,{basicKline:u,tradingView:d,depth:h,symbol:f,namespace:t,electron:y})}),[u,h,y,t,f,d]);!function(e){var t=e.namespace,i=e.electron,n=e.focusAreaClassName,r=void 0===n?".focus-area":n,o=(0,bl.createStore)(t),a=(0,Cl.createStore)(t),l=(0,g.__read)(o(bl.getActiveTab),1)[0],s=(0,g.__read)(a(Cl.getCandlestickReference),1)[0],c=(0,g.__read)(o(bl.getInterval),2),u=c[0],d=c[1],h=(0,g.__read)((0,p.useState)(!1),2),f=h[0],v=h[1],m=(0,p.useCallback)((function(){return v(!0)}),[v]),y=(0,p.useCallback)((function(e){return function(t){var i;(null===(i=t.target)||void 0===i?void 0:i.matches(r))||t.composedPath().some((function(t){return e.includes(t)}))||v(!1)}}),[r]),x=(0,p.useCallback)((function(){var e=Vl.indexOf(u)+1,t=Vl[e%Vl.length];d(t)}),[u,d]),b=(0,p.useCallback)((function(){switch(l){case bl.Tabs.Origin:null==s||s.zoomIn()}}),[s,l]),C=(0,p.useCallback)((function(){switch(l){case bl.Tabs.Origin:null==s||s.zoomOut()}}),[s,l]),_=(0,p.useCallback)((function(){switch(l){case bl.Tabs.Origin:null==s||s.goForward()}}),[s,l]),w=(0,p.useCallback)((function(){switch(l){case bl.Tabs.Origin:null==s||s.goNext()}}),[s,l]);(0,p.useEffect)((function(){if(i&&kl.electron){var e=document.querySelectorAll(r),t=y(Array.from(e));e.forEach((function(e){return e.addEventListener("click",m)})),document.addEventListener("click",t);var n=i.registerActionHandle((function(e){var t=e.name;if(f)switch(t){case i.constants.ACTION_K_LINE_SWITCH_PERIOD:return x();case i.constants.ACTION_K_LINE_ZOOM_IN:return b();case i.constants.ACTION_K_LINE_ZOOM_OUT:return C();case i.constants.ACTION_K_LINE_MOVE_LEFT:return w();case i.constants.ACTION_K_LINE_MOVE_RIGHT:return _()}}));return function(){n(),null==e||e.forEach((function(e){return e.removeEventListener("click",m)})),document.removeEventListener("click",t)}}}),[f,m,y,x,i,b,C,w,_,r])}({namespace:t,electron:y});var V=(0,p.useMemo)((function(){return b?w?E:k:_===bl.ChartMode.Four?E:k}),[_,b,w,E,k]);return p.createElement(xl.Z,{symbol:f,symbolDisplay:r(f),hostAddress:i,themeName:n,checkTradeStatus:v},p.createElement(yl.Z,{useMiniHeader:w,namespace:t,headerSlot:p.createElement(Sl.ZP,{symbol:f,getSymbolDisplayName:r,namespace:t,headerType:Sl.vb.Medium,generateToolbar:s({onSymbolChange:L}),intervalFilterType:S})},V))},BasicKline:function(e){var t=e.onError,i=(0,g.__rest)(e,["onError"]),n=(0,Tl.Z)("","trade-ui").getI18n,r=(0,p.useMemo)((function(){return n("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."})||""}),[n]),o=(0,p.useMemo)((function(){return n("trd-chart-crash-refresh",{defaultValue:"Refresh"})||""}),[n]);return p.createElement(Il,{name:"origin_kline",FallbackComponent:function(e){var t=e.resetErrorBoundary;return p.createElement(ee,{mainText:r,btnText:o,resetErrorBoundary:t})},onError:t},p.createElement(zl,(0,g.__assign)({},i)))},TradingView:function(e){var t=e.errorBoundaryProps,i=(0,g.__rest)(e,["errorBoundaryProps"]),n=i.namespace,r=(0,Tl.Z)("","trade-ui").getI18n,o=ss(n),a=(0,p.useMemo)((function(){return r("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."})||""}),[r]),l=(0,p.useMemo)((function(){return r("trd-chart-crash-refresh",{defaultValue:"Refresh"})||""}),[r]),s=(0,p.useCallback)((function(){var e;o.removeItem("myTradingView"),null===(e=null==t?void 0:t.onReset)||void 0===e||e.call(t)}),[t,o]);return p.createElement(Il,(0,g.__assign)({},t,{name:"trading_view",FallbackComponent:function(e){var t=e.resetErrorBoundary;return p.createElement(ee,{mainText:a,btnText:l,resetErrorBoundary:t})},onReset:s}),p.createElement(cs,(0,g.__assign)({},i)))},TradingViewTP:function(e){var t=e.errorBoundaryProps,i=(0,g.__rest)(e,["errorBoundaryProps"]),n=i.namespace,r=(0,Tl.Z)("","trade-ui").getI18n,o=Es(n),a=(0,p.useMemo)((function(){return r("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."})||""}),[r]),l=(0,p.useMemo)((function(){return r("trd-chart-crash-refresh",{defaultValue:"Refresh"})||""}),[r]),s=(0,p.useCallback)((function(){var e;o.removeItem("myTradingView"),null===(e=null==t?void 0:t.onReset)||void 0===e||e.call(t)}),[t,o]);return p.createElement(Il,(0,g.__assign)({},t,{name:"trading_view",FallbackComponent:function(e){var t=e.resetErrorBoundary;return p.createElement(ee,{mainText:a,btnText:l,resetErrorBoundary:t})},onReset:s}),p.createElement(Ms,(0,g.__assign)({},i)))},DepthChart:function(e){var t=e.namespace,i=e.symbol,n=e.theme,r=e.asks,o=e.bids,a=e.width,l=e.height,s=e.mode,c=e.pricePrecision,u=e.filterPricePrecision,d=Hs(t),h=(0,g.__read)(d(Zs),2),f=h[0],v=h[1],m=(0,p.useMemo)((function(){return function(e,t){var i,n,r,o,a,l,s,c;return{tag:{width:2,height:18},background:null===(i=null==e?void 0:e.colors)||void 0===i?void 0:i.background,d1:{lineColor:null===(n=null==e?void 0:e.colors)||void 0===n?void 0:n.sell,fillColor:(0,k.D)(null===(r=null==e?void 0:e.colors)||void 0===r?void 0:r.sell,.1)},d2:{lineColor:null===(o=null==e?void 0:e.colors)||void 0===o?void 0:o.buy,fillColor:(0,k.D)(null===(a=null==e?void 0:e.colors)||void 0===a?void 0:a.buy,.1)},hoverBgColor:(0,k.D)(null===(l=null==e?void 0:e.colors)||void 0===l?void 0:l.newLine,.4),textColor:null===(c=null===(s=null==e?void 0:e.colors)||void 0===s?void 0:s.t)||void 0===c?void 0:c.third}}(n)}),[n]),y=(0,p.useCallback)((function(e){return Js((0,Is.uf)(e,c))}),[c]),x=(0,p.useCallback)((function(e){return Qs(e,2)}),[]),b=(0,p.useCallback)((function(e){return Js(e,u)}),[u]),C=(0,p.useCallback)((function(e){return Qs(e)}),[]),_=(0,p.useCallback)((function(e,t){return"+"+qs((e-t)/t,1)}),[]),w=(0,p.useCallback)((function(e,t){return""+qs((e-t)/t,1)}),[]);return s===Ds.Horizontal?p.createElement(Ys,{symbol:i,d1Group:r,d2Group:o,canvas:{width:a,height:l},styles:m,scale:f,setScale:v,xTicksFormatter:y,yTicksFormatter:x,d1XValueFormatter:b,d2XValueFormatter:b,d1YValueFormatter:C,d2YValueFormatter:C,d1DeltaXValueFormatter:_,d2DeltaXValueFormatter:w}):p.createElement(js,{symbol:i,d1Group:r,d2Group:o,canvas:{width:a,height:l},styles:m,scale:f,setScale:v,yTicksFormatter:function(e){return(0,Is.uf)(e,c)},d1XValueFormatter:b,d2XValueFormatter:b,d1YValueFormatter:C,d2YValueFormatter:C})},SettingsDropdown:$s.default},Store:bl,SessionStore:Cl,CandlestickHistoryStore:ec,OrderHistoryStore:h,DepthStore:d,DepthChartMode:Ds,DefaultTVEnabledFeatures:dt,DefaultTVDisabledFeatures:ht,DefaultTVStorageName:ls,utils:u,getDepthChartStyles:function(e,t){var i,n,r,o,a,l,s,c;return{tag:t,background:null===(i=null==e?void 0:e.colors)||void 0===i?void 0:i.background,d1:{lineColor:null===(n=null==e?void 0:e.colors)||void 0===n?void 0:n.sell,fillColor:(0,k.D)(null===(r=null==e?void 0:e.colors)||void 0===r?void 0:r.sell,.1)},d2:{lineColor:null===(o=null==e?void 0:e.colors)||void 0===o?void 0:o.buy,fillColor:(0,k.D)(null===(a=null==e?void 0:e.colors)||void 0===a?void 0:a.buy,.1)},hoverBgColor:(0,k.D)(null===(l=null==e?void 0:e.colors)||void 0===l?void 0:l.newLine,.4),textColor:null===(c=null===(s=null==e?void 0:e.colors)||void 0===s?void 0:s.t)||void 0===c?void 0:c.third}},getTradingViewNextStyles:pt,createDatafeed:vt,DefaultResolutions:ft,IntervalFilter:n,OpeningCountdown:z.OpeningCountdown,OrderModificationModal:function(e){var t=e.visible,i=e.priceField,n=e.amountField,r=e.submitText,o=e.cancelText,a=e.onSubmit,l=e.onCancel;return p.createElement(qe.ZP.Modal,{visible:t,sx:{minWidth:"288px",height:"176px",p:0,bg:"modalBg"},onMaskClick:l},p.createElement(f.Z,{sx:{p:"16px",flexDirection:"column","& > *:not(:last-child)":{marginBottom:"16px"}}},p.createElement(S.Z,null,p.createElement(Qe.Z,(0,g.__assign)({variant:"filled",textAlign:"right",prefix:p.createElement(Je,null,i.placeholder),suffix:p.createElement($e,null,i.suffixText),boxProps:{sx:{width:"100%",height:"40px",bg:"bg3"}}},i))),p.createElement(S.Z,null,p.createElement(Qe.Z,(0,g.__assign)({variant:"filled",textAlign:"right",prefix:p.createElement(Je,null,n.placeholder),suffix:p.createElement($e,null,n.suffixText),boxProps:{sx:{width:"100%",height:"40px"}}},n))),p.createElement(f.Z,{sx:{"& > *":{width:"100%",height:"32px"},"& > *:not(:last-child)":{marginRight:"8px"}}},p.createElement(A.Z,{onClick:l,sx:{bg:"line",backgroundImage:"none",color:"t.primary","&:hover:not(:disabled):not(:active):not(.inactive)":{bg:"bg3",backgroundImage:"none"}}},o),p.createElement(A.Z,{onClick:a,sx:{bg:"primary",backgroundImage:"none",color:"bg5","&:hover:not(:disabled):not(:active):not(.inactive)":{backgroundImage:"none"}}},r))))},Chart:q,ChartHeader:r,ChartFallback:ee,ChartPlaceholder:function(){return p.createElement(f.Z,{sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"}},p.createElement(ie,null))},MultiChartManager:function(e){var t=e.windows,i=e.value,n=e.onChange,r=e.onCloseTab,o=e.utilityTray,a=e.sidebar,l=e.draggable,s=void 0!==l&&l,c=t.filter((function(e){return e.visible}));return p.createElement(f.Z,{sx:{height:"100%",flexDirection:"column"}},p.createElement(f.Z,{sx:{height:"34px"}},p.createElement(ue,{options:c,value:i,onChange:n,onClose:r}),p.createElement(f.Z,{className:s?"draggableHandle":"",sx:{minWidth:s?"100px":"0px",flex:"1"}}),p.createElement(f.Z,{sx:{alignItems:"center",justifyContent:"flex-end",paddingRight:"ls","& > *:not(:last-child)":{paddingRight:"sm"}}},o)),p.createElement(f.Z,{sx:{height:"100%"}},a,p.createElement(S.Z,{sx:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:"repeat("+Math.ceil(t.length/2)+", 50%)",gridTemplateRows:"repeat(2, 50%)"}},t.map((function(e,t){return p.createElement(S.Z,{key:t,sx:(0,g.__assign)({borderWidth:"1px",borderStyle:"solid",borderColor:"newLine"},e.value===i?{boxShadow:function(e){return"0px -2px 0px 0px "+e.colors.t.yellow},borderColor:function(e){return(0,k.D)(e.colors.t.yellow,.25)}}:{}),onClick:function(){return n(e)}},e.children)})))))},Dropdowns:a,RadioGroups:l,DepthChart:function(e){var t=e.symbol,i=e.d1Group,n=e.d2Group,r=e.canvas,o=r.width,a=r.height,l=e.scale,s=e.setScale,c=e.styles,u=e.yAxisScale,d=void 0===u?.6:u,h=e.xAxisVerticalOffset,g=void 0===h?22:h,f=e.yAxisHorizontalOffset,v=void 0===f?50:f,m=e.strokeWidth,y=void 0===m?1:m,x=e.graphStrokeWidth,b=void 0===x?1:x,C=e.xTicksFormatter,_=void 0===C?function(e){return e.toString()}:C,w=e.yTicksFormatter,S=void 0===w?function(e){return e.toString()}:w,L=e.d1XValueFormatter,E=void 0===L?function(e){return e.toString()}:L,k=e.d2XValueFormatter,V=void 0===k?function(e){return e.toString()}:k,A=e.d1YValueFormatter,T=void 0===A?function(e){return e.toString()}:A,M=e.d2YValueFormatter,D=void 0===M?function(e){return e.toString()}:M,I=e.d1DeltaXValueFormatter,P=void 0===I?function(e){return e.toString()}:I,B=e.d2DeltaXValueFormatter,W=void 0===B?function(e){return e.toString()}:B,R=st({scale:l,setScale:s}),H=R.cursor,Z=R.onMouseMove,O=R.onMouseLeave,N=R.onMouseWheel,F=lt({symbol:t,d1Group:i,d2Group:n,width:o-v,height:a-g,cursor:H,scale:l,yAxisScale:d}),K=F.width,U=F.height,z=F.halfWidth,X=F.midValue,G=F.d1,Y=F.d2,j=F.xTicks,q=F.yTicks,Q=F.valueToX,J=F.valueToY;return p.createElement(et.Stage,{width:o,height:a,onMouseMove:Z,onMouseOut:O,onWheel:N},p.createElement(et.Layer,{hitGraphEnabled:!1},p.createElement(et.Group,{height:U},p.createElement(et.Line,{points:[z,0,z,U],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:y}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var i=z,r=U,o=!0;n.forEach((function(t){var n=t.xData,a=t.yData;if(!((i=Q(n))<0||i>z)){var l=J(a);o?(e.moveTo(i,r),o=!1):e.lineTo(i,r),r=l,e.lineTo(i,r)}})),e.lineTo(-y,r),e.lineTo(-y,U),e.fillStrokeShape(t)},fill:c.d2.fillColor,stroke:c.d2.lineColor,strokeWidth:b}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var n=z,r=U,o=!1;i.forEach((function(t){var i=t.xData,a=t.yData;if(!((n=Q(i))>K||n<z)){var l=J(a);o?(e.moveTo(n,r),o=!1):e.lineTo(n,r),r=l,e.lineTo(n,r)}})),e.lineTo(K+y,r),e.lineTo(K+y,U),e.fillStrokeShape(t)},fill:c.d1.fillColor}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var n=z,r=U,o=!1;i.forEach((function(t){var i=t.xData,a=t.yData;if(!((n=Q(i))>K||n<z)){var l=J(a);o?(e.moveTo(n,r),o=!1):e.lineTo(n,r),r=l,e.lineTo(n,r)}})),e.lineTo(K+y,r),e.fillStrokeShape(t)},stroke:c.d1.lineColor,strokeWidth:b}),G.x?p.createElement(p.Fragment,null,p.createElement(et.Line,{points:[G.x,0,G.x,U],stroke:c.d1.lineColor,strokeWidth:y,dash:[2,2]}),p.createElement(et.Line,{points:[z,G.y,K,G.y],stroke:c.d1.lineColor,strokeWidth:y,dash:[2,2]}),p.createElement(et.Line,{points:[Y.x,0,Y.x,U],stroke:c.d2.lineColor,strokeWidth:y,dash:[2,2]}),p.createElement(et.Line,{points:[c.tag.width,Y.y,z,Y.y],stroke:c.d2.lineColor,strokeWidth:y,dash:[2,2]}),p.createElement(et.Circle,{x:G.x,y:G.y,radius:3,fill:c.d1.lineColor}),p.createElement(et.Label,{x:.5*(G.x+z),y:G.y+.5*c.tag.height},p.createElement(et.Tag,{pointerDirection:"down",fill:c.background}),p.createElement(et.Text,{text:P(G.xData,X),fill:c.d1.lineColor,padding:3})),p.createElement(et.Circle,{x:Y.x,y:Y.y,radius:3,fill:c.d2.lineColor}),p.createElement(et.Label,{x:.5*(Y.x+z),y:Y.y+.5*c.tag.height},p.createElement(et.Tag,{pointerDirection:"down",fill:c.background}),p.createElement(et.Text,{text:W(Y.xData,X),fill:c.d2.lineColor,padding:3})),p.createElement(et.Label,{x:K,y:G.y},p.createElement(et.Tag,{pointerDirection:"left",pointerWidth:c.tag.width,pointerHeight:c.tag.height,fill:c.background}),p.createElement(et.Text,{text:T(G.yData),fill:c.d1.lineColor,padding:3})),p.createElement(et.Label,{x:0,y:Y.y},p.createElement(et.Tag,{pointerDirection:"left",pointerWidth:c.tag.width,pointerHeight:c.tag.height,fill:c.d2.fillColor}),p.createElement(et.Text,{text:D(Y.yData),fill:c.d2.lineColor,padding:3})),p.createElement(et.Rect,{x:G.x,y:0,width:K-G.x,height:U,fill:c.hoverBgColor}),p.createElement(et.Rect,{x:0,y:0,width:Y.x,height:U,fill:c.hoverBgColor})):null),p.createElement(et.Group,{y:U},j.map((function(e,t){return p.createElement(p.Fragment,{key:t},p.createElement(et.Line,{points:[Q(e),0,Q(e),4],stroke:c.textColor,strokeWidth:y}),p.createElement(et.Text,{x:Q(e)-20,y:3,text:_(e),fill:c.textColor,padding:3}))})),G.x?p.createElement(p.Fragment,null,p.createElement(et.Label,{x:G.x,y:2},p.createElement(et.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:c.background}),p.createElement(et.Text,{text:E(G.xData),fill:c.d1.lineColor,padding:3})),p.createElement(et.Line,{points:[G.x,0,G.x,4],stroke:c.d1.lineColor,strokeWidth:y}),p.createElement(et.Label,{x:Y.x,y:2},p.createElement(et.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:c.background}),p.createElement(et.Text,{text:V(Y.xData),fill:c.d2.lineColor,padding:3})),p.createElement(et.Line,{points:[Y.x,0,Y.x,4],stroke:c.d2.lineColor,strokeWidth:y})):null),p.createElement(et.Group,{x:K},q.map((function(e,t){return p.createElement(p.Fragment,{key:t},p.createElement(et.Line,{points:[0,J(e),4,J(e)],stroke:c.textColor,strokeWidth:y}),p.createElement(et.Text,{x:8,y:J(e)-5,text:S(e),fill:c.textColor}))})))))},VerticalDepthChart:function(e){var t=e.symbol,i=e.d1Group,n=e.d2Group,r=e.canvas,o=e.scale,a=e.setScale,l=e.styles,s=e.yAxisScale,c=void 0===s?.9:s,u=e.xAxisVerticalOffset,d=void 0===u?0:u,h=e.yAxisHorizontalOffset,g=void 0===h?60:h,f=e.strokeWidth,v=void 0===f?1:f,m=e.graphStrokeWidth,y=void 0===m?2:m,x=e.yTicksFormatter,b=void 0===x?function(e){return e.toString()}:x,C=e.d1XValueFormatter,_=void 0===C?function(e){return e.toString()}:C,w=e.d2XValueFormatter,S=void 0===w?function(e){return e.toString()}:w,L=e.d1YValueFormatter,E=void 0===L?function(e){return e.toString()}:L,k=e.d2YValueFormatter,V=void 0===k?function(e){return e.toString()}:k,A=i.map(ot),T=n.map(ot),M=st({scale:o,setScale:a}),D=M.cursor,I=M.onMouseMove,P=M.onMouseLeave,B=M.onMouseWheel,W=lt({symbol:t,d1Group:A,d2Group:T,width:r.height-d,height:r.width-g,cursor:{x:r.height-D.y,y:D.x},scale:o,yAxisScale:c}),R=W.height,H=W.halfWidth,Z=W.d1,O=W.d2,N=W.xTicks,F=W.valueToX,K=W.valueToY;return p.createElement(et.Stage,{width:r.width,height:r.height,onMouseMove:I,onMouseOut:P,onWheel:B},p.createElement(et.Layer,{hitGraphEnabled:!1},p.createElement(et.Group,{x:g},p.createElement(et.Line,{points:[0,H,R,H],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:v}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var i=R,n=H,o=!0;T.forEach((function(t){var a=t.xData,l=t.yData;if(!((n=r.height-F(a))>r.height||n<H)){var s=K(l);o?(e.moveTo(i,n),o=!1):e.lineTo(i,n),i=s,e.lineTo(i,n)}})),e.lineTo(i,r.height+v),e.lineTo(R+v,r.height+v),e.fillStrokeShape(t)},fill:l.d2.fillColor,stroke:l.d2.lineColor,strokeWidth:y}),p.createElement(et.Shape,{sceneFunc:function(e,t){e.beginPath();var i=R,n=H,o=!1;A.forEach((function(t){var a=t.xData,l=t.yData;if(!((n=r.height-F(a))<0||n>H)){var s=K(l);o?(e.moveTo(i,n),o=!1):e.lineTo(i,n),i=s,e.lineTo(i,n)}})),e.lineTo(i,-v),e.lineTo(R,-v),e.fillStrokeShape(t)},fill:l.d1.fillColor,stroke:l.d1.lineColor,strokeWidth:y}),Z.x?p.createElement(p.Fragment,null,p.createElement(et.Line,{points:[0,r.height-Z.x,R,r.height-Z.x],stroke:l.d1.lineColor,strokeWidth:v,dash:[2,2]}),p.createElement(et.Line,{points:[Z.y,0,Z.y,H],stroke:l.d1.lineColor,strokeWidth:v,dash:[2,2]}),p.createElement(et.Line,{points:[0,r.height-O.x,R,r.height-O.x],stroke:l.d2.lineColor,strokeWidth:v,dash:[2,2]}),p.createElement(et.Line,{points:[O.y,H,O.y,r.height],stroke:l.d2.lineColor,strokeWidth:v,dash:[2,2]}),p.createElement(et.Circle,{x:Z.y,y:r.height-Z.x,radius:3,fill:l.d1.lineColor}),p.createElement(et.Circle,{x:O.y,y:r.height-O.x,radius:3,fill:l.d2.lineColor}),p.createElement(et.Label,{x:Z.y,y:0},p.createElement(et.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:2,fill:l.d1.fillColor}),p.createElement(et.Text,{text:E(Z.yData),fill:l.d1.lineColor,padding:3})),p.createElement(et.Label,{x:O.y,y:r.height},p.createElement(et.Tag,{pointerDirection:"down",pointerWidth:4,pointerHeight:2,fill:l.d2.fillColor}),p.createElement(et.Text,{text:V(Z.yData),fill:l.d2.lineColor,padding:3})),p.createElement(et.Rect,{x:0,y:0,width:R,height:r.height-Z.x,fill:l.hoverBgColor}),p.createElement(et.Rect,{x:0,y:r.height-O.x,width:R,height:O.x,fill:l.hoverBgColor})):null),p.createElement(et.Group,null,p.createElement(et.Line,{points:[g,0,g,r.height],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:v}),N.map((function(e,t){var i=r.height-F(e);return p.createElement(p.Fragment,{key:t},p.createElement(et.Line,{points:[g-4,i,g,i],stroke:l.textColor,strokeWidth:v}),p.createElement(et.Label,{x:g-4,y:i},p.createElement(et.Tag,{pointerDirection:"right",pointerWidth:0,pointerHeight:0,strokeWidth:0}),p.createElement(et.Text,{text:b(e),fill:l.textColor,padding:3})))})),Z.x?p.createElement(p.Fragment,null,p.createElement(et.Label,{x:g-4,y:r.height-Z.x},p.createElement(et.Tag,{pointerDirection:"right",pointerWidth:l.tag.width,pointerHeight:l.tag.height,fill:l.background}),p.createElement(et.Text,{text:_(null==Z?void 0:Z.xData),fill:l.d1.lineColor,padding:3})),p.createElement(et.Line,{points:[g-4,r.height-Z.x,g,r.height-Z.x],stroke:l.d1.lineColor,strokeWidth:v}),p.createElement(et.Label,{x:g-4,y:r.height-O.x},p.createElement(et.Tag,{pointerDirection:"right",pointerWidth:l.tag.width,pointerHeight:l.tag.height,fill:l.background}),p.createElement(et.Text,{text:S(null==O?void 0:O.xData),fill:l.d2.lineColor,padding:3})),p.createElement(et.Line,{points:[g-4,r.height-O.x,g,r.height-O.x],stroke:l.d2.lineColor,strokeWidth:v})):null)))},TradingViewNext:St,BasicKline:vl,MiniSymbol:o,Icons:s,TooltipContents:c}},98346:(e,t,i)=>{i.r(t),i.d(t,{createStore:()=>s,getCandlestickHistory:()=>c});var n=i(5163),r=i(30733),o=i.n(r),a=i(91823),l=function(e){return{candlestickHistory:[],setCandlestickHistory:function(t){return e({candlestickHistory:t})}}},s=o()((function(e){return void 0===e&&(e="unspecific-chart-namespace"),(0,a.Z)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,n.__assign)({},l.apply(void 0,(0,n.__spreadArray)([],(0,n.__read)(e))))}))})),c=function(e){return[e.candlestickHistory,e.setCandlestickHistory]}},86368:(e,t,i)=>{i.r(t),i.d(t,{createStore:()=>a,getCandlestickKey:()=>g,getCandlestickReference:()=>u,getEditingInterval:()=>s,getIntervalConfigOpen:()=>l,getLayoutWidth:()=>p,getLoading:()=>c,getTradingViewReference:()=>d,getTvKey:()=>h});var n=i(30733),r=i.n(n),o=i(91823),a=r()((function(e){return void 0===e&&(e="unspecific-chart-namespace"),(0,o.Z)((function(e){return{loading:!1,setLoading:function(t){return e({loading:t})},intervalConfigOpen:!1,setIntervalConfigOpen:function(t){return e({intervalConfigOpen:t})},editingInterval:!1,setEditingInterval:function(t){return e({editingInterval:t})},candlestickReference:void 0,setCandlestickReference:function(t){return e({candlestickReference:t})},tradingViewReference:void 0,setTradingViewReference:function(t){return e({tradingViewReference:t})},tvKey:1,reloadTv:function(){return e((function(e){return{tvKey:-1*e.tvKey}}))},candlestickKey:1,reloadCandlestick:function(){return e((function(e){return{candlestickKey:-1*e.candlestickKey}}))},layoutWidth:0,setLayoutWidth:function(t){return e({layoutWidth:t})}}}))})),l=function(e){return[e.intervalConfigOpen,e.setIntervalConfigOpen]},s=function(e){return[e.editingInterval,e.setEditingInterval]},c=function(e){return[e.loading,e.setLoading]},u=function(e){return[e.candlestickReference,e.setCandlestickReference]},d=function(e){return[e.tradingViewReference,e.setTradingViewReference]},h=function(e){return[e.tvKey,e.reloadTv]},g=function(e){return[e.candlestickKey,e.reloadCandlestick]},p=function(e){return[e.layoutWidth,e.setLayoutWidth]}},92424:(e,t,i)=>{i.r(t),i.d(t,{ChartMode:()=>o,DisplayIntervals:()=>n,OrderMarkOption:()=>r,OriginalChartStyle:()=>p.oX,PriceType:()=>a,SeriesStyle:()=>s,Tabs:()=>l,createStore:()=>f,getActiveTab:()=>S,getChartMode:()=>b,getInterval:()=>C,getIsOriginalFourMode:()=>M,getIsOriginalSingleMode:()=>T,getIsTvFourMode:()=>I,getIsTvSingleMode:()=>D,getLastSelectedMiniMultiChartWindow:()=>v,getMiniMultiChartWindows:()=>x,getOrderMarkOptions:()=>V,getOriginalChartStyle:()=>y,getPriceType:()=>w,getSelectedIntervals:()=>_,getShowExecutionOrder:()=>k,getShowLimitOrder:()=>L,getShowPositionOrder:()=>E,getTrueInterval:()=>A,getTvChartStyle:()=>m});var n,r,o,a,l,s,c=i(5163),u=i(30733),d=i.n(u),h=i(91823),g=i(66402),p=i(8042);!function(e){e.Time="Time",e["1s"]="1s",e["1m"]="1m",e["3m"]="3m",e["5m"]="5m",e["15m"]="15m",e["30m"]="30m",e["1h"]="1h",e["2h"]="2h",e["4h"]="4h",e["6h"]="6h",e["8h"]="8h",e["12h"]="12h",e["1d"]="1d",e["3d"]="3d",e["1w"]="1w",e["1M"]="1M"}(n||(n={})),function(e){e[e.Unkonwn=-1]="Unkonwn",e[e.Open=0]="Open",e[e.Position=1]="Position",e[e.Execution=2]="Execution"}(r||(r={})),function(e){e[e.Single=1]="Single",e[e.Four=4]="Four"}(o||(o={})),function(e){e.Last="last",e.Mark="mark",e.Index="index"}(a||(a={})),function(e){e.Origin="origin",e.TradingView="tradingView",e.Depth="depth"}(l||(l={})),function(e){e[e.Bars=0]="Bars",e[e.Candles=1]="Candles",e[e.Line=2]="Line",e[e.Area=3]="Area",e[e.Renko=4]="Renko",e[e.Kagi=5]="Kagi",e[e.PnF=6]="PnF",e[e.LineBreak=7]="LineBreak",e[e.HeikinAshi=8]="HeikinAshi",e[e.HollowCandles=9]="HollowCandles",e[e.Baseline=10]="Baseline",e[e.HiLo=12]="HiLo"}(s||(s={}));var f=d()((function(e){return void 0===e&&(e="unspecific-chart-storage-name"),(0,h.Z)((0,g.tJ)((function(e){return{lastSelectedMiniMultiChartWindow:0,setLastSelectedMiniMultiChartWindow:function(t){return e({lastSelectedMiniMultiChartWindow:t})},tvChartStyle:s.Candles,setTvChartStyle:function(t){return e({tvChartStyle:t})},originalChartStyle:p.oX.CandleBar,setOriginalChartStyle:function(t){return e({originalChartStyle:t})},chartMode:o.Single,setChartMode:function(t){return e({chartMode:t})},miniMultiChartWindows:["","","",""],setMiniMultiChartWindows:function(t){return e({miniMultiChartWindows:t})},emptyMiniMultiChartWindowByIndex:function(t){return e((function(e){return{miniMultiChartWindows:e.miniMultiChartWindows.map((function(e,i){return t===i?"":e}))}}))},setMiniMultiChartWindowsWithState:e,interval:n["1d"],setInterval:function(t){return e({interval:t})},selectedIntervals:[n.Time,n["1s"],n["15m"],n["1h"],n["4h"],n["1d"],n["1w"]],setSelectedIntervals:function(t){return e({selectedIntervals:t})},priceType:a.Last,setPriceType:function(t){return e({priceType:t})},activeTab:l.Origin,setActiveTab:function(t){return e({activeTab:t})},showLimitOrder:!1,setShowLimitOrder:function(t){return e({showLimitOrder:t})},toggleShowLimitOrder:function(){return e((function(e){return{showLimitOrder:!e.showLimitOrder}}))},showPositionOrder:!1,setShowPositionOrder:function(t){return e({showPositionOrder:t})},toggleShowPositionOrder:function(){return e((function(e){return{showPositionOrder:!e.showPositionOrder}}))},showExecutionOrder:!1,setShowExecutionOrder:function(t){return e({showExecutionOrder:t})},toggleShowExecutionOrder:function(){return e((function(e){return{showExecutionOrder:!e.showExecutionOrder}}))}}}),{name:e,version:20220921,migrate:function(e){return(0,c.__assign)((0,c.__assign)({},e),{selectedIntervals:(0,c.__spreadArray)((0,c.__spreadArray)([],(0,c.__read)(e.selectedIntervals)),[n["1s"]])})}}))})),v=function(e){return[e.lastSelectedMiniMultiChartWindow,e.setLastSelectedMiniMultiChartWindow]},m=function(e){return[e.tvChartStyle,e.setTvChartStyle]},y=function(e){return[e.originalChartStyle,e.setOriginalChartStyle]},x=function(e){return[e.miniMultiChartWindows,e.setMiniMultiChartWindows,e.emptyMiniMultiChartWindowByIndex,e.setMiniMultiChartWindowsWithState]},b=function(e){return[e.chartMode,e.setChartMode]},C=function(e){return[e.interval,e.setInterval]},_=function(e){return[e.selectedIntervals,e.setSelectedIntervals]},w=function(e){return[e.priceType,e.setPriceType]},S=function(e){return[e.activeTab,e.setActiveTab]},L=function(e){return[e.showLimitOrder,e.setShowLimitOrder,e.toggleShowLimitOrder]},E=function(e){return[e.showPositionOrder,e.setShowPositionOrder,e.toggleShowPositionOrder]},k=function(e){return[e.showExecutionOrder,e.setShowExecutionOrder,e.toggleShowExecutionOrder]},V=function(e){return[e.showLimitOrder?r.Open:r.Unkonwn,e.showPositionOrder?r.Position:r.Unkonwn,e.showExecutionOrder?r.Execution:r.Unkonwn].filter((function(e){return e!==r.Unkonwn}))},A=function(e){switch(e.interval){case n.Time:return n["1m"];default:return e.interval}},T=function(e){return e.activeTab===l.Origin&&e.chartMode===o.Single},M=function(e){return e.activeTab===l.Origin&&e.chartMode===o.Four},D=function(e){return e.activeTab===l.TradingView&&e.chartMode===o.Single},I=function(e){return e.activeTab===l.TradingView&&e.chartMode===o.Four}},33941:(e,t,i)=>{i.d(t,{z:()=>a});var n=i(5163),r=i(2784),o=i(76635),a=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var a=(0,r.useRef)((function(){}));return a.current=e,(0,r.useCallback)(o.throttle.apply(void 0,(0,n.__spreadArray)([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.current.apply(this,e)}],(0,n.__read)(t))),[])}},69967:(e,t,i)=>{i.d(t,{D:()=>r});var n=i(5163),r=function(e,t){var i=(0,n.__read)(/(#\w+)/g.exec(e)||[],1)[0];return i?function(e,t){var i=e.replace("#","");return"rgba("+parseInt(i.substring(0,2),16)+","+parseInt(i.substring(2,4),16)+","+parseInt(i.substring(4,6),16)+","+t+")"}(i,t):e}},74900:(e,t,i)=>{i.d(t,{QE:()=>v,ZP:()=>m});var n=i(5163),r=i(2784),o=i(98569),a=i(62143),l=function(e){var t=e.checked,i=e.disabled,a=(0,n.__rest)(e,["checked","disabled"]);return r.createElement(o.Z,(0,n.__assign)({viewBox:"0 0 16 16",fill:"none",sx:{fill:i?"line":"none"},size:16},a),r.createElement("circle",(0,n.__assign)({cx:"8",cy:"8",r:"7.5"},i?{fill:"line"}:{stroke:"currentColor"})),t?r.createElement("circle",{cx:"8",cy:"8",r:"4",fill:"currentColor"}):null)},s=r.createElement(l,{checked:!0}),c=r.createElement(l,null),u=r.createElement(l,{checked:!0,disabled:!0}),d=r.createElement(l,{disabled:!0}),h={top:"column",bottom:"column-reverse",left:"row-reverse",right:"row"},g={top:{mt:"minor"},bottom:{mb:"minor"},left:{mr:"xs"},right:{ml:"xs"}},p=(0,r.forwardRef)((function(e,t){var i=e.checked,o=e.children,l=e.label,p=e.id,f=e.onCheckedChange,v=e.name,m=void 0===v?"":v,y=e.value,x=e.onChange,b=e.disabled,C=void 0!==b&&b,_=e.direction,w=void 0===_?"right":_,S=(e.variant,e.accept),L=e.alt,E=e.autoFocus,k=e.capture,V=e.form,A=e.formAction,T=e.formEncType,M=e.formMethod,D=e.formNoValidate,I=e.formTarget,P=e.list,B=e.max,W=e.maxLength,R=e.min,H=e.minLength,Z=e.pattern,O=e.readOnly,N=e.required,F=(0,n.__rest)(e,["checked","children","label","id","onCheckedChange","name","value","onChange","disabled","direction","variant","accept","alt","autoFocus","capture","form","formAction","formEncType","formMethod","formNoValidate","formTarget","list","max","maxLength","min","minLength","pattern","readOnly","required"]);l=l||o;var K=r.useRef(null!=i).current,U=(0,r.useState)(i),z=U[0],X=U[1];K&&z!==i&&X(i);var G=function(e){var t=e.target.checked;z!==t&&X(t),f&&f(e,t)};return r.createElement(a.Z,(0,n.__assign)({ref:t,tx:"radio",variant:C?"disabled":"default"},F,{__css:{"& svg":{color:C?null:z?"primary":"t.disabled"}},onClick:function(){C||z||(X(!z),x&&x(y))}}),r.createElement(a.Z,{as:"label",sx:{display:"flex",flexDirection:h[w],alignItems:"center"}},C?z?u:d:z?s:c,l?r.createElement(a.Z,(0,n.__assign)({},g[w]),l,r.createElement("input",{id:p,disabled:C,style:{clip:"rect(0px,0px,0px,0px)",position:"absolute"},hidden:!0,type:"radio","data-bn-type":"radio",name:m,checked:z,value:y,onChange:G,accept:S,alt:L,autoFocus:E,capture:k,form:V,formAction:A,formEncType:T,formMethod:M,formNoValidate:D,formTarget:I,list:P,max:B,maxLength:W,min:R,minLength:H,pattern:Z,readOnly:O,required:N})):r.createElement("input",{disabled:C,style:{clip:"rect(0px,0px,0px,0px)",position:"absolute"},type:"radio","data-bn-type":"radio",name:m,checked:z,value:y,onChange:G})))}));p.__name="Radio";var f={Vertical:{marginKey:"marginBottom",gap:16,direction:"column"},Horizontal:{marginKey:"marginRight",gap:24,direction:"row"}},v=(0,r.forwardRef)((function(e,t){var i,o=e.children,l=e.value,s=void 0===l?"":l,c=e.name,u=e.onChange,d=e.layout,h=(0,n.__rest)(e,["children","value","name","onChange","layout"]),g=r.Children.map(o,(function(e){return r.isValidElement(e)&&"Radio"===(e&&e.type&&e.type.__name)?r.cloneElement(e,(0,n.__assign)((0,n.__assign)({},e.props),{onChange:u,name:c,checked:s===e.props.value})):null}));if("Horizontal"===d||"Vertical"===d){var p=f[d];return r.createElement(a.Z,(0,n.__assign)({ref:t},h,{__css:{"& > *:not(:last-child)":(i={},i[p.marginKey]=p.gap,i),display:"flex",flexDirection:p.direction}}),g)}return r.createElement(a.Z,(0,n.__assign)({ref:t},h),g)}));p.displayName="Radio";const m=p},99126:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(5163),r=i(2784),o=i(62143),a=(0,r.forwardRef)((function(e,t){var i=(0,n.__rest)(e,[]);return r.createElement(o.Z,(0,n.__assign)({ref:t,as:"input",type:"range",tx:"forms",variant:"slider"},i,{__css:{display:"block",width:"100%",height:4,my:2,cursor:"pointer",appearance:"none",borderRadius:9999,color:"inherit",bg:"gray",":focus":{outline:"none",color:"primary"},"&::-webkit-slider-thumb":{appearance:"none",width:16,height:16,bg:"currentcolor",border:0,borderRadius:9999,variant:"forms.slider.thumb"}}}))}));a.displayName="Slider";const l=a},55268:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 8v11H3V8h3l3-3h6l3 3h3zm-9 2a2.5 2.5 0 110 5 2.5 2.5 0 010-5z",fill:"currentColor"}))}},43986:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-10.25 1.25V18h2.5v-4.75H18v-2.5h-4.75V6h-2.5v4.75H6v2.5h4.75z",fill:"currentColor"}))}},6157:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 3h14v18l-3.5-3-3.5 3-3.5-3L5 21V3zm3 4h4v2.5H8V7zm4 5H8v2.5h4V12zm2-5h2.5v2.5H14V7zm2.5 5H14v2.5h2.5V12z",fill:"currentColor"}))}},76979:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M14.121 12l3.44-3.44L21 12V3h-9l3.44 3.44L12 9.878l2.121 2.12zM3 12l3.44 3.44L9.878 12 12 14.12l-3.44 3.44L12 21H3v-9z",fill:"currentColor"}))}},51386:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(5163),r=i(2784),o=i(98569);const a=function(e){return r.createElement(o.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M4.621 21.5l3.44-3.439 3.439 3.44v-9h-9l3.44 3.439-3.44 3.44 2.121 2.12zM12.5 2.5l3.44 3.44 3.439-3.44L21.5 4.622l-3.44 3.44L21.5 11.5h-9v-9z",fill:"currentColor"}))}},31023:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(5163),r=i(2784),o=i(55742),a=i(53858);const l=r.forwardRef((function(e,t){return r.createElement(o.ZP,(0,n.__assign)({ref:t},e,{dir:(0,a.Z)()}))}))}}]);