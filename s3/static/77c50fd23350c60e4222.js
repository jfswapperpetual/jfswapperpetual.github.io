"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[3349],{5894:(e,t,n)=>{n.d(t,{F:()=>i});var o=n(5163),r=n(84423),i=function(e){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return[2,(0,r.v_)("/bapi/futures/v2/private/future/order/clear-position",e)]}))}))}},71787:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(5163),r=n(2784),i=n(50464),s=n(87938),a=n(62143),l=n(53858),c=n(53021),u=n(68106),d=n(35395),f=n(28776),m=n(80142),p=function(){return"undefined"!=typeof window?document.body.offsetHeight:0};const y=r.forwardRef((function(e,t){var n=this,y=e.arrow,g=void 0!==y&&y,b=e.boundary,v=e.delay,h=void 0===v?0:v,P=e.container,S=e.tip,w=e.placement,M=e.pos,O=e.children,k=e.open,x=e.trigger,A=void 0===x?"hover":x,j=e.scroll,C=void 0===j||j,K=e.resize,Z=void 0===K||K,E=e.enablePortal,_=void 0!==E&&E,z=e.leaveDelay,N=void 0===z?0:z,L=e.boxOffset,V=void 0===L?0:L,I=e.arrowPadding,W=void 0===I?0:I,T=e.onlyShowOnHover,$=void 0===T||T,B=e.onClickOutside,q=e.clickOutsideClose,F=e.bg;w=w||M||"top",w="rtl"===(0,l.Z)()?f.O9[w]:w;var R=r.useRef(null!=k).current,H=r.useRef(null),G=(0,r.useState)(null),D=G[0],Q=G[1],U=(0,r.useState)(null),J=U[0],Y=U[1],X=(0,r.useState)(null),ee=X[0],te=X[1],ne=r.useRef(0),oe=r.useRef(0),re=(0,c.D)(D,J,{placement:w,modifiers:[{name:"eventListeners",options:{scroll:C,resize:Z}},{name:"arrow",options:{element:ee,padding:W}},{name:"offset",options:{offset:[V||0,f.SG]}},{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},{name:"flip",options:{boundary:b}}]}),ie=re.styles,se=re.attributes,ae=re.update,le=re.state,ce=r.useMemo((function(){return(0,f.BP)(null==le?void 0:le.placement)}),[null==le?void 0:le.placement]),ue=(0,r.useState)(k),de=ue[0],fe=ue[1];r.useEffect((function(){return function(){oe.current&&window.clearTimeout(oe.current),oe.current=0}}),[de]),R&&(A=void 0,k!==de&&fe(k)),(0,m.t)(H,(function(e){q&&fe(!1),B&&B(e)}),!!B||!!q);var me=(0,i.Z)(Q,t),pe="click"===A?function(e){oe.current&&window.clearTimeout(oe.current),ne.current=0,oe.current=0,fe(!de),ae&&ae(),O.props.onClick&&O.props.onClick(e)}:O.props.onClick,ye="hover"===A?function(e){!de&&window.performance.now()-ne.current>500&&(oe.current=h?oe.current||window.setTimeout((function(){return fe(!0)}),h):(fe(!0),0),ae&&ae(),ne.current=window.performance.now()),O.props.onMouseMove&&O.props.onMouseMove(e)}:O.props.onMouseMove,ge="hover"===A?function(e){return(0,o.__awaiter)(n,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return N?setTimeout((function(){oe.current&&window.clearTimeout(oe.current),ne.current=0,oe.current=0,fe(!1),ae&&ae(),O.props.onMouseLeave&&O.props.onMouseLeave(e)}),N):(oe.current&&window.clearTimeout(oe.current),ne.current=0,oe.current=0,fe(!1),ae&&ae(),O.props.onMouseLeave&&O.props.onMouseLeave(e)),[2]}))}))}:O.props.onMouseLeave,be=(0,o.__assign)((0,o.__assign)({},O.props),{onClick:pe,onMouseMove:ye,onMouseLeave:ge,ref:me}),ve=$?{appear:!0,mountOnEnter:!0,unmountOnExit:!0,onEnter:p}:{};return r.createElement(r.Fragment,null,r.cloneElement(O,be),r.createElement(u.ZP,(0,o.__assign)({in:de,timeout:f.x9},ve),(function(e){return P||_?r.createElement(s.ZP,{container:P},r.createElement(d.Z,(0,o.__assign)({open:!0,arrow:g,arrowStyle:ie.arrow,style:(0,o.__assign)((0,o.__assign)((0,o.__assign)({},ie.popper),f.hy),ce[e]),bg:F,arrowRef:te,ref:Y},se.popper),r.createElement(a.Z,{ref:H},S))):r.createElement(d.Z,(0,o.__assign)({open:!0,arrow:g,arrowStyle:ie.arrow,style:(0,o.__assign)((0,o.__assign)((0,o.__assign)({},ie.popper),f.hy),ce[e]),bg:F,arrowRef:te,ref:Y},se.popper),r.createElement(a.Z,{ref:H},S))})))}))},27657:(e,t,n)=>{n.d(t,{Q:()=>a});var o=n(11001),r=n(73121);const{coin:i,cont:s}=o.SW;function a(){const{unit:e}=(0,r.F7)();return{isCoinUnit:e===i,isContUnit:e===s}}},56271:(e,t,n)=>{n.d(t,{Z:()=>v});var o=n(52322),r=n(2784),i=n(98537),s=n.n(i),a=n(5163),l=n(98569);const c=function(e){return r.createElement(l.Z,(0,a.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M9 14.5A6.5 6.5 0 0115.5 8h1.672l-2.586 2.586L16 12l5-5-5-5-1.414 1.414L17.172 6H15.5A8.5 8.5 0 007 14.5V17h2v-2.5z",fill:"currentColor"}),r.createElement("path",{d:"M19 15h2v6H3v-6h2v4h14v-4z",fill:"currentColor"}))};var u=n(62143),d=n(21030),f=n(97060),m=n(53096);const p=(0,r.lazy)((()=>Promise.all([n.e(8063),n.e(1040)]).then(n.bind(n,91040)))),y={display:"flex",alignItems:"center",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},g={display:"flex",alignItems:"center"},b=({text:e,onClick:t,sx:n,showTip:i=!1,showIcon:a=!0})=>{const{t:l}=(0,f.yk)(),m=(0,r.useMemo)((()=>s()({},y,n)),[n]),p=(0,o.jsxs)(u.Z,Object.assign({sx:m,onClick:t},{children:[a&&(0,o.jsx)(c,{className:"share-icon",ml:"4px",mr:e?"4px":"0px",size:16},void 0),e]}),void 0);return i?(0,o.jsx)(d.ZP,Object.assign({sx:g,arrow:!0,tip:l("share",{defaultValue:"Share"})},{children:p}),void 0):p},v=(0,r.memo)((({btnText:e,btnSx:t,sideKey:n,showIcon:i,onClickIcon:s})=>{const[a,l]=(0,r.useState)(!1),c=(0,r.useCallback)((()=>{s&&s(),l(!0)}),[s]),u=(0,r.useCallback)((()=>{l(!1)}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b,{sx:t,text:e,showIcon:i,onClick:c},void 0),(0,o.jsx)(r.Suspense,Object.assign({fallback:(0,o.jsx)(m.Z,{},void 0)},{children:a&&(0,o.jsx)(p,{visible:a,onClose:u,sideKey:n},void 0)}),void 0)]},void 0)}))},51991:(e,t,n)=>{n.d(t,{ME:()=>r,ZP:()=>s,hZ:()=>i});var o=n(30998);const r=e=>e.posCalcData,i=e=>e.setPosCalcData,s=o.Gt},72019:(e,t,n)=>{n.d(t,{z1:()=>V,A4:()=>L,Mx:()=>D,Yq:()=>U,jK:()=>G,qU:()=>J,ek:()=>Q,v_:()=>H,iA:()=>N,Mn:()=>I});var o=n(23131),r=n(2784),i=n(39727),s=n(37227),a=n(33470),l=n(97060),c=n(38896),u=n(85656),d=n(23716);const{calculation:{abacus:{future:{model:f,calculateUmLiquidationPriceForSingleAssetMode:m},model:p,base:y}}}=u.com,{KotlinArrayList:g}=y,b=f.FutureBalance,v=f.FutureBracket,h=f.RiskBracket,P=p.FuturePosition;var S=n(7523),w=n(41260);const M=(0,S._)((e=>Object.values(e).map((e=>{const{asset:t,marginAvailable:n,initialMargin:o,maintenanceMargin:r,marginBalance:i,unrealizedProfit:s,walletBalance:a,crossWalletBalance:l}=e;return new b(t,Boolean(n),String(o),String(r),String(i),String(s),String(a),String(l))}))));var O=n(29261);const k=(0,S._)((e=>{const t=[];return Object.entries(e).forEach((([e,n])=>{if("boolean"==typeof n)return;const o=n.map((e=>new h(e.bracketMaintenanceMarginRate,e.bracketNotionalCap,e.bracketNotionalFloor,e.bracketSeq,e.cumFastMaintenanceAmount,e.maxOpenPosLeverage,e.minOpenPosLeverage))),r=new v(e,o);t.push(r)})),t}));var x=n(31953);function A(e,t){const{askNotional:n,bidNotional:o,collateral:r=(null==t?void 0:t.marginAsset)||"",cumRealized:i,entryPrice:s,id:a,leverage:l,notionalValue:c,positionSize:u,symbol:d,markPrice:f,unrealizedProfit:m,isolated:p,isolatedWallet:y,adl:g,positionSide:b}=e;return new P(String(n),String(o),r,String(i),String(s),a,l,String(c),String(u),d,String(f),String(m),p,String(y),g,b)}const j=(0,S._)(((e,t)=>(0,x.J9)(e).map((e=>A(e,t[e.symbol])))));var C=n(51991),K=n(13644),Z=n(42871),E=n(92521);const{leverageInfo:_}=o.Fy,z={long:"buy",short:"sell"},N=({sideKey:e})=>{const t=(0,c.t2)(e,"symbol"),n=(0,c.t2)(e,"isolated"),o=(0,c.t2)(e,"isolatedWallet"),r=(0,c.t2)(e,"positionSize"),i=0===Number(r)&&n&&Number(o)<0,a=Number(r)>0?"long":"short",u=i?"liq":z[a],{leverageList:d={}}=(0,c.rf)()||{},f=d[t]||_.defaultVal,m=(0,c.AM)()[t],{getI18n:p}=(0,l.yk)();let y,g=t;return m&&(y=(0,s.H)(m,p),g=y.fullName),{color:u,symbolText:g,symbolName:y,leverage:f}},L=({sideKey:e})=>{const t=(0,c.t2)(e,"symbol"),n=(0,c.t2)(e,"entryPrice"),o=(0,c.AM)()[t]||{},{pricePrecision:r}=o;return{formatedEntryPrice:(0,a.uf)(n,r)}},V=({sideKey:e})=>{const t=(0,c.t2)(e,"symbol"),n=(0,c.t2)(e,"markPrice"),{lastPrice:o}=(0,c.zZ)({symbol:t}),r=(0,c.AM)()[t]||{},{pricePrecision:i}=r;return{formatedMarkPrice:(0,a.uf)(n,i),formatedLastPrice:(0,a.uf)(o,i)}},I=({sideKey:e})=>{var t,n;const o=(0,c.t2)(e,"symbol"),r=(0,c.t2)(e,"positionSize"),i=(0,c.t2)(e,"positionSide"),s=(0,c.AM)()[o]||{},{pricePrecision:l}=s,{preOrders:u}=(0,c.E)(),d=Number(r),f={};u.forEach((e=>{const t=!0===e.closePosition,n=o===e.symbol,r=i===e.positionSide,s=d<0&&"BUY"===e.side||d>0&&"SELL"===e.side;t&&n&&r&&s&&("TAKE_PROFIT_MARKET"===e.type&&(f.tp=e),"STOP_MARKET"===e.type&&(f.sl=e))}));const m=(null===(t=null==f?void 0:f.tp)||void 0===t?void 0:t.stopPrice)?(0,a.uf)(f.tp.stopPrice,l):"--",p=(null===(n=null==f?void 0:f.sl)||void 0===n?void 0:n.stopPrice)?(0,a.uf)(f.sl.stopPrice,l):"--";return{strategyOrders:f,formatedTPPrice:m,formatedSLPrice:p}};var W=n(27657),T=n(48752),$=n(45385);const{leverageInfo:B}=o.Fy,q={long:"buy",short:"sell"},F=()=>{const e=(0,c.F)(),t=(0,c.AM)()||{};return e.map((e=>{var n;return Object.assign(Object.assign({},e),{contractVal:null===(n=t[e.symbol])||void 0===n?void 0:n.contractVal})}))},R=(0,o.nM)(),H=e=>R?(({sideKey:e,columnKey:t=""})=>{const{getI18n:n}=(0,l.yk)(),o=(0,c.t2)(e,"symbol"),i=(0,c.t2)(e,"isolated"),s=(0,c.t2)(e,"isolatedWallet"),u=(0,c.t2)(e,"positionSize"),d=(0,c.cO)(e)||{},{lastPrice:f}=(0,c.zZ)({symbol:null==d?void 0:d.symbol}),m=(0,C.ZP)(C.hZ),p=Number(u),y=p>0?"long":"short",g=0===p&&i&&Number(s)<0?"liq":q[y],b=(0,c.AM)()[o]||{},{quantityPrecision:v,marginAsset:h="",equalQtyPrecision:P,contractVal:S=100}=b,{isCoinUnit:w}=(0,W.Q)(),M=p>0?"":"-",O=w?(0,T.unitChangeCoinQty)({quantity:Math.abs(p),contractVal:S,price:f,precision:P,format:!1}):p.toFixed(v),k=w?`${M}${O}`:(0,a.uf)(p,v),x=w?h:n("Cont",{defaultValue:"Cont"});return(0,r.useEffect)((()=>{t&&m(e,t,Math.abs(w?Number(O):p))}),[]),{color:g,quantityAmount:O,formatedQuantityAmount:k,unit:x}})(e):(({sideKey:e,columnKey:t=""})=>{const n=(0,c.t2)(e,"symbol"),o=(0,c.t2)(e,"isolated"),i=(0,c.t2)(e,"isolatedWallet"),s=(0,c.t2)(e,"positionSize"),l=(0,c.cO)(e)||{},{lastPrice:u}=(0,c.zZ)({symbol:null==l?void 0:l.symbol}),d=(0,C.ZP)(C.hZ),f=Number(s),m=f>0?"long":"short",p=0===f&&o&&Number(i)<0?"liq":z[m],y=(0,c.AM)()[n]||{},{baseAsset:g="",pricePrecision:b=2,quantityPrecision:v=8,marginAsset:h=""}=y,{isCoinUnit:P}=(0,K.Q)(),S=f>0?"":"-",w=P?f.toFixed(v):(0,Z.WA)({quantity:Math.abs(f),price:u,precision:b,format:!1}),M=P?(0,a.uf)(f,v):`${S}${w}`,O=P?g:h;return(0,r.useEffect)((()=>{t&&d(e,t,Math.abs(P?f:Number(w)))}),[]),{color:p,quantityAmount:w,formatedQuantityAmount:M,unit:O}})(e),G=e=>R?(({sideKey:e,columnKey:t=""})=>{const n=(0,c.t2)(e,"symbol"),o=(0,c.t2)(e,"positionSize"),i=(0,C.ZP)(C.hZ),s=(0,c.AM)()[n]||{},{contractVal:l}=s,u=Math.abs(o)*Number(l),d=l?(0,a.uf)(u,2):"-";return(0,r.useEffect)((()=>{t&&i(e,t,u)}),[]),{notionalSize:u,formattedNotionalSize:d,unit:"USD"}})(e):(({sideKey:e,columnKey:t=""})=>{const n=(0,c.t2)(e,"symbol"),o=(0,c.t2)(e,"positionSize"),i=(0,c.t2)(e,"markPrice"),s=(0,C.ZP)(C.hZ),l=(0,c.AM)()[n]||{},{quoteAsset:u=""}=l,d=Math.abs(o)*i,f=(0,a.uf)(d,2);return(0,r.useEffect)((()=>{t&&s(e,t,d)}),[]),{notionalSize:d,formattedNotionalSize:f,unit:u}})(e),D=e=>R?(({sideKey:e,columnKey:t=""})=>{const n=(0,c.KQ)(),o=(0,c.Gf)(),i=F(),s=(0,c.cO)(e)||{},l=(0,C.ZP)(C.hZ),{symbol:u,isolated:d,isolatedWallet:f=0,positionSide:m}=s,p=(0,c.AM)()[u]||{},{marginAsset:y,pricePrecision:g,contractVal:b}=p,v=Object.assign(Object.assign({},s),{contractVal:b}),h=n[y]||{},{crossWalletBalance:P=0}=h,S=(null==o?void 0:o[u])||[],w=!d&&m&&"BOTH"!==m,M=d?f:P;let O=0;if(!d){const e=i.filter((e=>e.marginAsset===y)).filter((e=>!(null==e?void 0:e.isolated))).filter((e=>(null==e?void 0:e.symbol)!==u));O=(0,$.zW)(e,o)-(0,$.ot)(e)}let k,x,A=0;if(w){const e=i.filter((e=>{const{symbol:t,positionSide:n}=e||{};return t===u&&"BOTH"!==n&&n!==m}))[0]||{positionSize:0,entryPrice:0};k="LONG"===m?v:e,x="SHORT"===m?v:e}A=w&&k.positionSize&&x.positionSize?(0,$.ST)(S,M,O,k,x,v):(0,$.W8)(S,M,O,v),A=A<0?0:A;const j=A>0?(0,a.uf)(A,g):"-";return(0,r.useEffect)((()=>{t&&l(e,t,A)}),[]),{liquidationPrice:A,formatedLiqPrice:j}})(e):(({sideKey:e,columnKey:t=""})=>{const n=function(){const e=(0,w.KQ)();return M(e)}(),o=function(){const e=(0,O.Gf)();return k(e)}(),s=(()=>{const e=(0,i.v9)((e=>e.position.positionMap)),t=(0,O.Vh)();return j(e,t)})(),l=(e=>{const t=(0,i.v9)((e=>e.position.positionMap))[e],n=(0,O.Vh)();return t?A(t,n[t.symbol]):null})(e),u=(0,c.t2)(e,"symbol"),f=(0,C.ZP)(C.hZ),p=(0,c.AM)()[u]||{},{pricePrecision:y}=p;let g=0;const b=(0,i.v9)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),v=(0,i.v9)((e=>e.loading.effects.preference.getAssetMode));b||v||!l||(g=((...e)=>{let t=0;try{t=m(...e)}catch(e){d.log(e)}return t})(l,s,n,o));const h=g>0?(0,a.uf)(g,y):"-";return(0,r.useEffect)((()=>{t&&f(e,t,g)}),[]),{liquidationPrice:g,formatedLiqPrice:h}})(e),Q=e=>R?(({sideKey:e,columnKey:t=""})=>{const n=(0,c.KQ)(),o=(0,c.Gf)(),i=F(),s=(0,c.cO)(e)||{},{symbol:a,isolated:l}=s,u=(0,c.AM)()[a]||{},d=(0,C.ZP)(C.hZ),{marginAsset:f,contractVal:m}=u;let p;if(l){const{isolatedWallet:e=0,symbol:t}=s,n=(null==o?void 0:o[t])||[],r=(0,$.SH)(n,Object.assign(Object.assign({},s),{contractVal:m})),i=(0,$.nn)(Object.assign(Object.assign({},s),{contractVal:m}));p=(0,$.Vo)(r,e,i)}else{const e=n[f]||{},{crossWalletBalance:t=0}=e,r=i.filter((e=>e.marginAsset===f)).filter((e=>!(null==e?void 0:e.isolated))),s=(0,$.zW)(r,o),a=(0,$.ot)(r);p=(0,$.Vo)(s,t,a)}const y=Number(p)>80?"negative":"";return(0,r.useEffect)((()=>{t&&d(e,t,Number(p))}),[]),{ratioColor:y,riskRatio:p}})(e):(({sideKey:e,columnKey:t=""})=>{const n=(0,c.KQ)(),o=(0,c.Gf)(),s=(0,c.F)(),a=(0,c.cO)(e)||{},{symbol:l,isolated:u}=a,d=(0,c.AM)()[l]||{},f=(0,C.ZP)(C.hZ),{marginAsset:m}=d;let p;if(u){const{isolatedWallet:e=0,symbol:t}=a,n=(null==o?void 0:o[t])||[],r=(0,E.SH)(n,a),i=(0,E.nn)(a);p=(0,E.Vo)(r,e,i)}else{const e=n[m]||{},{crossWalletBalance:t=0}=e,r=s.filter((e=>e.marginAsset===m)).filter((e=>!(null==e?void 0:e.isolated))),i=(0,E.zW)(r,o),a=(0,E.ot)(r);p=(0,E.Vo)(i,t,a)}const y=(0,i.v9)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),g=(0,i.v9)((e=>e.loading.effects.preference.getAssetMode));(y||g)&&(p="0.00");const b=Number(p)>80?"negative":"";return(0,r.useEffect)((()=>{t&&f(e,t,Number(p))}),[]),{ratioColor:b,riskRatio:p}})(e),U=e=>R?(({sideKey:e,columnKey:t=""})=>{const n=(0,c.ce)(),o=(0,c.cO)(e)||{},i=(0,C.ZP)(C.hZ),{symbol:s,isolated:l,isolatedWallet:u=0,positionSize:d,markPrice:f}=o,{leverageList:m={}}=(0,c.rf)()||{},p=m[s]||B.defaultVal,y=(0,c.AM)()[s]||{},{marginAsset:g="",contractVal:b=100}=y,v=(0,$.fS)({positionSize:d,markPrice:f,contractVal:b})*(0,$.yh)(p),h=l?u:v,P=`${(0,a.GW)(h,n,!0)} ${g}`;return(0,r.useEffect)((()=>{t&&i(e,t,h)}),[]),{margin:h,formatedMargin:P}})(e):(({sideKey:e,columnKey:t=""})=>{const n=(0,c.ce)(),o=(0,c.cO)(e)||{},i=(0,C.ZP)(C.hZ),{symbol:s,isolated:l,isolatedWallet:u=0}=o,{leverageList:d={}}=(0,c.rf)()||{},f=d[s]||_.defaultVal,m=(0,c.AM)()[s]||{},{marginAsset:p=""}=m,y=(0,E.fS)(o)*(0,E.yh)(f),g=l?u:y,b=`${(0,a.uf)(g,n)} ${p}`;return(0,r.useEffect)((()=>{t&&i(e,t,g)}),[]),{margin:g,formatedMargin:b}})(e),J=e=>R?(({sideKey:e,columnKey:t=""})=>{const{useLastPrice:n}=(0,c.F7)(),o=(0,c.ce)(),i=(0,c.cO)(e)||{},s=(0,C.ZP)(C.hZ),{symbol:l,positionSize:u,markPrice:d}=i,{leverageList:f={}}=(0,c.rf)()||{},m=f[l]||B.defaultVal,{lastPrice:p}=(0,c.zZ)({symbol:l}),y=(0,c.AM)()[l]||{},{marginAsset:g="",contractVal:b=100}=y,v=(0,$.fS)({positionSize:u,markPrice:d,contractVal:b})*(0,$.yh)(m),h=(0,$.nn)(Object.assign(Object.assign({},i),{contractVal:b,lastPrice:p}),n),P=0===Number(h)?"":Number(h)>0?"buy":"sell",S=0===Number(h)?"":Number(h)>0?"+":"",w=`${S}${(0,a.GW)(h,o,!0)} ${g} `,M=100*(h/v||0),O=`${S}${M.toFixed(2)}%`;return(0,r.useEffect)((()=>{t&&s(e,t,M)}),[]),{unrealizedPnl:h,formatedPnl:w,pnlColor:P,ROEVal:O}})(e):(({sideKey:e,columnKey:t=""})=>{const{useLastPrice:n}=(0,c.F7)(),o=(0,c.ce)(),i=(0,c.cO)(e)||{},s=(0,C.ZP)(C.hZ),{leverageList:l={}}=(0,c.rf)()||{},u=l[null==i?void 0:i.symbol]||_.defaultVal,{lastPrice:d}=(0,c.zZ)({symbol:null==i?void 0:i.symbol}),f=(0,c.AM)()[null==i?void 0:i.symbol]||{},{marginAsset:m=""}=f,p=(0,E.fS)(i)*(0,E.yh)(u),y=(0,E.nn)(Object.assign(Object.assign({},i),{lastPrice:d}),n),g=0===Number(y)?"":Number(y)>0?"buy":"sell",b=Number(y)>0?"+":"",v=`${b}${(0,a.GW)(y,o,!0)} ${m}`,h=100*(y/p||0),P=`${b}${h.toFixed(2)}%`;return(0,r.useEffect)((()=>{t&&s(e,t,h)}),[]),{unrealizedPnl:y,formatedPnl:v,pnlColor:g,ROEVal:P}})(e)},71994:(e,t,n)=>{n.d(t,{U:()=>d,e:()=>u});var o=n(2784),r=n(33470),i=n(31953),s=n(38896),a=n(51991),l=n(92521),c=n(62684);const u=({sideKey:e,columnKey:t=""})=>{const n=(0,s.KQ)(),u=(0,s.Gf)(),d=(0,s.F)(),f=(0,s.cO)(e)||{},m=(0,a.ZP)(a.hZ),{symbol:p,positionSide:y}=f,g=(0,s.AM)()[p]||{},{marginAsset:b,pricePrecision:v}=g,h=n[b]||{},{crossWalletBalance:P=0}=h,S=(null==u?void 0:u[p])||[],{assetsRateEquity:w,assetsMM:M}=(0,s.Nx)(),O=(0,s.G8)(),k=O[b]||{},x=((0,i.L6)(d)[b]||[]).filter((e=>(null==e?void 0:e.symbol)!==p)),A=(0,l.zW)(x,u),j=(0,l.ot)(x);let C=0;Object.entries(w).forEach((([e,t])=>{e!==b&&(C+=t)})),Object.entries(M).forEach((([e,t])=>{const n=O[e]||{},{askRate:o=0}=n;C-=e!==b?t*o:A*o}));let K=0;if(y&&"BOTH"!==y){const e=d.filter((e=>{const{symbol:t,positionSide:n}=e||{};return t===p&&"BOTH"!==n&&n!==y}))[0]||{positionSize:0,entryPrice:0},t="LONG"===y?f:e,n="SHORT"===y?f:e;K=(0,c._O)({accEquityAndMMs:C,assetIndex:k,bracket:S,crossWalletBalance:P,smdsUPNL:j,longPosition:t,shortPosition:n,curPosition:f})}else K=(0,c.Dj)({accEquityAndMMs:C,assetIndex:k,bracket:S,crossWalletBalance:P,smdsUPNL:j,curPosition:f});const Z=K>0?(0,r.uf)(K,v):"-";return(0,o.useEffect)((()=>{t&&m(e,t,K)}),[]),{liquidationPrice:K,formatedLiqPrice:Z}},d=({sideKey:e,columnKey:t=""})=>{const n=(0,a.ZP)(a.hZ),{riskRatio:r}=(0,s.Nx)(),i=Number(r)>80?"negative":"";return(0,o.useEffect)((()=>{t&&n(e,t,Number(r))}),[]),{ratioColor:i,riskRatio:r}}},30998:(e,t,n)=>{n.d(t,{Nu:()=>g,Qy:()=>y,zz:()=>m,PH:()=>d,Lb:()=>f,kH:()=>p,Gt:()=>v,xG:()=>u});var o=n(74388),r=n(49475),i=n(44174);const s={keys:new Set,setItem(e,t,n){if("function"!=typeof n)return new Promise((n=>{this.keys.add(e),this[e]=t,n()}));this.keys.add(e),this[e]=t,n(null)},getItem(e,t){if("function"!=typeof t)return new Promise((t=>{t(this[e])}));t(this[e])},removeItem(e,t){if("function"!=typeof t)return new Promise((t=>{this[e]=void 0,this.keys.delete(e),t()}));this[e]=void 0,this.keys.delete(e),t(null)},clear(e){if("function"!=typeof e)return new Promise((e=>{this.keys.forEach((e=>{this[e]=void 0})),this.keys.clear(),e()}));this.keys.forEach((e=>{this[e]=void 0})),this.keys.clear(),e(null)},create(){return Object.create(this)}},a={setItem(e,t,n){const o="object"==typeof t?JSON.stringify(t):t;if("function"!=typeof n)return new Promise(((t,n)=>{try{window.localStorage.setItem(e,o),t()}catch(e){n(e)}}));try{window.localStorage.setItem(e,o),n(null)}catch(e){n(e)}},getItem(e,t){if("function"!=typeof t)return new Promise((t=>{t((0,i.As)(window.localStorage.getItem(e)))}));t(null,(0,i.As)(window.localStorage.getItem(e)))},removeItem(e,t){if("function"!=typeof t)return new Promise((t=>{window.localStorage.removeItem(e),t()}));window.localStorage.removeItem(e),t(null)},clear(e){if("function"!=typeof e)return new Promise((e=>{window.localStorage.clear(),e()}));window.localStorage.clear(),e(null)},create(){return Object.create(this)}};function l(e){const t=new Map;return function(n,...o){if(t.has(n))return t.get(n);const r=e(n,...o);return t.set(n,r),r}}function c({stateKey:e,storageKey:t=e,defaultValue:n,validator:r,storage:l}){const c=void 0!==(u=l)?u:"undefined"!=typeof window?a.create():s.create();var u,d;return(0,o.Z)((d=(t,o)=>({[e]:n,[`set${(0,i.kC)(e)}`]:n=>t({[e]:n}),[`toggle${(0,i.kC)(e)}`]:()=>t({[e]:!o()[e]})}),(o,s,a)=>{const l=d((n=>{o(n);const r=s()[e];c.setItem(t,r)}),s);let u={};return"undefined"!=typeof window&&c.getItem(t,((t,o)=>{let i;i="function"==typeof r?r(o)?o:n:null!=o?o:n,u={[e]:i}})),Object.assign(Object.assign(Object.assign({},l),u),{[`clear${(0,i.kC)(e)}`](){c.removeItem(t),o(l)}})}))}const u=(0,o.Z)((e=>({disableMouse:!1,setDisableMouse:t=>e({disableMouse:t})}))),d=l((function(e){return c({stateKey:"miniMultiChartType",storageKey:`${e}-chart-miniMultiChartType`,defaultValue:r.k.Store.ChartMode.Single})})),f=l((function(e){return c({stateKey:"miniMultiChartWindows",storageKey:`${e}-chart-miniMultiChartWindows`,defaultValue:["","","",""]})})),m=l((function(e){return c({stateKey:"lastSelectedMiniMultiChartWindow",storageKey:`${e}-chart-lastSelectedMiniMultiChartWindow`,defaultValue:0})})),p=l((function(e){return c({stateKey:"priceType",storageKey:`${e}-chart-priceType`,defaultValue:r.k.Store.PriceType.Last})})),y=l((function(e){return c({stateKey:"interval",storageKey:`${e}-chart-interval`,defaultValue:r.k.Store.DisplayIntervals["1d"]})})),g=l((function(e){return c({stateKey:"chartType",storageKey:`${e}-chart-type`,defaultValue:r.k.Store.OriginalChartStyle.CandleBar})}));var b=n(15729);const v=(0,o.Z)((e=>({posCalcData:{},setPosCalcData:(t,n,o)=>e((0,b.ZP)((e=>{e.posCalcData[t]||(e.posCalcData[t]={}),t&&n&&e.posCalcData[t][n]!==o&&(e.posCalcData[t][n]=o)})))})))},56851:(e,t,n)=>{n.d(t,{m:()=>m});var o=n(52322),r=n(2784),i=n(62143),s=n(48658),a=n(21030),l=n(33656);const c={display:"flex",alignItems:"center",cursor:"help",color:"t.third",borderBottom:["1px dotted","1px dotted","none"],borderBottomColor:"t.third","&:hover":{color:"t.primary",borderBottomColor:"t.primary"}},u={maxWidth:"296px",margin:"-4px 0",lineHeight:"16px",color:"t.white",whiteSpace:"pre-line"};var d=n(97060);const f=e=>{var{link:t}=e,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["link"]);const{getI18n:r}=(0,d.yk)();return(0,o.jsx)(s.Z,Object.assign({as:"a",variant:"addressLink",href:t,target:"_blank",color:"t.yellow",fontSize:12},n,{children:r("learnMore",{defaultValue:"Learn More"})}),void 0)};const m=r.memo((e=>{var{children:t,tip:n,learnMoreLink:r,placement:d,hideUnderLine:m,sx:p,tipSx:y,labelSx:g,onTipClick:b}=e,v=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["children","tip","learnMoreLink","placement","hideUnderLine","sx","tipSx","labelSx","onTipClick"]);const{isIPad:h}=(0,l.F)(),P=(0,o.jsxs)(i.Z,Object.assign({sx:Object.assign(Object.assign({},u),y)},b&&{onClick:b},{children:[n,r&&(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsx)(f,{link:r},void 0)]},void 0)]}),void 0);return(0,o.jsx)(a.ZP,Object.assign({tip:P,delay:500,sx:p,bg:"bg4",placement:d,arrow:!0,enablePortal:!h},v,{children:(0,o.jsx)(s.Z,Object.assign({sx:Object.assign(Object.assign(Object.assign({},c),g),m?{borderBottom:"none"}:{})},{children:t}),void 0)}),void 0)}))}}]);