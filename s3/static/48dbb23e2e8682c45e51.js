"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[7212],{93954:(e,t,i)=>{i.d(t,{s:()=>h});var n,r=i(2784),o=i(27657),a=i(26786),s=i(48752),l=i(97060);e=i.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var c,d,u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},h=function(e){var t=(0,l.yk)().getI18n,i=(0,o.Q)().isCoinUnit,n=e||{},c=n.contractVal,d=n.equalQtyPrecision,u=n.precision,h=(0,r.useCallback)((function(e){var t=e.quantity,n=e.price,r=e.func,o=void 0===r?a.mD:r,l=e.format,u=void 0===l||l;return i?(0,s.unitChangeCoinQty)({quantity:t,price:n,contractVal:c,precision:d,func:o,format:u}):t}),[c,d,i]),_=(0,r.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"marginAsset";return i?e[n]:t("Cont",{defaultValue:"Cont"})}),[t,i,e]),f=(0,r.useCallback)((function(){return i?d:u}),[d,i,u]);return(0,r.useMemo)((function(){return{getQuantity:h,getAssetLabel:_,getPrecision:f}}),[_,f,h])};u(h,"useFuturesLanguage{{ getI18n: getFuturesI18n }}\nusePreferenceUnit{{ isCoinUnit }}\nuseCallback{getQuantity}\nuseCallback{getAssetLabel}\nuseCallback{getPrecision}\nuseMemo{}",(function(){return[l.yk,o.Q]})),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register((function(e){var t=e.quantity,i=e.price,n=e.contractVal;return Math.floor(t*i/n)}),"unitChangeCoinToCont","/flow/src/git.toolsfdg.net/mono/mono/web/apps/cloud-trade-sdk/src/delivery/hooks/useUnitChange.js"),c.register(h,"useUnitChange","/flow/src/git.toolsfdg.net/mono/mono/web/apps/cloud-trade-sdk/src/delivery/hooks/useUnitChange.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},7688:(e,t,i)=>{i.d(t,{Z:()=>g});var n=i(2784),r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=void 0;l="undefined"!=typeof window?window:"undefined"!=typeof self?self:i.g;var c=null,d=null,u=l.clearTimeout,h=l.setTimeout,_=l.cancelAnimationFrame||l.mozCancelAnimationFrame||l.webkitCancelAnimationFrame,f=l.requestAnimationFrame||l.mozRequestAnimationFrame||l.webkitRequestAnimationFrame;null==_||null==f?(c=u,d=function(e){return h(e,20)}):(c=function(e){var t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e,2),i=t[0],n=t[1];_(i),u(n)},d=function(e){var t=f((function(){u(i),e()})),i=h((function(){_(t),e()}),20);return[t,i]});var p=function(e){function t(){var e,i,n;r(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return i=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n.state={height:n.props.defaultHeight||0,width:n.props.defaultWidth||0},n._onResize=function(){var e=n.props,t=e.disableHeight,i=e.disableWidth,r=e.onResize;if(n._parentNode){var o=n._parentNode.offsetHeight||0,a=n._parentNode.offsetWidth||0,s=window.getComputedStyle(n._parentNode)||{},l=parseInt(s.paddingLeft,10)||0,c=parseInt(s.paddingRight,10)||0,d=parseInt(s.paddingTop,10)||0,u=parseInt(s.paddingBottom,10)||0,h=o-d-u,_=a-l-c;(!t&&n.state.height!==h||!i&&n.state.width!==_)&&(n.setState({height:o-d-u,width:a-l-c}),r({height:o,width:a}))}},n._setRef=function(e){n._autoSizer=e},s(n,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=function(e){var t=void 0,i=void 0,n=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u="undefined"!=typeof document&&document.attachEvent;if(!u){a=function(e){var t=e.__resizeTriggers__,i=t.firstElementChild,n=t.lastElementChild,r=i.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,r.style.width=i.offsetWidth+1+"px",r.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight},o=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},s=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;a(this),this.__resizeRAF__&&c(this.__resizeRAF__),this.__resizeRAF__=d((function(){o(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(i){i.call(t,e)})))}))}};var h=!1,_="";n="animationstart";var f="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g=document.createElement("fakeelement");if(void 0!==g.style.animationName&&(h=!0),!1===h)for(var m=0;m<f.length;m++)if(void 0!==g.style[f[m]+"AnimationName"]){_="-"+f[m].toLowerCase()+"-",n=p[m],h=!0;break}t="@"+_+"keyframes "+(i="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",r=_+"animation: 1ms "+i+"; "}return{addResizeListener:function(o,c){if(u)o.attachEvent("onresize",c);else{if(!o.__resizeTriggers__){var d=o.ownerDocument,h=l.getComputedStyle(o);h&&"static"===h.position&&(o.style.position="relative"),function(i){if(!i.getElementById("detectElementResize")){var n=(t||"")+".resize-triggers { "+(r||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=i.head||i.getElementsByTagName("head")[0],a=i.createElement("style");a.id="detectElementResize",a.type="text/css",null!=e&&a.setAttribute("nonce",e),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(i.createTextNode(n)),o.appendChild(a)}}(d),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=d.createElement("div")).className="resize-triggers";var _=d.createElement("div");_.className="expand-trigger",_.appendChild(d.createElement("div"));var f=d.createElement("div");f.className="contract-trigger",o.__resizeTriggers__.appendChild(_),o.__resizeTriggers__.appendChild(f),o.appendChild(o.__resizeTriggers__),a(o),o.addEventListener("scroll",s,!0),n&&(o.__resizeTriggers__.__animationListener__=function(e){e.animationName===i&&a(o)},o.__resizeTriggers__.addEventListener(n,o.__resizeTriggers__.__animationListener__))}o.__resizeListeners__.push(c)}},removeResizeListener:function(e,t){if(u)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,i=e.className,r=e.disableHeight,o=e.disableWidth,s=e.style,l=this.state,c=l.height,d=l.width,u={overflow:"visible"},h={},_=!1;return r||(0===c&&(_=!0),u.height=0,h.height=c),o||(0===d&&(_=!0),u.width=0,h.width=d),(0,n.createElement)("div",{className:i,ref:this._setRef,style:a({},u,s)},!_&&t(h))}}]),t}(n.PureComponent);p.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};const g=p},27657:(e,t,i)=>{i.d(t,{Q:()=>s});var n=i(11001),r=i(73121);const{coin:o,cont:a}=n.SW;function s(){const{unit:e}=(0,r.F7)();return{isCoinUnit:e===o,isContUnit:e===a}}},67212:(e,t,i)=>{i.r(t),i.d(t,{DepthChart:()=>b,default:()=>z});var n=i(52322),r=i(2784),o=i(7688),a=i(49475),s=i(19614),l=i(38896),c=i(23131),d=i(29261),u=i(33470),h=i(3638),_=i(42871),f=i(93954),p=i(39431),g=i(39727);const m=({price:e,depth:t,amount:i,total:n})=>({xData:+e,yData:t});const v=({price:e,depth:t})=>({xData:t,yData:+e}),y=({namespace:e,symbol:t,width:i,height:o,forceHorizontalMode:y=!1})=>{const b="light"===(0,l.Fg)()?s.ib:s.Cs,z=(0,l.Vh)()[t],{pricePrecision:w,isDelivery:C}=z||{},{asks:k,bids:L}=function(e,t=!1,i=m){const n=(e=>{var t;const i=(0,g.v9)((e=>e.exchangeInfo.infos))[e];return"BTCUSDT"===e?"1":(null===(t=null==i?void 0:i.levels)||void 0===t?void 0:t.slice(-2)[0])||"0.1"})(e),o=(e=>{const{tickSize:t,equalQtyPrecision:i}=e||{},n=(0,h.p)(Number(t)),{getQuantity:o}=(0,_.s7)(e),{getQuantity:a}=(0,f.s)(e);return(0,r.useCallback)((({quantity:e,price:t,format:r=!1})=>{const s={quantity:e,price:t,format:r};return(0,c.nM)()?a(Object.assign(Object.assign({},s),{func:u.GW,precision:i||2})):o(Object.assign(Object.assign({},s),{func:u.mD,precision:n||2}))}),[i,a,o,n])})((0,d.j2)()),a=(t=(0,c.nM)()||t)?(0,c.RU)():(0,c.BN)(),s=(0,p.H0)(e,a,{level:n,isDelivery:t}),l=(0,p.d)(e,a,{level:n,isDelivery:t});return{asks:(0,r.useMemo)((()=>{let e=0;const t=[];for(let i=s.length-1;i>=0;i--){const n=s[i];e+=Number(o({quantity:n.amount,price:n.price})),Object.assign(n,{depth:e}),t.push(n)}return t.map(i)}),[s,o,i]),bids:(0,r.useMemo)((()=>{let e=0;const t=[];for(let i=0,n=l.length;i<n;i++){const n=l[i];e+=Number(o({quantity:n.amount,price:n.price})),Object.assign(n,{depth:e}),t.push(n)}return t.map(i)}),[l,o,i])}}(t,C,o>i?v:void 0),N=(0,r.useMemo)((()=>"BTCUSDT"===t?0:w-1),[t,w]);return(0,n.jsx)(a.k.Containers.DepthChart,{namespace:e,symbol:t,theme:b,asks:k,bids:L,width:i,height:o,pricePrecision:w,filterPricePrecision:N,mode:y?a.k.DepthChartMode.Horizontal:o>i?a.k.DepthChartMode.Vertical:a.k.DepthChartMode.Horizontal},void 0)},b=({namespace:e,symbol:t,forceHorizontalMode:i})=>(0,n.jsx)(o.Z,{children:({width:r,height:o})=>(0,n.jsx)(y,{namespace:e,symbol:t,width:r,height:o,forceHorizontalMode:i},void 0)},void 0),z=b}}]);