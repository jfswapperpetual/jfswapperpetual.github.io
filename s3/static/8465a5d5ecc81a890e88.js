"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[9018],{37407:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(5163),r=n(2784),o=n(98569);const a=function(e){return r.createElement(o.Z,(0,i.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{d:"M16.5 8.49v2.25L12 15.51l-4.5-4.77V8.49h9z",fill:"currentColor"}))}},8335:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(5163),r=n(2784),o=n(98569);const a=function(e){return r.createElement(o.Z,(0,i.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.035 16.812l-.001.002 2.121 2.121.002-.002 2.121-2.12 9.19-9.192-2.12-2.121-9.191 9.19-3.536-3.534-2.121 2.12 3.535 3.536z",fill:"currentColor"}))}},16831:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(5163),r=n(2784),o=n(62143),a=n(92036),l=n(48658),s=n(72779),c=n.n(s),u="32px",d="24px",p=(0,r.forwardRef)((function(e,t){var n=e.children,a=e.labelMarginLeft,l=e.moveUp,s=e.isLargeOutline,p=e.required;return n?r.createElement(o.Z,(0,i.__assign)({ref:t,as:"label",className:c()({"bn-input-label-required":p},"bn-input-label"),tx:"forms",variant:"label"},e,{__css:{position:"absolute",pointerEvents:l?"":"none",top:l?s?"-24px":"-32px":0,left:a,lineHeight:s?d:u,transitionProperty:"top,font-size",transitionDuration:".3s",transitionTimingFunction:"ease",zIndex:"1",cursor:"text","&.bn-input-label-required::before":{display:"inline-block",marginRight:"minor",color:"error",content:'"*"'}}})):null}));p.displayName="TextFieldLabel";var f=(0,r.forwardRef)((function(e,t){var n=e.onFocus,a=e.onBlur,l=e.onChange,s=e.type,c=(0,i.__rest)(e,["onFocus","onBlur","onChange","type"]),u="number"===s?{lang:"en"}:{};return r.createElement(o.Z,(0,i.__assign)({ref:t,as:"input","data-bn-type":"input"},u,c,{type:s,onFocus:n,onBlur:a,onChange:l,__css:{width:"100%",height:"100%",padding:"0",outline:"none",border:"none",bg:"inherit",opacity:1,"&::placeholder":{color:"t.placeholder",fontSize:"14px"}}}))}));f.displayName="TextFieldInput";var h=(0,r.forwardRef)((function(e,t){var n=e.variant,s=void 0===n?"default":n,c=e.id,h=e.value,x=e.defaultValue,g=e.label,m=e.labelFixed,b=void 0!==m&&m,v=e.placeholder,y=e.error,w=e.disabled,C=e.prefix,j=e.suffix,Z=e.infoText,O=void 0===Z?"":Z,_=e.errorText,S=void 0===_?"":_,E=e.onFocus,k=e.onBlur,R=e.onChange,T=e.boxProps,N=e.required,F=e.sx,I=void 0===F?{}:F,M=(0,i.__rest)(e,["variant","id","value","defaultValue","label","labelFixed","placeholder","error","disabled","prefix","suffix","infoText","errorText","onFocus","onBlur","onChange","boxProps","required","sx"]),P=r.useState(""),B=P[0],L=P[1],z=r.useRef(null!=h).current,D=r.useState(x),q=D[0],H=D[1];z&&h!==q&&H(h);var $=!g||b?v:"",W="outline"!==s&&"outlineLarge"!==s||b?"0px":"xs",A=y?"error":"info",K="inline"===s?"":y?S:O,Q="inline"!==s?"":y?S:"focus"===B?O:"",V="outlineLarge"===s,G=w?"disabled":y?"error":B;""!==G&&(G="bn-input-status-"+G);var Y="string"==typeof g?g:M["area-label"];return r.createElement(a.Z,(0,i.__assign)({tx:"textField",className:G,variant:s},T,{__css:{display:"inline-flex",position:"relative",height:V?"40px":u,mt:g?V?d:u:"minor",mb:K.length>0?"16px":"0px",alignItems:"center",lineHeight:1.6,"&.bn-input-status-focus .bn-input-label":{top:V?"-24px":"-32px"}}}),C&&r.createElement(o.Z,{className:"bn-input-prefix"},C),r.createElement(f,(0,i.__assign)({id:c,onFocus:function(e){L("focus"),E&&E(e)},onBlur:function(e){L(""),k&&k(e)},onChange:function(e){z||H(e.target.value),R&&R(e)},ref:t,value:q,"aria-label":Y,disabled:w,placeholder:$,sx:I,required:N},M)),j&&r.createElement(o.Z,{className:"bn-input-suffix"},j),r.createElement(p,{htmlFor:c,labelMarginLeft:W,moveUp:b||!!q&&""!==q,isLargeOutline:V,required:N},g),K.length>0&&r.createElement(l.Z,{className:"bn-input-helper-text",variant:"textField.helperText."+A,__css:{position:"absolute",bottom:"-20px",lineHeight:"16px"}},K),Q.length>0&&r.createElement(o.Z,{className:"bn-input-tooltip"},r.createElement(o.Z,{className:"bn-input-tooltip-arrow"}),r.createElement(o.Z,{className:"bn-input-tooltip-content"},Q)))}));h.displayName="TextField";const x=h},66306:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(5163),r=n(2784),o=n(62143),a=n(92036),l=n(48658),s=n(72779),c=n.n(s),u="32px",d=(0,r.forwardRef)((function(e,t){var n=e.children,a=e.required;return n?r.createElement(o.Z,(0,i.__assign)({ref:t,as:"label",className:c()({"bn-input-label-required":a},"bn-input-label"),tx:"forms",variant:"label"},e,{__css:{position:"absolute",top:"-32px",left:"0px",lineHeight:u,zIndex:"1",cursor:"text","&.bn-input-label-required::before":{display:"inline-block",marginRight:"minor",color:"error",content:'"*"'}}})):null})),p=(0,r.forwardRef)((function(e,t){return e.children?r.createElement(o.Z,(0,i.__assign)({ref:t,as:"label",className:"bn-input-label",tx:"forms",variant:"label"},e,{__css:{position:"absolute",top:"-32px",right:0,lineHeight:u,zIndex:"1",cursor:"text"}})):null}));d.displayName="TextFieldLabel";var f=(0,r.forwardRef)((function(e,t){var n=e.onFocus,a=e.onBlur,l=e.onChange,s=(0,i.__rest)(e,["onFocus","onBlur","onChange"]);return r.createElement(o.Z,(0,i.__assign)({ref:t,as:"input","data-bn-type":"input"},s,{onFocus:n,onBlur:a,onChange:l,__css:{width:"100%",height:"100%",padding:"0",outline:"none",border:"none",bg:"inherit",opacity:1,"&::placeholder":{color:"t.placeholder",fontSize:"14px"}}}))}));f.displayName="TextFieldInput";var h=(0,r.forwardRef)((function(e,t){var n=e.variant,s=void 0===n?"default":n,h=e.id,x=e.value,g=e.defaultValue,m=e.label,b=e.placeholder,v=e.error,y=e.disabled,w=e.prefix,C=e.suffix,j=e.infoText,Z=void 0===j?"":j,O=e.errorText,_=void 0===O?"":O,S=e.onFocus,E=e.onBlur,k=e.onChange,R=e.boxProps,T=e.required,N=e.extraInfo,F=e.size,I=void 0===F?"lg":F,M=(0,i.__rest)(e,["variant","id","value","defaultValue","label","placeholder","error","disabled","prefix","suffix","infoText","errorText","onFocus","onBlur","onChange","boxProps","required","extraInfo","size"]),P=r.useState(""),B=P[0],L=P[1],z=r.useRef(null!=x).current,D=r.useState(g),q=D[0],H=D[1];z&&x!==q&&H(x);var $=v?_:Z,W=r.useState(16),A=W[0],K=W[1],Q=v?"error":"info",V="string"==typeof m?m:M["area-label"],G=y?"disabled":v?"error":B;return""!==G&&(G="bn-input-status-"+G),r.createElement(a.Z,(0,i.__assign)({tx:"textFieldV2",className:c()([G]),variant:s},R,{__css:(0,i.__assign)((0,i.__assign)((0,i.__assign)((0,i.__assign)({display:"inline-flex",position:"relative",mt:m?u:"0px",mb:$.length>0?A+"px":"0px",alignItems:"center",lineHeight:1.6,height:"48px"},"lg"===I&&{height:"48px"}),"md"===I&&{height:"40px"}),"sm"===I&&{height:"32px"}),{"&.bn-input-status-focus .bn-input-label":{top:"-32px"}})}),w&&r.createElement(o.Z,{className:"bn-input-prefix"},w),r.createElement(f,(0,i.__assign)({id:h,onFocus:function(e){L("focus"),S&&S(e)},onBlur:function(e){L(""),E&&E(e)},onChange:function(e){z||H(e.target.value),k&&k(e)},ref:t,value:q,"aria-label":V,disabled:y,placeholder:b,required:T},M)),C&&r.createElement(o.Z,{className:"bn-input-suffix"},C),r.createElement(d,{htmlFor:h,required:T},m),N&&r.createElement(p,null,N),$.length>0&&r.createElement(l.Z,{ref:function(e){if(e){var t=e.getBoundingClientRect().height;K(t)}},className:"bn-input-helper-text",variant:"textField.helperText."+Q,__css:{position:"absolute",bottom:-1*A-4+"px",lineHeight:A+"px"}},$))}));h.displayName="TextFieldV2";const x=h},29559:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(39601),r=n.n(i),o=n(82609),a=n.n(o)()(r());a.push([e.id,".alb-text-align {\n  text-align: right !important;\n}\n\n.alb-direction-rtl {\n  direction: initial !important;\n  align-items: flex-end !important;\n}\n\n.alb-transform-rotate {\n  display: inline-block;\n  transform: rotate(180deg);\n}\n\n.alb-justify-content {\n  justify-content: flex-start;\n}\n\n.alb-date-range {\n  left: -9999px !important;\n}\n",""]);const l=a},30485:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(46062),r=n.n(i),o=n(44036),a=n.n(o),l=n(96793),s=n.n(l),c=n(17892),u=n.n(c),d=n(11173),p=n.n(d),f=n(42464),h=n.n(f),x=n(29559),g={};g.styleTagTransform=h(),g.setAttributes=u(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p(),r()(x.Z,g);const m=x.Z&&x.Z.locals?x.Z.locals:void 0},43993:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var i=n(52322),r=n(2784),o=n(27866),a=n(92036),l=n(38896),s=n(5271),c=n(60520),u=n(53421),d=n(36628),p=n(11001),f=n(71615),h=n(59545);const x={userSelect:"none",fontSize:"12px",height:"40px",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,minWidth:"100px",borderTop:"2px solid",cursor:"pointer",lineHeight:"16px","&.buy-button":{":hover":{bg:e=>(0,h.DZ)(e.colors.buy,.7)},bg:e=>(0,h.DZ)(e.colors.buy,.15),borderColor:"buy"},"&.sell-button":{":hover":{bg:e=>(0,h.DZ)(e.colors.sell,.7)},bg:e=>(0,h.DZ)(e.colors.sell,.15),borderColor:"sell"},padding:"2px 0 3px",".title":{color:"t.secondary"},".text":{color:"t.primary"}},g={bg:"bg1",pt:"xs",".container":{width:"25px",mx:"2px",flexDirection:"column",alignItems:"center",cursor:"pointer",color:"t.third","&.active":{"& > div:first-of-type":{bg:"t.secondary"},color:"t.secondary"}},".stepper":{height:"10px",mb:"2px",width:"23px",bg:"bg3"},".value":{fontSize:"12px",transform:"scale(calc(10/12))",color:"t.third"},".position-value":{flex:1,fontSize:"12px",color:"t.secondary"}},m={minWidth:"312px",width:"auto",position:"absolute",zIndex:"flashOrder",color:"white",minHeight:"40px",alignItems:"center",justifyContent:"space-between",bg:"popupBg","&.drag-hide":{display:"none"}},b={minWidth:"16px",width:"16px",justifyContent:"center",display:"flex",height:"40px",alignItems:"center",cursor:"grab",color:"icons.close",userSelect:"none",bg:"popupBg"},v={fontSize:"12px",flexDirection:"column",justifyContent:"center",minWidth:"100px",padding:"3px 4px 4px 4px",maxWidth:"150px",textAlign:"center",".amount":{"div.bn-input-tooltip":{bottom:"47px",width:"fit-content",left:"50%",transform:"translateX(-50%)","& .bn-input-tooltip-arrow":{left:"50%"},"& .bn-input-tooltip-content":{p:"7px 12px",width:"fit-content",whiteSpace:"nowrap"}},"div:not(.bn-input-tooltip):not(.bn-input-tooltip-arrow):not(.bn-input-tooltip-content)":{border:"none",margin:"0",height:"20px",input:{fontSize:"12px",textAlign:"center"}},".bn-input-prefix":{display:"none"}},"div:first-of-type":{color:"t.secondary"},input:{minWidth:"80px",maxWidth:"100px",width:"auto",bg:"popupBg",color:"t.primary"}},y={userSelect:"none",minWidth:"16px",width:"16px",height:"40px",justifyContent:"center",display:"flex",alignItems:"center",bg:"popupBg",".icon":{cursor:"pointer",flexShrink:0,color:"icons.close","&:hover":{color:"primary"}}},w=({positionDirection:e,type:t="bid",handleClick:n=(()=>{}),dispatch:o=(()=>{})})=>{const{BuyText:c,SellText:u}=(0,l.x_)(e);let d,p,h,g,m=s.PR.BOTH;const{bidPrice:b,askPrice:v}=(0,l.he)(),{positionMode:y}=(0,l.F7)();"bid"===t?(p=c,h=String(v),d="buy-button",g=1,y&&(e===s.RS.OPEN?m=s.PR.LONG:e===s.RS.CLOSE&&(m=s.PR.SHORT))):(p=u,h=String(b),d="sell-button",g=-1,y&&(e===s.RS.OPEN?m=s.PR.SHORT:e===s.RS.CLOSE&&(m=s.PR.LONG)));const w=(0,r.useCallback)((e=>{e.preventDefault(),o({type:f.z,payload:{side:g,positionSide:m}}),n(!0)}),[m,o,g,n]);return(0,r.useMemo)((()=>(0,i.jsxs)(a.Z,Object.assign({onClick:w,sx:x,className:d},{children:[(0,i.jsx)("div",Object.assign({className:"title"},{children:p}),void 0),(0,i.jsx)("div",Object.assign({className:"text"},{children:h}),void 0)]}),void 0)),[w,d,p,h])};var C=n(84755),j=n(72779),Z=n.n(j),O=n(16831),_=n(30485),S=n(59464);const E=/^\d+\.?\d*|%$/,k=/^0+(?=\d)/,R=r.memo((e=>{var{name:t,value:n,error:o,disabled:a=!1,precision:s,errorText:c,infoText:u,placeholder:d,onChange:p,maxLength:f,autoZero:h=!1,inputRef:x,onFocus:g,onBlur:m}=e,b=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["name","value","error","disabled","precision","errorText","infoText","placeholder","onChange","maxLength","autoZero","inputRef","onFocus","onBlur"]);const v="rtl"===(0,l.gm)()?Z()(_.Z["alb-text-align"]):"",y=(0,r.useCallback)((e=>{let t=e.target.value;!0===h&&"string"==typeof t&&0===t.indexOf(".")&&(t=`0${t}`),!E.test(t)&&""!==t||isNaN(t)?e.stopPropagation():(t=t.replace(k,""),(0,S.N3)(t)>s&&(t=t.replace(new RegExp(`^(\\d*\\.\\d{${s}})\\d*`),"$1")),f&&t.split(".")[0].length>f&&(t=n),0===s&&(t=t.replace(".","")),p&&(t=p(t)),e.target.value=t)}),[p,f,s,n,h]),w=(0,r.useCallback)((e=>{const t=e.target.value;E.test(t)||(e.target.value=""),null==m||m(e)}),[m]),C=(0,r.useCallback)((e=>{e.target.value||(e.target.value="")}),[]);return(0,i.jsx)(O.Z,Object.assign({name:t,ref:x,variant:"inline",className:v,type:"text",value:n,placeholder:d,disabled:a,onClick:C,onChange:y,onBlur:w,onFocus:g,error:o,infoText:u,errorText:c},b),void 0)}));var T=n(97060),N=n(26786);const F=({inputRef:e,submitError:t,quantity:n="",setQuantity:o,dispatch:s,onFocus:c})=>{const{getI18n:u}=(0,T.yk)(),[d]=(0,l.eY)(),{cUnit:p,precision:h,helperText:x,minContQty:g,placeholder:m,buyCont:b,buyQty:y,sellCont:w,sellQty:j}=(0,l.ql)({quantity:n}),Z=`${u("quantity")} (${p})`,O=!Number.isNaN(Number(n));return(0,r.useEffect)((()=>{s({type:f.z,payload:{minContQty:g,buyQty:y,sellQty:j,buyCont:b,sellCont:w}})}),[n,g,d]),(0,i.jsxs)(a.Z,Object.assign({sx:v},{children:[(0,i.jsx)("div",{children:Z},void 0),(0,i.jsx)("div",Object.assign({className:"amount"},{children:(0,i.jsx)(R,{id:"flashOrderQuantity",inputRef:e,type:O?"number":"text",step:(0,N.nH)(h),precision:h,value:n,placeholder:m,maxLength:C.ze,error:Boolean(t),errorText:t,infoText:x,autoZero:!0,onChange:o,onFocus:c},void 0)}),void 0)]}),void 0)};var I=n(76940),M=n(16003),P=n(30998),B=n(87294);const L={l:15,t:65,b:window.innerHeight-55,r:window.innerWidth-340},z=(window.innerHeight,window.innerWidth,{l:15,t:250}),D=({draggableRef:e})=>(0,r.useMemo)((()=>(0,i.jsx)(a.Z,Object.assign({ref:e,sx:b},{children:(0,i.jsxs)("svg",Object.assign({width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,i.jsx)("rect",{width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{y:"5",width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{y:"10",width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{x:"4",width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{x:"4",y:"5",width:"2",height:"2",fill:"currentColor"},void 0),(0,i.jsx)("rect",{x:"4",y:"10",width:"2",height:"2",fill:"currentColor"},void 0)]}),void 0)}),void 0)),[e]),q=r.memo((({children:e,visible:t,draggableRef:n})=>{const{isIPad:o}=(0,T.Fs)(),[l,s]=(0,I.Z)("flash-order-position",z),c=L,u=(0,M.Z)(l),d=(0,r.useRef)(!0),p=(0,r.useRef)(!1),f=(0,P.xG)((e=>e.setDisableMouse)),h=(0,r.useRef)({x:0,y:0}),x=(0,r.useCallback)((e=>{p.current=!0,f(!0),h.current={x:e.screenX,y:e.screenY}}),[f]);(0,r.useEffect)((()=>{var e,t;return null===(e=n.current)||void 0===e||e.addEventListener("mousedown",x),null===(t=n.current)||void 0===t||t.addEventListener("touchstart",x),()=>{const{current:e}=n;null==e||e.removeEventListener("mousedown",x),null==e||e.removeEventListener("touchstart",x)}}),[n,x]);const g=(0,r.useCallback)((e=>{e.preventDefault(),p.current=!1,f(!1)}),[f]),b=(0,r.useCallback)((e=>{setTimeout((()=>{if(e.preventDefault(),!p.current)return;const t=h.current,n=e.screenX-t.x,i=e.screenY-t.y;if(o){const t=window.innerWidth-e.changedTouches[0].clientX,n=window.innerWidth-e.changedTouches[0].clientY;return s({l:Math.min(L.r,Math.max(t,L.l)),t:Math.min(L.b,Math.max(n,L.t))})}const r=u.current;if(!r)return;const{l:a,t:l}=r,d=a+n,f=l+i;s({l:Math.min(c.r,Math.max(d,c.l)),t:Math.min(c.b,Math.max(f,c.t))}),h.current={x:e.screenX,y:e.screenY}}),15)}),[s,o,u]);return(0,r.useEffect)((()=>{if(d.current)return window.addEventListener(o?"touchmove":"mousemove",b),window.addEventListener(o?"touchend":"mouseup",g),d.current=!1,()=>{window.removeEventListener(o?"touchmove":"mousemove",b),window.removeEventListener(o?"touchend":"mouseup",g)}}),[g,b,o]),(0,i.jsx)(a.Z,Object.assign({sx:Object.assign(Object.assign({},m),{transform:`translate(${l?Math.max(l.l,L.l):z.l}px, ${l?Math.max(l.t,L.t):z.t}px)`,zIndex:p.current?B.Z.zIndices.flashOrder:9}),className:t?"":"drag-hide"},{children:e}),void 0)}));var H=n(77711);const $=({onRemove:e})=>(0,i.jsx)(a.Z,Object.assign({sx:y},{children:(0,i.jsx)(H.Z,{className:"icon",size:8,onClick:e},void 0)}),void 0);var W=n(48658),A=n(33470);const K=[25,50,75,100],Q=r.memo((({onClose:e,onChange:t,percent:n,setPercent:o,precision:s})=>{const{curMaxBuyAmount:c,curMaxSellAmount:u,cUnit:d,unitAmountPrecision:p}=(0,l._k)(),f=(0,r.useMemo)((()=>(0,A.Jp)((0,A.Jp)(n/100,c).toFixed(p,1),1).toFixed(s,1)),[p,n,s]),h=(0,r.useMemo)((()=>(0,A.Jp)((0,A.Jp)(n/100,u).toFixed(p,1),1).toFixed(s,1)),[p,n,s]),x=(0,r.useCallback)((i=>{var r;const a=+(null===(r=i.currentTarget.dataset)||void 0===r?void 0:r.stepper);a!==n?(o(a),null==t||t(a)):null==e||e()}),[t,e,n,o]);return(0,i.jsxs)(a.Z,Object.assign({sx:g},{children:[(0,i.jsx)(a.Z,Object.assign({className:"position-value",justifyContent:"flex-end"},{children:n?(0,i.jsxs)(W.Z,{children:[f," ",d]},void 0):null}),void 0),(0,i.jsx)(a.Z,Object.assign({mx:"6px"},{children:K.map((e=>(0,i.jsxs)(a.Z,Object.assign({"data-stepper":e,onClick:x,className:n>=e?"container active":"container"},{children:[(0,i.jsx)(a.Z,{className:"stepper"},void 0),(0,i.jsxs)(W.Z,Object.assign({className:"value"},{children:[e,"%"]}),void 0)]}),e)))}),void 0),(0,i.jsx)(a.Z,Object.assign({className:"position-value",justifyContent:"flex-start"},{children:n?(0,i.jsxs)(W.Z,{children:[h," ",d]},void 0):null}),void 0)]}),void 0)})),V=r.memo((()=>{const[e,t]=(0,r.useState)(""),[n]=(0,l.hN)(),[h,x]=(0,r.useState)(!1),[g,m]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),y=(0,r.useRef)(null),C=(0,r.useRef)(null),j=(0,r.useRef)(null),Z=(0,r.useRef)(null),[O,_]=(0,r.useState)(0),{placeOrderReducer:S}=(0,l.b9)(),[E,[k,R]]=(0,l.z4)(),T=(0,l.j2)(),{marginAsset:N}=T,[I,M]=(0,r.useReducer)(S,{isFetching:!1,tradeCont:0,buyCont:0,buyQty:0,sellCont:0,sellQty:0,side:1,positionSide:s.PR.LONG}),{precision:P}=(0,l.ql)({quantity:e}),B=(0,r.useCallback)((()=>{t(""),_(0),v(!1),m("")}),[]),{side:L,tradeCont:z}=I,H=n?s.RS.OPEN:s.RS.BOTH,W=1===L?s.hp.BUY:s.hp.SELL,[,A]=(0,l.e5)(),K=(0,r.useCallback)((()=>{A(!1)}),[A]),V=(0,r.useCallback)((()=>{var e;null===(e=null==Z?void 0:Z.current)||void 0===e||e.focus()}),[]),G=(0,r.useCallback)((()=>{v(!1),_(0),t("")}),[]),Y=(0,r.useCallback)((()=>{e||G()}),[e,G]),{setMessageInfo:J}=(0,l.YT)(),U=(0,l.h5)(),X=(0,d.F)({afterSubmit:B,overrides:{positionDirection:H,timeInForce:p.rb.GTC,orderType:s.Jm.MARKET,reduceOnly:!1}});return(0,r.useEffect)((()=>{if(h){const{valid:t,message:n}=U(+z);if(!t)return m(n),J({message:n,variant:"error"}),void x(!1);X(Object.assign(Object.assign({},c.U),{buyOrderAmount:+z,sellOrderAmount:+z,side:W,unitAmount:e})),x(!1)}}),[X,W,O,z,h,U,J,e]),(0,r.useEffect)((function(){B()}),[E,B]),(0,r.useEffect)((function(){m("")}),[e]),(0,o.Z)(j,Y,["click"]),(0,i.jsxs)(q,Object.assign({visible:!0,draggableRef:y},{children:[(0,i.jsxs)(a.Z,Object.assign({ref:j,sx:{flexDirection:"column"}},{children:[(0,i.jsxs)(a.Z,Object.assign({justifyContent:"center"},{children:[(0,i.jsx)(D,{draggableRef:y},void 0),(0,i.jsxs)(a.Z,Object.assign({height:"40px",justifyContent:"stretch",bg:"popupBg",sx:{position:"relative"}},{children:[(0,i.jsx)(w,{positionDirection:H,handleClick:()=>{M({type:f.z,payload:{tradeCont:(null==I?void 0:I.buyCont)||(null==I?void 0:I.buyQty)}}),x(!0),V()},type:"bid",dispatch:M},void 0),(0,i.jsx)(F,{inputRef:Z,quantity:e,setQuantity:e=>{b&&!(e=>e.indexOf("%")>=0)(e)&&_(0),t(e)},dispatch:M,onFocus:()=>v(!0),submitError:g},void 0),(0,i.jsx)(w,{positionDirection:H,handleClick:()=>{M({type:f.z,payload:{tradeCont:(null==I?void 0:I.sellCont)||(null==I?void 0:I.sellQty)}}),x(!0),V()},type:"ask",dispatch:M},void 0)]}),void 0),(0,i.jsx)($,{onRemove:K},void 0)]}),void 0),b&&(0,i.jsx)(Q,{percent:O,setPercent:_,precision:P,onChange:e=>{t(`${e}%`)},onClose:G},void 0)]}),void 0),(0,i.jsx)(u.Z,{symbol:E,base:k,quote:R,ticker:T,ref:C,marginAsset:N},void 0)]}),void 0)}))},30998:(e,t,n)=>{n.d(t,{Nu:()=>g,Qy:()=>x,zz:()=>f,PH:()=>d,Lb:()=>p,kH:()=>h,Gt:()=>b,xG:()=>u});var i=n(74388),r=n(69099),o=n(44174);const a={keys:new Set,setItem(e,t,n){if("function"!=typeof n)return new Promise((n=>{this.keys.add(e),this[e]=t,n()}));this.keys.add(e),this[e]=t,n(null)},getItem(e,t){if("function"!=typeof t)return new Promise((t=>{t(this[e])}));t(this[e])},removeItem(e,t){if("function"!=typeof t)return new Promise((t=>{this[e]=void 0,this.keys.delete(e),t()}));this[e]=void 0,this.keys.delete(e),t(null)},clear(e){if("function"!=typeof e)return new Promise((e=>{this.keys.forEach((e=>{this[e]=void 0})),this.keys.clear(),e()}));this.keys.forEach((e=>{this[e]=void 0})),this.keys.clear(),e(null)},create(){return Object.create(this)}},l={setItem(e,t,n){const i="object"==typeof t?JSON.stringify(t):t;if("function"!=typeof n)return new Promise(((t,n)=>{try{window.localStorage.setItem(e,i),t()}catch(e){n(e)}}));try{window.localStorage.setItem(e,i),n(null)}catch(e){n(e)}},getItem(e,t){if("function"!=typeof t)return new Promise((t=>{t((0,o.As)(window.localStorage.getItem(e)))}));t(null,(0,o.As)(window.localStorage.getItem(e)))},removeItem(e,t){if("function"!=typeof t)return new Promise((t=>{window.localStorage.removeItem(e),t()}));window.localStorage.removeItem(e),t(null)},clear(e){if("function"!=typeof e)return new Promise((e=>{window.localStorage.clear(),e()}));window.localStorage.clear(),e(null)},create(){return Object.create(this)}};function s(e){const t=new Map;return function(n,...i){if(t.has(n))return t.get(n);const r=e(n,...i);return t.set(n,r),r}}function c({stateKey:e,storageKey:t=e,defaultValue:n,validator:r,storage:s}){const c=void 0!==(u=s)?u:"undefined"!=typeof window?l.create():a.create();var u,d;return(0,i.Z)((d=(t,i)=>({[e]:n,[`set${(0,o.kC)(e)}`]:n=>t({[e]:n}),[`toggle${(0,o.kC)(e)}`]:()=>t({[e]:!i()[e]})}),(i,a,l)=>{const s=d((n=>{i(n);const r=a()[e];c.setItem(t,r)}),a);let u={};return"undefined"!=typeof window&&c.getItem(t,((t,i)=>{let o;o="function"==typeof r?r(i)?i:n:null!=i?i:n,u={[e]:o}})),Object.assign(Object.assign(Object.assign({},s),u),{[`clear${(0,o.kC)(e)}`](){c.removeItem(t),i(s)}})}))}const u=(0,i.Z)((e=>({disableMouse:!1,setDisableMouse:t=>e({disableMouse:t})}))),d=s((function(e){return c({stateKey:"miniMultiChartType",storageKey:`${e}-chart-miniMultiChartType`,defaultValue:r.k.Store.ChartMode.Single})})),p=s((function(e){return c({stateKey:"miniMultiChartWindows",storageKey:`${e}-chart-miniMultiChartWindows`,defaultValue:["","","",""]})})),f=s((function(e){return c({stateKey:"lastSelectedMiniMultiChartWindow",storageKey:`${e}-chart-lastSelectedMiniMultiChartWindow`,defaultValue:0})})),h=s((function(e){return c({stateKey:"priceType",storageKey:`${e}-chart-priceType`,defaultValue:r.k.Store.PriceType.Last})})),x=s((function(e){return c({stateKey:"interval",storageKey:`${e}-chart-interval`,defaultValue:r.k.Store.DisplayIntervals["1d"]})})),g=s((function(e){return c({stateKey:"chartType",storageKey:`${e}-chart-type`,defaultValue:r.k.Store.OriginalChartStyle.CandleBar})}));var m=n(15729);const b=(0,i.Z)((e=>({posCalcData:{},setPosCalcData:(t,n,i)=>e((0,m.ZP)((e=>{e.posCalcData[t]||(e.posCalcData[t]={}),t&&n&&e.posCalcData[t][n]!==i&&(e.posCalcData[t][n]=i)})))})))}}]);