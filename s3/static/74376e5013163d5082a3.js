"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[7498],{77594:(e,n,i)=>{i.d(n,{Z:()=>r});var t=i(5163),a=i(2784),o=i(98569);const r=function(e){return a.createElement(o.Z,(0,t.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),a.createElement("path",{d:"M3 10.5v3h18v-3H3z",fill:"currentColor"}))}},86957:(e,n,i)=>{i.d(n,{Z:()=>r});var t=i(5163),a=i(2784),o=i(98569);const r=function(e){return a.createElement(o.Z,(0,t.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),a.createElement("path",{d:"M13.5 3h-3v7.5H3v3h7.5V21h3v-7.5H21v-3h-7.5V3z",fill:"currentColor"}))}},51259:(e,n,i)=>{i.d(n,{Z:()=>c});var t=i(5163),a=i(2784),o=i(20573),r=i(5049),s=i(92036),l=i(62143),d=(0,r.Z)();const c=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.displayName="StyledSlider",n.start=0,n.width=0,n.isButtonMoving=!1,n.bar=a.createRef(),n.wrapper=a.createRef(),n.handleButtonDown=function(){n.isButtonMoving=!0},n.handleButtonMove=function(e){n.isButtonMoving&&n.handleProgressChange(e)},n.handleButtonUp=function(){n.isButtonMoving=!1},n.handleProgressChange=function(e){n.setBarStartAndWidth();var i=n.props,t=i.progress,a=i.range,o=i.max,r=void 0===o?a.max:o,s=i.onChange,l=((e.pageX||e.touches&&e.touches[0].pageX)-n.start)/n.width,d=Math.round((a.max-a.min)*l+a.min);d<a.min&&(d=a.min),d>r&&(d=r),d===t||Number.isNaN(d)||(requestAnimationFrame?requestAnimationFrame((function(){return s(d)})):s(d))},n}return(0,t.__extends)(n,e),n.prototype.componentDidMount=function(){var e;this.setBarStartAndWidth(),null===(e=this.wrapper.current)||void 0===e||e.addEventListener("mouseleave",this.handleButtonUp),window.addEventListener("mousemove",this.handleButtonMove),window.addEventListener("mouseup",this.handleButtonUp),window.addEventListener("touchmove",this.handleButtonMove),window.addEventListener("touchend",this.handleButtonUp),window.addEventListener("touchcancel",this.handleButtonUp)},n.prototype.componentWillUnmount=function(){var e;null===(e=this.wrapper.current)||void 0===e||e.removeEventListener("mouseleave",this.handleButtonUp),window.removeEventListener("mousemove",this.handleButtonMove),window.removeEventListener("mouseup",this.handleButtonUp),window.removeEventListener("touchmove",this.handleButtonMove),window.removeEventListener("touchend",this.handleButtonUp),window.removeEventListener("touchcancel",this.handleButtonUp)},n.prototype.setBarStartAndWidth=function(){if(this.bar.current){var e=document.documentElement.scrollLeft||document.body.scrollLeft,n=this.bar.current.getBoundingClientRect();this.start=n.left+e,this.width=n.right-n.left}},n.prototype.render=function(){var e=this.props,n=e.variant,i=void 0===n?"default":n,r=e.progress,c=e.range,u=e.max,v=void 0===u?c.max:u,g=e.onChange,h=e.unit,p=void 0===h?"":h,m=e.steppers,b=void 0===m?[]:m,f=e.showScales,x=void 0!==f&&f,L=(0,t.__rest)(e,["variant","progress","range","max","onChange","unit","steppers","showScales"]),y=Math.round((v-c.min)/(c.max-c.min)*100),j=Math.round((r-c.min)/(v-c.min)*100),w=Math.round((r-c.min)/(c.max-c.min)*100);return a.createElement(o.nq,{value:d},a.createElement(s.Z,(0,t.__assign)({ref:this.wrapper,tx:"styledSlider",variant:i},L,{dir:"ltr"}),a.createElement(s.Z,{ref:this.bar,className:"bn-slider-container"},a.createElement(l.Z,{className:"bn-slider-available-bar",width:y+"%",onClick:this.handleProgressChange},a.createElement(l.Z,{className:"bn-slider-progress-bar",height:"100%",width:j+"%"})),a.createElement(l.Z,{className:"bn-slider-disabled-bar",ml:y+"%",width:100-y+"%"}),a.createElement(l.Z,{className:"bn-slider-radio-button",onMouseDown:this.handleButtonDown,onTouchStart:this.handleButtonDown,sx:{ml:w+"%"}}),a.createElement(l.Z,{className:"bn-slider-radio-tooltip",as:"label",sx:{ml:w+"%"}},r+p),a.createElement(l.Z,{className:"bn-slider-stepper bn-slider-split-stepper",ml:y+"%",onClick:this.handleProgressChange}),b.map((function(e){var n=Math.round((e-c.min)/(c.max-c.min)*100),i="bn-slider-stepper";return e>v&&(i+=" bn-slider-disabled-stepper"),e<=r&&(i+=" bn-slider-progress-stepper"),a.createElement(l.Z,{className:i,key:e,ml:n+"%",onClick:function(){return e<=v&&g(e)}},x&&a.createElement(l.Z,{className:"bn-slider-scale"},e+p))})))))},n}(a.PureComponent)},27498:(e,n,i)=>{i.d(n,{Z:()=>R,O:()=>z});var t=i(52322),a=i(2784),o=i(39727),r=i(42902),s=i(72779),l=i.n(s),d=i(87612),c=i(21209),u=i(48658),v=i(86828),g=i(45362),h=i(77711),p=i(53935),m=i(81993),b=i(51259),f=i(92036),x=i(77594),L=i(86957),y=i(16831);const j={width:["calc(100vw - 32px)","384px"],padding:"20px 24px 24px",bg:"modalBg",color:"t.secondary",borderRadius:"8px",".title":{display:"flex",alignItems:"center",mb:"28px",fontSize:["16px","20px"],color:"t.primary"},".close":{marginLeft:"auto",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},".body":{display:"flex",flexDirection:"column"},".label":{mb:"4px",fontSize:"14px",lineHeight:"20px"},".info-list":{mb:"16px",fontSize:"12px",lineHeight:"16px",".bold":{fontWeight:500},".info-link-wrap":{mt:"xs","& a":{textDecoration:"none"}},".info-link":{ml:"4px",textDecoration:"none"}},".info-item":{visibility:"hidden","&.visible":{visibility:"visible"}},".warning-info":{display:"flex",flexDirection:"row",mb:"24px",fontSize:"12px",lineHeight:"16px",color:"t.sell",visibility:"hidden","&.visible":{visibility:"visible"},".info-icon":{flexShrink:0},".info-link":{color:"t.sell"}},".footer":{height:"48px"},".slider-container":{mt:"8px",mb:"31px","> div":{px:["","","0"]},"label.bn-slider-radio-tooltip":{bg:"transparent",color:"t.secondary",fontSize:"14px"},".bn-slider-scale":{color:"t.third"},".bn-slider-progress-stepper, .bn-slider-radio-button::after, .bn-slider-stepper:hover":{borderColor:"modalBg"},".bn-slider-stepper":{bg:"modalBg"},".bn-slider-progress-bar, .bn-slider-progress-stepper":{bg:"t.secondary"}}},w={justifyContent:"space-between",height:"48px",padding:"12px",bg:"bg3",borderRadius:"4px",".icon-btn":{color:"t.third","&:hover":{color:"t.primary",cursor:"pointer"},"&.disabled":{color:"t.placeholder",cursor:"not-allowed"}}};const k={sx:{width:"42px",height:"100%",mt:0,border:"none",fontSize:"16px",lineHeight:"16px",color:"t.primary","> input":{textAlign:"right"},"> .bn-input-suffix":{marginLeft:0,fontSize:"16px",lineHeight:"16px"}}},C=a.memo((e=>{var{value:n=0,onChangeValue:i,min:a,max:o,step:r=1,suffix:s}=e,d=function(e,n){var i={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(i[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(i[t[a]]=e[t[a]])}return i}(e,["value","onChangeValue","min","max","step","suffix"]);return(0,t.jsxs)(f.Z,Object.assign({sx:w,className:"leverage-container"},d,{children:[(0,t.jsx)(x.Z,{className:l()({"icon-btn":!0,disabled:n===a}),onClick:()=>i(Math.max(n-r,a))},void 0),(0,t.jsx)(y.Z,{value:n,onKeyPress:e=>/[^\d]/.test(e.key)&&e.preventDefault(),onChange:e=>{const n=e.target;let t=Number(n.value)||0;t=t>=o?o:t<=a?a:t,i(t)},boxProps:k,suffix:s},void 0),(0,t.jsx)(L.Z,{className:l()({"icon-btn":!0,disabled:n===o}),onClick:()=>i(Math.min(n+r,o))},void 0)]}),void 0)}));var O=i(83092);var N;!function(e){e.LONG="LONG",e.SHORT="SHORT",e.BOTH="BOTH"}(N||(N={}));const E=(e,n)=>((e,n)=>{let i=0;for(;i<e.length;){const t=e[i];if(n<t.bracketNotionalCap)return t;i+=1}return i&&e[i-1]})(e,n);var M=i(97060),B=i(17584);const S=e=>{var n,i;const{isLoggedIn:o,lng:r,brackets:s,leverage:f,positions:x,symbol:L,onChangeLeverage:y,ticker:{marginAsset:w},visible:k,onClose:S,toLogin:Z=(()=>{}),enableErrorMsgIntercept:V=!1,liquidationInfoLink:_,tradingRuleLink:I,positionLimitEnargeLink:P,loginText:H,sx:z={}}=e,{leverageData:R,updateUserLeverage:A,findLeverageByLevel:D}=(({symbol:e,lng:n,brackets:i,leverage:t,positions:a})=>{var o,r,s,l;const d=(null==i?void 0:i[e])||[],c=Math.abs((null===(o=null==a?void 0:a[e])||void 0===o?void 0:o.notionalValue)||0)+Math.abs((null===(r=null==a?void 0:a[`${e}_${N.LONG}`])||void 0===r?void 0:r.notionalValue)||0)+Math.abs((null===(s=null==a?void 0:a[`${e}_${N.SHORT}`])||void 0===s?void 0:s.notionalValue)||0);return{leverageData:{curLeverage:t||20,minVal:0,maxVal:(null===(l=null==d?void 0:d[0])||void 0===l?void 0:l.maxOpenPosLeverage)||125,userNotionalValue:c,userCurLeverage:E(d,c)},updateUserLeverage:n=>(0,O.Z)({symbol:e,leverage:n}),findLeverageByLevel:e=>((e,n)=>{let i=0;const t=[...e].reverse();for(;i<t.length;){const e=t[i],a=e.maxOpenPosLeverage;if(n===a)return e;if(n<a)return t[Math.max(i,0)];i+=1}return i&&t[i-1]})(d,e)}})({symbol:L,lng:r,brackets:s,leverage:f,positions:x}),{getI18n:T,t:U,i18n:{language:$="en"}}=(0,M.yk)(),q=(({positions:e,symbol:n})=>{var i,t,a,o;const r=null===(i=null==e?void 0:e[n])||void 0===i?void 0:i.positionSize,s=null===(t=null==e?void 0:e[`${n}_${N.LONG}`])||void 0===t?void 0:t.positionSize,l=null===(a=null==e?void 0:e[`${n}_${N.SHORT}`])||void 0===a?void 0:a.positionSize;return!(!(r||s||l)||!(null===(o=null==e?void 0:e[n])||void 0===o?void 0:o.isolated))})({positions:x,symbol:L}),{curLeverage:W,userNotionalValue:G,userCurLeverage:F,minVal:K,maxVal:Y}=R,[J,X]=(0,a.useState)(W),{bracketNotionalFloor:Q,maxOpenPosLeverage:ee=125}=F,{enqueueNotification:ne}=(0,m.Z)(),ie=K+1,te=(0,a.useMemo)((()=>{const e=Math.max(Y,W);let n=[];if(e<10){n=[];for(let i=1;i<=e;i++)n.push(i)}else{n=[ie];for(let i=1;i<=5;i++)n.push(Math.floor(i/5*e))}return n}),[W,Y,ie]);(0,a.useEffect)((()=>{X(W)}),[W]),(0,a.useEffect)((()=>{k||X(W)}),[W,k]);const ae=(0,a.useCallback)((()=>{return e=void 0,n=void 0,t=function*(){if(W===J)return void S();const{success:e,message:n}=yield A(J);if(e)R.curLeverage=J,y(J),S(),ne({message:T("adjustLeverage-success",{defaultValue:"Adjust leverage success"}),variant:"success"});else{if(V)return;ne({message:n||T("adjustLeverage-failure",{defaultValue:""}),variant:"error"})}},new((i=void 0)||(i=Promise))((function(a,o){function r(e){try{l(t.next(e))}catch(e){o(e)}}function s(e){try{l(t.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,s)}l((t=t.apply(e,n||[])).next())}));var e,n,i,t}),[W,J,A,ne,S,T,R,y,V]),{bracketSeq:oe}=D(J)||{},re=oe===(null===(n=null==s?void 0:s[L])||void 0===n?void 0:n.length),se=(0,a.useMemo)((()=>({min:ie,max:Math.max(Y,W)})),[W,Y,ie]),le=(0,a.useCallback)((()=>{Z&&Z($)}),[$,Z]),de=null===(i=D(J))||void 0===i?void 0:i.bracketNotionalCap,ce=de>1e11;return(0,a.useMemo)((()=>{var e;return(0,t.jsxs)(c.Z,Object.assign({sx:Object.assign(Object.assign({},j),z),visible:k,onMaskClick:S},{children:[(0,t.jsxs)(u.Z,Object.assign({variant:"headline6",className:"title"},{children:[T("AdjustLeverageTitle",{defaultValue:"Adjust Leverage"}),(0,t.jsx)(h.Z,{className:"close",onClick:S},void 0)]}),void 0),(0,t.jsxs)("div",Object.assign({className:"body"},{children:[(0,t.jsx)("div",Object.assign({className:"label"},{children:T("LeverageLabel",{defaultValue:"Leverage"})}),void 0),(0,t.jsx)(C,{value:J,onChangeValue:X,min:K,max:ee,suffix:"x"},void 0),(0,t.jsx)("div",Object.assign({className:"slider-container"},{children:(0,t.jsx)(b.Z,{max:ee,color:"t.third",progress:J||ie,onChange:X,steppers:te,unit:"x",range:se,showScales:!0},void 0)}),void 0),(0,t.jsxs)("div",Object.assign({className:"info-list"},{children:[!ce&&(0,t.jsx)("ul",Object.assign({style:{paddingInlineStart:"1em",margin:0}},{children:(0,t.jsxs)("li",{children:[T("AvailablePositionsTip",{defaultValue:"Maximum position at current leverage:"})," ",(0,t.jsx)("span",Object.assign({className:"bold"},{children:(0,B.kh)(de)}),void 0)," ",w]},void 0)}),void 0),q&&(0,t.jsx)("ul",Object.assign({style:{paddingInlineStart:"1em",margin:0}},{children:(0,t.jsx)("li",{children:T("leverage-isolated-can-higher",{defaultValue:"You can only increase leverage when holding isolated positions, please adjust your leverage accordingly."})},void 0)}),void 0),!re&&I&&(0,t.jsx)("div",Object.assign({className:"info-link-wrap"},{children:(0,t.jsx)(v.Z,Object.assign({href:I,target:"_blank"},{children:T("leverageMargin-tradingRule-link",{defaultValue:"Check on Leverage & Margin table"})}),void 0)}),void 0),o&&P&&(0,t.jsx)("div",Object.assign({className:"info-link-wrap"},{children:(0,t.jsx)(v.Z,Object.assign({href:P,target:"_blank"},{children:T("positionLimitEnarge",{defaultValue:"Position Limit Enarge"})}),void 0)}),void 0),o&&G>=(null===(e=null==s?void 0:s[L])||void 0===e?void 0:e[0].bracketNotionalCap)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"Â· "},void 0),T("positionPlusOpenOrders",{defaultValue:"Positions + open orders"})," ",(0,t.jsx)("span",{children:(0,B.kh)(Q)},void 0)," ",w,","," ",T("biggestLeverageIs",{defaultValue:"your biggest leverage is"}),(0,t.jsxs)("span",Object.assign({className:"bold"},{children:[" ",ee,"x"]}),void 0)]},void 0)]}),void 0),(0,t.jsxs)("div",Object.assign({className:l()({"warning-info":!0,visible:o&&J>10})},{children:[(0,t.jsx)(p.Z,{className:"info-icon",color:"t.sell",verticalAlign:"-3px",size:14,mr:1,name:"information-o"},void 0),(0,t.jsx)("div",{children:(0,t.jsx)(d.c,{t:U,i18nKey:"futures-trade-leverageHighRiskTip",defaults:"Selecting higher leverage such as[{{leverage}}x] increases your liquidation risk. Always manage your risk levels. See our <infoLink>help article</infoLink> for more information.",components:{infoLink:(0,t.jsx)(v.Z,{className:"info-link",href:_,target:"_blank"},void 0)},values:{leverage:10}},void 0)},void 0)]}),void 0)]}),void 0),(0,t.jsx)("div",Object.assign({className:"footer"},{children:o?(0,t.jsx)(g.Z,Object.assign({width:1,py:"10px",variant:"primary",disabled:0===J,onClick:ae},{children:T("confirmBtn",{defaultValue:"Confirm"})}),void 0):(0,t.jsx)(g.Z,Object.assign({width:1,py:"10px",variant:"primary",onClick:le,"data-testid":"lev_login"},{children:H||T("tabLogIn",{defaultValue:"LogIn"})}),void 0)}),void 0)]}),void 0)}),[k,S,T,J,K,ee,ie,te,se,re,D,w,o,G,s,L,Q,U,_,ae,H,le,q,P,I])};var Z=i(38896),V=i(23131),_=i(75038),I=i(2896),P=i(44174),H=i(93603);const z=()=>{const e=(0,o.I0)(),n=(0,M.tZ)(),i=(0,o.v9)(_.Y),{curLeverage:t}=(0,Z.rf)(),r=(0,Z.$J)(),[s]=(0,Z.z4)(),l=(0,a.useCallback)((n=>{e.leverage.updateCurrentLeverage({symbol:s,leverage:n})}),[e.leverage,s]);return{lng:n,brackets:i,leverage:t,positions:r,symbol:s,onChangeLeverage:l}};function R({visible:e,onClose:n}){const i=(0,o.I0)(),s=(0,Z._n)(),l=(0,M.tZ)(),d=(0,o.v9)(_.Y),{curLeverage:c}=(0,Z.rf)(),u=(0,Z.$J)(),[v]=(0,Z.z4)(),g=(0,Z.j2)(),h=(0,a.useCallback)((e=>{i.leverage.updateCurrentLeverage({symbol:v,leverage:e}),I.ee.emit("SET_SLIDER_AMOUNT",0)}),[i.leverage,v]),{getI18n:p}=(0,M.HK)(),{showWalletConnectDialog:m}=(0,H.dc)(),b=p("dex-header-ConnectWallet");return(0,t.jsx)(S,{visible:e,symbol:v,isLoggedIn:s,lng:l,brackets:d,leverage:c,positions:u,ticker:g,onChangeLeverage:h,onClose:n,toLogin:m,loginText:b,enableErrorMsgIntercept:!0,tradingRuleLink:"",positionLimitEnargeLink:"",liquidationInfoLink:(0,P.CN)(V.Wh.LIQ_PRICE,{locale:(0,r.s)(l)})},void 0)}}}]);