"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[8715],{44329:(e,s,t)=>{t.d(s,{Z:()=>d});var i=t(5163),o=t(2784),a=t(62143),n=t(92036),r=(0,o.forwardRef)((function(e,s){var t=e.defaultChecked,r=void 0!==t&&t,d=e.checked,c=e.size,l=void 0===c?24:c,u=e.color,h=void 0===u?"primaryGradient":u,p=e.onClick,g=e.onChange,b=e.name,m=e.disabled,f=e.icon,x=void 0===f?null:f,j=e.reverseDirection,v=(0,i.__rest)(e,["defaultChecked","checked","size","color","onClick","onChange","name","disabled","icon","reverseDirection"]),M=o.useRef(null!=d).current,y=o.useState(r),O=y[0],C=y[1];M&&d!==O&&C(void 0!==d&&d);var k=Math.abs(l),S=Math.round(5*k/3),Z=18*k/24,A=k/24*3;return o.createElement(a.Z,(0,i.__assign)({ref:s,as:"button",type:"button",role:"switch",style:{direction:"ltr"},disabled:m,"aria-checked":O,onClick:function(e){if(!m){var s=!O;M||C(s),e.target.checked=s,p&&p(e),g&&g(e)}}},v,{sx:{cursor:"pointer",appearance:"none",m:0,p:0,width:S,height:k,bg:function(e){return e.colors&&e.colors.disableBg},backgroundImage:function(e){return e.colors&&e.colors.disableBg},border:"none",borderRadius:9999,"&[aria-checked=true]":{bg:function(e){return e.colors&&e.colors[h]||h},backgroundImage:function(e){return e.colors&&e.colors[h]}},":focus":{outline:"none"},":disabled":{cursor:"not-allowed",opacity:.7}}}),o.createElement(n.Z,{style:{transform:O?"translateX("+(j?0:S-2*A-Z)+"px)":"translateX("+(j?S-2*A-Z:0)+"px)"},sx:{mx:A+"px",width:Z,height:Z,borderRadius:9999,boxShadow:"card",bg:"t.white",transitionProperty:"transform, border-color",transitionTimingFunction:"ease-in-out",transitionDuration:"0.2s",justifyContent:"center",alignItems:"center"}},x),o.createElement(a.Z,{as:"input",type:"checkbox","data-bn-type":"checkbox",onChange:function(){},name:b,checked:O,__css:{display:"none"}}))}));r.displayName="Switch";const d=r},28715:(e,s,t)=>{t.r(s),t.d(s,{AssetModeDialog:()=>P,AssetModeForm:()=>R,AssetModeFormComponent:()=>F,PositionSideForm:()=>T,default:()=>_});var i=t(52322),o=t(2784),a=t(39727),n=t(87612),r=t(76699),d=t(42902),c=t(21209),l=t(48658),u=t(62143),h=t(92036),p=t(44329),g=t(45362),b=t(74900),m=t(86828),f=t(77711),x=t(81993),j=t(25181),v=t(77536),M=t(23131),y=t(2896),O=t(38896),C=t(97060);const k={bg:"orderformBg",width:["calc(100vw - 32px)","384px"],position:"relative",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.02)",borderRadius:"4px",userSelect:"none",padding:"24px",".desc":{fontSize:"sm",mb:"24px",color:"t.third",wordBreak:"break-word",lineHeight:"20px"},".cancel-button-container":{width:["calc(100vw - 32px)","164px"],height:"40px",borderRadius:"4px",button:{padding:0}},".confirm-button-container":{width:["calc(100vw - 32px)","164px"],height:"40px",borderRadius:"4px",button:{padding:0}}};var S=t(96406);const Z=(0,M.nM)(),A={LIMIT:"limit",MARKET:"market",STOP:"stopLimit",STOP_MARKET:"stopMarket",TRAILING_STOP_MARKET:"trailingStopMarket"},w=[{i18n:"order-confirmation",defaultI18n:"Order Confirmation",key:"oc"},{i18n:"position-mode",defaultI18n:"Position Mode",key:"pm"},{i18n:"assetMode",defaultI18n:"Asset Mode",key:"am"}],I={bg:"modalBg",width:["calc(100vw - 32px)","640px"],height:"560px",position:"relative",boxShadow:"elevation3",borderRadius:"4px",userSelect:"none",".header-container":{px:["16px","md"],pt:["16px","20px"],pb:["0px","20px"],height:"64px",borderBottomWidth:["0px","0.5px"],borderBottomStyle:["none","solid"],borderBottomColor:"line"},".header-title":{fontSize:"plus",color:"t.primary"},".header-close":{color:"t.third",fontSize:"24px",cursor:"pointer",":hover":{color:"t.primary"}},".desc":{fontSize:"14px",lineHeight:"18px",color:"t.third",ml:"25px",mt:"8px",whiteSpace:"pre-line"},".label":{color:"t.primary",fontSize:"md",fontWeight:500},".content":{fontSize:"sm",lineHeight:"20px",letterSpacing:"0.16px",color:"t.secondary",mt:"40px"},".switch-container":{flexDirection:"column",justifyContent:"center",minHeight:"40px",borderBottom:"1px solid",borderColor:"line",py:"10px",":first-child":{pt:"0px"}},".switch-header":{width:"100%",justifyContent:"space-between","button[aria-checked=false]":{bg:"bg3"}}},P=({confirmVisible:e,setConfirmVisible:s})=>{const t=(0,a.I0)(),{getI18n:r}=(0,C.yk)(),{t:d}=(0,C.oz)(),b=(0,S.I)((e=>e.assetMode)),[m,f]=(0,o.useState)(!1),{setMessageInfo:x}=(0,O.YT)(),j=(0,O.$J)(),v=(0,o.useRef)({});Object.values(j).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:s}=e;return!v.current[s]&&(v.current[s]=e,!0)}return!1}));const y=Boolean(Object.values(v.current).filter((e=>e.isolated&&"BOTH"===e.positionSide)).length),Z=(0,o.useCallback)((e=>t.preference.changeAssetMode({joinMargin:e})),[t.preference]),A=(0,o.useCallback)(((e,s)=>t.marginType.changeMarginType({marginType:s?M.Yl.CROSSED:M.Yl.ISOLATED,symbol:e})),[t.marginType]);return(0,i.jsxs)(c.Z,Object.assign({visible:e,sx:k},{children:[(0,i.jsx)(l.Z,Object.assign({className:"desc"},{children:(0,i.jsx)(n.c,{t:d,i18nKey:(0,C.rI)("isolatedAssetModeDes"),defaults:"Isolated margin positions are not supported under the Multi-Assets Mode. Please adjust all USDⓈ-M Futures positions to cross margin mode in order to activate Multi-Assets Mode.",components:{text:(0,i.jsx)(l.Z,{},void 0),jump:(0,i.jsx)(l.Z,{tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"}},void 0)},values:{isolatedMode:r("isolatedMode",{defaultValue:"Isolated Mode"}),crossMode:r("crossMode",{defaultValue:"Cross Mode"})}},void 0)}),void 0),(0,i.jsxs)(u.Z,Object.assign({mb:"24px",overflowY:"auto",maxHeight:"300px",width:"100%",pr:"12px"},{children:[Object.values(v.current).map((e=>{const{isolated:s,symbol:t,id:o}=e,a=s?r("headerIsolated",{defaultValue:"Isolated"}):r("header-Cross",{defaultValue:"Cross"});return(0,i.jsxs)(h.Z,Object.assign({mb:"8px",justifyContent:"space-between"},{children:[(0,i.jsx)(h.Z,Object.assign({mb:0,className:"desc"},{children:t}),void 0),(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(h.Z,Object.assign({mb:0,mr:"8px",className:"desc",fontSize:"12px"},{children:a}),void 0),(0,i.jsx)(p.Z,{sx:{"& div":{backgroundColor:"#FFFFFF"},"& input":{backgroundColor:"#C1C6CD"}},checked:!s,onChange:()=>{m||(f(!0),A(t,s).then((t=>{(null==t?void 0:t.marginType)&&(e.isolated=!s,x({header:r("changeMarginModeTitle",{defaultValue:"Adjust Margin"}),message:r("changeMarginModeSuccess",{defaultValue:"change margin mode success"}),variant:"success"})),f(!1)})))},name:o,color:"t.buy",size:16},void 0)]},void 0)]}),o)})),(0,i.jsx)(h.Z,Object.assign({fontSize:"12px",color:"t.sell"},{children:r("switchCrossMode",{defaultValue:"*Please switch all positions to cross mode."})}),void 0)]}),void 0),(0,i.jsxs)(h.Z,Object.assign({width:"100%",justifyContent:"space-around"},{children:[(0,i.jsx)("div",Object.assign({className:"cancel-button-container"},{children:(0,i.jsx)(g.Z,Object.assign({variant:"default",colorStyle:"secondary",height:40,width:"100%",onClick:()=>{s(!1)}},{children:r("cancelBtnText",{defaultValue:"Cancel"})}),void 0)}),void 0),(0,i.jsx)("div",Object.assign({className:"confirm-button-container"},{children:(0,i.jsx)(g.Z,Object.assign({height:40,width:"100%",disabled:y,onClick:()=>{m||(f(!0),Z(b).then((e=>{const{success:t}=e;t&&x({header:r("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:r("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}),s(!1),f(!1)})))}},{children:r("PreferenceConfirm",{defaultValue:"Confirm"})}),void 0)}),void 0)]}),void 0)]}),void 0)},V=()=>{const{getI18n:e}=(0,C.yk)();return e(Z?"settingDelivery":"settingPerpetual",{defaultValue:Z?"This setting is only apply for Delivery Futures.":"This setting is only apply for Perpetual Futures."})},T=()=>{const e=(0,a.I0)(),{positionMode:s=!1}=(0,O.F7)(),{getI18n:t}=(0,C.yk)(),{enqueueNotification:n}=(0,x.Z)(),r=V(),d=(0,o.useCallback)((s=>e.preference.changePositionMode({dualSidePosition:s})),[e.preference]),c=(0,o.useCallback)((e=>{s!==e&&d(e).then((e=>{const{success:s}=e;s&&n({header:t("AdjustPositionMode",{defaultValue:"Adjust Position Mode"}),message:t("AdjustPositionModeSuccess",{defaultValue:"Position mode adjusted successfully."}),variant:"success"})}))}),[d,n,t,s]);return(0,i.jsxs)(u.Z,{children:[(0,i.jsxs)(u.Z,Object.assign({mt:"27px","data-testid":"One-wayMode"},{children:[(0,i.jsx)(b.ZP,Object.assign({name:"positionSide",value:"false",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!1===s,onCheckedChange:()=>{c(!1)}},{children:(0,i.jsx)(u.Z,Object.assign({className:"label"},{children:t("OneWayPosition",{defaultValue:"One-way Mode"})}),void 0)}),void 0),(0,i.jsx)(l.Z,Object.assign({className:"desc"},{children:t("OneWayModeDes",{defaultValue:""})}),void 0)]}),void 0),(0,i.jsxs)(u.Z,Object.assign({mt:"27px","data-testid":"HedgeMode"},{children:[(0,i.jsx)(b.ZP,Object.assign({name:"positionSide",value:"true",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!0===s,onCheckedChange:()=>{c(!0)}},{children:(0,i.jsx)(u.Z,Object.assign({className:"label"},{children:t("TwoWayPosition",{defaultValue:"Hedge Mode"})}),void 0)}),void 0),(0,i.jsx)(l.Z,Object.assign({className:"desc"},{children:t("TwoWayModeDes",{defaultValue:""})}),void 0)]}),void 0),(0,i.jsxs)(h.Z,Object.assign({className:"content"},{children:[t("AdjustPositionModeDes",{defaultValue:""})," ",r]}),void 0)]},void 0)},N=({name:e,label:s,checked:t,onChange:a,children:n})=>(0,o.useMemo)((()=>(0,i.jsxs)(h.Z,Object.assign({className:"switch-container"},{children:[(0,i.jsxs)(h.Z,Object.assign({className:"switch-header"},{children:[(0,i.jsx)(l.Z,Object.assign({className:"label"},{children:s}),void 0),(0,i.jsx)(p.Z,{color:"primary",checked:t,onChange:a,name:e,size:16},void 0)]}),void 0),n]}),void 0)),[t,n,s,e,a]),E=()=>{const e=(0,o.useRef)(["LIMIT","MARKET","STOP","STOP_MARKET","TRAILING_STOP_MARKET"]),{orderConfirmation:s}=(0,O.F7)(),{getI18n:t}=(0,C.yk)(),{setMessageInfo:n}=(0,O.YT)(),r=V(),d=(0,a.I0)(),c=(0,o.useCallback)((e=>d.preference.changeOrderConfirmation(e)),[d.preference]),l=(0,o.useCallback)((e=>{c(e).then((e=>{const{success:i}=e;i?n({header:t("changeOrderConfirmation",{defaultValue:"Change Order Confirmation"}),message:t("changeOrderConfirmationSuccess",{defaultValue:"Change Order Confirmation successfully."}),variant:"success"}):c(s)}))}),[c,n,t,s]);return(0,i.jsxs)(u.Z,{children:[e.current.map((e=>(0,i.jsx)(N,{name:e,label:`${t(A[e],{defaultValue:""})}   ${t("Order",{defaultValue:"Order"})}`,checked:s[e]||!1,onChange:t=>{const{target:i}=t;l(Object.assign(Object.assign({},s),{[e]:i.checked}))}},e))),(0,i.jsxs)(h.Z,Object.assign({className:"content",sx:{lineHeight:["20px","16px"]}},{children:[t("order-confirmation-content",{defaultValue:""})," ",r]}),void 0)]},void 0)},F=({setConfirmVisible:e,setAssetMode:s,isolatedPositionFlag:t=!1})=>{const c=(0,a.I0)(),{assetMode:p}=(0,O.F7)(),{getI18n:g}=(0,C.yk)(),{t:f}=(0,r.$)(),j=(0,C.tZ)(),{enqueueNotification:v}=(0,x.Z)(),[y,k]=(0,o.useState)(!1),S=(0,o.useCallback)((e=>c.preference.changeAssetMode({joinMargin:e})),[c.preference]),Z=(0,o.useCallback)((i=>{if(!y){if(t)return e(!0),void s(i);k(!0),S(i).then((e=>{const{success:t}=e;t?v({header:g("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:g("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}):s(i),k(!1)})).catch((()=>{k(!1),s(i)}))}}),[y,t,v,s,e,S,g]);return(0,i.jsxs)(u.Z,{children:[(0,i.jsxs)(u.Z,Object.assign({mb:"27px"},{children:[(0,i.jsx)(b.ZP,Object.assign({name:"assetMode",value:"false",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!1===p,onChange:()=>{Z(!1)}},{children:(0,i.jsx)(u.Z,Object.assign({className:"label"},{children:g("singleAsset",{defaultValue:"Single-Asset Mode"})}),void 0)}),void 0),(0,i.jsx)(l.Z,Object.assign({className:"desc"},{children:g("singleAssetDes",{defaultValue:"Supports USDⓈ-M Futures trading by only using the single margin asset of the symbol. \n PNL of the same margin asset positions can be offset. \n Supports Cross Margin Mode and Isolated Margin Mode."})}),void 0)]}),void 0),(0,i.jsxs)(u.Z,Object.assign({mb:"27px"},{children:[(0,i.jsx)(b.ZP,Object.assign({name:"assetMode",value:"true",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!0===p,onChange:()=>{Z(!0)}},{children:(0,i.jsx)(u.Z,Object.assign({className:"label"},{children:g("multiAssets",{defaultValue:"Multi-Assets Mode"})}),void 0)}),void 0),(0,i.jsx)(l.Z,Object.assign({className:"desc"},{children:g("multiAssetsDes",{defaultValue:"USDⓈ-M Futures trading across multiple margin assets. \n PNL can be offset among the different margin asset positions. \n Only supports Cross Margin Mode."})}),void 0)]}),void 0),(0,i.jsx)(h.Z,Object.assign({className:"content",flexDirection:"column"},{children:(0,i.jsx)(n.c,{t:f,i18nKey:(0,C.rI)("assetModeDes"),defaults:"<text>If there are open positions or open orders in USDⓈ-M Futures, Multi-Assets Mode cannot be activated. Multi-Assets Mode only applies to USDⓈ-M Futures.</text> <text>Before activating Multi-Assets Mode, please read the <jump>{{guide}}</jump> in detail to better manage USDⓈ-M Futures account risk accordingly when using Multi-Assets Mode.</text>",components:{text:(0,i.jsx)(l.Z,{mt:"8px"},void 0),jump:(0,i.jsx)(m.Z,{href:`${M.Td}/${(0,d.sU)(j)}/articles/4408166582041`,sx:{color:"primary",mt:"0 !important",display:"inline"},target:"_blank"},void 0)},values:{guide:g("guide",{defaultValue:"guide"})}},void 0)}),void 0)]},void 0)},R=o.memo(F),D=e=>{var{tabKey:s}=e,t=function(e,s){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&s.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)s.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(t[i[o]]=e[i[o]])}return t}(e,["tabKey"]);switch(s){case"pm":return(0,i.jsx)(T,{},void 0);case"oc":return(0,i.jsx)(E,{},void 0);case"am":return(0,i.jsx)(R,Object.assign({},t),void 0);default:return null}},_=(0,o.forwardRef)(((e,s)=>{const{getI18n:t}=(0,C.yk)(),[a,n]=(0,o.useState)({defaultActiveKey:"oc"}),{defaultActiveKey:r="oc"}=a,[d,p]=(0,o.useState)(!1),[g,b]=(0,o.useState)(r),m=(0,o.useCallback)((()=>{p(!1)}),[p]),x=(0,S.I)((e=>e.visible)),M=(0,S.I)((e=>e.setVisible)),k=(0,S.I)((e=>e.setAssetMode)),{multiAssetMarginEnable:A=!1}=(0,O.F7)(),V=(0,O.$J)(),T=new Set,N=Object.values(V).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:s}=e;return!T.has(s)&&(T.add(s),!0)}return!1})),E=Boolean(N.length),F=(0,o.useCallback)((e=>{p(!0),n(e)}),[p,n]);return(0,o.useImperativeHandle)(s,(()=>({showPreferencePanel:F}))),(0,o.useEffect)((()=>y.ee.on("SHOW_PREFERENCE_PANEL",(e=>{F({defaultActiveKey:e})}))),[F]),(0,o.useEffect)((()=>y.ee.on("CLOSE_PREFERENCE_PANEL",(()=>{m()}))),[m]),(0,o.useEffect)((()=>{b(r)}),[r]),(0,o.useMemo)((()=>d||x?(0,i.jsxs)(u.Z,{children:[(0,i.jsxs)(c.Z,Object.assign({visible:d,sx:I,onMaskClick:m},{children:[(0,i.jsxs)(h.Z,Object.assign({alignItems:"center",justifyContent:"space-between",className:"header-container"},{children:[(0,i.jsx)(l.Z,Object.assign({className:"header-title"},{children:t("preference",{defaultValue:"Preference"})}),void 0),(0,i.jsx)(f.Z,{className:"header-close",onClick:m},void 0)]}),void 0),(0,i.jsxs)(h.Z,Object.assign({sx:{height:"496px"}},{children:[(0,i.jsx)(j.Z,Object.assign({size:"large",variant:"vertical",defaultActiveKey:g,controlledKey:g,onChange:e=>b(e)},{children:w.map((({i18n:e,defaultI18n:s,key:o})=>"am"!==o||!Z&&A?(0,i.jsx)(v.Z,{tab:(0,i.jsx)(l.Z,Object.assign({variant:"subtitle2",marginRight:"24px",minWidth:"120px"},{children:t(e,{defaultValue:s})}),void 0),tabKey:o},o):(0,i.jsx)(i.Fragment,{},void 0)))}),void 0),(0,i.jsx)(u.Z,Object.assign({sx:{borderLeft:"0.5px solid",borderColor:"line"},px:"24px",py:"24px",height:"100%",flex:"1"},{children:(0,i.jsx)(D,Object.assign({tabKey:g},{setConfirmVisible:M,setAssetMode:k,isolatedPositionFlag:E}),void 0)}),void 0)]}),void 0)]}),void 0),(0,i.jsx)(P,{confirmVisible:x,setConfirmVisible:M},void 0)]},void 0):null),[d,x,m,t,g,M,k,E,A])}))},96406:(e,s,t)=>{t.d(s,{I:()=>i});const i=(0,t(74388).Z)((e=>({visible:!1,setVisible:s=>e((()=>({visible:s}))),assetMode:!1,setAssetMode:s=>e((()=>({assetMode:s})))})))}}]);