"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[6297],{85527:(e,t,n)=>{n.d(t,{Fg:()=>l});var s=n(2784),o=n(39727),i=function(e){return e.cookies||{}},c="dark",r="light",a="shouldResetTradingView",l=function(){var e,t,n=(e=(0,s.useRef)(null),t=(0,o.I0)(),e.current=(0,o.v9)(i),{cookies:e.current,saveCookie:(0,s.useCallback)((function(n,s){var o="function"==typeof s?s(e.current[n]):s;t.cookies.save({key:n,value:o})}),[])}),l=n.cookies,u=n.saveCookie,d=(0,s.useCallback)((function(){return JSON.parse(localStorage.getItem(a)||"0")}),[]),g=(0,s.useCallback)((function(){var e=d();localStorage.setItem(a,JSON.stringify(e+1))}),[d]);return{isLight:l.theme!==c,shouldResetTradingViewKey:a,getThemeCounter:d,incThemeCounter:g,toggleTheme:(0,s.useCallback)((function(){u("theme",(function(e){return e!==r?r:c})),g()}),[g])}}},71926:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(2784);const o=function(e,t){var n=(0,s.useRef)((function(){}));(0,s.useEffect)((function(){n.current=e})),(0,s.useEffect)((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},36297:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var s=n(52322),o=n(62143),i=n(55521),c=n(2784),r=n(48658),a=n(92036),l=n(76635),u=n(85527),d=n(71926),g=n(19614),f=n(23131);const h="t.third";let b,x;const v=Array.from({length:4},(()=>h));var p=n(97060);const m={mx:"10px",alignItems:"center",bg:"moduleBg",width:"auto","& .tips":{fontSize:"12px",ml:"10px",letterSpacing:"0.32px"},"& .disconnectedTips":{color:"t.secondary"},"& .stableTips":{color:"t.buy"},"& .reconnectingTips":{color:"primary"}},j=c.memo((({status:e,connectingDeco:t})=>{const{getI18n:n}=(0,p.yk)();switch(e){case"disconnected":return(0,s.jsx)(r.Z,Object.assign({className:"tips disconnectedTips"},{children:n("disconnected",{defaultValue:"Disconnected"})}),void 0);case"slow":return(0,s.jsx)(r.Z,Object.assign({className:"tips stableTips"},{children:n("unstableConnection",{defaultValue:"Unstable connection"})}),void 0);case"stable":return(0,s.jsx)(r.Z,Object.assign({className:"tips stableTips"},{children:n("stableConnection",{defaultValue:"Stable Connection"})}),void 0);case"reconnecting":return(0,s.jsxs)(r.Z,Object.assign({className:"tips reconnectingTips"},{children:[n("reconnection",{defaultValue:"Connecting"}),t]}),void 0);default:return(0,s.jsx)(r.Z,{className:"tips"},void 0)}})),w=c.memo((({colorList:e})=>(0,s.jsxs)("svg",Object.assign({width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,s.jsx)("rect",{y:"9.667",width:"1.67",height:"2.5",fill:e[0]},void 0),(0,s.jsx)("rect",{x:"4.44446",y:"5.667",width:"1.66667",height:"6.67",fill:e[1]},void 0),(0,s.jsx)("rect",{x:"8.88892",y:"3",width:"1.66667",height:"10.83",fill:e[2]},void 0),(0,s.jsx)("rect",{x:"13.3333",width:"1.66667",height:"15",fill:e[3]},void 0)]}),void 0))),k=function(){const{status:e,colorList:t,connectingDeco:n}=(({themeColor:e="buy"})=>{const t=Array.from({length:4},(()=>e)),n=(0,u.Fg)().isLight?g.ib:g.Cs,[s,o]=(0,c.useState)(""),[i,r]=(0,c.useState)(""),[a,p]=(0,c.useState)(!0),m=(0,c.useRef)(0),[j,w]=(0,c.useState)("connected"===s?t:v),[k,y]=(0,c.useState)(0),C=(0,f.l6)(!0);(0,c.useEffect)((()=>C.getStreamTickers().subscribe((()=>{b=Date.now()}))),[]);const S=(0,c.useRef)(new Set([]));return(0,c.useEffect)((()=>(0,f.l6)(!0).getOrderbookStatusStream().subscribe((({status:e})=>{S.current.has(e)?p("connected"===e):S.current.add(e)}))),[j,p]),(0,d.Z)((()=>{if(m.current>10)return o("disconnected"),void w(v);"reconnecting"===s?m.current+=1:m.current=0}),a?null:1e3),(0,c.useEffect)((()=>(0,f.l6)(!0).getSocketEventsStream().subscribe((({event:e})=>{"reConnected"===e&&(m.current=0,o("reconnecting"))})))),(0,d.Z)((()=>{b&&Date.now()-b>=5e3&&x!==b?(x=b,w([e,e,e,h]),o("slow")):(w(t),o("stable"))}),a?1e3:null),(0,d.Z)((()=>{const e=Array.from({length:4},((e,t)=>t<=k?"primary":h));y((k+1)%4),r(` ${Array.from({length:(k+1)%4},(()=>".")).join("")}`),o("reconnecting"),w(e)}),!a&&m.current<=10?500:null),{status:s,colorList:j.map((e=>(0,l.get)(n.colors,e,e))),connectingDeco:i}})({themeColor:"buy"});return(0,s.jsxs)(a.Z,Object.assign({sx:m},{children:[(0,s.jsx)(w,{colorList:t},void 0),(0,s.jsx)(j,{status:e,connectingDeco:n},void 0)]}),void 0)};var y=n(80920);const C={justifyContent:"space-between",height:"24px",width:"100vw",bg:"moduleBg",position:"fixed",bottom:"0px",zIndex:"100",borderTop:"1px solid",borderColor:"overallBg",display:"flex"},S={justifyContent:"flex-end",bg:"moduleBg",width:"100%",display:"flex",padding:["15px 0","0","0"],flexShrink:"0",position:"fixed",bottom:"0px",zIndex:2},O=({sx:e={}})=>(0,s.jsx)(o.Z,{sx:Object.assign(Object.assign({},S),e)},void 0),T=function({sx:e={}}){const{isMobile:t}=(0,i.F)();return t?(0,s.jsx)(O,{sx:e},void 0):(0,s.jsx)(o.Z,Object.assign({sx:Object.assign(Object.assign({},C),e),id:"trade-footer"},{children:(0,s.jsx)(y.Z,Object.assign({name:"connectStatus"},{children:(0,s.jsx)(k,{},void 0)}),void 0)}),void 0)}}}]);