"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[4724],{7247:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(5163),o=n(2784),a=n(98569);const r=function(e){return o.createElement(a.Z,(0,i.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),o.createElement("path",{d:"M17.879 7.707a1 1 0 111.414 1.414l-6.586 6.586a1 1 0 01-1.414 0L4.707 9.121a1 1 0 111.415-1.414L12 13.586l5.879-5.879z"}))}},82755:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(5163),o=n(2784),a=n(98569);const r=function(e){return o.createElement(a.Z,(0,i.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),o.createElement("path",{fillRule:"evenodd",d:"M7.071 6.343C8.6 4.815 9.881 4 12 4a8.001 8.001 0 017.938 7.002c.069.548.51.998 1.062.998s1.005-.449.95-.999C21.45 5.947 17.187 2 12 2 9.147 2 7.386 3.2 5.657 4.929L4 6.586V4a1 1 0 00-2 0v5a1 1 0 001 1h5a1 1 0 000-2H5.414l1.657-1.657zm9.858 11.314C15.4 19.185 14.119 20 12 20a8.001 8.001 0 01-7.938-7.002C3.993 12.45 3.552 12 3 12s-1.005.449-.95.999C2.55 18.053 6.813 22 12 22c2.852 0 4.614-1.2 6.343-2.929L20 17.414V20a1 1 0 102 0v-5a1 1 0 00-1-1h-5a1 1 0 100 2h2.586l-1.657 1.657z",clipRule:"evenodd"}))}},47101:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(5163),o=n(2784),a=n(98331),r=n(16831),l=n(98569);const s=function(e){return o.createElement(l.Z,(0,i.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),o.createElement("path",{fillRule:"evenodd",d:"M11 5a6 6 0 110 12 6 6 0 010-12zm8 6a8 8 0 10-3.094 6.32l3.973 3.973a1 1 0 001.414-1.414l-3.973-3.973A7.965 7.965 0 0019 11z",clipRule:"evenodd"}))},c=function(e){return o.createElement(l.Z,(0,i.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),o.createElement("path",{d:"M12 10.586l5.95-5.95a1 1 0 111.414 1.414L13.414 12l5.95 5.95a1 1 0 01-1.414 1.414L12 13.414l-5.95 5.95a1 1 0 01-1.414-1.414l5.95-5.95-5.95-5.95A1 1 0 116.05 4.636l5.95 5.95z"}))};var d={"&::placeholder":{fontSize:0,color:"t.disabled"}},u={"& input":{fontSize:0,mt:"-5px"},lineHeight:1.5,height:"24px"},p=(0,o.forwardRef)((function(e,t){var n=e.sx,l=e.value,p=e.search,m=e.placeholder,h=e.onFocus,f=e.onBlur,x=(0,i.__read)((0,o.useState)(l),2),b=x[0],g=x[1];return(0,a.Z)((function(){return p(b)}),100,[b]),o.createElement(r.Z,(0,i.__assign)({className:"trade-widget-search",ref:t,prefix:o.createElement(s,{size:20,color:"t.disabled"}),defaultValue:l,value:b,labelFixed:!0,placeholder:m,onChange:function(e){return g(e.target.value)},sx:d,"data-testid":"searchInput",boxProps:{sx:(0,i.__assign)((0,i.__assign)({},u),n)}},b.length>0&&{suffix:o.createElement(c,{fontSize:16,color:"t.disabled",onClick:function(){return g("")}})},{onFocus:h,onBlur:f}))}));const m=o.memo(p)},16831:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(5163),o=n(2784),a=n(62143),r=n(92036),l=n(48658),s=n(72779),c=n.n(s),d="32px",u="24px",p=(0,o.forwardRef)((function(e,t){var n=e.children,r=e.labelMarginLeft,l=e.moveUp,s=e.isLargeOutline,p=e.required;return n?o.createElement(a.Z,(0,i.__assign)({ref:t,as:"label",className:c()({"bn-input-label-required":p},"bn-input-label"),tx:"forms",variant:"label"},e,{__css:{position:"absolute",pointerEvents:l?"":"none",top:l?s?"-24px":"-32px":0,left:r,lineHeight:s?u:d,transitionProperty:"top,font-size",transitionDuration:".3s",transitionTimingFunction:"ease",zIndex:"1",cursor:"text","&.bn-input-label-required::before":{display:"inline-block",marginRight:"minor",color:"error",content:'"*"'}}})):null}));p.displayName="TextFieldLabel";var m=(0,o.forwardRef)((function(e,t){var n=e.onFocus,r=e.onBlur,l=e.onChange,s=e.type,c=(0,i.__rest)(e,["onFocus","onBlur","onChange","type"]),d="number"===s?{lang:"en"}:{};return o.createElement(a.Z,(0,i.__assign)({ref:t,as:"input","data-bn-type":"input"},d,c,{type:s,onFocus:n,onBlur:r,onChange:l,__css:{width:"100%",height:"100%",padding:"0",outline:"none",border:"none",bg:"inherit",opacity:1,"&::placeholder":{color:"t.placeholder",fontSize:"14px"}}}))}));m.displayName="TextFieldInput";var h=(0,o.forwardRef)((function(e,t){var n=e.variant,s=void 0===n?"default":n,c=e.id,h=e.value,f=e.defaultValue,x=e.label,b=e.labelFixed,g=void 0!==b&&b,v=e.placeholder,y=e.error,j=e.disabled,w=e.prefix,C=e.suffix,k=e.infoText,S=void 0===k?"":k,O=e.errorText,T=void 0===O?"":O,_=e.onFocus,W=e.onBlur,Z=e.onChange,B=e.boxProps,D=e.required,I=e.sx,N=void 0===I?{}:I,E=(0,i.__rest)(e,["variant","id","value","defaultValue","label","labelFixed","placeholder","error","disabled","prefix","suffix","infoText","errorText","onFocus","onBlur","onChange","boxProps","required","sx"]),L=o.useState(""),F=L[0],M=L[1],P=o.useRef(null!=h).current,R=o.useState(f),A=R[0],$=R[1];P&&h!==A&&$(h);var z=!x||g?v:"",V="outline"!==s&&"outlineLarge"!==s||g?"0px":"xs",U=y?"error":"info",G="inline"===s?"":y?T:S,H="inline"!==s?"":y?T:"focus"===F?S:"",q="outlineLarge"===s,J=j?"disabled":y?"error":F;""!==J&&(J="bn-input-status-"+J);var Q="string"==typeof x?x:E["area-label"];return o.createElement(r.Z,(0,i.__assign)({tx:"textField",className:J,variant:s},B,{__css:{display:"inline-flex",position:"relative",height:q?"40px":d,mt:x?q?u:d:"minor",mb:G.length>0?"16px":"0px",alignItems:"center",lineHeight:1.6,"&.bn-input-status-focus .bn-input-label":{top:q?"-24px":"-32px"}}}),w&&o.createElement(a.Z,{className:"bn-input-prefix"},w),o.createElement(m,(0,i.__assign)({id:c,onFocus:function(e){M("focus"),_&&_(e)},onBlur:function(e){M(""),W&&W(e)},onChange:function(e){P||$(e.target.value),Z&&Z(e)},ref:t,value:A,"aria-label":Q,disabled:j,placeholder:z,sx:N,required:D},E)),C&&o.createElement(a.Z,{className:"bn-input-suffix"},C),o.createElement(p,{htmlFor:c,labelMarginLeft:V,moveUp:g||!!A&&""!==A,isLargeOutline:q,required:D},x),G.length>0&&o.createElement(l.Z,{className:"bn-input-helper-text",variant:"textField.helperText."+U,__css:{position:"absolute",bottom:"-20px",lineHeight:"16px"}},G),H.length>0&&o.createElement(a.Z,{className:"bn-input-tooltip"},o.createElement(a.Z,{className:"bn-input-tooltip-arrow"}),o.createElement(a.Z,{className:"bn-input-tooltip-content"},H)))}));h.displayName="TextField";const f=h},77542:(e,t,n)=>{n.d(t,{L:()=>g});var i=n(52322),o=n(2784),a=n(5163),r=n(98569);const l=function(e){return o.createElement(r.Z,(0,a.__assign)({width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24"},e),o.createElement("path",{d:"M13.293 16.879a1 1 0 001.414 1.414l5.586-5.586a1 1 0 000-1.414l-5.586-5.586a1 1 0 10-1.414 1.414l3.879 3.88H4a1 1 0 100 2h13.172l-3.88 3.878z"}))};var s=n(92036),c=n(48658),d=n(59111),u=n(81722),p=n(97060);const{liteConfig:m}=d.ll,h={width:"24px",height:"24px",bg:"line",boxShadow:"elevation2",justifyContent:"center",alignItems:"center",borderRadius:"50%","&:not(:first-of-type)":{mr:"-8px"},img:{width:"16px",height:"16px"},"&.exchangeLogo":{img:{width:"20px",height:"20px",position:"relative"}}},f=({src:e,className:t})=>(0,i.jsx)(s.Z,Object.assign({sx:h,className:t},{children:(0,i.jsx)("img",{src:e},void 0)}),void 0),x=(0,o.memo)((()=>(0,i.jsxs)(s.Z,Object.assign({flexDirection:"row-reverse"},{children:[(0,i.jsx)(s.Z,Object.assign({sx:h},{children:(0,i.jsx)(c.Z,Object.assign({fontSize:"20px",color:"t.primary"},{children:"···"}),void 0)}),void 0),(0,i.jsx)(f,{src:u.hb},void 0),(0,i.jsx)(f,{src:u.SZ},void 0),(0,i.jsx)(f,{src:u.yW},void 0)]}),void 0))),b=(0,o.memo)((()=>(0,i.jsx)(f,{className:"exchangeLogo",src:m.walletLogoUrl},void 0))),g=(0,o.memo)((({direction:e})=>{const{getI18n:t}=(0,p.yk)(),n="deposit"===e;return(0,i.jsxs)(s.Z,Object.assign({flexDirection:n?"row":"row-reverse",justifyContent:n?"flex-start":"flex-end"},{children:[(0,i.jsxs)(s.Z,Object.assign({flexDirection:"column",alignItems:"flex-start"},{children:[(0,i.jsx)(x,{},void 0),(0,i.jsx)(c.Z,Object.assign({color:"t.third",variant:"caption",mt:"4px"},{children:t("yourOwnDefiWallet",{defaultValue:"Your Own DeFi Wallet"})}),void 0)]}),void 0),(0,i.jsx)(l,{color:"alertYellowBg",fontSize:"18px",mx:"20px",mt:"4px"},void 0),(0,i.jsxs)(s.Z,Object.assign({flexDirection:"column",alignItems:"flex-start"},{children:[(0,i.jsx)(b,{},void 0),(0,i.jsx)(c.Z,Object.assign({color:"t.third",variant:"caption",mt:"4px"},{children:`${m.walletName} ${t("perpWallet",{defaultValue:"Perp Wallet"})}`}),void 0)]}),void 0)]}),void 0)}))},4724:(e,t,n)=>{n.d(t,{I:()=>f});var i=n(52322),o=n(32181),a=n(48658),r=n(93603),l=n(2784),s=n(59111),c=n(22521),d=n(77542),u=n(97060),p=n(22994),m=n(80941);const{liteConfig:{walletName:h}}=s.ll,f=(0,l.memo)((({onWithdrawButtonClick:e,isDrawerLayout:t=!1,defaultToken:n,isGuide:l=!1})=>{const{getI18n:s,t:f}=(0,c.s)(),{getI18n:x}=(0,u.yk)(),{showWalletConnectDialog:b}=(0,r.dc)(),{onTransactionButtonClick:g,onTransactionSuccess:v,onTransactionFail:y}=(0,p.zU)({isDrawerLayout:t,type:"deposit",isGuide:l}),{onSelectTokenOptionClick:j,onSelectTokenDrawerPopup:w,onSelectTokenButtonClick:C}=(0,m.u)({isDrawerLayout:t});return(0,i.jsx)(o.gl,{onSelectTokenButtonClick:C,onSelectTokenDrawerPopup:w,onSelectTokenOptionClick:j,onDepositButtonClick:g,onTransactionSuccess:v,onTransactionFail:y,isDrawerLayout:t,defaultCoin:n||"BNB",getI18n:s,tradeType:o.v3.Futures,isSupportSpot:!1,t:f,topfoldUI:(0,i.jsxs)(i.Fragment,{children:[!t&&(0,i.jsx)(a.Z,Object.assign({color:"alertYellowBg",variant:"body2",mb:"12px"},{children:x("youNeedToDeposit",{defaultValue:"Before you can start trading, you need to deposit tokens into your {{brokerName}} perpetual wallet.",brokerName:h})}),void 0),(0,i.jsx)(d.L,{direction:"deposit"},void 0)]},void 0),onConnectWalletButtonClick:b,onWithdrawButtonClick:e},void 0)}))},80941:(e,t,n)=>{n.d(t,{u:()=>a});var i=n(2784),o=n(97060);const a=({isDrawerLayout:e=!1})=>{const{trackWebClickWithWalletAddress:t}=(0,o.fM)(),{trackPopupViewWithWalletAddress:n}=(0,o.$S)(),a=(0,i.useCallback)((()=>{t({pageName:"liteMode",$element_id:"switchToken",$element_name:e?"transferModule":"tradeModule"})}),[t,e]);return{onSelectTokenOptionClick:(0,i.useCallback)((({token:e})=>{t({pageName:"liteMode",$element_id:"selectToken",title:e})}),[t]),onSelectTokenDrawerPopup:(0,i.useCallback)((()=>{n({pageName:"liteMode",$element_id:"switchTokenPopups"})}),[n]),onSelectTokenButtonClick:a}}},22994:(e,t,n)=>{n.d(t,{zU:()=>l});var i=n(2784),o=n(685),a=n(97060),r=n(98735);const l=({isDrawerLayout:e,type:t,isGuide:n})=>{const{layout:i}=(0,r.vT)();return(i===r.dJ?c:s)({isDrawerLayout:e,type:t,isGuide:n})},s=({isDrawerLayout:e,type:t,isGuide:n})=>{const{trackWebClickWithWalletAddress:r}=(0,a.fM)(),l="deposit"===t;return{onTransactionButtonClick:(0,i.useCallback)((({coin:e,amount:t})=>{l&&r({pageName:"advancedMode",$element_id:"deposit",$element_type:n?"Guide":"Normal",$element_content:t,title:e})}),[r,l,n]),onTransactionSuccess:(0,i.useCallback)((({coin:e,amount:t})=>{(0,o.triggerSuccessNotificationLite)(),l&&r({pageName:"advancedMode",$element_id:"depositResponse",$element_content:t,title:e,status:"success"})}),[r,l]),onTransactionFail:(0,i.useCallback)((({coin:e,amount:t,message:n})=>{(0,o.triggerFailedNotificationLite)(),l&&r({pageName:"advancedMode",$element_id:"depositResponse",$element_content:t,title:e,status:"fail",error:n})}),[r,l])}},c=({isDrawerLayout:e,type:t})=>{const{trackWebClickWithWalletAddress:n}=(0,a.fM)(),r="deposit"===t;return{onTransactionButtonClick:(0,i.useCallback)((({coin:t,amount:i})=>{n({pageName:"liteMode",$element_id:r?"deposit":"withdrawal",$element_name:e?"transferPopups":"tradeModule",$element_content:i,title:t})}),[n,r,e]),onTransactionSuccess:(0,i.useCallback)((({coin:e,amount:t})=>{(0,o.triggerSuccessNotificationLite)(),n({pageName:"liteMode",$element_id:r?"depositResponse":"withdrawalResponse",$element_content:t,title:e,status:"success"})}),[n,r]),onTransactionFail:(0,i.useCallback)((({coin:e,amount:t,message:i})=>{(0,o.triggerFailedNotificationLite)(),n({pageName:"liteMode",$element_id:r?"depositResponse":"withdrawalResponse",$element_content:t,title:e,status:"fail",error:i})}),[n,r])}}},83362:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var i=n(52322),o=n(2784),a=n(28316),r=n(89314),l=n(62409),s=n(76635),c=n(21209),d=n(48658),u=n(22944),p=n(19076),m=n(3185),h=n(93603),f=n(33411),x=n(88795),b=n(22292),g=n(86529),v=n(76644),y=n(84977),j=n(56218),w=n(47535),C=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((i=i.apply(e,t||[])).next())}))};const k=Object.assign(Object.assign({},x.i),{height:["100%","auto"]}),S=({visible:e,onClose:t,defaultCoin:n,getI18n:x,refreshBalance:v=(()=>null),sx:S={},dialogSx:O={},unlimitWithdrawAssets:T=[]})=>{const[_]=(0,f.WS)(),{chainId:W}=(0,h.dc)(),Z=(0,o.useRef)(n||g.J$),B=(0,j.c0)(),[D,I]=(0,o.useState)(0),N=(0,j.r9)(),[E,L]=(0,o.useState)(0),F=(0,o.useMemo)((()=>(0,s.debounce)((()=>C(void 0,void 0,void 0,(function*(){if(e){let e=yield(0,r.yd)({assetName:Z.current},B);if(!B){const{data:{chainWithdrawLimit:t}}=yield(0,l.zZ)({currency:Z.current,chainId:W});e=Math.min(e,Number(t))}if(T.includes(Z.current)||B)(0,a.unstable_batchedUpdates)((()=>{I(e),L(-1)}));else{const{data:{userRemainingLimit:t,totalRemainingLimit:n}}=yield(0,l.pp)(!1);(0,a.unstable_batchedUpdates)((()=>{I(e),L(Math.min(t,n)||0)}))}}}))),500)),[Z,e,B,W]),M=(0,o.useCallback)((e=>{Z.current=e||g.J$,e?F():(I(0),L(-1))}),[F]);(0,o.useEffect)((()=>{e&&M(n||g.J$)}),[e,n,M]);const P=(0,o.useCallback)((({coin:e,amount:n})=>C(void 0,void 0,void 0,(function*(){if(_)try{yield _.checkExchangeBalance(e,n),_.withdraw(e,n,{afterWithdraw:v}),t()}catch(e){if(e.i18n){const t=e;(0,u.i)({message:x(t.i18n,t.defaultI18n),okText:x("dex-dialog-ok","Ok"),cancelText:""})}}}))),[_,t]),R=(0,o.useMemo)((()=>N?[(0,i.jsx)(y.Y,{label:x("dex-withdraw-from","Withdraw from"),getI18n:x,onChangeType:F},"tradeType")]:[]),[x]);return(0,i.jsxs)(c.Z,Object.assign({sx:Object.assign(Object.assign({},k),O),visible:e},{children:[(0,i.jsxs)(d.Z,Object.assign({variant:"headline6",className:"title"},{children:[x("Withdraw",{defaultValue:"Withdraw"}),(0,i.jsx)(m.Z,{className:"close",onClick:t},void 0)]}),void 0),(0,i.jsx)(b.Z,{available:D,maxWithdraw:E,onConfirm:P,onChangeCoin:M,defaultCoin:n||g.J$,getI18n:x,type:w.C.Withdraw,bottom:(0,i.jsx)(p.Z,Object.assign({mt:"md",variant:"info"},{children:x("wallet-reject-alert",{defaultValue:'if you click on the "reject" operation, your assets will be returned after 10 minutes.'})}),void 0),suffixFields:R,sx:S},void 0)]}),void 0)},O=e=>{var{tradeType:t=j.v3.Futures,isSupportSpot:n=!0}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["tradeType","isSupportSpot"]);return(0,i.jsx)(v.m,{children:(0,i.jsx)(j.B9,Object.assign({tradeType:t,isSupportSpot:n,visible:o.visible},{children:(0,i.jsx)(S,Object.assign({},o),void 0)}),void 0)},void 0)}},32181:(e,t,n)=>{n.d(t,{gl:()=>oe,v3:()=>X.v3,bO:()=>de}),n(83362),n(69257);var i=n(52322),o=n(2784),a=n(92036),r=n(62143),l=n(48658),s=n(45362),c=n(65866),d=n(7247),u=n(51072),p=n(47101),m=n(33411),h=n(44174),f=n(88767),x=n(89314),b=n(62409),g=n(93603),v=n(86529);const y=({coins:e})=>{const[t,{isReady:n}]=(0,m.WS)(),i=(0,f.useQueries)(e.map((e=>({queryKey:[v.pW.GET_WALLET_BALANCE,e.code],queryFn:()=>null==t?void 0:t.getWalletBalance(e.code),enabled:Boolean(t)&&n}))));return(0,o.useMemo)((()=>i.reduce(((t,n,i)=>{const o=e[i];return n.data?Object.assign(Object.assign({},t),{[o.code]:(0,c.HV)(n.data,o.decimals)}):t}),{})),[e,i])},j=({coins:e})=>{const{chainId:t}=(0,g.dc)(),n=(0,f.useQueries)(e.map((e=>({queryKey:[v.pW.GET_MAX_WITHDRAW_AMOUNT,e.code],queryFn:()=>Promise.all([(0,x.yd)({assetName:e.code},!1),(0,b.zZ)({currency:e.code,chainId:t})]),enabled:Boolean(t)}))));return(0,o.useMemo)((()=>n.reduce(((t,n,i)=>{const o=e[i];if(!n.data)return t;const[a,r]=n.data,l=Math.min(a,Number(r.data.chainWithdrawLimit));return Object.assign(Object.assign({},t),{[o.code]:(0,c.HV)(l,o.decimals)})}),{})),[e,n,t])},w={width:"24px",height:"24px",marginRight:"8px"},C={mt:0,height:"40px",border:"none",width:"100%",borderRadius:"16px",bg:"inputBg",".bn-input-prefix":{my:"0px",display:"flex",alignItems:"center",svg:{fill:"t.placeholder",fontSize:"16px"}},"& input":{width:"80%",fontSize:"14px",lineHeight:"20px","&::placeholder":{color:"t.placeholder"}}},k=(0,o.memo)((({coin:e,onClick:t})=>(0,i.jsxs)(a.Z,Object.assign({alignItems:"center",sx:{cursor:"pointer"},onClick:t},{children:[e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:e.logo,style:w},void 0),(0,i.jsx)(l.Z,Object.assign({color:"t.primary",variant:"subtitle2"},{children:e.name}),void 0)]},void 0),(0,i.jsx)(d.Z,{width:"16px",height:"16px",ml:"4px",color:"t.primary"},void 0)]}),void 0))),S=(0,o.memo)((({type:e,getI18n:t,coins:n,onOptionClick:s})=>{const[c,d]=(0,o.useState)(""),u=(0,o.useMemo)((()=>n.filter((e=>{const{name:t}=e||{},n=new RegExp((0,h.hr)(c),"i").test(t);return!c||n}))),[c,n]),m=(({coins:e,type:t})=>("deposit"===t?y:j)({coins:e}))({coins:n,type:e});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Z,Object.assign({mb:"16px"},{children:(0,i.jsx)(p.Z,{value:c,search:d,placeholder:t("search",{defaultValue:"Search"}),sx:C},void 0)}),void 0),(0,i.jsxs)(a.Z,Object.assign({justifyContent:"space-between",alignItems:"center",mb:"16px"},{children:[(0,i.jsx)(l.Z,Object.assign({color:"t.third",variant:"caption"},{children:t("pair",{defaultValue:"Pair"})}),void 0),(0,i.jsx)(l.Z,Object.assign({color:"t.third",variant:"caption"},{children:t("Available",{defaultValue:"Available"})}),void 0)]}),void 0),(0,i.jsx)(r.Z,Object.assign({height:"360px",overflow:"auto"},{children:(0,i.jsx)(r.Z,Object.assign({pb:"16px"},{children:u.map((e=>(0,i.jsxs)(a.Z,Object.assign({onClick:()=>s(e.code),justifyContent:"space-between",alignItems:"center",py:"16px"},{children:[(0,i.jsxs)(a.Z,Object.assign({alignItems:"center"},{children:[(0,i.jsx)("img",{src:e.logo,style:w},void 0),(0,i.jsx)(l.Z,Object.assign({color:"t.primary",variant:"subtitle1"},{children:e.name}),void 0)]}),void 0),(0,i.jsx)(l.Z,Object.assign({color:"t.primary",variant:"body1"},{children:m[e.code]||"--"}),void 0)]}),e.code)))}),void 0)}),void 0)]},void 0)})),O=(0,o.memo)((({value:e,onChange:t,getI18n:n,type:a,onSelectTokenOptionClick:r=(()=>null),onSelectTokenDrawerPopup:s=(()=>null),onSelectTokenButtonClick:c=(()=>null)})=>{const d=(0,m.v8)(),p=(0,o.useMemo)((()=>d.find((t=>t.code===e))),[d]),[h,f]=(0,o.useState)(!1),x=(0,o.useCallback)((e=>{r({token:e}),t(e),f(!1)}),[t]);return(0,o.useEffect)((()=>{h&&s()}),[h]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k,{coin:p,onClick:()=>{f(!0),c()}},void 0),(0,i.jsxs)(u.ZP.Modal,Object.assign({visible:h},{children:[(0,i.jsx)(u.ZP.ModalTitle,{title:(0,i.jsx)(l.Z,Object.assign({color:"t.primary"},{children:n("selectToken",{defaultValue:"Select Token"})}),void 0),variant:"center",onClose:()=>f(!1)},void 0),h&&(0,i.jsx)(S,{type:a,getI18n:n,coins:d,onOptionClick:x},void 0)]}),void 0)]},void 0)}));var T=n(16831),_=n(33470),W=n(87612),Z=n(31843),B=n(59545);const D={sx:{".bn-input-suffix":{mr:0},"&:not(.bn-input-status-disabled):hover, .bn-input-status-focus":{border:"none",borderBottom:"1px solid",borderColor:"primary"},borderRadius:0,border:"none",width:"100%",height:"40px",margin:"0",borderBottom:"1px solid",borderColor:e=>(0,B.DZ)(e.colors.t.third,.3),boxShadow:"unset",input:{boxShadow:"unset",textAlign:"left",fontSize:"16px","&::placeholder":{color:e=>(0,B.DZ)(e.colors.t.third,.5),fontSize:"16px"}}}},I={"&::placeholder":{textAlign:"left !important"},border:"none !important",MozAppearance:"textfield","::-webkit-outer-spin-button, ::-webkit-inner-spin-button":{WebkitAppearance:"none"}},N={border:"none !important",fontSize:"14px",bg:"inputBg",".bn-input-prefix":{display:"flex",alignItems:"center","> label":{height:"22px"}},".bn-input-suffix":{display:"flex",alignItems:"center",height:"100%",marginLeft:"4px"},"> .bn-input-status-disabled":{bg:"transparent !important","> input::placeholder":{color:"t.placeholder"}}},E=({type:e,value:t,onChange:n,available:o,maxWithdraw:d,asset:u,precision:p=8,getI18n:m,maxDeposit:h,t:x,disabled:g=!1,residualDeposit:y=-1})=>{const j=(0,Z.w)({oldValue:t,precision:p}),w=Number(-1===d?o:Math.min(d,Number(o))),C=Number(t)>Number(o),k=y>=0&&Number(t)>y,S=d>=0&&Number(t)>d,{data:O}=(0,f.useQuery)([v.pW.GET_DEX_WITHDRAW_LIMIT],(()=>(0,b.pp)(!1)));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Z,Object.assign({mb:"12px",sx:N},{children:(0,i.jsx)(T.Z,{type:"number",inputMode:"decimal",sx:I,value:t,onChange:e=>n(j(e.currentTarget.value)),boxProps:D,variant:"inline",labelFixed:!0,error:C||k,placeholder:m("Amount"),disabled:g,suffix:(0,i.jsxs)(a.Z,Object.assign({alignItems:"center"},{children:[(0,i.jsx)(s.Z,Object.assign({px:"8px",type:"button",variant:"quiet",onClick:()=>{n((0,_.GW)(w,p).toString())}},{children:(0,i.jsx)(l.Z,Object.assign({variant:"body1",color:"t.yellow"},{children:m("MAX")}),void 0)}),void 0),(0,i.jsx)(l.Z,Object.assign({as:"span",variant:"body1",color:"t.primary"},{children:u}),void 0)]}),void 0)},void 0)}),void 0),(0,i.jsx)(l.Z,Object.assign({variant:"caption",color:"t.secondary",mb:"4px"},{children:`${m("availableBalance",{defaultValue:"Available Balance"})}: ${o} ${u}`}),void 0),(()=>{switch(e){case"deposit":return k?(0,i.jsx)(l.Z,Object.assign({variant:"caption",color:"t.sell"},{children:(0,i.jsx)(W.c,{t:x,i18nKey:"futures-trade-deposit-residual-hint",defaults:"You can have a maximum of {{maxDeposit}} {{coin}} in your account as margin asset.",values:{maxDeposit:h,coin:u}},void 0)}),void 0):C?(0,i.jsx)(l.Z,Object.assign({variant:"caption",color:"t.sell",mb:"4px"},{children:m("insufficientBalance",{defaultValue:"Insufficient balance"})}),void 0):null;case"withdraw":return(0,i.jsxs)(i.Fragment,{children:[C&&(0,i.jsx)(l.Z,Object.assign({variant:"caption",color:"t.sell",mb:"4px"},{children:m("insufficientBalance",{defaultValue:"Insufficient balance"})}),void 0),-1!==d&&O&&(0,i.jsx)(l.Z,Object.assign({variant:"caption",color:S?"t.sell":"t.secondary",mt:"4px"},{children:m("dailyWithDrawLimitation",{defaultValue:"Daily withdrawal limitation: {{remaining}} / {{total}} USD",remaining:(0,c.uf)(O.data.userRemainingLimit,2,3),total:(0,c.uf)(O.data.userLimit,2,3)})}),void 0)]},void 0);default:return null}})()]},void 0)},L={bg:e=>(0,B.DZ)(e.colors.t.third,.08),borderRadius:"12px"},F=(0,o.memo)((({children:e})=>(0,i.jsx)(r.Z,Object.assign({sx:L},{children:e}),void 0))),M=({children:e})=>(0,i.jsx)(r.Z,Object.assign({p:"12px"},{children:e}),void 0),P={bg:"inputBg",borderRadius:"12px",p:"12px"},R=({children:e})=>(0,i.jsx)(r.Z,Object.assign({sx:P},{children:e}),void 0),A={height:"32px",width:"100%","&:active:not(:disabled):not(.inactive)":{bg:"transparent !important"}},$=(0,o.memo)((({t:e,onClick:t})=>(0,i.jsx)(s.Z,Object.assign({type:"button",variant:"quiet",sz:"normal",sx:A,onClick:t},{children:(0,i.jsx)(l.Z,Object.assign({as:"span",color:"t.third",variant:"caption"},{children:(0,i.jsx)(W.c,{t:e,i18nKey:"futures-trade-wantToWithDrawButton",components:{highlight:(0,i.jsx)(l.Z,{as:"span",color:"t.yellow"},void 0)},defaults:"Want to withdraw? <highlight>Here</highlight>"},void 0)}),void 0)}),void 0))),z={width:"100%",borderTop:"1px solid",borderColor:"t.third",mt:"20px",mb:"8px"},V=()=>(0,i.jsx)(r.Z,{sx:z},void 0);var U=n(38896),G=n(82755);const H={animation:"rotation 2s infinite linear","@keyframes rotation":{"0%":{transform:"rotate(0)"},"50%":{transform:"rotate(-180deg)"},"100%":{transform:"rotate(-359deg)"}}},q=(0,o.memo)((e=>{var{isLoading:t=!1,children:n}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["isLoading","children"]);return(0,i.jsx)(s.Z,Object.assign({},o,{children:t?(0,i.jsx)(G.Z,{fontSize:"20px",sx:H},void 0):n}),void 0)})),J=({available:e,maxWithdraw:t=-1,residualDeposit:n=-1,onChangeCoin:d,onConfirm:u,defaultCoin:p=v.J$,maxDeposit:h=1/0,type:f,getI18n:x,additionCoins:b=[],disabled:g,topfoldUI:y,onConnectWalletButtonClick:j,onWithdrawButtonClick:w,t:C,isSubmitting:k,isDrawerLayout:S,onSelectTokenOptionClick:T,onSelectTokenDrawerPopup:_,onSelectTokenButtonClick:W})=>{const[Z,B]=(0,o.useState)(""),[D,I]=(0,o.useState)(p),N=(0,m.W4)(D),L=(0,c.HV)(e,N);let P=Number(L);t>=0?P=Math.min(Number(L),t):n>=0&&(P=Math.min(P,n));const A=g||!t||!Number(e)||!Number(Z)||Number(Z||0)>P,z=(0,U._n)();return(0,o.useEffect)((()=>{B("")}),[D]),(0,i.jsxs)(a.Z,Object.assign({height:S?"360px":"auto",flexDirection:"column",justifyContent:S?"space-between":"flex-start"},{children:[(0,i.jsxs)(r.Z,Object.assign({mb:"20px"},{children:[(0,i.jsxs)(F,{children:[(0,i.jsx)(M,{children:y},void 0),z&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(R,{children:[(0,i.jsx)(r.Z,Object.assign({mb:"12px"},{children:(0,i.jsx)(O,{value:D,onChange:(e="")=>{d(e),I(e)},getI18n:x,type:f,onSelectTokenOptionClick:T,onSelectTokenDrawerPopup:_,onSelectTokenButtonClick:W},void 0)}),void 0),(0,i.jsx)(E,{t:C,maxWithdraw:t,value:Z,onChange:B,available:L,asset:D,type:f,getI18n:x,precision:N,maxDeposit:h,residualDeposit:n,disabled:k},void 0)]},void 0)},void 0)]},void 0),"withdraw"===f&&(0,i.jsx)(l.Z,Object.assign({variant:"caption",color:"t.third",mt:"8px"},{children:x("withdrawRejectWarning",{defaultValue:'If you click "reject" in your wallet, your asset will remain locked and refunded later.'})}),void 0)]}),void 0),(0,i.jsxs)(r.Z,{children:[z?(0,i.jsx)(q,Object.assign({disabled:A,onClick:()=>u({coin:D,amount:Z},(()=>B(""))),type:"button",sz:"normal",width:"100%",isLoading:k},{children:"deposit"===f?x("Deposit",{defaultValue:"Deposit"}):x("Withdraw",{defaultValue:"Withdraw"})}),void 0):(0,i.jsx)(s.Z,Object.assign({onClick:j,type:"button",sz:"normal",width:"100%"},{children:x("dex-header-ConnectWallet",{defaultValue:"Connect Wallet"})}),void 0),z&&"function"==typeof w&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{},void 0),(0,i.jsx)($,{t:C,onClick:w},void 0)]},void 0)]},void 0)]}),void 0)};var Q=n(76644),X=n(56218),Y=n(54073),K=n.n(Y),ee=n(56929),te=n(23716),ne=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((i=i.apply(e,t||[])).next())}))};const ie=({isDrawerLayout:e,defaultCoin:t,getI18n:n,t:a,additionCoins:r,disabled:l,topfoldUI:s,onConnectWalletButtonClick:c,onWithdrawButtonClick:d,onTransactionSuccess:u,onTransactionFail:p,onDepositButtonClick:h,onSelectTokenOptionClick:x,onSelectTokenDrawerPopup:b,onSelectTokenButtonClick:g})=>{const{isSubmitting:y,available:j,onConfirm:w,onChangeCoin:C,residualDeposit:k,maxDeposit:S,token:O}=(({defaultCoin:e,onTransactionSuccess:t=(()=>null),onTransactionFail:n=(()=>null),onDepositButtonClick:i=(()=>null)})=>{var a;const[r]=(0,m.WS)(),[l,s]=(0,o.useState)(e||v.J$),[c,d]=(0,o.useState)("0"),u=(0,X.r9)(),p=(0,X.fF)(),h=(0,U._n)(),[x,b]=(0,o.useState)(!1),{data:g,refetch:y,actualData:j}=(0,ee.i)(p&&h,l),{data:w,refetch:C}=(0,ee.I)(p&&h),k=(null===(a=null==w?void 0:w.data)||void 0===a?void 0:a.reduce(((e,t)=>(e[t.asset]=Number(t.walletBalance),e)),{}))||{},S=(0,o.useMemo)((()=>K()((()=>ne(void 0,void 0,void 0,(function*(){if(!r)return;const e=yield r.getWalletBalance(l);d(e)}))),500)),[l,r]),O=(()=>{const e=(0,f.useQueryClient)();return({token:t,depositAmount:n})=>{e.setQueryData([v.pW.GET_RESIDUAL_DEPOSIT,t,!0],(e=>(0,_.h9)(e,n).toFixed(v.zo))),e.setQueryData([v.pW.GET_FUTURES_USER_BALANCE,!0],(e=>{var i;return(null==e?void 0:e.data)?{data:null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.map((e=>e.asset!==t?e:Object.assign(Object.assign({},e),{walletBalance:(0,_.PD)(e.walletBalance,n).toFixed(8)})))}:e}))}})(),T=(0,o.useCallback)((({coin:e,amount:o},a)=>ne(void 0,void 0,void 0,(function*(){if(r){i({coin:e,amount:o}),b(!0);try{const n=yield r.getWalletBalance(e);if(d(n),Number(n)<Number(o))throw new Error("Please enter an amount less than the max deposit amount.");yield r.deposit(e,o),null==t||t({coin:e,amount:o}),g>-1&&O({token:e,depositAmount:o})}catch(t){null==n||n({coin:e,amount:o,message:t.message})}finally{try{yield S(),"function"==typeof a&&a()}catch(e){te.warn(e)}b(!1)}}}))),[r,g]);return(0,o.useEffect)((function(){h&&(S(),p&&(!j||g>-1)&&(y(),C()))}),[h,p,l,S,y,C]),{isSupportSpot:u,available:c,onConfirm:T,onChangeCoin:s,residualDeposit:g,isSubmitting:x,maxDeposit:g>=0?g+k[l]:1/0,token:l}})({defaultCoin:t,onTransactionSuccess:u,onTransactionFail:p,onDepositButtonClick:h});return(0,i.jsx)(J,{t:a,topfoldUI:s,onConnectWalletButtonClick:c,onWithdrawButtonClick:d,available:j,defaultCoin:O,type:"deposit",onConfirm:w,onChangeCoin:C,getI18n:n,maxDeposit:S,residualDeposit:k,additionCoins:r,disabled:l,isSubmitting:y,isDrawerLayout:e,onSelectTokenOptionClick:x,onSelectTokenDrawerPopup:b,onSelectTokenButtonClick:g},void 0)},oe=e=>{var{tradeType:t=X.v3.Futures,isSupportSpot:n=!0}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["tradeType","isSupportSpot"]);return(0,i.jsx)(Q.m,{children:(0,i.jsx)(X.B9,Object.assign({tradeType:t,isSupportSpot:n},{children:(0,i.jsx)(ie,Object.assign({},o),void 0)}),void 0)},void 0)};var ae=n(28316),re=n(76635),le=n(23716),se=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((i=i.apply(e,t||[])).next())}))};const ce=({isDrawerLayout:e,defaultCoin:t,getI18n:n,t:a,refreshBalance:r=(()=>null),unlimitWithdrawAssets:l=[],additionCoins:s=[],topfoldUI:c,onConnectWalletButtonClick:d,onTransactionSuccess:u,onTransactionFail:p,onWithdrawButtonClick:h,onSelectTokenOptionClick:y,onSelectTokenDrawerPopup:j,onSelectTokenButtonClick:w})=>{const{available:C,maxWithdraw:k,onConfirm:S,changeCoin:O,isSubmitting:T}=(({defaultCoin:e,refreshBalance:t=(()=>null),unlimitWithdrawAssets:n=[],onTransactionSuccess:i=(()=>null),onTransactionFail:a=(()=>null),onWithdrawButtonClick:r=(()=>null)})=>{const[l]=(0,m.WS)(),{chainId:s}=(0,g.dc)(),c=(0,o.useRef)(e||v.J$),d=(0,X.c0)(),[u,p]=(0,o.useState)(0),h=(0,X.r9)(),[y,j]=(0,o.useState)(0),[w,C]=(0,o.useState)(!1),k=(0,f.useQueryClient)(),S=(0,o.useMemo)((()=>(0,re.debounce)((()=>se(void 0,void 0,void 0,(function*(){let e=yield(0,x.yd)({assetName:c.current},d);if(!d){const{data:{chainWithdrawLimit:t}}=yield(0,b.zZ)({currency:c.current,chainId:s});e=Math.min(e,Number(t))}if(n.includes(c.current)||d)(0,ae.unstable_batchedUpdates)((()=>{p(e),j(-1)}));else{const{data:{userRemainingLimit:t,totalRemainingLimit:n}}=yield(0,b.pp)(!1);(0,ae.unstable_batchedUpdates)((()=>{p(e),j(Math.min(t,n)||0)}))}}))),500)),[c,d,s]),O=(0,o.useCallback)((e=>{c.current=e||v.J$,e?S():(p(0),j(-1))}),[S]);return(0,o.useEffect)((()=>{O(e||v.J$)}),[e,O]),{available:u,isSupportSpot:h,maxWithdraw:y,onConfirm:(0,o.useCallback)((({coin:e,amount:n},o)=>se(void 0,void 0,void 0,(function*(){if(l){r({coin:e,amount:n}),C(!0);try{yield l.checkExchangeBalance(e,n),yield l.withdraw(e,n,{afterWithdraw:t}),null==i||i({coin:e,amount:n})}catch(t){null==a||a({coin:e,amount:n,message:t.message})}finally{try{yield S(),k.invalidateQueries(v.pW.GET_DEX_WITHDRAW_LIMIT),k.invalidateQueries([v.pW.GET_MAX_WITHDRAW_AMOUNT,e]),k.invalidateQueries([v.pW.GET_RESIDUAL_DEPOSIT,e]),k.invalidateQueries(v.pW.GET_FUTURES_USER_BALANCE),"function"==typeof o&&o()}catch(e){le.warn(e)}C(!1)}}}))),[l]),fetchAmount:S,changeCoin:O,isSubmitting:w}})({defaultCoin:t,refreshBalance:r,unlimitWithdrawAssets:l,onTransactionSuccess:u,onTransactionFail:p,onWithdrawButtonClick:h});return(0,i.jsx)(J,{t:a,topfoldUI:c,onConnectWalletButtonClick:d,available:C,maxWithdraw:k,onConfirm:S,onChangeCoin:O,defaultCoin:t||v.J$,getI18n:n,type:"withdraw",additionCoins:s,isSubmitting:T,isDrawerLayout:e,onSelectTokenOptionClick:y,onSelectTokenDrawerPopup:j,onSelectTokenButtonClick:w},void 0)},de=e=>{var{tradeType:t=X.v3.Futures,isSupportSpot:n=!0}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["tradeType","isSupportSpot"]);return(0,i.jsx)(Q.m,{children:(0,i.jsx)(X.B9,Object.assign({tradeType:t,isSupportSpot:n},{children:(0,i.jsx)(ce,Object.assign({},o),void 0)}),void 0)},void 0)}}}]);