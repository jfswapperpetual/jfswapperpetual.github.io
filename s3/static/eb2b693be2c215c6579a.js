"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[4106],{94106:(e,r,t)=>{t.d(r,{Gc:()=>j,Qr:()=>D,RV:()=>V,bc:()=>R,cI:()=>ge,cl:()=>F,qo:()=>he});var n=t(2784),s=e=>"checkbox"===e.type,u=e=>e instanceof Date,a=e=>null==e;const c=e=>"object"==typeof e;var i=e=>!a(e)&&!Array.isArray(e)&&c(e)&&!u(e),l=e=>e.substring(0,e.search(/.\d/))||e,o=(e,r)=>[...e].some((e=>l(r)===e)),f=e=>e.filter(Boolean),d=e=>void 0===e,b=(e,r,t)=>{if(i(e)&&r){const n=f(r.split(/[,[\].]+?/)).reduce(((e,r)=>a(e)?e:e[r]),e);return d(n)||n===e?d(e[r])?t:e[r]:n}};const y="blur",m="onChange",g="onSubmit",h="all",v="pattern",p="required";var O=(e,r)=>{const t=Object.assign({},e);return delete t[r],t};const w=n.createContext(null);w.displayName="RHFContext";const j=()=>n.useContext(w),V=e=>n.createElement(w.Provider,{value:O(e,"children")},e.children);var k=(e,r,t,n,s=!0)=>e?new Proxy(r,{get:(e,r)=>{if(r in e)return t.current[r]!==h&&(t.current[r]=!s||h),n&&(n.current[r]=!0),e[r]}}):r,_=e=>i(e)&&!Object.keys(e).length,x=(e,r,t)=>{const n=O(e,"name");return _(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find((e=>r[e]===(!t||h)))},A=e=>Array.isArray(e)?e:[e],C="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;const S=C?"Proxy"in window:"undefined"!=typeof Proxy;function F(e){const{control:r,name:t}=e||{},s=j(),{formStateRef:u,subjectsRef:a,readFormStateRef:c}=r||s.control,i=n.useRef(t);i.current=t;const[l,o]=n.useState(u.current),f=n.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1});return n.useEffect((()=>{const e=a.current.state.subscribe({next:e=>(!i.current||!e.name||A(i.current).includes(e.name))&&x(e,f.current)&&o(Object.assign(Object.assign({},u.current),e))});return()=>e.unsubscribe()}),[]),k(S,l,c,f,!1)}function R({name:e,rules:r,defaultValue:t,control:u,shouldUnregister:a}){const c=j(),{defaultValuesRef:l,register:f,fieldsRef:m,unregister:g,namesRef:h,subjectsRef:v,shouldUnmount:p,inFieldArrayActionRef:O}=u||c.control,w=b(m.current,e),[V,k]=n.useState(w&&w._f&&!d(w._f.value)?w._f.value:d(b(l.current,e))?t:b(l.current,e)),{onChange:_,onBlur:x,ref:A}=f(e,Object.assign(Object.assign({},r),{value:V})),C=F({control:u||c.control,name:e});function S(e,r){const t=b(m.current,e);t&&t._f&&(t._f.mount=r)}return n.useEffect((()=>{const r=v.current.control.subscribe({next:r=>(!r.name||e===r.name)&&k(b(r.values,e))});return S(e,!0),()=>{r.unsubscribe();const t=p||a;(o(h.current.array,e)?t&&!O.current:t)?g(e):S(e,!1)}}),[e]),{field:{onChange:r=>{const t=(e=>i(e)&&e.target?s(e.target)?e.target.checked:e.target.value:e)(r);k(t),_({target:{value:t,name:e},type:"change"})},onBlur:()=>{x({target:{name:e},type:y})},name:e,value:V,ref:e=>e&&A({focus:()=>e.focus&&e.focus(),setCustomValidity:r=>e.setCustomValidity(r),reportValidity:()=>e.reportValidity()})},formState:C,fieldState:{invalid:!!b(C.errors,e),isDirty:!!b(C.dirtyFields,e),isTouched:!!b(C.touchedFields,e),error:b(C.errors,e)}}}const D=e=>e.render(R(e));var E=(e,r,t,n,s)=>r?Object.assign(Object.assign({},t[e]),{types:Object.assign(Object.assign({},t[e]&&t[e].types?t[e].types:{}),{[n]:s||!0})}):{},T=e=>/^\w*$/.test(e),B=e=>f(e.replace(/["|']|\]/g,"").split(/\.|\[/));function N(e,r,t){let n=-1;const s=T(r)?[r]:B(r),u=s.length,a=u-1;for(;++n<u;){const r=s[n];let u=t;if(n!==a){const t=e[r];u=i(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=u,e=e[r]}return e}const M=(e,r,t)=>{for(const n of t||Object.keys(e)){const t=b(e,n);if(t){const e=t._f,n=O(t,"_f");if(e&&r(e.name)){if(e.ref.focus&&d(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else i(n)&&M(n,r)}}},I=(e,r={})=>{for(const t in e.current){const n=e.current[t];if(n&&!a(r)){const e=n._f,s=O(n,"_f");N(r,t,e&&e.ref?e.ref.disabled||e.refs&&e.refs.every((e=>e.disabled))?void 0:e.value:Array.isArray(n)?[]:{}),s&&I({current:s},r[t])}}return r};var L=e=>a(e)||!c(e);function U(e,r){if(L(e)||L(r)||u(e)||u(r))return e===r;const t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(const s of t){const t=e[s];if(!n.includes(s))return!1;if("ref"!==s){const e=r[s];if((i(t)||Array.isArray(t))&&(i(e)||Array.isArray(e))?!U(t,e):t!==e)return!1}}return!0}function P(e,r){if(L(e)||L(r))return r;for(const t in r){const n=e[t],s=r[t];try{e[t]=i(n)&&i(s)||Array.isArray(n)&&Array.isArray(s)?P(n,s):s}catch(e){}}return e}function q(e,r,t,n,s){let u=-1;for(;++u<e.length;){for(const n in e[u])Array.isArray(e[u][n])?(!t[u]&&(t[u]={}),t[u][n]=[],q(e[u][n],b(r[u]||{},n,[]),t[u][n],t[u],n)):!a(r)&&U(b(r[u]||{},n),e[u][n])?N(t[u]||{},n):t[u]=Object.assign(Object.assign({},t[u]),{[n]:!0});n&&!t.length&&delete n[s]}return t}var H=(e,r,t)=>P(q(e,r,t.slice(0,e.length)),q(r,e,t.slice(0,e.length))),$=e=>"boolean"==typeof e;function W(e,r){const t=T(r)?[r]:B(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=d(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let u;n&&delete n[s];for(let r=0;r<t.slice(0,-1).length;r++){let n,s=-1;const a=t.slice(0,-(r+1)),c=a.length-1;for(r>0&&(u=e);++s<a.length;){const r=a[s];n=n?n[r]:e[r],c===s&&(i(n)&&_(n)||Array.isArray(n)&&!n.filter((e=>i(e)&&!_(e)||$(e))).length)&&(u?delete u[r]:delete e[r]),u=n}}return e}var G=e=>"file"===e.type,Q=e=>"select-multiple"===e.type,z=e=>"radio"===e.type;const J={value:!1,isValid:!1},K={value:!0,isValid:!0};var X=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!d(e[0].attributes.value)?d(e[0].value)||""===e[0].value?K:{value:e[0].value,isValid:!0}:K:J}return J},Y=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>d(e)?e:r?""===e?NaN:+e:t?new Date(e):n?n(e):e;const Z={isValid:!1,value:null};var ee=e=>Array.isArray(e)?e.reduce(((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e),Z):Z;function re(e){if(e&&e._f){const t=e._f.ref;if(t.disabled)return;return G(t)?t.files:z(t)?ee(e._f.refs).value:Q(t)?(r=t.options,[...r].filter((({selected:e})=>e)).map((({value:e})=>e))):s(t)?X(e._f.refs).value:Y(d(t.value)?e._f.ref.value:t.value,e._f)}var r}var te=(e,r,t,n)=>{const s={};for(const t of e){const e=b(r,t);e&&N(s,t,e._f)}return{criteriaMode:t,names:[...e],fields:s,shouldUseNativeValidation:n}},ne=e=>"function"==typeof e,se=e=>"string"==typeof e,ue=e=>se(e)||n.isValidElement(e),ae=e=>e instanceof RegExp;function ce(e,r,t="validate"){if(ue(e)||Array.isArray(e)&&e.every(ue)||$(e)&&!e)return{type:t,message:ue(e)?e:"",ref:r}}var ie=e=>i(e)&&!ae(e)?e:{value:e,message:""},le=async({_f:{ref:e,refs:r,required:t,maxLength:n,minLength:u,min:c,max:l,pattern:o,validate:f,name:d,value:b,valueAsNumber:y,mount:m}},g,h)=>{if(!m)return{};const O=r?r[0]:e,w=e=>{h&&O.reportValidity&&(O.setCustomValidity($(e)?"":e||" "),O.reportValidity())},j={},V=z(e),k=s(e),x=V||k,A=(y||G(e))&&!e.value||""===b||Array.isArray(b)&&!b.length,C=E.bind(null,d,g,j),S=(r,t,n,s="maxLength",u="minLength")=>{const a=r?t:n;j[d]=Object.assign({type:r?s:u,message:a,ref:e},C(r?s:u,a))};if(t&&(!x&&(A||a(b))||$(b)&&!b||k&&!X(r).isValid||V&&!ee(r).isValid)){const{value:e,message:r}=ue(t)?{value:!!t,message:t}:ie(t);if(e&&(j[d]=Object.assign({type:p,message:r,ref:O},C(p,r)),!g))return w(r),j}if(!(A||a(c)&&a(l))){let r,t;const n=ie(l),s=ie(c);if(isNaN(b)){const u=e.valueAsDate||new Date(b);se(n.value)&&(r=u>new Date(n.value)),se(s.value)&&(t=u<new Date(s.value))}else{const u=e.valueAsNumber||parseFloat(b);a(n.value)||(r=u>n.value),a(s.value)||(t=u<s.value)}if((r||t)&&(S(!!r,n.message,s.message,"max","min"),!g))return w(j[d].message),j}if((n||u)&&!A&&se(b)){const e=ie(n),r=ie(u),t=!a(e.value)&&b.length>e.value,s=!a(r.value)&&b.length<r.value;if((t||s)&&(S(t,e.message,r.message),!g))return w(j[d].message),j}if(o&&!A&&se(b)){const{value:r,message:t}=ie(o);if(ae(r)&&!b.match(r)&&(j[d]=Object.assign({type:v,message:t,ref:e},C(v,t)),!g))return w(t),j}if(f)if(ne(f)){const e=ce(await f(b),O);if(e&&(j[d]=Object.assign(Object.assign({},e),C("validate",e.message)),!g))return w(e.message),j}else if(i(f)){let e={};for(const r in f){if(!_(e)&&!g)break;const t=ce(await f[r](b),O,r);t&&(e=Object.assign(Object.assign({},t),C(r,t.message)),w(t.message),g&&(j[d]=e))}if(!_(e)&&(j[d]=Object.assign({ref:O},e),!g))return j}return w(!0),j},oe=e=>({isOnSubmit:!e||e===g,isOnBlur:"onBlur"===e,isOnChange:e===m,isOnAll:e===h,isOnTouch:"onTouched"===e}),fe=e=>e instanceof HTMLElement;class de{constructor(){this.tearDowns=[]}add(e){this.tearDowns.push(e)}unsubscribe(){for(const e of this.tearDowns)e();this.tearDowns=[]}}class be{constructor(e,r){this.observer=e,this.closed=!1,r.add((()=>this.closed=!0))}next(e){this.closed||this.observer.next(e)}}class ye{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}subscribe(e){const r=new de,t=new be(e,r);return this.observers.push(t),r}unsubscribe(){this.observers=[]}}const me="undefined"==typeof window;function ge({mode:e="onSubmit",reValidateMode:r="onChange",resolver:t,context:c,defaultValues:m={},shouldFocusError:g=!0,delayError:v,shouldUseNativeValidation:p,shouldUnregister:w,criteriaMode:j}={}){const[V,F]=n.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}}),R=n.useRef({isDirty:!S,dirtyFields:!S,touchedFields:!S,isValidating:!S,isValid:!S,errors:!S}),D=n.useRef(t),E=n.useRef(V),T=n.useRef({}),B=n.useRef(m),P=n.useRef({}),q=n.useRef(c),$=n.useRef(!1),J=n.useRef(!1),K=n.useRef(),X=n.useRef({watch:new ye,control:new ye,array:new ye,state:new ye}),Z=n.useRef({mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1}),ee=oe(e),ue=j===h;D.current=t,q.current=c;const ae=e=>Z.current.watchAll||Z.current.watch.has(e)||Z.current.watch.has((e.match(/\w+/)||[])[0]),ce=(e,r)=>{N(E.current.errors,e,r),X.current.state.next({errors:E.current.errors})},ie=n.useCallback((async(e,r,n,s,u,a)=>{const c=b(E.current.errors,r),i=!!R.current.isValid&&(t?u:(async()=>{const e=await pe(T.current,!0);e!==E.current.isValid&&(E.current.isValid=e,X.current.state.next({isValid:e}))})());if(v&&n?(K.current=K.current||((e,r)=>{let t=0;return(...n)=>{clearTimeout(t),t=setTimeout((()=>e(...n)),r)}})(ce,v),K.current(r,n)):n?N(E.current.errors,r,n):W(E.current.errors,r),(a||(n?!U(c,n):c)||!_(s)||E.current.isValid!==i)&&!e){const e=Object.assign(Object.assign(Object.assign({},s),t?{isValid:!!i}:{}),{errors:E.current.errors,name:r});E.current=Object.assign(Object.assign({},E.current),e),X.current.state.next(a?{name:r}:e)}X.current.state.next({isValidating:!1})}),[]),de=n.useCallback(((e,r,t={},n,u)=>{u&&Ce(e);const c=b(T.current,e);if(c){const u=c._f;if(u){const c=C&&fe(u.ref)&&a(r)?"":r;if(u.value=Y(r,u),z(u.ref)?(u.refs||[]).forEach((e=>e.checked=e.value===c)):G(u.ref)&&!se(c)?u.ref.files=c:Q(u.ref)?[...u.ref.options].forEach((e=>e.selected=c.includes(e.value))):s(u.ref)&&u.refs?u.refs.length>1?u.refs.forEach((e=>e.checked=Array.isArray(c)?!!c.find((r=>r===e.value)):c===e.value)):u.refs[0].checked=!!c:u.ref.value=c,n){const t=I(T);N(t,e,r),X.current.control.next({values:Object.assign(Object.assign({},B.current),t),name:e})}(t.shouldDirty||t.shouldTouch)&&ge(e,c,t.shouldTouch),t.shouldValidate&&Oe(e)}else c._f={ref:{name:e,value:r},value:r}}}),[]),be=n.useCallback(((e,r)=>{const t=I(T);return e&&r&&N(t,e,r),!U(t,B.current)}),[]),ge=n.useCallback(((e,r,t,n=!0)=>{const s={name:e};let u=!1;if(R.current.isDirty){const e=E.current.isDirty;E.current.isDirty=be(),s.isDirty=E.current.isDirty,u=e!==s.isDirty}if(R.current.dirtyFields&&!t){const t=b(E.current.dirtyFields,e);U(b(B.current,e),r)?W(E.current.dirtyFields,e):N(E.current.dirtyFields,e,!0),s.dirtyFields=E.current.dirtyFields,u=u||t!==b(E.current.dirtyFields,e)}const a=b(E.current.touchedFields,e);return t&&!a&&(N(E.current.touchedFields,e,t),s.touchedFields=E.current.touchedFields,u=u||R.current.touchedFields&&a!==t),u&&n&&X.current.state.next(s),u?s:{}}),[]),he=n.useCallback((async(e,r)=>{const t=(await le(b(T.current,e),ue,p))[e];return await ie(r,e,t),d(t)}),[ue]),ve=n.useCallback((async e=>{const{errors:r}=await D.current(I(T),q.current,te(Z.current.mount,T.current,j,p));if(e)for(const t of e){const e=b(r,t);e?N(E.current.errors,t,e):W(E.current.errors,t)}else E.current.errors=r;return r}),[j,p]),pe=async(e,r,t={valid:!0})=>{for(const n in e){const s=e[n];if(s){const e=s._f,n=O(s,"_f");if(e){const n=await le(s,ue,p);if(r){if(n[e.name]){t.valid=!1;break}}else n[e.name]?N(E.current.errors,e.name,n[e.name]):W(E.current.errors,e.name)}n&&await pe(n,r,t)}}return t.valid},Oe=n.useCallback((async(e,r={})=>{const n=A(e);let s;if(X.current.state.next({isValidating:!0}),t){const r=await ve(d(e)?e:n);s=e?n.every((e=>!b(r,e))):_(r)}else e?s=(await Promise.all(n.filter((e=>b(T.current,e,{})._f)).map((async e=>await he(e,!0))))).every(Boolean):(await pe(T.current),s=_(E.current.errors));return X.current.state.next(Object.assign(Object.assign({},se(e)?{name:e}:{}),{errors:E.current.errors,isValidating:!1})),r.shouldFocus&&!s&&M(T.current,(e=>b(E.current.errors,e)),e?n:Z.current.mount),R.current.isValid&&je(),s}),[ve,he]),we=(e,r,t)=>{const n=b(T.current,e);if(n){const s=d(n._f.value),u=s?d(b(P.current,e))?b(B.current,e):b(P.current,e):n._f.value;d(u)?s&&(n._f.value=re(n)):r&&r.defaultChecked?n._f.value=re(n):t?n._f.value=u:de(e,u)}J.current&&R.current.isValid&&je()},je=n.useCallback((async(e={})=>{const r=t?_((await D.current(Object.assign(Object.assign({},I(T)),e),q.current,te(Z.current.mount,T.current,j,p))).errors):await pe(T.current,!0);r!==E.current.isValid&&(E.current.isValid=r,X.current.state.next({isValid:r}))}),[j,p]),Ve=n.useCallback(((e,r,t)=>Object.entries(r).forEach((([r,n])=>{const s=`${e}.${r}`,a=b(T.current,s);!Z.current.array.has(e)&&L(n)&&(!a||a._f)||u(n)?de(s,n,t,!0,!a):Ve(s,n,t)}))),[Oe]),ke=n.useCallback((async({type:e,target:n,target:{value:u,name:a,type:c}})=>{const i=b(T.current,a);if(i){let f=c?re(i):void 0;f=d(f)?u:f;const m=e===y,{isOnBlur:g,isOnChange:h}=oe(r),v=(o=i._f,!(i._f.mount&&o&&(o.required||o.min||o.max||o.maxLength||o.minLength||o.pattern||o.validate)||t||b(E.current.errors,a))||(({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:u,isBlurEvent:a,isSubmitted:c,isOnAll:i})=>!i&&(!c&&t?!(n||a):(c?s:e)?!a:!(c?u:r)||a))(Object.assign({isBlurEvent:m,isTouched:!!b(E.current.touchedFields,a),isSubmitted:E.current.isSubmitted,isReValidateOnBlur:g,isReValidateOnChange:h},ee))),O=!m&&ae(a);d(f)||(i._f.value=f);const w=ge(a,i._f.value,m,!1),V=!_(w)||O;if(v)return!m&&X.current.watch.next({name:a,type:e,values:_e()}),V&&X.current.state.next(O?{name:a}:Object.assign(Object.assign({},w),{name:a}));X.current.state.next({isValidating:!0}),(async(e,r,n,u)=>{let a,c,i=e.name;const o=b(T.current,i);if(t){const{errors:r}=await D.current(I(T),q.current,te([i],T.current,j,p));if(a=b(r,i),s(e)&&!a){const e=l(i),t=b(r,e,{});t.type&&t.message&&(a=t),(t||b(E.current.errors,e))&&(i=e)}c=_(r)}else a=(await le(o,ue,p))[i];!u&&X.current.watch.next({name:i,type:e.type,values:_e()}),ie(!1,i,a,r,c,n)})(n,w,O,m)}var o}),[]),_e=e=>{const r=Object.assign(Object.assign({},B.current),I(T));return d(e)?r:se(e)?b(r,e):e.map((e=>b(r,e)))},xe=n.useCallback(((e,r,t,n)=>{const s=Array.isArray(e),u=n||J.current?Object.assign(Object.assign({},B.current),n||I(T)):d(r)?B.current:s?r:{[e]:r};if(d(e))return t&&(Z.current.watchAll=!0),u;const a=[];for(const r of A(e))t&&Z.current.watch.add(r),a.push(b(u,r));return s?a:a[0]}),[]),Ae=(e,r={})=>{for(const t of e?A(e):Z.current.mount)Z.current.mount.delete(t),Z.current.array.delete(t),b(T.current,t)&&(!r.keepError&&W(E.current.errors,t),!r.keepValue&&W(T.current,t),!r.keepDirty&&W(E.current.dirtyFields,t),!r.keepTouched&&W(E.current.touchedFields,t),!w&&!r.keepDefaultValue&&W(B.current,t));X.current.watch.next({values:_e()}),X.current.state.next(Object.assign(Object.assign({},E.current),r.keepDirty?{isDirty:be()}:{})),!r.keepIsValid&&je()},Ce=n.useCallback(((e,r={})=>{const t=b(T.current,e);return N(T.current,e,{_f:Object.assign(Object.assign(Object.assign({},t&&t._f?t._f:{ref:{name:e}}),{name:e,mount:!0}),r)}),Z.current.mount.add(e),!t&&we(e,void 0,!0),me?{name:e}:{name:e,onChange:ke,onBlur:ke,ref:t=>{if(t)((e,r,t)=>{Ce(e,t);let n=b(T.current,e);const u=(e=>z(e)||s(e))(r);r===n._f.ref||u&&f(n._f.refs||[]).find((e=>e===r))||(n={_f:u?Object.assign(Object.assign({},n._f),{refs:[...f(n._f.refs||[]).filter((e=>fe(e)&&document.contains(e))),r],ref:{type:r.type,name:e}}):Object.assign(Object.assign({},n._f),{ref:r})},N(T.current,e,n),we(e,r))})(e,t,r);else{const t=b(T.current,e,{}),n=w||r.shouldUnregister;t._f&&(t._f.mount=!1,d(t._f.value)&&(t._f.value=t._f.ref.value)),n&&(!o(Z.current.array,e)||!$.current)&&Z.current.unMount.add(e)}}}}),[]),Se=n.useCallback(((e,r)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let s=!0,u=I(T);X.current.state.next({isSubmitting:!0});try{if(t){const{errors:e,values:r}=await D.current(u,q.current,te(Z.current.mount,T.current,j,p));E.current.errors=e,u=r}else await pe(T.current);_(E.current.errors)&&Object.keys(E.current.errors).every((e=>b(u,e)))?(X.current.state.next({errors:{},isSubmitting:!0}),await e(u,n)):(r&&await r(E.current.errors,n),g&&M(T.current,(e=>b(E.current.errors,e)),Z.current.mount))}catch(e){throw s=!1,e}finally{E.current.isSubmitted=!0,X.current.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_(E.current.errors)&&s,submitCount:E.current.submitCount+1,errors:E.current.errors})}}),[g,ue,j,p]),Fe=(e,r="")=>{for(const t in e){const n=e[t],s=r+(r?".":"")+t,u=b(T.current,s);u&&u._f||(i(n)||Array.isArray(n)?Fe(n,s):u||Ce(s,{value:n}))}};return n.useEffect((()=>{const e=X.current.state.subscribe({next(e){x(e,R.current,!0)&&(E.current=Object.assign(Object.assign({},E.current),e),F(E.current))}}),r=X.current.array.subscribe({next(e){if(e.values&&e.name&&R.current.isValid){const r=I(T);N(r,e.name,e.values),je(r)}}});return()=>{e.unsubscribe(),r.unsubscribe()}}),[]),n.useEffect((()=>{const e=[],r=e=>!fe(e)||!document.contains(e);J.current||(J.current=!0,R.current.isValid&&je(),!w&&Fe(B.current));for(const t of Z.current.unMount){const n=b(T.current,t);n&&(n._f.refs?n._f.refs.every(r):r(n._f.ref))&&e.push(t)}e.length&&Ae(e),Z.current.unMount=new Set})),{control:n.useMemo((()=>({register:Ce,inFieldArrayActionRef:$,getIsDirty:be,subjectsRef:X,watchInternal:xe,fieldsRef:T,updateIsValid:je,namesRef:Z,readFormStateRef:R,formStateRef:E,defaultValuesRef:B,fieldArrayDefaultValuesRef:P,setValues:Ve,unregister:Ae,shouldUnmount:w})),[]),formState:k(S,V,R),trigger:Oe,register:Ce,handleSubmit:Se,watch:n.useCallback(((e,r)=>ne(e)?X.current.watch.subscribe({next:t=>e(xe(void 0,r),t)}):xe(e,r,!0)),[]),setValue:n.useCallback(((e,r,t={})=>{const n=b(T.current,e),s=Z.current.array.has(e);s&&(X.current.array.next({values:r,name:e,isReset:!0}),(R.current.isDirty||R.current.dirtyFields)&&t.shouldDirty&&(N(E.current.dirtyFields,e,H(r,b(B.current,e,[]),b(E.current.dirtyFields,e,[]))),X.current.state.next({name:e,dirtyFields:E.current.dirtyFields,isDirty:be(e,r)})),!r.length&&N(T.current,e,[])&&N(P.current,e,[])),(n&&!n._f||s)&&!a(r)?Ve(e,r,s?{}:t):de(e,r,t,!0,!n),ae(e)&&X.current.state.next({}),X.current.watch.next({name:e,values:_e()})}),[Ve]),getValues:n.useCallback(_e,[]),reset:n.useCallback(((e,r={})=>{const t=e||B.current;if(C&&!r.keepValues)for(const e of Z.current.mount){const r=b(T.current,e);if(r&&r._f){const e=Array.isArray(r._f.refs)?r._f.refs[0]:r._f.ref;try{fe(e)&&e.closest("form").reset();break}catch(e){}}}r.keepDefaultValues||(B.current=Object.assign({},t),P.current=Object.assign({},t)),r.keepValues||(T.current={},X.current.control.next({values:r.keepDefaultValues?B.current:Object.assign({},t)}),X.current.watch.next({values:Object.assign({},t)}),X.current.array.next({values:Object.assign({},t),isReset:!0})),Z.current={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1},X.current.state.next({submitCount:r.keepSubmitCount?E.current.submitCount:0,isDirty:r.keepDirty?E.current.isDirty:!!r.keepDefaultValues&&U(e,B.current),isSubmitted:!!r.keepIsSubmitted&&E.current.isSubmitted,dirtyFields:r.keepDirty?E.current.dirtyFields:{},touchedFields:r.keepTouched?E.current.touchedFields:{},errors:r.keepErrors?E.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1}),J.current=!!r.keepIsValid}),[]),clearErrors:n.useCallback((e=>{e?A(e).forEach((e=>W(E.current.errors,e))):E.current.errors={},X.current.state.next({errors:E.current.errors})}),[]),unregister:n.useCallback(Ae,[]),setError:n.useCallback(((e,r,t)=>{const n=((b(T.current,e)||{_f:{}})._f||{}).ref;N(E.current.errors,e,Object.assign(Object.assign({},r),{ref:n})),X.current.state.next({name:e,errors:E.current.errors,isValid:!1}),t&&t.shouldFocus&&n&&n.focus&&n.focus()}),[]),setFocus:n.useCallback((e=>b(T.current,e)._f.ref.focus()),[])}}function he(e){const{control:r,name:t,defaultValue:s}=e||{},u=j(),a=n.useRef(t);a.current=t;const{watchInternal:c,subjectsRef:i}=r||u.control,[l,o]=n.useState(d(s)?c(t):s);return n.useEffect((()=>{c(t);const e=i.current.watch.subscribe({next:({name:e,values:r})=>(!a.current||!e||A(a.current).some((r=>e&&r&&(r.startsWith(e)||e.startsWith(r)))))&&o(c(a.current,s,!1,r))});return()=>e.unsubscribe()}),[]),l}}}]);